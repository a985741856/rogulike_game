{"version":3,"sources":["assets\\common-plugin\\Scripts\\YZ_Turntable.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { utils } from \"./Utils\";\nimport { YZ_Reward, BannerLocation, ViewLocation } from \"./YZ_Constant\";\nimport CompatibleTool from \"./CompatibleTool\";\nimport YZ_LocalStorage from \"./YZ_LocalStorage\";\n\nconst { ccclass, property } = cc._decorator;\n\n// const gearInfo = [200, 100, 300, 400, 800, 500, 1000, 4000];\nconst ST_TurntableCounts = \"turntable_counts\";\nconst ST_TurntableTimes = \"turntable_times\";\n\n\n/**\n * 转盘\n */\n@ccclass\nexport default class YZ_Turntable extends cc.Component {\n\n    @property(cc.Node)\n    spinBtn: cc.Node = null;\n\n    @property(cc.Sprite)\n    wheelSp: cc.Sprite = null;\n\n    @property(cc.Sprite)\n    greaSprite: cc.Sprite = null;\n\n    @property(cc.SpriteFrame)\n    firstSpriteFrame: cc.SpriteFrame = null;\n\n\n    @property(cc.SpriteFrame)\n    secondSpriteFrame: cc.SpriteFrame = null;\n\n    @property(cc.SpriteFrame)\n    lastSpriteFrame: cc.SpriteFrame = null;\n\n    @property({ type: cc.AudioClip })\n    effectAudio: cc.AudioClip = null;\n\n    @property(cc.Node)\n    panel: cc.Node = null;\n\n\n\n\n    @property(cc.Node)\n    videoIcon: cc.Node = null\n\n\n    @property(cc.Node)\n    spriteDouble: cc.Node = null\n\n\n    @property(cc.Node)\n    spritePass: cc.Node = null\n\n\n    @property(cc.Node)\n    tirpNode: cc.Node = null\n\n    @property(cc.Node)\n    checked: cc.Node = null\n\n\n    @property(cc.Node)\n    closeBtn: cc.Node = null\n\n\n    @property(cc.Node)\n    videoBtn: cc.Node = null\n\n\n\n    @property(cc.Node)\n    resultMsg: cc.Node = null\n\n    @property(cc.Label)\n    turnCountLbl: cc.Label = null\n\n    @property(sp.Skeleton)\n    luckBox: sp.Skeleton = null;\n\n\n    @property(cc.ProgressBar)\n    countBar: cc.ProgressBar = null;\n\n    @property(cc.Node)\n    normalBtn: cc.Node = null\n\n\n    @property(cc.Node)\n    normalCloseBtn: cc.Node = null\n\n    @property(cc.Node)\n    topCloseBtn: cc.Node = null\n\n\n    /**\n     *  max: 15,\n        min: 2,\n     */\n    maxSpeed: number = 12;\n\n    /**\n     * 减速前旋转时间\n     *  max: 5,\n        min: 1,\n     */\n    duration: number = 3;\n\n\n    /**\n     * 加速度\n     *  max: 0.2,\n        min: 0.01,\n     */\n    acc: number = 0.1;\n\n    /**\n     * 指定结束时的齿轮\n     *  max: 17,\n        min: 0,\n     */\n    targetID: number = 0;\n\n    /**\n     * 旋转结束是否回弹\n     * \n     */\n    springback: boolean = false;\n\n\n\n\n    wheelState = 0;\n    curSpeed = 0;\n    spinTime = 0;                   //减速前旋转时间\n    gearNum = 8;\n    defaultAngle = 360 / 8 / 2 - 22;        //修正默认角度\n    gearAngle = 360 / this.gearNum;   //每个齿轮的角度\n\n    finalAngle = 0;                 //最终结果指定的角度\n    effectFlag = 0;                 //用于音效播放\n    audioID = 0;\n    decAngle = 0;\n\n\n    /**\n     * 抽奖次数\n     */\n    _turntableCount: number = 0;\n\n    /**\n     * 抽奖次数\n     */\n    _turntablePlayCount: number = 0;\n\n    get turntableCount() {\n        return this._turntableCount;\n    }\n\n    set turntableCount(count: number) {\n        this._turntableCount = count;\n        YZ_LocalStorage.setItem(ST_TurntableTimes, new Date().toDateString());\n        YZ_LocalStorage.setItem(ST_TurntableCounts, this._turntableCount);\n    }\n\n    get turntablePlayCount() {\n        return this._turntablePlayCount;\n    }\n\n    luckBoxCount = 4;\n    _updateProgress: boolean = false;\n    _progress: number = 0;\n\n    defaultProgress: number = 0.00000001;\n    set turntablePlayCount(count: number) {\n        if (this.luckBoxCount - count == 0) {\n            this.luckBox.node.active = true;\n            count = 0;\n            this.countBar.progress = this.defaultProgress;\n            this.luckBox.setAnimation(1, \"dakai\", false);\n            this.scheduleOnce(() => {\n                utils.SendEvent(\"转盘抽奖获取累计4次大奖！\");\n                this.showMsg(this.gearInfo[7]);\n                if (this.rewardCallFunc) {\n                    let result: YZ_Reward = new YZ_Reward();\n                    result.rewardValue = this.gearInfo[7]\n                    this.rewardCallFunc(result);\n                }\n            }, 0.6);\n            this.scheduleOnce(() => {\n                this.luckBox.setAnimation(1, \"kd\", false);\n            }, 2);\n            this.scheduleOnce(() => {\n                this.luckBox.node.runAction(cc.sequence(cc.scaleTo(0.2, 0.8), cc.callFunc(() => {\n                    this.luckBox.node.active = false;\n                    this.luckBox.node.scale = 2;\n                })));\n            }, 4);\n        }\n        this._turntablePlayCount = count;\n        YZ_LocalStorage.setItem(\"turntablePlayCount\", this._turntablePlayCount);\n        this._progress = count / this.luckBoxCount;\n        this.turnCountLbl.string = (this.luckBoxCount - count) + \"\";\n        this.turnCountLbl.node.runAction(cc.sequence(cc.scaleTo(0.3, 1.8), cc.scaleTo(0.3, 1)));\n    }\n\n\n\n    /**\n     * 奖励回调\n     */\n    rewardCallFunc: Function = null;\n\n\n    gearInfo = [200, 100, 300, 400, 800, 500, 1000, 4000];\n\n    /**\n     * 初始化事件回调\n     * @param closeCallFunc \n     * @param rewardCallFunc \n     */\n    init(closeCallFunc: Function, rewardCallFunc: Function, gearInfo: [], gearImagePath?: string) {\n        // this.closeCallFunc = closeCallFunc;\n        this.rewardCallFunc = rewardCallFunc;\n        if (gearInfo.length > 0) {\n            this.gearInfo = gearInfo;\n        }\n\n\n        if (gearImagePath) {\n            utils.showLog(\"配置为服务器的奖励图片：\", gearImagePath);\n            CompatibleTool.LoadRes(gearImagePath, (err, res) => {\n                if (!err && cc.isValid(this) && this.greaSprite) {\n                    this.greaSprite.spriteFrame = new cc.SpriteFrame(res);\n                }\n            });\n        }\n    }\n\n    onLoad() {\n\n        if (utils.otherConfig && utils.otherConfig.group) {\n            this.node.group = utils.otherConfig.group;\n        }\n        this.wheelSp.node.rotation = this.defaultAngle;\n        // this.spinBtn.on(cc.Node.EventType.TOUCH_END, (event) => {\n        //     this.startTurnTable();\n        // });\n        utils.SendEvent(\"转盘抽奖-显示成功！\");\n\n        this.initCount();\n        if (this.turntableCount <= 0) {\n            this.normalBtn.active = false;\n            this.videoBtn.active = true;\n            this.normalCloseBtn.active = true;\n            utils.showScaleAction(this.videoBtn, null, false, false);\n        } else {\n            this.normalCloseBtn.active = false;\n            utils.showScaleAction(this.normalBtn, null, false, false);\n        }\n        utils.showSkipBtn(this.closeBtn, true);\n        // if (this.turntableCount <= 0 && !CC_DEBUG) {\n        //     let result = utils.controView(ViewLocation.turntable);\n        //     if (result.is_open === true) {\n        //         utils.delayShowNode(this.tirpNode);\n        //         this.checked.active = result.isSelect;\n        //         this.spritePass.active = !this.checked.active;\n        //         this.spriteDouble.active = this.checked.active;\n        //         this.videoIcon.active = this.checked.active;\n        //         this.closeBtn.active = false;\n        //         this.videoBtn.active = true;\n        //         this.spinBtn.active = false;\n        //     } else {\n        //         this.checked.active = false;\n        //         this.videoBtn.active = false;\n        //         this.spinBtn.active = true;\n        //         this.spinBtn.children[0].getComponent(cc.Sprite).spriteFrame = this.secondSpriteFrame;\n        //     }\n        // }\n\n\n\n        this.rewardCallFunc = utils.rewardCallFunc;\n\n        if (cc.winSize.height < cc.winSize.width) {\n            utils.adManager.HideBanner(BannerLocation.Game);\n        } else {\n            utils.adManager.ShowBanner(BannerLocation.Game);\n        }\n    }\n\n\n\n    /**\n     * 开始抽奖\n     */\n    startTurnTable() {\n        if (this.wheelState !== 0) {\n            return;\n        }\n        if (this.turntableCount <= 0) {\n            if (this.checked.active || this.spinBtn.active) {\n                utils.adManager.ShowVideo((ret, msg) => {\n                    if (ret) {\n                        this.turntableCount = 1;\n                        this.startTurnTable();\n                        utils.SendEvent(\"转盘抽奖获取奖励-成功！\");\n\n                    } else {\n                        utils.showMsg(\"观看完整视频可以获取一次抽奖机会！\");\n                        utils.SendEvent(\"转盘抽奖视频播放-失败！\");\n                        this.onClose();\n                    }\n                })\n                return;\n            } else {\n                // AldUtils.SendEvent(\"转盘抽奖-未勾选！\");\n                this.onClose();\n                return;\n            }\n\n        }\n\n        this.turntableCount = 0;\n        this.targetID = this.getTargetId();\n        this.decAngle = 2 * 360;  // 减速旋转两圈\n        this.wheelState = 1;\n        this.curSpeed = 0;\n        this.spinTime = 0;\n    }\n\n\n\n    onCheck() {\n        this.checked.active = !this.checked.active;\n        this.spritePass.active = !this.checked.active;\n        this.spriteDouble.active = this.checked.active;\n        this.videoIcon.active = this.checked.active;\n\n        // AldUtils.SendEvent(`转盘抽奖-用户${this.checked.active ? \"点击勾选\" : \"取消勾选\"}`);\n    }\n\n\n\n    onClose() {\n        this.panel.runAction(cc.sequence(cc.scaleTo(0.3, 0).easing(cc.easeBackIn()), cc.callFunc(() => {\n            this.node.destroy();\n        })));\n    }\n\n    onEnable() {\n        this.panel.scale = 0;\n        let ratio: number = 1;\n        if (cc.winSize.height < cc.winSize.width) {\n            // 横屏游戏\n            ratio = 0.6;\n        } else {\n            ratio = cc.winSize.width / 1080;\n        }\n\n        this.panel.runAction(cc.scaleTo(0.3, ratio).easing(cc.easeBackOut()));\n    }\n\n    onDestroy() {\n        if (utils.turnTablePanelCloseFunc) {\n            utils.turnTablePanelCloseFunc();\n            utils.turnTablePanelCloseFunc = null;\n        } else {\n            utils.rewardCloseFunc && utils.rewardCloseFunc();\n            utils.rewardCloseFunc = null;\n        }\n        utils.adManager.HideBanner(BannerLocation.Game)\n\n    }\n\n\n    checkBtnSpriteFrame() {\n\n        if (this.turntableCount <= 0) {\n            this.normalBtn.active = false;\n            this.videoBtn.active = true;\n            this.normalCloseBtn.active = true;\n            utils.showScaleAction(this.videoBtn, null, false, false);\n        } else {\n            this.normalCloseBtn.active = false;\n        }\n        // if (this.turntableCount <= 0) {\n        // let result = utils.controView(ViewLocation.turntable);\n        // if (result.is_open === true) {\n        //     utils.delayShowNode(this.tirpNode);\n        //     this.checked.active = result.isSelect;\n        //     this.spritePass.active = !this.checked.active;\n        //     this.spriteDouble.active = this.checked.active;\n        //     this.videoIcon.active = this.checked.active;\n        //     this.closeBtn.active = false;\n        //     this.videoBtn.active = true;\n        //     this.spinBtn.active = false;\n        // } else {\n        //     this.checked.active = false;\n        //     this.videoBtn.active = false;\n        //     this.spinBtn.children[0].getComponent(cc.Sprite).spriteFrame = this.lastSpriteFrame;\n        // }\n        // }\n    }\n\n    initCount() {\n        let turntableCount = YZ_LocalStorage.getItem(ST_TurntableCounts);\n\n        let day: string = YZ_LocalStorage.getItem(ST_TurntableTimes);\n        let curDate = new Date();\n        if (day != curDate.toDateString()) {\n            this.turntableCount = 1;\n        } else {\n            this._turntableCount = turntableCount;\n        }\n        this.countBar.progress = this.defaultProgress;\n        this.turntablePlayCount = YZ_LocalStorage.getItem(\"turntablePlayCount\") ? YZ_LocalStorage.getItem(\"turntablePlayCount\") : 0;\n        this.countBar.progress = this.turntablePlayCount / this.luckBoxCount;\n        utils.showLog(\"当前剩余抽奖次数：\", this.turntableCount);\n    }\n\n    test() {\n        if (this.wheelState !== 0) {\n            return;\n        }\n        this.targetID = this.getTargetId();\n        cc.log(\"结果：\", this.targetID);\n        this.decAngle = 2 * 360;  // 减速旋转两圈\n        this.wheelState = 1;\n        this.curSpeed = 0;\n        this.spinTime = 0;\n    }\n\n\n    getTargetId() {\n        var ranNum = Math.random();//生成一个0-1的随机数\n        var n = Math.random() / 4;//0-0.25随机数\n        let result = 0;\n        if (ranNum < 0.01) {\n            result = 1; // 8\n        }\n        else if (ranNum < 0.04) {\n            result = 0.9; // 7\n        } else if (ranNum < 0.1) {\n            result = 0.5; // 4\n        } else if (ranNum < 0.2) {\n            result = 0.7; // 5\n        } else if (ranNum < 1) {\n            result = Math.floor(Math.random() * 4) * 0.1; //0-4\n        }\n        return Math.floor(8 * result);\n    }\n\n\n    showMsg(gold) {\n        let msg = cc.instantiate(this.resultMsg);\n        cc.find(\"kuang/goldLbl\", msg).getComponent(cc.Label).string = `${gold}`\n        msg.active = true;\n        msg.scale = 0.3;\n        this.node.addChild(msg);\n\n        msg.runAction(cc.scaleTo(0.3, this.panel.scale).easing(cc.easeBackOut()));\n        this.scheduleOnce(() => {\n            msg.destroy();\n            msg.removeFromParent();\n        }, 1.2);\n    }\n\n    showRes() {\n        this.showMsg(this.gearInfo[this.targetID]);\n\n        this.scheduleOnce(() => {\n            this.turntablePlayCount++;\n        }, 1);\n\n\n\n        if (this.rewardCallFunc) {\n            let result: YZ_Reward = new YZ_Reward();\n            result.rewardValue = this.gearInfo[this.targetID]\n            this.rewardCallFunc(result);\n        }\n        this.checkBtnSpriteFrame();\n    }\n\n    update(dt) {\n        if (this.countBar.progress < this._progress) {\n            this.countBar.progress += dt;\n        }\n        if (this.wheelState === 0) {\n            return;\n        }\n\n        // 播放音效有可能卡\n        this.effectFlag += this.curSpeed;\n        if (this.effectFlag >= this.gearAngle) {\n\n            this.audioID = cc.audioEngine.playEffect(this.effectAudio, false);\n            this.effectFlag = 0;\n        }\n\n        if (this.wheelState == 1) {\n            // cc.log('....加速,speed:' + this.curSpeed);\n            this.spinTime += dt;\n            this.wheelSp.node.rotation = this.wheelSp.node.rotation + this.curSpeed;\n            if (this.curSpeed <= this.maxSpeed) {\n                this.curSpeed += this.acc;\n            }\n            else {\n                if (this.spinTime < this.duration) {\n                    return;\n                }\n                // cc.log('....开始减速');\n                //设置目标角度\n                this.finalAngle = 360 - this.targetID * this.gearAngle + this.defaultAngle;\n                this.maxSpeed = this.curSpeed;\n                if (this.springback) {\n                    this.finalAngle += this.gearAngle;\n                }\n                this.wheelSp.node.rotation = this.finalAngle;\n                this.wheelState = 2;\n            }\n        }\n        else if (this.wheelState == 2) {\n            // cc.log('......减速');\n            var curRo = this.wheelSp.node.rotation; //应该等于finalAngle\n            var hadRo = curRo - this.finalAngle;\n            this.curSpeed = this.maxSpeed * ((this.decAngle - hadRo) / this.decAngle) + 0.2;\n            this.wheelSp.node.rotation = curRo + this.curSpeed;\n\n            if ((this.decAngle - hadRo) <= 0) {\n                // cc.log('....停止');\n                this.wheelState = 0;\n                this.wheelSp.node.rotation = this.finalAngle;\n                if (this.springback) {\n                    //倒转一个齿轮\n                    // var act = new cc.rotateBy(0.6, -this.gearAngle);\n                    var act = cc.rotateBy(0.6, -this.gearAngle);\n                    var seq = cc.sequence(cc.delayTime(0.2), act, cc.callFunc(this.showRes, this));\n                    this.wheelSp.node.runAction(seq);\n                }\n                else {\n                    this.showRes();\n                }\n            }\n        }\n    }\n}\n"]}