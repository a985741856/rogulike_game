{"version":3,"sources":["assets\\scripts\\Game\\gameMgr.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport { cocosz } from \"../Framework/CocosZ\";\r\nimport { utils } from \"../../common-plugin/Scripts/Utils\";\r\nimport Constant, { ZindexLayer } from \"../Framework/Constant\";\r\nimport { upgradeMgr } from \"./UpgradeMgr\";\r\nimport setMap from \"./setMap\";\r\nimport { VibrateType } from \"../../common-plugin/Scripts/YZ_Constant\";\r\nimport Player from \"./player\";\r\nimport ZombieBase from \"./ZombieBase\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n//tag:{0:攻击范围，1:玩家身体，2:玩家腿部 6,减速，7,毒区 11:墙，12:道具，13:武器，14:草，15:房子,16:物资箱, 17:海水, 18:升级仓, 19:旗台}\r\n\r\nexport let gameMgr: GameMgr = null;\r\n\r\n@ccclass\r\nexport default class GameMgr extends cc.Component {\r\n    nodePoolObj: { [name: string]: cc.NodePool } = {}\r\n\r\n    nodeGet(name: string, prefab: cc.Prefab): cc.Node {\r\n        let node: cc.Node = null;\r\n        // 创建新的节点池\r\n        if (!this.nodePoolObj[name]) {\r\n            this.nodePoolObj[name] = new cc.NodePool();\r\n        }\r\n        // 从节点池中获取节点\r\n        if (this.nodePoolObj[name].size()) {\r\n            node = this.nodePoolObj[name].get();\r\n        } else if (prefab && prefab.isValid) {\r\n            node = cc.instantiate(prefab);\r\n        }\r\n        // 防止预制体和节点名字不同\r\n        if (node) { node.name = name; }\r\n        return node;\r\n    }\r\n    nodePut(name: string, node: cc.Node): void {\r\n        if (this.nodePoolObj[name] && node && node.isValid) {\r\n            this.nodePoolObj[name].put(node);\r\n        } else {\r\n            cc.log(\"回收出错: \", name)\r\n        }\r\n    }\r\n\r\n    canSHowGameBanner: boolean = true;\r\n\r\n    tipLayer: cc.Node = null;\r\n    setMapTs: setMap = null;\r\n    playerTs: Player = null;\r\n\r\n    uiGamePage: cc.Node = null;\r\n    moveArea: cc.Node = null;\r\n    yaogan: cc.Node = null;\r\n    BtnBullet: cc.Node = null;\r\n\r\n    posObj: object = {}\r\n\r\n    // 躲猫猫模式\r\n    dmmArr: cc.SpriteFrame[] = []\r\n\r\n    @property(cc.Node)\r\n    red: cc.Node = null;\r\n\r\n    @property(cc.Prefab)\r\n    hpTip: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    effect_fire: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    effect_hit: cc.Prefab = null;\r\n\r\n    @property(cc.Prefab)\r\n    itemList: cc.Prefab[] = [];\r\n    @property(cc.Prefab)\r\n    itemEffect: cc.Prefab[] = [];\r\n\r\n    @property(cc.Prefab)\r\n    spark: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    blood: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    testPoint: cc.Prefab = null;\r\n\r\n    @property(cc.Prefab)\r\n    player: cc.Prefab = null;\r\n\r\n    @property(cc.SpriteFrame)\r\n    jiaoyin: cc.SpriteFrame = null;\r\n\r\n    @property(cc.Node)\r\n    fj: cc.Node = null;\r\n    @property(cc.Node)\r\n    fjTip: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    mainCamereRootNode: cc.Node = null;\r\n    @property(cc.Camera)\r\n    mainCamera: cc.Camera = null;\r\n    // LIFE-CYCLE CALLBACKS:\r\n    atk: cc.Node = null;\r\n    safeCenter: cc.Vec2 = cc.v2(0, 0);\r\n    redCircle: cc.Node = null;\r\n    redCircle2: cc.Node = null;\r\n    // mask: cc.Node = null;\r\n    // maskMtl: cc.Material = null;\r\n\r\n    mapSize: cc.Size = cc.winSize;\r\n    miniMapSize: cc.Size = null;;\r\n\r\n    btnSkill: cc.Node = null;\r\n    btnSkillAd: cc.Node = null;\r\n    rangedWeaponMess: cc.Node = null;\r\n    rangedWeaponAdMess: cc.Node = null;\r\n    ammo: cc.Label = null;\r\n    ammoAd: cc.Label = null;\r\n\r\n    kt: cc.Node = null;\r\n    model6_touxiang: cc.Node = null;\r\n    model6_btnShuxing: cc.Node = null;\r\n    model6_shuxing: cc.Node = null;\r\n    model6_jingyanBar: cc.ProgressBar = null;\r\n    model6_levelLabel: cc.Label = null;\r\n    model6_skillScrollView: cc.ScrollView = null;\r\n    model6_skillScrollView_content: cc.Node = null;\r\n    model6_skillScrollView_item: cc.Node = null;\r\n    model6_timeLabel: cc.Label = null;\r\n    model6_ts: cc.Node = null;\r\n    model6_bossBar: cc.ProgressBar = null;\r\n    timeStr: string = \"\";\r\n\r\n    totalNum: number = 0;\r\n    deathNum: number = 0;\r\n    playerRank: number = 1;\r\n    //通关条件： 1击败所有敌人 2击败boss 3抵达撤离点\r\n    passCondition: number = 1;\r\n    bossName: string = \"\";\r\n\r\n    map: cc.Node = null;\r\n    startPoint: cc.Node = null;\r\n    atkRange: cc.Node = null;\r\n\r\n    curTime: number = 0;\r\n    timeLabel: cc.Label = null;\r\n    snow: cc.Node = null;\r\n    qlzc: cc.Node = null;\r\n\r\n    bossShow : boolean = false;\r\n\r\n    onLoad() {\r\n        gameMgr = this;\r\n        gameMgr.mainCamera.zoomRatio = 0.65;\r\n        cocosz.pauseCount = 0;\r\n    }\r\n\r\n\r\n    start() {\r\n        this.mainCamereRootNode.setContentSize(cc.winSize);\r\n        this.mainCamereRootNode.width += 500;\r\n        this.mainCamereRootNode.height += 500;\r\n\r\n        // 飞机任务提示\r\n        if (this.fjTip) {\r\n            if ([5, 7].includes(cocosz.gameMode)) {\r\n                this.fjTip.active = false;\r\n            } else {\r\n                this.fjTip.active = true;\r\n                this.fjTip.zIndex = ZindexLayer.zindex_max;\r\n            }\r\n        }\r\n    }\r\n\r\n    protected lateUpdate(): void {\r\n        if (cocosz.isPause || gameMgr.isWin || gameMgr.isFail) return;\r\n        this.cameraFollow();\r\n    }\r\n\r\n    initPos() {\r\n        if (cocosz.gameMode == 7) {\r\n            // 坐标\r\n            // rolePos0\r\n            let bluePos = cc.find('posLayer/bluePos', gameMgr.map);\r\n            if (bluePos) this.posObj[\"bluePos\"] = bluePos.getPosition();\r\n            // rolePos1\r\n            let redPos = cc.find('posLayer/redPos', gameMgr.map);\r\n            if (redPos) this.posObj[\"redPos\"] = redPos.getPosition();\r\n            // path0\r\n            this.posObj[\"pathPos0\"] = [];\r\n            let pathPos0 = cc.find('posLayer/pathPos0', gameMgr.map);\r\n            pathPos0 && pathPos0.children.forEach(node => { this.posObj[\"pathPos0\"].push(node.getPosition()); });\r\n            // path1\r\n            this.posObj[\"pathPos1\"] = [];\r\n            let pathPos1 = cc.find('posLayer/pathPos1', gameMgr.map);\r\n            pathPos1 && pathPos1.children.forEach(node => { this.posObj[\"pathPos1\"].push(node.getPosition()); });\r\n            // path2\r\n            this.posObj[\"pathPos2\"] = [];\r\n            let pathPos2 = cc.find('posLayer/pathPos2', gameMgr.map);\r\n            pathPos2 && pathPos2.children.forEach(node => { this.posObj[\"pathPos2\"].push(node.getPosition()); });\r\n        }\r\n    }\r\n\r\n    startGame() {\r\n        // 添加提示层\r\n        this.tipLayer = new cc.Node();\r\n        this.tipLayer.name = \"tipLayer\";\r\n        this.tipLayer.zIndex = ZindexLayer.zindex_roleLabel;\r\n        this.tipLayer.setPosition(cc.Vec2.ZERO);\r\n        this.tipLayer.setParent(gameMgr.map);\r\n        // 小地图\r\n        if (cocosz.gameMode == 6 || cocosz.gameMode == 8) {\r\n            this.schedule(() => { this.update_model6_shuxing(); }, 1);\r\n        }\r\n        this.initPlayer();\r\n    }\r\n\r\n    GameTime: number = 0;\r\n    isGameStart: boolean = false;\r\n    posList = [];\r\n    initPlayer() {\r\n        // 僵尸模式\r\n        if (cocosz.gameMode == 6 || cocosz.gameMode == 8) {\r\n            let player1 = cc.instantiate(this.player);\r\n            player1.scale = 0.6;\r\n            player1.setPosition(cc.v2(2000, 0).rotateSelf(2 * Math.PI * Math.random()));\r\n            player1.setParent(this.map);\r\n            this.totalNum++;\r\n            // 飞机运输玩家\r\n            this.fjEffect();\r\n        }\r\n    }\r\n    fjEffect() {\r\n        if (this.fj && this.playerTs) {\r\n            this.uiGamePage.active = false;\r\n            // 玩家\r\n            this.scheduleOnce(() => {\r\n                this.playerTs.node.opacity = 0;\r\n                this.playerTs.playerMess.opacity = 1;\r\n                this.playerTs.ghAniNode.opacity = 1;\r\n            })\r\n            // 相机\r\n            this.followNode = this.fj;\r\n            // 飞机\r\n            this.fj.active = true;\r\n            this.fj.setParent(gameMgr.map);\r\n            this.scheduleOnce(() => { this.fj.zIndex = ZindexLayer.zindex_max; })\r\n            let targetPos = cc.v2(this.playerTs.node.x, this.playerTs.node.y + 500);\r\n            let dis = targetPos.sub(this.fj.getPosition());\r\n            this.fj.scaleX = dis.x < 0 ? -1 : 1;\r\n            // 动画\r\n            let fjAni = this.fj.getComponent(sp.Skeleton);\r\n            fjAni.addAnimation(0, \"animation0\", true);\r\n            // 音效\r\n            cocosz.audioMgr.playEffect(\"fj\", true, 1);\r\n            // 移动\r\n            let t = dis.mag() / 800;\r\n            cc.tween(this.fj)\r\n                .to(t, { x: targetPos.x, y: targetPos.y })\r\n                .call(() => {\r\n                    fjAni.setAnimation(0, \"animation1\", false);\r\n                    fjAni.addAnimation(0, \"animation2\", false);\r\n                    fjAni.addAnimation(0, \"animation4\", false);\r\n                    fjAni.addAnimation(0, \"animation5\", true);\r\n                })\r\n                .delay(2)\r\n                .call(() => {\r\n                    // 隐藏提示\r\n                    if (this.fjTip) { this.fjTip.active = false; }\r\n                    this.fj.zIndex = ZindexLayer.zindex_max - 1;\r\n                    this.playerTs.node.zIndex = ZindexLayer.zindex_max;\r\n                    // 玩家下降\r\n                    this.playerTs.node.opacity = 255;\r\n                    this.playerTs.rig.active = false;\r\n                    this.followNode = this.playerTs.node;\r\n                    this.playerTs.node.y += 600;\r\n                    cc.tween(this.playerTs.node)\r\n                        .delay(0.5)\r\n                        .to(1, { y: this.playerTs.node.y - 600 })\r\n                        .call(() => {\r\n                            this.uiGamePage.active = true;\r\n                            this.playerTs.node.zIndex = ZindexLayer.zindex_player;\r\n                            this.playerTs.rig.active = true;\r\n                            this.playerTs.playerMess.opacity = 255;\r\n                            this.playerTs.ghAniNode.opacity = 255;\r\n                            this.playerTs.updateAni(\"daiji_body\", true);\r\n                            // 初始化游戏\r\n                            this.initGame();\r\n                            if (cocosz.gameMode == 6 || cocosz.gameMode == 8) {\r\n                                // 生成僵尸计时\r\n                                this.schedule(this.createZombieCount, 1);\r\n                            } else {\r\n                                cc.log(\"模式有问题\")\r\n                            }\r\n                        })\r\n                        .start();\r\n                })\r\n                .delay(2)\r\n                .call(() => {\r\n                    this.fj.zIndex = ZindexLayer.zindex_max;\r\n                    fjAni.setAnimation(0, \"animation6\", false);\r\n                    fjAni.addAnimation(0, \"animation7\", false);\r\n                    fjAni.addAnimation(0, \"animation9\", false);\r\n                    fjAni.addAnimation(0, \"animation0\", true);\r\n                })\r\n                .delay(2)\r\n                .to(2, { position: cc.v3(dis.normalize().mulSelf(2000).add(dis)) })\r\n                .call(() => {\r\n                    cocosz.audioMgr.stopEffect(\"fj\");\r\n                    this.fj.destroy();\r\n                })\r\n                .start();\r\n        }\r\n    }\r\n    showGameTime() {\r\n        if (this.model6_timeLabel && this.model6_timeLabel.isValid) {\r\n            let s = this.GameTime;// 秒\r\n            let m = 0;// 分\r\n            let h = 0;// 小时\r\n            if (s > 60) {\r\n                m = Math.floor(s / 60);\r\n                s = Math.floor(s % 60);\r\n                if (m > 60) {\r\n                    h = Math.floor(m / 60);\r\n                    m = Math.floor(m % 60);\r\n                }\r\n            }\r\n            let r = \"\";\r\n            r += (h == 0 ? \"\" : h + \":\");\r\n            r += (m >= 10 ? \"\" + m : \"0\" + m);\r\n            r += (s >= 10 ? \":\" + s : \":0\" + s);\r\n            this.timeStr = r;\r\n            this.model6_timeLabel.string = r;\r\n        }\r\n    }\r\n    // 刷新血滴\r\n    update_model6_xuedi() {\r\n        if (gameMgr.playerTs && gameMgr.playerTs.hpNumNode && gameMgr.playerTs.hpNumNode.isValid) {\r\n            gameMgr.playerTs.hpNumNode.active = true;\r\n            gameMgr.playerTs.hpNumNode.width = Math.min(250, gameMgr.playerTs.totleHp * 50);\r\n            gameMgr.playerTs.hpNumNode.children.forEach((n, i) => {\r\n                if (i < gameMgr.playerTs.totleHp) {\r\n                    n.active = true;\r\n                    if (i < gameMgr.playerTs.HP) {\r\n                        n.children[1].opacity = 255;\r\n                    } else {\r\n                        n.children[1].opacity = 0;\r\n                    }\r\n                } else {\r\n                    n.active = false;\r\n                }\r\n            })\r\n        }\r\n    }\r\n    // 刷新属性\r\n    update_model6_shuxing() {\r\n        if (upgradeMgr && gameMgr && gameMgr.model6_shuxing && gameMgr.model6_shuxing.isValid && gameMgr.model6_shuxing.active) {\r\n            // 等级\r\n            this.model6_shuxing.children[0].getComponent(cc.Label).string = upgradeMgr.curLevel.toString();\r\n            // 伤害\r\n            this.model6_shuxing.children[1].getComponent(cc.Label).string = (gameMgr.playerTs.atkNum * gameMgr.playerTs.atkRate).toFixed(0);\r\n            // 射速\r\n            this.model6_shuxing.children[2].getComponent(cc.Label).string = (gameMgr.playerTs.atkSpeed * gameMgr.playerTs.atkSpeedRate).toFixed(1);\r\n            // 换弹\r\n            this.model6_shuxing.children[3].getComponent(cc.Label).string = (gameMgr.playerTs.reloadSpeed * gameMgr.playerTs.reloadRate).toFixed(1);\r\n            // 弹夹容量\r\n            this.model6_shuxing.children[4].getComponent(cc.Label).string = gameMgr.playerTs.curWeapon.bulletNum.toString();\r\n            // 移动速度\r\n            this.model6_shuxing.children[5].getComponent(cc.Label).string = (gameMgr.playerTs.MoveSpeed * gameMgr.playerTs.speedRate).toFixed(0);\r\n            // 拾取范围\r\n            this.model6_shuxing.children[6].getComponent(cc.Label).string = upgradeMgr.jingyanRange.toString();\r\n        }\r\n    }\r\n\r\n    showBossHp(rate: number) {\r\n        if (rate > 0) {\r\n            if (this.model6_bossBar && cc.isValid(this.model6_bossBar)) {\r\n                this.model6_bossBar.node.active = true;\r\n                this.model6_bossBar.progress = rate;\r\n            }\r\n            if (this.model6_jingyanBar && cc.isValid(this.model6_jingyanBar)) {\r\n                this.model6_jingyanBar.node.active = false;\r\n            }\r\n            if (this.model6_levelLabel && cc.isValid(this.model6_levelLabel)) {\r\n                this.model6_levelLabel.node.active = false;\r\n            }\r\n        } else {\r\n            if (this.model6_bossBar && cc.isValid(this.model6_bossBar)) {\r\n                this.model6_bossBar.node.active = false;\r\n                this.model6_bossBar.progress = rate;\r\n            }\r\n            if (this.model6_jingyanBar && cc.isValid(this.model6_jingyanBar)) {\r\n                this.model6_jingyanBar.node.active = true;\r\n            }\r\n            if (this.model6_levelLabel && cc.isValid(this.model6_levelLabel)) {\r\n                this.model6_levelLabel.node.active = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    boss_border: cc.Node = null;\r\n    zombieTime: number = 0;\r\n    zombieCurNum: number = 0;\r\n    zombieMaxNum: number = 0;\r\n    zombieLength: number = 2;\r\n    zombieArr = [\"zombie_basic\", \"zombie_run\", \"zombie_drum\", \"zombie_jump\", \"zombie_bomb\", \"zombie_tank\", \"zombie_poison\"]\r\n    bossArr = [\"boss1\", \"boss2\", \"boss3\", \"boss4\", \"boss5\", \"boss6\", \"boss7\", \"boss8\", \"boss9\", \"boss10\", \"boss11\", \"boss12\", \"boss13\"]   //, \"boss4\", \"boss5\", \"boss6\", \"boss7\", \"boss8\", \"boss9\", \"boss10\", \"boss11\", \"boss12\", \"boss13\"\r\n    boss2Arr = [];\r\n    reinBossArr = [\"boss1\", \"boss2\", \"boss3\", \"boss4\", \"boss5\", \"boss6\", \"boss7\", \"boss8\", \"boss9\", \"boss10\", \"boss11\", \"boss12\", \"boss13\"];\r\n    /** 创建僵尸计时 */\r\n    createZombieCount() {\r\n        if (cocosz.isPause || gameMgr.isWin || gameMgr.isFail) return;\r\n        // 游戏计时\r\n        this.GameTime++;\r\n        this.showGameTime();\r\n        // 生成逻辑\r\n        if (this.boss_border) return;\r\n        // 僵尸生成时间计时\r\n        this.zombieTime++;\r\n        let count = 1;\r\n        let createBossTime = 300;\r\n        let zombie_groupTime = 30;\r\n        let zombie_groipMaxNum = 100;\r\n        let zombie_groupMinNum = 50;\r\n        if(cocosz.gameMode == 8){\r\n            createBossTime = 480;\r\n            zombie_groupTime = 60;\r\n            zombie_groipMaxNum = Math.ceil(Constant.currentLevel / 3) * 20 + 20;\r\n            zombie_groupMinNum = Math.ceil(Constant.currentLevel / 3) * 8 + 10;\r\n\r\n            this.zombieLength = Math.floor(Constant.currentLevel / 2) + 2;\r\n            if (this.zombieLength >= this.zombieArr.length){\r\n                this.zombieLength = this.zombieArr.length;\r\n            }\r\n        }\r\n        \r\n        console.log(zombie_groupTime);\r\n        /** 创建Boss */\r\n        if (0 === this.zombieTime % createBossTime) {   //300\r\n            // this.unscheduleAllCallbacks();\r\n            this.createBossZombie();\r\n            // 更新普通僵尸\r\n            if(cocosz.gameMode == 6){\r\n                if (this.zombieLength < this.zombieArr.length) this.zombieLength++;\r\n            }\r\n            \r\n        }\r\n        // 大波僵尸\r\n        else if (0 === this.zombieTime % zombie_groupTime) {   //30\r\n            // console.log('--------创建大量怪物-----------');\r\n            // 提示\r\n            if (this.model6_ts) {\r\n                this.model6_ts.active = true;\r\n                this.scheduleOnce(() => { this.model6_ts.active = false; }, 3)\r\n                let spAni = this.model6_ts.getComponent(sp.Skeleton);\r\n                spAni.setSkin(\"sclx_\" + cocosz.curLanguage);\r\n                spAni.setAnimation(0, \"animation\", true);\r\n            }\r\n            // 僵尸数量\r\n            this.zombieMaxNum = zombie_groupMinNum + Math.floor(this.zombieTime / 30) * 20;    //20,40,10\r\n            if (this.zombieMaxNum > zombie_groipMaxNum) this.zombieMaxNum = zombie_groipMaxNum;     //40\r\n            // 小于最大数量继续生成\r\n            if (this.zombieCurNum < this.zombieMaxNum) {\r\n                count = this.zombieMaxNum - this.zombieCurNum;\r\n                // 分成k份生成，每份10\r\n                let k = Math.ceil(count / 25);\r\n                // 分帧创建\r\n                let angle: number = 0;\r\n                let inter: number = 36;\r\n                for (let i = 0; i < k; i++) {\r\n                    this.schedule(() => {\r\n                        angle += inter;\r\n                        this.createCommonZombie(cc.winSize.height / 2.5 / this.mainCamera.zoomRatio, angle);\r\n                    }, 0.1, Math.ceil(count / k), i);\r\n                }\r\n            }\r\n            // 生成击败boss\r\n            for (let i = this.boss2Arr.length - 1; i >= 0 && i >= this.boss2Arr.length - 2; i--) {\r\n                let resName = this.boss2Arr[i];\r\n                cc.log(\"创建尸潮boss: \", resName)\r\n                if (resName) { this.createZombie(resName, gameMgr.playerTs.node.getPosition(), cc.winSize.width / 2 / this.mainCamera.zoomRatio,null, false,true); }\r\n            }\r\n        }\r\n        // 僵尸继续\r\n        else if (0 === this.zombieTime % 51 || 0 === this.zombieTime % 52 || 0 === this.zombieTime % 53 || 0 === this.zombieTime % 54 || 0 === this.zombieTime % 55) {\r\n\r\n        }\r\n        // 随机少量僵尸\r\n        else {\r\n            // console.log('--------创建少量怪物-----------');\r\n            // 僵尸数量\r\n            this.zombieMaxNum = 5 + Math.floor(this.zombieTime / 20) * 5;  //5,20,5\r\n            if (this.zombieMaxNum > 40) this.zombieMaxNum = 40;       //20\r\n            // 小于最大数量继续生成\r\n            if (this.zombieCurNum < this.zombieMaxNum) {\r\n                // 随机数量\r\n                count = Math.ceil(Math.random() * 8);\r\n                this.schedule(() => { this.createCommonZombie(cc.winSize.height / 2.5 / this.mainCamera.zoomRatio); }, 0.1, count);\r\n            }\r\n        }\r\n    }\r\n    /** 创建普通僵尸 */\r\n    createCommonZombie(dis: number, angle?: number) {\r\n        if(this.bossShow){\r\n            return;\r\n        }\r\n        let index = Math.floor(Math.random() * this.zombieLength);\r\n        let resName = this.zombieArr[index];\r\n        if (resName) { this.createZombie(resName, gameMgr.playerTs.node.getPosition(), dis, angle); }\r\n    }\r\n\r\n    reinBoss : number = 0;\r\n    Rein : number = 1;\r\n    /** 创建Boss僵尸 */\r\n    createBossZombie() {\r\n        if(cocosz.gameMode == 6){\r\n            if (this.bossArr.length > 0) {\r\n                this.createBossBorder();\r\n                // 提示\r\n                if (this.model6_ts) {\r\n                    this.model6_ts.active = true;\r\n                    this.scheduleOnce(() => { this.model6_ts.active = false; }, 3)\r\n                    let spAni = this.model6_ts.getComponent(sp.Skeleton);\r\n                    spAni.setSkin(\"bosslx_\" + cocosz.curLanguage);\r\n                    spAni.setAnimation(0, \"animation\", true);\r\n                }\r\n                // boss\r\n                let resName = this.bossArr.shift();\r\n                let centerPos = gameMgr.playerTs.node.getPosition();\r\n                if (this.boss_border) {\r\n                    centerPos = this.boss_border.getPosition();\r\n                }\r\n                if (resName) {\r\n                    this.boss2Arr.push(resName);\r\n                    this.createZombie(resName, centerPos, 300, null, true);\r\n                }\r\n            }else{\r\n                this.reinBoss ++;\r\n                this.createBossBorder();\r\n                // 提示\r\n                if (this.model6_ts) {\r\n                    this.model6_ts.active = true;\r\n                    this.scheduleOnce(() => { this.model6_ts.active = false; }, 3)\r\n                    let spAni = this.model6_ts.getComponent(sp.Skeleton);\r\n                    spAni.setSkin(\"bosslx_\" + cocosz.curLanguage);\r\n                    spAni.setAnimation(0, \"animation\", true);\r\n                }\r\n                // boss\r\n                let resName = this.reinBossArr.shift();\r\n                console.log('--------newboss删除-------'+this.reinBossArr.length);\r\n                if(this.reinBossArr.length == 0){\r\n                    this.reinBossArr = [\"boss1\", \"boss2\", \"boss3\", \"boss4\", \"boss5\", \"boss6\", \"boss7\", \"boss8\", \"boss9\", \"boss10\", \"boss11\", \"boss12\", \"boss13\"];\r\n                    this.Rein ++;\r\n                    this.boss2Arr = [];\r\n                }\r\n                let centerPos = gameMgr.playerTs.node.getPosition();\r\n                if (this.boss_border) {\r\n                    centerPos = this.boss_border.getPosition();\r\n                }\r\n                if (resName) {\r\n                    this.boss2Arr.push(resName);\r\n                    this.createZombie(resName, centerPos, 300, null, true);\r\n                }\r\n            }\r\n        }else if(cocosz.gameMode == 8){   //关卡模式boss\r\n            this.createBossBorder();\r\n            // 提示\r\n            if (this.model6_ts) {\r\n                this.model6_ts.active = true;\r\n                this.scheduleOnce(() => { this.model6_ts.active = false; }, 3)\r\n                let spAni = this.model6_ts.getComponent(sp.Skeleton);\r\n                spAni.setSkin(\"bosslx_\" + cocosz.curLanguage);\r\n                spAni.setAnimation(0, \"animation\", true);\r\n            }\r\n            // boss\r\n            let resName = this.bossArr[Constant.currentLevel - 1];\r\n            let centerPos = gameMgr.playerTs.node.getPosition();\r\n            if (this.boss_border) {\r\n                centerPos = this.boss_border.getPosition();\r\n            }\r\n            if (resName) {\r\n                this.boss2Arr.push(resName);\r\n                this.createZombie(resName, centerPos, 300, null, true);\r\n            }\r\n        }\r\n       \r\n    }\r\n    /** 创建boss边界 */\r\n    createBossBorder() {\r\n        // 边界\r\n        let pre = cocosz.resMgr.getRes(\"boss_border\", cc.Prefab);\r\n        if (pre) {\r\n            this.boss_border = cc.instantiate(pre);\r\n            this.boss_border.setPosition(gameMgr.playerTs.node.getPosition());\r\n            if (this.boss_border.x - this.boss_border.width / 2 < -gameMgr.mapSize.width / 2) {\r\n                this.boss_border.x = -gameMgr.mapSize.width / 2 + this.boss_border.width / 2 + 100;\r\n            } else if (this.boss_border.x + this.boss_border.width / 2 > gameMgr.mapSize.width / 2) {\r\n                this.boss_border.x = gameMgr.mapSize.width / 2 - this.boss_border.width / 2 - 100;\r\n            }\r\n            if (this.boss_border.y - this.boss_border.height / 2 < -gameMgr.mapSize.height / 2) {\r\n                this.boss_border.y = -gameMgr.mapSize.height / 2 + this.boss_border.height / 2 + 100;\r\n            } else if (this.boss_border.y + this.boss_border.height / 2 > gameMgr.mapSize.height / 2) {\r\n                this.boss_border.y = gameMgr.mapSize.height / 2 - this.boss_border.height / 2 - 300;\r\n            }\r\n            this.boss_border.setParent(this.map);\r\n        }\r\n    }\r\n    /** 创建僵尸 */\r\n    createZombie(resName: string, center: cc.Vec2, dis: number, angle?: number, isBoss: boolean = false, isElite:boolean = false) {\r\n        // 预制体\r\n        let prefab = cocosz.resMgr.getRes(resName, cc.Prefab);\r\n        if (prefab) {\r\n            // 坐标\r\n            this._recursionCount = 0;\r\n            let pos = this.getZombieBirthPos(center, dis, angle);\r\n            if (pos) {\r\n                // 僵尸\r\n                let newZombie: cc.Node = this.nodeGet(resName, prefab);\r\n                if (newZombie) {\r\n                    let ts = newZombie.getComponent(ZombieBase);\r\n                    if (ts && isBoss) {\r\n                        // ts.totleHp += this.Rein * 0.2 * ts.totleHp;\r\n                        // ts.atkRange += this.Rein * 0.05 * ts.atkRange;\r\n                        // ts.MoveSpeed += this.Rein * 0.08 * ts.MoveSpeed;\r\n                        ts.isBoss = true; \r\n                        this.bossShow = true;\r\n                    }\r\n                    ts.isElite = isElite;\r\n                    ts.reinNum = this.Rein;\r\n                    newZombie.setPosition(pos);\r\n                    newZombie.setParent(gameMgr.map);\r\n                    if (ts) ts.initNode();\r\n                }\r\n            }\r\n        } else {\r\n            cocosz.resMgr.loadAndCacheRes(\"prefab_zombie/\" + resName, cc.Prefab, null, (err, res) => {\r\n                console.log(err);\r\n                if (!err) {\r\n                    this.createZombie(resName, center, dis, angle, isBoss);\r\n                }\r\n            })\r\n        }\r\n    }\r\n    /** 获取僵尸生成坐标 */\r\n    private _recursionCount: number = 0;\r\n    getZombieBirthPos(center: cc.Vec2, dis, angle?: number) {\r\n        if (++this._recursionCount > 100) {\r\n            return null;\r\n        }\r\n        let radians = 0;\r\n        if (angle == null || angle == undefined) {\r\n            radians = 2 * Math.PI * Math.random();\r\n        } else {\r\n            radians = cc.misc.degreesToRadians(angle);\r\n        }\r\n        let dif = cc.v2(dis + Math.floor(200 * Math.random()), 0).rotateSelf(radians);\r\n        let pos = center.add(dif);\r\n        if (pos.x > -gameMgr.mapSize.width / 2 + 400 && pos.x < gameMgr.mapSize.width / 2 - 400 &&\r\n            pos.y < gameMgr.mapSize.height / 2 - 400 && pos.y > -gameMgr.mapSize.height / 2 + 400) {\r\n            return pos;\r\n        } else {\r\n            return this.getZombieBirthPos(center, dis);\r\n        }\r\n    }\r\n\r\n    lastTime: number = 0;\r\n    safeTime: number = 40;\r\n    startPos: cc.Vec2 = null;\r\n    initGame() {\r\n        this.startPos = this.yaogan.getPosition();\r\n        this.isGameStart = true;\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.keyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.keyUp, this);\r\n        this.moveArea.on(cc.Node.EventType.TOUCH_START, ((event: cc.Touch) => {\r\n            let pos = event.getLocation();\r\n            pos = this.node.convertToNodeSpaceAR(pos);\r\n            this.yaogan.setPosition(pos);\r\n        }), this);\r\n        this.moveArea.on(cc.Node.EventType.TOUCH_MOVE, ((event: cc.Touch) => {\r\n            let div = event.getLocation().sub(event.getStartLocation());\r\n            if (div.mag() > 160) {\r\n                div = div.mul(160 / div.mag());\r\n            }\r\n            this.yaogan.children[0].setPosition(div);\r\n            gameMgr.playerTs.moveDir = div.normalize();\r\n        }), this)\r\n        this.moveArea.on(cc.Node.EventType.TOUCH_END, ((event: cc.Touch) => {\r\n            this.yaogan.setPosition(this.startPos);\r\n            this.yaogan.children[0].setPosition(cc.v2(0, 0));\r\n            gameMgr.playerTs.moveDir = cc.v2(0, 0);\r\n        }), this)\r\n        this.moveArea.on(cc.Node.EventType.TOUCH_CANCEL, ((event: cc.Touch) => {\r\n            this.yaogan.setPosition(this.startPos);\r\n            this.yaogan.children[0].setPosition(cc.v2(0, 0));\r\n            gameMgr.playerTs.moveDir = cc.v2(0, 0);\r\n        }), this)\r\n    }\r\n\r\n    isUp: boolean = false;\r\n    isDown: boolean = false;\r\n    isLeft: boolean = false;\r\n    isRight: boolean = false;\r\n    keyDown(event: cc.Event.EventKeyboard) {\r\n        switch (event.keyCode) {\r\n            case 87: {\r\n                if (!this.isUp) {\r\n                    this.isUp = true;\r\n                    this.setDir();\r\n                }\r\n                break;\r\n            }\r\n            case 83: {\r\n                if (!this.isDown) {\r\n                    this.isDown = true;\r\n                    this.setDir();\r\n                }\r\n                break;\r\n            }\r\n            case 65: {\r\n                if (!this.isLeft) {\r\n                    this.isLeft = true;\r\n                    this.setDir();\r\n                }\r\n                break;\r\n            }\r\n            case 68: {\r\n                if (!this.isRight) {\r\n                    this.isRight = true;\r\n                    this.setDir();\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    keyUp(event) {\r\n        switch (event.keyCode) {\r\n            case 87: {\r\n                this.isUp = false;\r\n                this.setDir();\r\n                break;\r\n            }\r\n            case 83: {\r\n                this.isDown = false;\r\n                this.setDir();\r\n                break;\r\n            }\r\n            case 65: {\r\n                this.isLeft = false;\r\n                this.setDir();\r\n                break;\r\n            }\r\n            case 68: {\r\n                this.isRight = false;\r\n                this.setDir();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    followNode: cc.Node;\r\n    isPre: boolean = true;\r\n    cameraFollow() {\r\n        let pos_to = null;\r\n        let t = 0.1;\r\n        if (this.followNode && this.followNode.isValid) {\r\n            pos_to = this.followNode.getPosition();\r\n            t = 0.1;\r\n        }\r\n        if (pos_to) {\r\n            let pos_from = this.mainCamereRootNode.getPosition();\r\n            let pos_out = cc.Vec2.ZERO;\r\n            let ratio = this.mainCamera.zoomRatio;\r\n            let winSize = new cc.Size(cc.winSize.width / ratio, cc.winSize.height / ratio);\r\n            if (cocosz.gameMode == 7) {\r\n                // 无边界\r\n            } else {\r\n                // 相机边界\r\n                if ((pos_to.x + winSize.width / 2) > gameMgr.mapSize.width / 2) {\r\n                    pos_to.x = gameMgr.mapSize.width / 2 - winSize.width / 2;\r\n                } else if ((pos_to.x - winSize.width / 2) < -gameMgr.mapSize.width / 2) {\r\n                    pos_to.x = -gameMgr.mapSize.width / 2 + winSize.width / 2;\r\n                }\r\n                if ((pos_to.y + winSize.height / 2) > gameMgr.mapSize.height / 2) {\r\n                    pos_to.y = gameMgr.mapSize.height / 2 - winSize.height / 2;\r\n                } else if ((pos_to.y - winSize.height / 2) < -gameMgr.mapSize.height / 2) {\r\n                    pos_to.y = -gameMgr.mapSize.height / 2 + winSize.height / 2;\r\n                }\r\n            }\r\n            if (pos_to.sub(pos_from).mag() < 1000) {\r\n                cc.Vec2.lerp(pos_out, pos_from, pos_to, t);\r\n                this.mainCamereRootNode.setPosition(pos_out);\r\n            } else {\r\n                this.mainCamereRootNode.setPosition(pos_to);\r\n                // 更新节点透明度\r\n                gameMgr.setMapTs && gameMgr.setMapTs.checkAllNode();\r\n            }\r\n        }\r\n    }\r\n\r\n    setDir() {\r\n        let moveDir = cc.v2(0, 0);\r\n        if (this.isUp) {\r\n            moveDir.y++;\r\n        }\r\n        if (this.isLeft) {\r\n            moveDir.x--;\r\n        }\r\n        if (this.isRight) {\r\n            moveDir.x++;\r\n        }\r\n        if (this.isDown) {\r\n            moveDir.y--;\r\n        }\r\n        this.playerTs.moveDir = moveDir.normalize();\r\n    }\r\n\r\n    restart() { }\r\n\r\n    useMeleeWeapon() { }\r\n\r\n    useRangedWeapon() {\r\n        this.playerTs.changeCurWeapon(this.playerTs.rangedWeapon);\r\n    }\r\n\r\n    useRangedWeaponAd() {\r\n        this.playerTs.changeCurWeapon(this.playerTs.rangedWeaponAd);\r\n    }\r\n\r\n    getNewWeapon() {\r\n        cocosz.audioMgr.playEffect(\"changeWeapon\");\r\n        this.playerTs.setNewWeapon();\r\n    }\r\n\r\n\r\n    clipNameArr: any = {};\r\n    playEffect(name: string, node?: cc.Node, interval: number = 0.2) {\r\n        if (gameMgr.isWin || gameMgr.isFail || cocosz.isPause) return;\r\n        if (this.clipNameArr[name]) {\r\n            return;\r\n        }\r\n        let voice = 1;\r\n        if (node && node.isValid && node.parent && node.parent.isValid) {\r\n            let pos = node.getPosition();\r\n            pos = node.parent.convertToWorldSpaceAR(pos);\r\n            let pos2 = this.playerTs.node.getPosition();\r\n            pos2 = this.playerTs.node.parent.convertToWorldSpaceAR(pos2);\r\n            let dt = pos.sub(pos2).mag();\r\n            if (dt > 2000) { return; }\r\n        }\r\n        cocosz.audioMgr.playEffect(name, false, voice);\r\n        if (interval > 0) {\r\n            this.clipNameArr[name] = 1;\r\n            this.scheduleOnce(() => { this.clipNameArr[name] = 0; }, interval);\r\n        }\r\n    }\r\n    playClip(clip: cc.AudioClip, node: cc.Node, interval: number = 0.2) {\r\n        if (gameMgr.isWin || gameMgr.isFail || cocosz.isPause) return;\r\n        if (this.clipNameArr[clip.name]) {\r\n            return;\r\n        }\r\n        let voice = 1;\r\n        if (node && node.isValid && node.parent && node.parent.isValid) {\r\n            let pos = node.getPosition();\r\n            pos = node.parent.convertToWorldSpaceAR(pos);\r\n            let pos2 = this.playerTs.node.getPosition();\r\n            pos2 = this.playerTs.node.parent.convertToWorldSpaceAR(pos2);\r\n            let dt = pos.sub(pos2).mag();\r\n            if (dt > 2000) { return; }\r\n        }\r\n        cocosz.audioMgr.playClip(clip, false, voice);\r\n        // 记录\r\n        if (interval > 0) {\r\n            this.clipNameArr[clip.name] = 1;\r\n            this.scheduleOnce(() => { this.clipNameArr[clip.name] = 0; }, interval);\r\n        }\r\n    }\r\n\r\n    /** 文字提示效果 */\r\n    showRoleTip(node: cc.Node, str: string, labelColor: cc.Color = cc.Color.WHITE) {\r\n        if (node && node.isValid && this.hpTip && this.hpTip.isValid && gameMgr.tipLayer) {\r\n            let tipNode = this.nodeGet(\"hpTip\", this.hpTip);\r\n            if (tipNode) {\r\n                tipNode.setParent(gameMgr.tipLayer);\r\n                // 初始化\r\n                tipNode.setPosition(node.x + 200 * (Math.random() - 0.5), node.y + node.height / 2);\r\n                tipNode.opacity = 255;\r\n                tipNode.color = labelColor;\r\n                tipNode.scale = (labelColor == cc.Color.WHITE ? 1 : 1.2);\r\n                // 字体内容\r\n                let tipLabel = tipNode.getComponent(cc.Label);\r\n                if (tipLabel) { tipLabel.string = str; }\r\n                // 动效\r\n                tipNode.stopAllActions();\r\n                cc.tween(tipNode)\r\n                    .by(0.5, { y: 20, scale: 1, })\r\n                    .by(0.3, { y: 10, scale: -1, opacity: -255 })\r\n                    .call(() => { this.nodePut(\"hpTip\", tipNode); })\r\n                    .start();\r\n            }\r\n        }\r\n    }\r\n\r\n    isFail: boolean = false;\r\n    fail() {\r\n        if (this.isWin || this.isFail) return;\r\n        cocosz.pauseCount++;\r\n        this.isFail = true;\r\n        this.unscheduleAllCallbacks();\r\n        upgradeMgr && upgradeMgr.unscheduleAllCallbacks();\r\n        this.scheduleOnce(() => {\r\n            this.qlzc.active = true;\r\n            cc.tween(this.qlzc)\r\n                .delay(0.3)\r\n                .call(() => { this.qlzc.getChildByName(\"dian\").children[0].active = true })\r\n                .delay(0.3)\r\n                .call(() => { this.qlzc.getChildByName(\"dian\").children[1].active = true })\r\n                .delay(0.3)\r\n                .call(() => { this.qlzc.getChildByName(\"dian\").children[2].active = true })\r\n                .delay(0.3)\r\n                .call(() => {\r\n                    this.qlzc.getChildByName(\"dian\").children[0].active = false;\r\n                    this.qlzc.getChildByName(\"dian\").children[1].active = false;\r\n                    this.qlzc.getChildByName(\"dian\").children[2].active = false;\r\n                })\r\n                .union()\r\n                .repeatForever()\r\n                .start();\r\n        }, 2)\r\n        this.scheduleOnce(() => {\r\n            cocosz.gameMgr.gameFailed();\r\n        }, 4)\r\n    }\r\n\r\n    isWin: boolean = false;\r\n    win() {\r\n        if (this.isWin || this.isFail) return;\r\n        cocosz.pauseCount++;\r\n        this.isWin = true;\r\n        this.unscheduleAllCallbacks();\r\n        upgradeMgr && upgradeMgr.unscheduleAllCallbacks();\r\n        this.scheduleOnce(() => {\r\n            this.qlzc.active = true;\r\n            cc.tween(this.qlzc)\r\n                .delay(0.3)\r\n                .call(() => { this.qlzc.getChildByName(\"dian\").children[0].active = true })\r\n                .delay(0.3)\r\n                .call(() => { this.qlzc.getChildByName(\"dian\").children[1].active = true })\r\n                .delay(0.3)\r\n                .call(() => { this.qlzc.getChildByName(\"dian\").children[2].active = true })\r\n                .delay(0.3)\r\n                .call(() => {\r\n                    this.qlzc.getChildByName(\"dian\").children[0].active = false;\r\n                    this.qlzc.getChildByName(\"dian\").children[1].active = false;\r\n                    this.qlzc.getChildByName(\"dian\").children[2].active = false;\r\n                })\r\n                .union()\r\n                .repeatForever()\r\n                .start();\r\n        }, 2)\r\n        this.scheduleOnce(() => {\r\n            cocosz.gameMgr.gameSuccess();\r\n        }, 4)\r\n\r\n    }\r\n\r\n    isRevive: boolean = false;\r\n    revive() {\r\n        this.isRevive = true;\r\n        this.playerTs.revive();\r\n    }\r\n\r\n    /**\r\n    * 震屏\r\n    * @param dis 范围\r\n    * @param times 次数\r\n    * @param isVibrate 是否震动\r\n    * @returns \r\n    */\r\n    private _timeArr = [0, 0.04, 0.05, 0.06, 0.07];\r\n    private _disArr = [0, 3, 10, 20, 30];\r\n    private _vibrateTime: number = 0;// 震动时间\r\n    public shakeEffect(extent: 0 | 1 | 2 | 3 | 4 = 1, times: number = 1, isVibrate: boolean = true, vibrateType: VibrateType = VibrateType.Short) {\r\n        // 镜头晃动\r\n        let t = this._timeArr[extent];\r\n        let dis = this._disArr[extent];\r\n        if (extent > 0 && times > 0) {\r\n            this.mainCamera.node.stopAllActions();\r\n            this.mainCamera.node.setPosition(0, 0, 0);\r\n            cc.tween(this.mainCamera.node)\r\n                .to(t, { position: cc.v3(dis, dis) })\r\n                .to(t, { position: cc.v3(0, -dis) })\r\n                .to(t, { position: cc.v3(-dis, dis) })\r\n                .to(t, { position: cc.v3(-dis, -dis) })\r\n                .to(t, { position: cc.v3(0, dis) })\r\n                .to(t, { position: cc.v3(0, 0) })\r\n                .union()\r\n                .repeat(times)\r\n                .start();\r\n        }\r\n        // 震动,间隔1秒\r\n        if (cocosz.dataMgr.ShakeOn) {\r\n            let t = new Date().getTime();\r\n            if (t - this._vibrateTime > 500) {\r\n                this._vibrateTime = t;\r\n                isVibrate && utils.vibrate(vibrateType);\r\n            }\r\n        }\r\n    }\r\n\r\n    guideSkip() {\r\n        // 新手指引跳过\r\n    }\r\n\r\n}\r\n"]}