{"version":3,"sources":["assets\\common-plugin\\Scripts\\RewardInsert.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { utils } from \"./Utils\";\r\nimport QCrossWidgetItem from \"./QCrossWidgetItem\";\r\nimport AldUtils from \"./AldUtils\";\r\nimport { SubLocation } from \"./YZ_Constant\";\r\nimport CompatibleTool from \"./CompatibleTool\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n/**\r\n * 激励插屏\r\n */\r\n@ccclass\r\nexport default class RewardInsert extends cc.Component {\r\n\r\n    private _jumpList: any = null;\r\n    private _items: QCrossWidgetItem[] = [];\r\n    public isShow: boolean = false;\r\n\r\n    _panel: cc.Node = null;\r\n    _mask: cc.Node = null;\r\n\r\n    onLoad() {\r\n\r\n        cc.game.addPersistRootNode(this.node);\r\n        this._mask = this.node.getChildByName(\"Mask\");\r\n\r\n        this._panel = this.node.getChildByName(\"Panel\");\r\n        for (let i = 0; i < 6; i++) {\r\n            let item: cc.Node = this._panel.getChildByName(`Item${i}`);\r\n            let qcrossWidgetItem: QCrossWidgetItem = item.getComponent(\"QCrossWidgetItem\");\r\n            qcrossWidgetItem._location = SubLocation.isReward;\r\n            this._items.push(qcrossWidgetItem);\r\n        }\r\n\r\n        let ratio: number = 1;\r\n        if (cc.winSize.height < cc.winSize.width) {\r\n            // 横屏游戏\r\n            ratio = cc.winSize.width / 1920 * 0.7;\r\n        } else {\r\n            ratio = cc.winSize.width / 1080;\r\n        }\r\n\r\n        this._panel.scale = ratio;\r\n    }\r\n\r\n    start() {\r\n        this._jumpList = utils.getRecommondGameList();\r\n        if (this._jumpList && this._jumpList.length > 0) {\r\n            this._initWidget();\r\n        } else {\r\n            cc.warn(\"交叉推广数据为null,激励插屏组件不显示!\");\r\n            utils.adManager.videoCallBack && utils.adManager.videoCallBack(false, \"激励组件加载失败！\");\r\n            utils.adManager.videoCallBack = null;\r\n            this.node.destroy();\r\n        }\r\n    }\r\n\r\n    private _initWidget() {\r\n        let idx: number = 0;\r\n        for (let i = 0; i < this._jumpList.length; i++) {\r\n            let data: any = this._jumpList[i];\r\n            if (data && data.logo) {\r\n                let itemIdx: number = idx;\r\n                if (itemIdx >= this._items.length) {\r\n                    return;\r\n                }\r\n                idx++;\r\n                this._items[itemIdx].init(data);\r\n            }\r\n        }\r\n    }\r\n\r\n    public hide() {\r\n\r\n        // this._panel.runAction(cc.sequence(cc.moveTo(0.3, CompatibleTool.position(-this._panel.getContentSize().width, 0)).easing(cc.easeQuadraticActionOut()), cc.callFunc(() => {\r\n        this._panel.active = false;\r\n        this._mask.active = false;\r\n        // })));\r\n    }\r\n\r\n    public onCloseBtnHandler(event: any, data: any) {\r\n        this.hide();\r\n        utils.adManager.videoCallBack && utils.adManager.videoCallBack(false, \"未点击试玩奖励！\");\r\n        utils.adManager.videoCallBack = null;\r\n    }\r\n\r\n    update(dt: number) {\r\n        if (!this.isShow) {\r\n            utils.showLog(\"show insertReward>>>>>\");\r\n\r\n            AldUtils.SendEvent(\"显示激励插屏\");\r\n            this.isShow = true;\r\n            this._panel.active = true;\r\n            this._mask.active = true;\r\n        }\r\n    }\r\n}\r\n"]}