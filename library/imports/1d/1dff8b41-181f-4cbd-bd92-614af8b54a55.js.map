{"version":3,"sources":["assets\\common-plugin\\Scripts\\YZ_Tool_Vivo.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import PlatUtils from \"./PlatUtils\";\r\nimport { utils } from \"./Utils\";\r\nimport YZ_Constant, { BannerLocation, LevelStatus } from \"./YZ_Constant\";\r\nimport YZ_LocalStorage from \"./YZ_LocalStorage\";\r\n//@ts-ignore\r\nvar uma = require('./UMengSDK/quickGame/uma.min.js');\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nlet ST_DefaultServerConfig: string = \"\";\r\nconst ST_ServerUrl: string = \"http://apps.youlesp.com/gss?\";\r\nconst POST_ServerUrl: string = \"http://report.youlesp.com/gss?\";\r\nconst ST_NativeInsertAdClickTimes: string = \"NativeInsertAdClickTimes\";\r\nconst ST_LastDateTime: string = \"LastDateTime\";\r\n\r\n@ccclass\r\nexport default class YZ_Tool_Vivo {\r\n    //@ts-ignore\r\n    qg: any = window.qg;\r\n    /*\r\n    brand\tString\t设备品牌\r\n    manufacturer\tString\t设备生产商\r\n    model\tString\t设备型号\r\n    product\tString\t设备代号\r\n    osType\tString\t操作系统名称\r\n    osVersionName\tString\t操作系统版本名称\r\n    osVersionCode\tNumber\t操作系统版本号\r\n    platformVersionName\tString\t运行平台版本名称\r\n    platformVersionCode\tNumber\t运行平台版本号\r\n    language\tString\t系统语言\r\n    region\tString\t系统地区\r\n    screenWidth\tNumber\t屏幕宽\r\n    screenHeight\tNumber\t屏幕高\r\n    battery\tNumber\t当前电量，0.0 - 1.0 之间\r\n    wifiSignal\tNumber\twifi信号强度，范围0 - 4\r\n    */\r\n    _sysInfo: any = null;\r\n    public get SysInfo() {\r\n        return this._sysInfo;\r\n    }\r\n\r\n    _serverConfig: any = null;\r\n    public get ServerConfig() {\r\n        return this._serverConfig;\r\n    }\r\n\r\n    _nativeInsertAdClickTimes: number = 0;\r\n    public get NativeInsertAdClickTimes() {\r\n        return this._nativeInsertAdClickTimes;\r\n    }\r\n\r\n    // 桌面图标是否创建\r\n    _shortcutCreated: boolean = false;\r\n    public get ShortcutCreated() {\r\n        return this._shortcutCreated;\r\n    }\r\n\r\n    //设备UID\r\n    _uid: string = \"0\";\r\n\r\n    public get uid() {\r\n        // if (this._service_uid != \"0\") return this._uid;\r\n        // this._login();\r\n        return \"0\";\r\n    }\r\n\r\n    //服务器返回UID\r\n    _service_uid: string = \"0\";\r\n\r\n    /**\r\n     * 服务器返回UID\r\n     */\r\n    public get serviceId() {\r\n        if (this._service_uid != \"0\") return this._service_uid;\r\n        this.reportLogin();\r\n        return \"0\";\r\n    }\r\n\r\n\r\n    _loginTime: number = 0;\r\n    _loginInterval: number = 30;\r\n    async _login() {\r\n\r\n        let curTime: number = new Date().getTime();\r\n        let interval: number = (curTime - this._loginTime) / 1000;\r\n        if (interval > 0 && interval < this._loginInterval) {\r\n            utils.showLog(`登录请求间隔小于：${this._loginInterval}秒`);\r\n            return;\r\n        }\r\n        this._loginTime = curTime;\r\n        let self = this;\r\n        utils.showLog(\"vivo暂时不获取uid，uid全部为0\");\r\n        this._uid = \"0\";\r\n        this.reportLogin();\r\n\r\n    }\r\n\r\n    _reportLoginTime: number = 0;\r\n    _reportLoginInterval: number = 30;\r\n    isReport: boolean = false;\r\n    //用户来源\r\n    _source: string = \"\";\r\n    /**\r\n     * 上报登录接口获取UID\r\n     */\r\n    reportLogin() {\r\n        if (this.isReport) return;\r\n        this.isReport = true;\r\n        let self = this;\r\n        let curTime: number = new Date().getTime();\r\n        let interval: number = (curTime - this._reportLoginTime) / 1000;\r\n        if (interval > 0 && interval < this._reportLoginInterval) {\r\n            utils.showLog(`上报登录获取UID小于：${this._reportLoginInterval}秒`);\r\n            return;\r\n        }\r\n        this._reportLoginTime = curTime;\r\n        let method = \"m=login\";\r\n        let url: string = ST_ServerUrl + method + `&device_data=${encodeURI(JSON.stringify(this._sysInfo))}`;\r\n\r\n        utils.commomHttpRequest(url, (ret, data) => {\r\n            if (ret) {\r\n                if (data) {\r\n                    let result = JSON.parse(data);\r\n                    utils.showLog(\"data=\" + data);\r\n                    utils.showLog(\"result=\" + result);\r\n                    utils.showLog(\"result.uid=\" + result.uid);\r\n                    if (result.uid) {\r\n                        self._service_uid = \"\" + result.uid;\r\n                        utils.showLog(\"服务器请求登录成功! _service_uid=\" + self._service_uid);\r\n                        YZ_LocalStorage.setItem(YZ_Constant.ST_SERVICE_UID, self._service_uid);\r\n                    }\r\n                }\r\n            } else {\r\n                utils.showLog(\"获取数据失败1\");\r\n            }\r\n            this.isReport = false;\r\n        })\r\n    }\r\n    /**\r\n     * \r\n     * @param data 配置数据\r\n     */\r\n    public init(data: string) {\r\n        if (PlatUtils.IsVIVO) {\r\n\r\n            this.umaInit()\r\n            //@ts-ignore 检车是否由桌面图标启动\r\n            qg.isStartupByShortcut({\r\n                success: (status) => {\r\n                    if (status) {\r\n                        utils.showLog('通过桌面图标启动应用')\r\n                        this._source = \"shortCut\"\r\n                    } else {\r\n                        utils.showLog('不是通过桌面图标启动应用')\r\n                    }\r\n                }\r\n            })\r\n            if (data) {\r\n                let configObj: any = JSON.parse(data);\r\n                if (configObj && configObj.vivo) {\r\n                    ST_DefaultServerConfig = JSON.stringify(configObj.vivo);\r\n                }\r\n            }\r\n            this._service_uid = YZ_LocalStorage.getItem(YZ_Constant.ST_SERVICE_UID);\r\n            this._service_uid = this._service_uid ? this._service_uid : \"0\";\r\n\r\n\r\n            this._sysInfo = this.qg.getSystemInfoSync();\r\n            if (this._sysInfo) {\r\n                utils.showLog(\"VIVO 小游戏平台信息: \" + JSON.stringify(this.SysInfo));\r\n            }\r\n\r\n            this._loadConfig();\r\n\r\n            this._nativeInsertAdClickTimes = YZ_LocalStorage.getItem(ST_NativeInsertAdClickTimes);\r\n            let day: string = YZ_LocalStorage.getItem(ST_LastDateTime);\r\n            let curDate = new Date();\r\n            if (day != curDate.toDateString()) {\r\n                this._nativeInsertAdClickTimes = 0;\r\n                YZ_LocalStorage.setItem(ST_NativeInsertAdClickTimes, 0);\r\n            }\r\n            // 检测桌面图标是否创建\r\n            if (this.isOverMiniVersion(\"1041\")) {\r\n                utils.registerServerInitEvent(() => {\r\n                    this.checkHasShortCut((res) => {\r\n                        if (!res && utils.ServerConfig && utils.ServerConfig.start_auto_create_short_cut_time) {\r\n                            utils.SendEvent(\"组件初始化成功，弹出自动创建桌面！\");\r\n                            utils.showLog(`组件初始化成功，${utils.ServerConfig.start_auto_create_short_cut_time}秒后弹出自动创建桌面！`)\r\n                            setTimeout(() => {\r\n                                this.createShortcut((res) => {\r\n                                    if (res) {\r\n                                        utils.showLog(\"自动创建桌面成功！\");\r\n                                    } else {\r\n                                        utils.showLog(\"自动创建桌面失败！\");\r\n                                    }\r\n                                });\r\n                            }, utils.ServerConfig.start_auto_create_short_cut_time * 1000);\r\n                        }\r\n                    });\r\n                }, this);\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n\r\n    _buildServerUrl() {\r\n        if (PlatUtils.IsVIVO) {\r\n            let url: string = \"\";\r\n            if (utils.config.vivoconfig && utils.config.vivoconfig.appID) {\r\n                url = ST_ServerUrl + \"kyx=true&app_id=\" + utils.config.vivoconfig.appID.trim() + \"&\" + \"channel=vivo\";\r\n            } else {\r\n                utils.showLog(\"VIVO APPID配置出错！\");\r\n            }\r\n            return url;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n\r\n\r\n    _loadConfig() {\r\n        if (PlatUtils.IsVIVO) {\r\n            let method: string = \"m=g\";\r\n            utils.commomHttpRequest(ST_ServerUrl + method, (ret, data) => {\r\n\r\n                if (ret) {\r\n                    utils.showLog(\"VIVO服务器配置数据获取成功: data = \" + data);\r\n                    if (data) {\r\n                        let result = JSON.parse(data);\r\n                        if (result) {\r\n                            if (!utils.DebugLoacalConfig) {\r\n                                this._serverConfig = result;\r\n                                if (this._serverConfig.is_show_log_view && this._serverConfig.is_show_log_view == \"true\") {\r\n                                    utils.showLogView = true;\r\n                                }\r\n                            } else {\r\n                                utils.showLog(\"开启了本地数据测试，使用本地配置!\");\r\n                            }\r\n                        } else {\r\n                            utils.showLog(\"VIVO服务器配置数据不是合法的JSON数据, 使用本地配置!\");\r\n                        }\r\n                    }\r\n                } else {\r\n                    utils.showLog(\"VIVO服务器配置数据获取失败, 使用本地配置!\");\r\n                }\r\n\r\n                if (!this._serverConfig) {\r\n                    this._serverConfig = JSON.parse(ST_DefaultServerConfig);\r\n                } else {\r\n                    if (this._serverConfig.is_local_pos_id\r\n                        && this._serverConfig.is_local_pos_id == \"false\") {\r\n                        // 使用服务器下发的广告id\r\n                        utils.showLog(\"使用服务器下发的广告id\");\r\n                        utils.config.vivoconfig.bannerId = this._serverConfig.banner_pos_id;\r\n                        utils.config.vivoconfig.insertId = this._serverConfig.intersititia_pos_id;\r\n                        utils.config.vivoconfig.videoId = this._serverConfig.video_pos_id;\r\n                        utils.config.vivoconfig.nativeInsertIds = this.ServerConfig.native_intersititial_pos_id;\r\n                        utils.config.vivoconfig.nativeBannerIds = this.ServerConfig.native_banner_pos_id;\r\n                        utils.config.vivoconfig.nativeTryGameIds = this.ServerConfig.native_trygame_pos_id;\r\n\r\n                        utils.config.vivoconfig.recGameBannerId = this.ServerConfig.rec_game_banner_id;\r\n                        utils.config.vivoconfig.recPortalId = this.ServerConfig.rec_portal_id;\r\n                        utils.config.vivoconfig.nativeSingleAdIds = this.ServerConfig.native_single_pos_id || utils.config.vivoconfig.nativeSingleAdIds;\r\n\r\n                    } else {\r\n                        utils.showLog(\"使用本地配置的广告ID\");\r\n                    }\r\n                    if (this.ServerConfig.native_banner_configs) {\r\n                        for (let i = 0; i < this.ServerConfig.native_banner_configs.length; i++) {\r\n                            utils.showLog(\"获取到原生广告配置:\" + this.ServerConfig.native_banner_configs[i].location, \">>>>\", JSON.stringify(this.ServerConfig.native_banner_configs[i]));\r\n                            utils.config.vivoconfig.setNativeBannerInfo(this.ServerConfig.native_banner_configs[i].location, this.ServerConfig.native_banner_configs[i]);\r\n                        }\r\n                    }\r\n                    if (this.ServerConfig.native_customad_configs) {\r\n                        for (let i = 0; i < this.ServerConfig.native_customad_configs.length; i++) {\r\n                            utils.showLog(\"获取到原生模版广告配置:\" + this.ServerConfig.native_customad_configs[i].location, \">>>>\", JSON.stringify(this.ServerConfig.native_customad_configs[i]));\r\n                            utils.config.vivoconfig.setCustomAdInfo(this.ServerConfig.native_customad_configs[i].location, this.ServerConfig.native_customad_configs[i]);\r\n                        }\r\n                    }\r\n\r\n                }\r\n                utils.emitServerInitEvent();\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 比较当前平台版本是否高于指定的版本号\r\n     * @param miniVersion 最低平台版本号\r\n     */\r\n    public isOverMiniVersion(miniVersion: string) {\r\n        if (PlatUtils.IsVIVO) {\r\n            if (this._sysInfo && this._sysInfo.platformVersionCode) {\r\n                return this._sysInfo.platformVersionCode >= miniVersion;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n\r\n\r\n    /**\r\n     * 创建桌面图标\r\n     */\r\n    public createShortcut(callback: Function) {\r\n        let callbackFunc = callback;\r\n\r\n        if (PlatUtils.IsVIVO && this.canCreateShortcut()) {\r\n            let self = this;\r\n            self.qg.installShortcut({\r\n                success: function () {\r\n                    utils.showLog('桌面图标创建成功！');\r\n                    self._shortcutCreated = true;\r\n                    if (callbackFunc) {\r\n                        callbackFunc(true);\r\n                    }\r\n                },\r\n                fail: function (err) {\r\n                    self._shortcutCreated = true;\r\n                    cc.log('vivo创建失败err' + err);\r\n                    if (callbackFunc) {\r\n                        callbackFunc(false);\r\n                    }\r\n                },\r\n                complete: function () {\r\n                }\r\n            });\r\n        } else {\r\n            cc.log(\"不能创建\");\r\n            if (callbackFunc) {\r\n                callbackFunc(false);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 是否可以创建桌面图标, 当前平台是否支持创建快捷方式\r\n     */\r\n    public canCreateShortcut() {\r\n        if (PlatUtils.IsVIVO) {\r\n            return this.isOverMiniVersion(\"1041\");\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public countNativeInserClick() {\r\n        this._nativeInsertAdClickTimes++;\r\n        YZ_LocalStorage.setItem(ST_NativeInsertAdClickTimes, this._nativeInsertAdClickTimes);\r\n    }\r\n\r\n    /**\r\n     * 分享事件\r\n     * @param callback 分享回调\r\n     */\r\n    public share(callback?: Function) {\r\n        if (!this.isOverMiniVersion(\"1052\")) {\r\n            callback && callback(false, \"当前平台不支持\");\r\n            return;\r\n        }\r\n        this.qg.share();\r\n        callback && callback(true);\r\n        return;\r\n    }\r\n\r\n\r\n    /**\r\n    * 验证桌面快捷方式是否创建过\r\n    * @param callBack \r\n    */\r\n    public checkHasShortCut(callBack?: Function) {\r\n        this.qg.hasShortcutInstalled({\r\n            success: (res) => {\r\n                utils.showLog(\"检测桌面快捷方式是否已经创建过: result=\", res);\r\n                if (res == false) {\r\n                    this._shortcutCreated = false;\r\n                    callBack && callBack(false);\r\n                } else {\r\n                    this._shortcutCreated = true;\r\n                    callBack && callBack(true);\r\n                }\r\n            },\r\n            fail: function () {\r\n                utils.showLog(\"检测失败！\");\r\n            },\r\n            complete: function () {\r\n                utils.showLog(\"检测完成！\");\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * 上报关卡数据\r\n     * @param level 当前关卡ID\r\n     * @param levelName 关卡名称\r\n     * @param status 状态\r\n     */\r\n    public postLevel(level: string, status: LevelStatus, levelName?: string) {\r\n        if (PlatUtils.IsVIVO) {\r\n            let method = \"m=rlevel\";\r\n            let url: string = POST_ServerUrl + method + `&level_id=${level}&level_name=${encodeURI(levelName)}&status=${status}`;\r\n            utils.commomHttpRequest(url, function (ret, data) {\r\n                if (ret) {\r\n                    utils.showLog(\"关卡数据上报成功！\");\r\n                } else {\r\n                    utils.showLog(\"关卡数据上报失败！\");\r\n                }\r\n            }.bind(this));\r\n        }\r\n    }\r\n\r\n    /**\r\n   * 上报自定义事件\r\n   * @param level 当前关卡ID\r\n   * @param levelName 关卡名称\r\n   * @param status 状态\r\n   */\r\n    public sendEvent(eventName: string) {\r\n        if (PlatUtils.IsVIVO) {\r\n            let method = \"m=revent\";\r\n            let url: string = POST_ServerUrl + method + `&event=${encodeURI(eventName)}`;\r\n            utils.commomHttpRequest(url, function (ret, data) {\r\n                if (ret) {\r\n                    utils.showLog(\"上报自定义事件成功！\");\r\n                } else {\r\n                    utils.showLog(\"上报自定义事件失败！\");\r\n                }\r\n            }.bind(this));\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n    * 弹出提示框\r\n    * @param msg 消息\r\n    */\r\n    public showToast(msg: string) {\r\n        if (PlatUtils.IsVIVO) {\r\n            //@ts-ignore\r\n            //@ts-ignore\r\n            qg.showToast({\r\n                message: msg,\r\n                duration: 2000\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n   * 是否支持互推\r\n   */\r\n    canShowRecommend() {\r\n        if (this.qg.createBoxBannerAd && this.qg.createBoxPortalAd) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    _rec_game_banner: any = null;\r\n    /**\r\n     * 展示VIVO互推banner\r\n     */\r\n    showRecBanner(location?: BannerLocation) {\r\n\r\n        if (!this.canShowRecommend()) {\r\n            utils.showLog(\"当前版本不支持显示官方互推！\");\r\n            return false;\r\n        }\r\n\r\n        if (utils.config.vivoconfig.recGameBannerId) {\r\n            if (!this._rec_game_banner) {\r\n                this._rec_game_banner = this.qg.createBoxBannerAd({\r\n                    adUnitId: utils.config.vivoconfig.recGameBannerId\r\n                })\r\n\r\n                this._rec_game_banner.onLoad(() => {\r\n                    utils.showLog('互推banner加载成功!')\r\n                });\r\n\r\n                this._rec_game_banner.show().then(() => {\r\n                    utils.showLog('互推banner展示成功！')\r\n                }).catch((error) => {\r\n                    utils.showLog('互推banner展示失败:' + error.errCode + ',' + error.errMsg)\r\n                })\r\n\r\n                this._rec_game_banner.onError((err) => {\r\n                    utils.showLog('互推banner加载异常!', err.errCode + ',' + err.errMsg)\r\n                    this._rec_game_banner.destroy();\r\n                    this._rec_game_banner = null;\r\n                })\r\n            } else {\r\n                this._rec_game_banner.show().then(() => {\r\n                    utils.showLog('互推banner展示成功！')\r\n                    if (location) {\r\n                        utils.SendEvent(\"互推Banner展示成功，位置：\" + location);\r\n                    }\r\n                }).catch(function (error) {\r\n                    utils.showLog('互推banner展示失败:' + error.errCode + ',' + error.errMsg)\r\n                })\r\n            }\r\n\r\n        } else {\r\n            utils.showLog(\"VIVO 互推banner ID未配置！\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 隐藏互推banner\r\n     */\r\n    hideRecBanner() {\r\n        if (this._rec_game_banner) {\r\n            this._rec_game_banner.hide().then(() => {\r\n                utils.showLog('VIVO 互推banner 隐藏成功！')\r\n            }).catch((error) => {\r\n                utils.showLog('VIVO 互推banner 隐藏失败:' + error.errCode + ',' + error.errMsg)\r\n                this._rec_game_banner.destroy();\r\n                this._rec_game_banner = null;\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n    _rec_game_portal: any = null;\r\n    /**\r\n     * 展示VIVO九宫格\r\n     */\r\n    showGamePortal(top: number = 200) {\r\n        if (!this.canShowRecommend()) {\r\n            utils.showLog(\"当前版本不支持显示官方互推！\");\r\n            return false;\r\n        }\r\n\r\n        if (utils.config.vivoconfig.recPortalId) {\r\n\r\n            if (this._rec_game_portal) {\r\n                this.hideGamePortal();\r\n            }\r\n\r\n            this._rec_game_portal = this.qg.createBoxPortalAd({\r\n                posId: utils.config.vivoconfig.recPortalId,\r\n                image: '',\r\n                marginTop: top / cc.winSize.height * this.SysInfo.screenHeight\r\n            })\r\n\r\n            this._rec_game_portal.onError(function (err) {\r\n                utils.showLog(\"盒子九宫格广告加载失败\", JSON.stringify(err));\r\n            })\r\n            this._rec_game_portal.onClose(() => {\r\n                utils.showLog('close _rec_game_portal')\r\n                if (this._rec_game_portal.isDestroyed) {\r\n                    return\r\n                }\r\n                // 当九宫格关闭之后，再次展示Icon\r\n                this._rec_game_portal.show()\r\n            })\r\n            // 广告数据加载成功后展示\r\n            this._rec_game_portal.show().then(function () {\r\n                utils.showLog('show success _rec_game_portal')\r\n            })\r\n\r\n        } else {\r\n            utils.showLog(\"VIVO 互推九宫格 ID未配置！\");\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 隐藏九宫格\r\n     */\r\n    hideGamePortal() {\r\n        this._rec_game_portal && this._rec_game_portal.hide().then(function () {\r\n            utils.showLog('hideGamePortal success')\r\n        }).catch(function (error) {\r\n            utils.showLog('hideGamePortal fail with:' + error.errCode + ',' + error.errMsg)\r\n        })\r\n    }\r\n\r\n\r\n    /**友盟sdk初始化 */\r\n    umaInit() {\r\n        if (!this.checkUmeng()) {\r\n            utils.showLog(\"友盟ID未配置，不执行友盟初始化>>>>\");\r\n            return;\r\n        }\r\n\r\n        uma.init({\r\n            appKey: utils.config.vivoconfig.umengId,\r\n            useOpenid: false,\r\n            debug: CC_DEBUG\r\n        })\r\n    }\r\n\r\n    /**\r\n       * 友盟游戏开始上报\r\n       * @param levelID \r\n       */\r\n    public umaOnStart(levelID: string) {\r\n        if (!this.checkUmeng()) return;\r\n        //@ts-ignore\r\n        qg.uma.stage.onStart({\r\n            stageId: levelID,//该字段名称不可修改，必传\r\n            stageName: `第${levelID}关`// 关卡id\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @returns 是否开启友盟 \r\n     */\r\n    private checkUmeng(): boolean {\r\n        if (!utils.config.vivoconfig.umengId) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * 友盟结算上报\r\n     * @param levelID 关卡id\r\n     * @param stageId \r\n     * @param event \r\n     */\r\n    public umaReportedLevel(levelID: string, event: LevelStatus) {\r\n        if (!this.checkUmeng()) return;\r\n\r\n        //@ts-ignore\r\n        qg.uma.stage.onEnd({\r\n            stageId: levelID,//该字段名称不可修改，必传\r\n            stageName: `第${levelID}关`,\r\n            event: event\r\n        })\r\n    }\r\n\r\n\r\n    /**\r\n     * 友盟自定义事件\r\n     * @param eventId 事件ID，注意：事件ID必须要在后台配置\r\n     * @param params 事件内容\r\n     */\r\n    public umaTrackEvent(eventId: string, params?) {\r\n        if (!this.checkUmeng()) return;\r\n\r\n        //@ts-ignore\r\n        qg.uma.trackEvent(eventId, params);\r\n    }\r\n\r\n}\r\n"]}