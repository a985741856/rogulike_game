{"version":3,"sources":["assets\\common-plugin\\Scripts\\AdAgentVIVO.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import AdAgent from \"./AdAgent\";\r\nimport { BannerLocation } from \"./YZ_Constant\";\r\nimport PlatUtils from \"./PlatUtils\";\r\nimport { utils } from \"./Utils\";\r\nimport NativeTryGamesWidget from \"./NativeTryGamesWidget\";\r\nimport YZ_NativeBanner from \"./YZ_NativeBanner\";\r\nimport { NativeBannerInfo } from \"./CommonConfig\";\r\nimport CompatibleTool from \"./CompatibleTool\";\r\nimport YZ_NativeItem from \"./YZ_NativeItem\";\r\nimport YZ_NativeAdObject from \"./YZ_NativeAdObject\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class AdAgentVIVO extends AdAgent {\r\n\r\n    _bannerAd: any = null;\r\n    _insertAd: any = null;\r\n    _videoAd: any = null;\r\n    _nativeBannerAd: any[] = [];\r\n    _nativeInsertAd: any[] = [];\r\n    _nativeSingleAd: any[] = [];\r\n\r\n\r\n    _isBannerShow: boolean = false;\r\n    _isInsertShow: boolean = false;\r\n\r\n    // 当前位置id的索引\r\n    _curPosIdIndexNativeBanner: number = 0;\r\n    _curPosIdIndexNativeInser: number = 0;\r\n    _curPosIdIndexSingleNative: number = 0;\r\n\r\n    _nativeData: any = null;\r\n    _nativeInsertData: any = null;\r\n    _nativeBannerNode: cc.Node = null;\r\n    _nativeInsertNode: cc.Node = null;\r\n\r\n    _videoCallback: Function = null;\r\n    _videoLoaded: boolean = null;\r\n\r\n    _isInsertAdShow: boolean = false;\r\n    _isInsertAdLoaded: boolean = false;\r\n\r\n    _isVideoLoaded: boolean = false;\r\n    _isVideoShow: boolean = false;\r\n\r\n    lastLastShowVideoTime: number = 0; //最后一次显示视频时间\r\n\r\n    showNum: number = 0; // Banner广告展示次数\r\n    showInsertNum: number = 0; // 插屏广告展示次数\r\n\r\n\r\n    _curNativeItem: YZ_NativeItem = null;\r\n\r\n    _nativeAdObject: YZ_NativeAdObject = null;\r\n    _nativeAd: any = null;\r\n\r\n    public get SysInfo() {\r\n        return utils.Tool_Vivo.SysInfo;\r\n    }\r\n\r\n    public get ServerConfig() {\r\n        if (PlatUtils.IsVIVO) {\r\n            return utils.Tool_Vivo.ServerConfig;\r\n        }\r\n        return null;\r\n\r\n    }\r\n\r\n    _nativeBannerInfo: NativeBannerInfo = null;\r\n    /**\r\n        * 获取当前banner配置\r\n        */\r\n    getNativeBannerInfo() {\r\n        if (this._nativeBannerInfo && this._nativeBannerInfo.location == this._curLocation) {\r\n            return this._nativeBannerInfo;\r\n        }\r\n        return utils.config.vivoconfig.getNativeBannerInfo(this._curLocation);\r\n    }\r\n\r\n    public Init() {\r\n        if (PlatUtils.IsVIVO) {\r\n\r\n            if (utils.Tool_Vivo.isOverMiniVersion(\"1084\")) {\r\n                //@ts-ignore\r\n                qg.isSupportNativeAd = true;\r\n            }\r\n\r\n            utils.registerServerInitEvent(() => {\r\n                if (utils.config.vivoconfig.showAd) {\r\n                    this._initVideoAd();\r\n                } else {\r\n                    utils.showLog(\"广告开关关闭状态，所有广告不显示！要显示广告，请打开 CommonUtils 组件上VIVIO 配置下的广告开关！\");\r\n                }\r\n            }, this);\r\n        }\r\n    }\r\n\r\n    _initVideoAd() {\r\n        if (!this._videoAd) {\r\n            if (!utils.Tool_Vivo.isOverMiniVersion(\"1041\")) {\r\n                utils.showLog(\"当前版本不支持视频广告!\");\r\n                if (this._videoCallback) {\r\n                    this._videoCallback(false, \"暂无视频广告!\");\r\n                    this._videoCallback = null;\r\n                }\r\n                return;\r\n            }\r\n\r\n            if (!utils.config.vivoconfig.videoId) {\r\n                utils.showLog(\"视频ID配置不正确！\");\r\n                if (this._videoCallback) {\r\n                    this._videoCallback(false, \"暂无视频广告!\");\r\n                    this._videoCallback = null;\r\n                }\r\n                return;\r\n            }\r\n\r\n            let posId: string = utils.config.vivoconfig.videoId.trim();\r\n            utils.showLog(\"video广告ID:\" + posId);\r\n            //@ts-ignore\r\n            this._videoAd = qg.createRewardedVideoAd({\r\n                posId: posId\r\n            });\r\n\r\n            if (this._videoAd) {\r\n                this._videoAd.onLoad((() => {\r\n                    utils.showLog(\"激励视频加载成功!\");\r\n                    this._isVideoLoaded = true;\r\n\r\n                    if (this._isVideoShow) {\r\n                        var adshow = this._videoAd.show();\r\n                        // 调用then和catch之前需要对show的结果做下判空处理，防止出错（如果没有判空，在平台版本为1052以及以下的手机上将会出现错误）\r\n                        adshow && adshow.then(() => {\r\n                            this._isVideoLoaded = false;\r\n                        }).catch(err => {\r\n                            if (this._videoCallback) {\r\n                                this._videoCallback(false, \"暂无视频广告!\");\r\n                                this._videoCallback = null;\r\n                            }\r\n                            utils.showLog(\"视频播放失败！\")\r\n                        });\r\n                    }\r\n                }));\r\n\r\n                this._videoAd.onError((err => {\r\n                    utils.showLog(\"激励视频异常!\" + err.errCode);\r\n                    this._isVideoLoaded = false;\r\n                    if (this._videoCallback) {\r\n                        this._videoCallback(false, \"暂无视频广告!\");\r\n                        this._videoCallback = null;\r\n                    }\r\n                }));\r\n\r\n                this._videoAd.onClose(res => {\r\n                    // setTimeout(() => {\r\n                    //     utils.showLog(`延时调用加载视频！`);\r\n                    this._videoAd.load();\r\n                    // }, 500);\r\n                    this._isVideoShow = false;\r\n                    if (res && res.isEnded) {\r\n                        utils.showLog(\"正常播放结束，可以下发游戏奖励\");\r\n                        if (this._videoCallback) {\r\n                            this._videoCallback(true, \"\");\r\n                            this._videoCallback = null;\r\n                        }\r\n                    } else {\r\n                        utils.showLog(\"播放中途退出，不下发游戏奖励\");\r\n                        if (this._videoCallback) {\r\n                            this._videoCallback(false, \"观看完视频才能获得奖励!\");\r\n                            this._videoCallback = null;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n    //当前显示Banner的位置\r\n    _curLocation: BannerLocation = BannerLocation.None;\r\n    ShowBanner(location: BannerLocation = BannerLocation.Home, args: any = null, isTimeRefresh: boolean = false) {\r\n        if (!this.ServerConfig) {\r\n            utils.showLog(\"未请求到配置文件！\");\r\n            return;\r\n        }\r\n        let oldLocation = this._curLocation;\r\n\r\n        this._curLocation = location;\r\n\r\n\r\n        //如果跳用位置切换之后，验证是不是通过定时器强制刷新数据，不是则先隐藏banner\r\n        if (oldLocation != location) {\r\n            this.HideBanner(location);\r\n        }\r\n\r\n\r\n\r\n\r\n        let curTime: number = new Date().getTime();\r\n        let refresh_ad_time: number = (curTime - this._startBannerTimerTask) / 1000;\r\n\r\n        let interval = this.ServerConfig.refresh_ad_time;\r\n\r\n        if (args && args.isRefresh) {\r\n            isTimeRefresh = true;\r\n        } else if (interval && interval > 0) {\r\n            if (refresh_ad_time > interval) {\r\n                isTimeRefresh = true;\r\n            }\r\n        }\r\n\r\n        // 判断当前位置是不是显示banner\r\n        if (this.getNativeBannerInfo().is_show_banner == -1) {\r\n            utils.showLog(\"当前位置配置为不展示banner!\");\r\n            this.HideBanner(location);\r\n            return;\r\n        } else if (this.getNativeBannerInfo().is_show_rec > -1) {\r\n            utils.showLog(\"当前位置显示互推banner\");\r\n            if (utils.Tool_Vivo.canShowRecommend()) {\r\n                this.HideBanner(location);\r\n                utils.Tool_Vivo.showRecBanner();\r\n                return;\r\n            }\r\n            utils.showLog(\"当前平台不支持互推banner\");\r\n        } else {\r\n            if (!isTimeRefresh) {\r\n                if (this.ServerConfig.nbclr && this.ServerConfig.nbclr == \"true\" && this._curNativeBannerInfo.nativeBannerAd) {\r\n                    utils.showLog(\"服务器配置定时器刷新数据 \");\r\n                    this._showNativeBanner(this._curNativeBannerInfo.nativeBannerAd, this._curNativeBannerInfo.data);\r\n                    utils.showLog(\"开启定时刷新 >>>>>>>>>\" + (interval - refresh_ad_time));\r\n                    clearTimeout(this._showBannerTimerId);\r\n                    clearTimeout(this._delayShowBannerId);\r\n                    //@ts-ignore\r\n                    this._showBannerTimerId = setTimeout(() => {\r\n                        utils.showLog(`定时${interval}秒调用showbanner`);\r\n                        this.ShowOldBanner(this._curLocation, {});\r\n                    }, (interval - refresh_ad_time) * 1000);\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n\r\n        if (utils._tool_Vivo.isOverMiniVersion(\"1059\")) {\r\n            this.showNewBanner(location, args);\r\n        } else {\r\n            this.ShowOldBanner(location, args);\r\n        }\r\n    }\r\n\r\n    _lastShowTime: number = 0;//上一次调用showBanner的时间\r\n    _bannerTimeoutShow: number = 0;\r\n    showNewBanner(location: BannerLocation = BannerLocation.Home, args: any = null) {\r\n        let curTime = new Date().getTime();\r\n\r\n        let cap = this.ServerConfig ? this.ServerConfig.cap_show_banner_time : undefined;\r\n        cap = cap ? cap : 15;\r\n        if (((curTime - this._lastShowTime) / 1000) > cap) {\r\n            this._lastShowTime = curTime;\r\n            this.ShowOldBanner(location, args);\r\n        } else {\r\n            this._lastShowTime = curTime;\r\n            clearTimeout(this._bannerTimeoutShow);\r\n            this._bannerTimeoutShow = setTimeout(() => {\r\n                utils.showLog(\"达到\" + cap + \"间隔，显示banner\");\r\n                this.ShowOldBanner(this._curLocation, args);\r\n            }, cap * 1000);\r\n            utils.showLog(\"1059以上展示banner必须间隔\" + cap + \"秒\")\r\n        }\r\n    }\r\n\r\n    _nativeIsClose: boolean = false;//原生banner是否已经被关闭\r\n    _showBannerTimerId: number = 0;\r\n    _delayShowBannerId: number = 0;\r\n\r\n\r\n    _startBannerTimerTask: number = 0;\r\n    public ShowOldBanner(location: BannerLocation = BannerLocation.Home, args: any = null) {\r\n\r\n\r\n        if (PlatUtils.IsVIVO) {\r\n            if (!utils.config.vivoconfig.showAd) {\r\n                return;\r\n            }\r\n\r\n\r\n            clearTimeout(this._showBannerTimerId);\r\n            clearTimeout(this._delayShowBannerId);\r\n\r\n            this._nativeIsClose = false;\r\n            if (this.ServerConfig) {\r\n\r\n                let interval = this.ServerConfig.refresh_ad_time;\r\n                let bannerInfo = this.getNativeBannerInfo();\r\n\r\n                if (interval && interval > 0) {\r\n                    //@ts-ignore\r\n                    this._showBannerTimerId = setTimeout(() => {\r\n                        utils.showLog(`定时${interval}秒调用showbanner`);\r\n                        this.ShowBanner(location, {}, true);\r\n                    }, interval * 1000);\r\n                }\r\n\r\n                if (this.ServerConfig && this.ServerConfig.isTest && this.ServerConfig.isTest == \"true\") {\r\n                    this.showNum++;\r\n                    //@ts-ignore\r\n                    if (this.showNum % 2 != 0 && qg.isSupportNativeAd) {\r\n                        utils.showLog(\"测试模式>> 顺序展示原生Banner广告！\");\r\n                        this._createNativeBannerAd(this._showNativeBanner);\r\n                    } else {\r\n                        //@ts-ignore\r\n                        utils.showLog(\"测试模式>>\" + (qg.isSupportNativeAd ? \"\" : \"平台不支持原生广告>>\" + \"顺序展示小游戏Banner广告！\"));\r\n                        this._createMiniGameBannerAd(location);\r\n                    }\r\n                    return;\r\n                }\r\n\r\n                if (this.ServerConfig.banner_first_ad) {\r\n                    //@ts-ignore\r\n                    if (this.ServerConfig.banner_first_ad == \"native\" && qg.isSupportNativeAd) {\r\n                        utils.showLog(\"优先展示原生Banner广告!\");\r\n\r\n                        if (this.ServerConfig.intersititial_first_ad == \"native\") {\r\n                            let timeOut = 1;\r\n                            if (this.ServerConfig.native_banner_delay_time) {\r\n                                timeOut = this.ServerConfig.native_banner_delay_time;\r\n                            }\r\n                            utils.showLog(`因为插屏也是优先展示原生，所以banner延迟显示${timeOut}秒`);\r\n                            //@ts-ignore\r\n                            this._delayShowBannerId = setTimeout(() => {\r\n                                this._createNativeBannerAd(this._showNativeBanner);\r\n                            }, timeOut * 1000);\r\n                        } else {\r\n                            this._createNativeBannerAd(this._showNativeBanner);\r\n                        }\r\n                    } else {\r\n                        //@ts-ignore\r\n                        utils.showLog(\"优先展示小游戏Banner广告，引擎\" + (qg.isSupportNativeAd ? \"支持\" : \"不支持\") + \"原生广告\");\r\n                        this._createMiniGameBannerAd(location);\r\n                    }\r\n                } else {\r\n                    utils.showLog(\"配置数据中没有 banner_first_ad 字段， banner广告不显示!\");\r\n                }\r\n            } else {\r\n                utils.showLog(\"服务器配置数据未初始化!\");\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    public HideBanner(location: BannerLocation = BannerLocation.Home) {\r\n        if (PlatUtils.IsVIVO) {\r\n            clearTimeout(this._showBannerTimerId);\r\n            clearTimeout(this._delayShowBannerId);\r\n            clearTimeout(this._bannerTimeoutShow);\r\n            this._nativeIsClose = true;\r\n            if (this._bannerAd) {\r\n                var adhide = this._bannerAd.hide();\r\n\r\n                adhide && adhide.then(() => {\r\n                    console.log(\"banner广告隐藏成功\");\r\n                }).catch(err => {\r\n                    console.log(\"banner广告隐藏失败\", JSON.stringify(err));\r\n\r\n                    var addestroy = this._bannerAd.destroy();\r\n                    addestroy && addestroy.then(() => {\r\n                        console.log(\"banner广告销毁成功\");\r\n                    }).catch(err => {\r\n                        console.log(\"banner广告销毁失败\", JSON.stringify(err));\r\n                    });\r\n                });\r\n            }\r\n\r\n            if (this._nativeBannerNode) {\r\n                utils.showLog(\"隐藏原生Banner\");\r\n                this._nativeBannerNode.active = false;\r\n            }\r\n\r\n\r\n            //隐藏互推banner\r\n            utils.Tool_Vivo && utils.Tool_Vivo.hideRecBanner();\r\n        }\r\n    }\r\n\r\n    _tryIndex = 0;\r\n    tryGameInfo: any;\r\n    public showNativeTryGameWidget(params: any = null) {\r\n        if (PlatUtils.IsVIVO) {\r\n            utils.showLog(\"创建原生抖动广告。 posId:\" + utils.config.vivoconfig.nativeTryGameIds[0], \"  utils.tryGameDate\", utils.tryGameDate, \"needchange\", utils.nativeNeedChange);\r\n            if (utils.nativeNeedChange || !utils.tryGameDate) {\r\n                if (utils.config.vivoconfig.nativeTryGameIds) {\r\n                    //@ts-ignore\r\n                    let tryGameAd = qg.createNativeAd({\r\n                        posId: utils.config.vivoconfig.nativeTryGameIds[0]\r\n                    });\r\n\r\n                    utils.showLog(\"tryGameAd：\" + tryGameAd)\r\n                    if (tryGameAd) {\r\n                        tryGameAd.onLoad((res) => {\r\n                            utils.showLog(\"res\", res)\r\n                            utils.nativeNeedChange = false;\r\n                            this.tryGameInfo = res.adList;\r\n                            if (res && res.adList && res.adList.length > 0) {\r\n                                utils.showLog(\"原生抖动试完广告资源拉取成功！\");\r\n                                utils.showLog(JSON.stringify(res));\r\n                                res = JSON.parse(JSON.stringify(res));\r\n\r\n                                let adId = res.adList[0].adId\r\n                                utils.showLog(\"adId:\" + adId);\r\n                                let canAdd = true;\r\n                                utils.tryGameDate.forEach((element) => {\r\n                                    if (adId == element.date[0].adId) {\r\n                                        canAdd = false;\r\n                                    }\r\n                                })\r\n                                if (canAdd) {\r\n                                    utils.tryGameDate.push({ \"tryGameAd\": tryGameAd, \"date\": this.tryGameInfo });\r\n                                    if (utils._nativeTryGameNode) {\r\n                                        utils._nativeTryGameNode.getComponent(NativeTryGamesWidget).init();\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n                        tryGameAd.onError((err) => {\r\n                            console.log(\"原生广告加载异常\", JSON.stringify(err));\r\n                        })\r\n                        tryGameAd.load();\r\n                    }\r\n                } else {\r\n                    utils.showLog(\"原生抖动id不存在\")\r\n                }\r\n            }\r\n\r\n            this.createNativeTryGameWidget(params);\r\n        }\r\n\r\n    }\r\n\r\n    public ShowInterstitial(location: BannerLocation = null) {\r\n\r\n        if (PlatUtils.IsVIVO) {\r\n            if (!utils.config.vivoconfig.showAd) {\r\n                return;\r\n            }\r\n            if (this.ServerConfig && this.ServerConfig.isTest && this.ServerConfig.isTest == \"true\") {\r\n                this.showInsertNum++;\r\n                // utils.showLog(this.showInsertNum % 2 == 0, \"<<this.showInsertNum % 2 == 0\");\r\n                //@ts-ignore\r\n                if (this.showInsertNum % 2 == 0 && qg.isSupportNativeAd) {\r\n                    utils.showLog(\"测试模式>> 顺序展示原生插屏广告！\");\r\n                    this.nativeInserAdDelayCall();\r\n                } else {\r\n                    //@ts-ignore\r\n                    utils.showLog(\"测试模式>>\" + (qg.isSupportNativeAd ? \"\" : \"平台不支持原生广告>>\") + \"顺序展示小游戏插屏广告！\");\r\n                    this._createMiniGameInsertAd();\r\n                }\r\n                return;\r\n            }\r\n\r\n            if (this.ServerConfig) {\r\n                if (location && location == BannerLocation.Pause) {\r\n                    //@ts-ignore\r\n                    if (this.ServerConfig.intersititial_first_ad == \"native\" && qg.isSupportNativeAd) {\r\n                        utils.showLog(\"暂停界面不延时展示！\");\r\n                        utils.showLog(\"优先展示原生插屏广告!\");\r\n                        this.nativeInserAdDelayCall();\r\n                    } else {\r\n                        utils.showLog(\"优先展示小游戏插屏广告!\");\r\n                        this._createMiniGameInsertAd();\r\n                    }\r\n                } else {\r\n                    //@ts-ignore\r\n                    if (this.ServerConfig.intersititial_first_ad == \"native\" && qg.isSupportNativeAd) {\r\n                        utils.showLog(\"优先展示原生插屏广告!\");\r\n                        utils.delayCall(this.nativeInserAdDelayCall.bind(this), this.ServerConfig.intersititia_delay_show_time || 0);\r\n                    } else {\r\n                        utils.showLog(\"优先展示小游戏插屏广告!\");\r\n                        this._createMiniGameInsertAd();\r\n                    }\r\n                }\r\n            } else {\r\n                utils.showLog(\"服务器配置数据未初始化!\");\r\n            }\r\n        }\r\n    }\r\n\r\n    _nativeInsertAdShowCount: number = 0;\r\n    public nativeInserAdDelayCall() {\r\n        utils.showLog(\"原生插屏广告: 当前点击次数=\" + utils.Tool_Vivo.NativeInsertAdClickTimes + \"; 点击次数限制=\" + this.ServerConfig.intersititia_click_count + \"; 展示次数间隔=\" + this.ServerConfig.intersititial_interval_time + \"; 展示累计=\" + this._nativeInsertAdShowCount);\r\n        if (utils.Tool_Vivo.NativeInsertAdClickTimes >= (this.ServerConfig.intersititia_click_count || 0)) {\r\n            // 每日点击次数到达上限，限制展示次数\r\n            if (this._nativeInsertAdShowCount >= (this.ServerConfig.intersititia_show_interval || 0)) {\r\n                // 可以展示\r\n                this._createNativeInsertAd(this._showNativeInsert);\r\n            } else {\r\n                // 不能展示\r\n                this._nativeInsertAdShowCount++;\r\n            }\r\n        } else {\r\n            this._createNativeInsertAd(this._showNativeInsert);\r\n        }\r\n    }\r\n\r\n    public ShowVideo(callback: Function) {\r\n        if (PlatUtils.IsVIVO) {\r\n\r\n            this._videoCallback = callback;\r\n\r\n            if (!utils.config.vivoconfig.showAd) {\r\n                if (this._videoCallback) {\r\n                    this._videoCallback(false, \"暂无视频广告!\");\r\n                    this._videoCallback = null;\r\n                }\r\n                return;\r\n            }\r\n            this._isVideoShow = true;\r\n            let curTime: number = new Date().getTime();\r\n            let interval: number = (curTime - this.lastLastShowVideoTime) / 1000;\r\n            let interval_time = 0;\r\n            if (utils.ServerConfig && utils.ServerConfig.video_interval_time) {\r\n                interval_time = utils.ServerConfig.video_interval_time;\r\n            }\r\n            if (interval > interval_time) {\r\n                this.lastLastShowVideoTime = new Date().getTime();\r\n\r\n                if (!this._videoAd) {\r\n                    this._initVideoAd();\r\n                } else {\r\n                    if (this._isVideoLoaded) {\r\n\r\n                        var adshow = this._videoAd.show();\r\n                        // 调用then和catch之前需要对show的结果做下判空处理，防止出错（如果没有判空，在平台版本为1052以及以下的手机上将会出现错误）\r\n                        adshow && adshow.then(() => {\r\n                            utils.showLog(\"视频显示成功!\");\r\n                            this._isVideoLoaded = false;\r\n                        }).catch(err => {\r\n                            utils.showLog(\"激励视频广告显示失败\" + JSON.stringify(err));\r\n                            if (this._videoCallback) {\r\n                                this._videoCallback(false, \"暂无视频广告!\");\r\n                                this._videoCallback = null;\r\n                            }\r\n                        });\r\n\r\n                    } else {\r\n                        this._isVideoShow = false;\r\n                        if (this._videoCallback) {\r\n                            this._videoCallback(false, \"暂无视频广告!\");\r\n                            this._videoCallback = null;\r\n                        }\r\n                        this._videoAd.load();\r\n                        return;\r\n                    }\r\n                }\r\n\r\n            } else {\r\n                utils.showLog(\"视频广告请求间隔小于60秒,直接返回false\");\r\n                if (this._videoCallback) {\r\n                    this._videoCallback(false, \"暂无视频广告!\");\r\n                    this._videoCallback = null;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    _createMiniGameInsertAd() {\r\n        if (PlatUtils.IsVIVO) {\r\n            this._isInsertShow = true;\r\n\r\n            if (utils.config.vivoconfig\r\n                && utils.config.vivoconfig.insertId) {\r\n\r\n                // if (!this._insertAd) {\r\n                //@ts-ignore\r\n                this._insertAd = qg.createInterstitialAd({\r\n                    posId: utils.config.vivoconfig.insertId\r\n                });\r\n\r\n                if (this._insertAd) {\r\n                    utils.showLog(\"注册小游戏插屏广告回调！\");\r\n                    this._insertAd.onError(((err) => {\r\n                        utils.showLog(\"vivo 小游戏插屏广告出错:\" + err.errCode + err.errMsg);\r\n                        if (this._isInsertShow) {\r\n                            if (this.ServerConfig.intersititial_first_ad == \"default\") {\r\n                                this._isInsertShow = false;\r\n\r\n                                utils.showLog(\"开始显示原生插屏广告!\");\r\n                                this._curPosIdIndexNativeInser = 0;\r\n                                utils.delayCall(this.nativeInserAdDelayCall.bind(this), this.ServerConfig.intersititia_delay_show_time || 0);\r\n                            }\r\n                        }\r\n                    }).bind(this));\r\n\r\n                    // this._insertAd.onLoad((() => {\r\n                    if (this._isInsertShow) {\r\n                        // this._isInsertShow = false;\r\n                        var adshow = this._insertAd.show();\r\n                        // 调用then和catch之前需要对show的结果做下判空处理，防止出错（如果没有判空，在平台版本为1052以及以下的手机上将会出现错误）\r\n                        adshow && adshow.then(() => {\r\n                            utils.showLog(\"vivo 小游戏插屏广告显示成功！\");\r\n                            this._isInsertShow = false;\r\n                        }).catch(err => {\r\n                            switch (err.code) {\r\n                                case 30003:\r\n                                    utils.showLog(\"新用户7天内不能曝光插屏，请将手机时间调整为7天后，退出游戏重新进入\")\r\n                                    break;\r\n                                case 30009:\r\n                                    utils.showLog(\"10秒内调用广告次数超过1次，10秒后再调用\")\r\n                                    // setTimeout(() => {\r\n                                    //     show()\r\n                                    // }, 10000);\r\n                                    break;\r\n                                case 30002:\r\n                                    utils.showLog(\"加载广告失败，重新加载广告\")\r\n                                    break;\r\n                                default:\r\n                                    // 参考 https://minigame.vivo.com.cn/documents/#/lesson/open-ability/ad?id=广告错误码信息 对错误码做分类处理\r\n                                    utils.showLog(\"插屏广告展示失败\")\r\n                                    break;\r\n                            }\r\n                        });\r\n                    }\r\n                    // }).bind(this));\r\n                }\r\n                // } else {\r\n                //     this._insertAd.load();\r\n                // }\r\n\r\n                if (!this._insertAd) {\r\n                    utils.showLog(\"vivo 小游戏插屏广告创建失败！\");\r\n                    if (this.ServerConfig.intersititial_first_ad == \"default\") {\r\n                        utils.showLog(\"开始显示原生插屏广告!\");\r\n                        this._curPosIdIndexNativeInser = 0;\r\n                        utils.delayCall(this.nativeInserAdDelayCall.bind(this), this.ServerConfig.intersititia_delay_show_time || 0);\r\n                    }\r\n                }\r\n            } else {\r\n                utils.showLog(\"vivo 小游戏插屏广告配置信息错误!\");\r\n                if (this.ServerConfig.intersititial_first_ad == \"default\") {\r\n                    utils.showLog(\"开始显示原生插屏广告!\");\r\n                    this._curPosIdIndexNativeInser = 0;\r\n                    utils.delayCall(this.nativeInserAdDelayCall.bind(this), this.ServerConfig.intersititia_delay_show_time || 0);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    _createMiniGameBannerAd(location: BannerLocation = null) {\r\n        if (PlatUtils.IsVIVO) {\r\n            this._isBannerShow = true;\r\n\r\n            if (utils.config.vivoconfig\r\n                && utils.config.vivoconfig.bannerId) {\r\n\r\n\r\n                let oldBannerAd = this._bannerAd;\r\n                if (oldBannerAd) {\r\n                    var addestroy = oldBannerAd.destroy();\r\n                    addestroy && addestroy.then(() => {\r\n                        console.log(\"banner广告销毁成功\");\r\n                    }).catch(err => {\r\n                        console.log(\"banner广告销毁失败\", JSON.stringify(err));\r\n                    });\r\n                }\r\n                // if (!this._bannerAd) {\r\n                //@ts-ignore\r\n                this._bannerAd = qg.createBannerAd({\r\n                    posId: utils.config.vivoconfig.bannerId,\r\n                    style: {}\r\n                });\r\n\r\n                if (this._bannerAd) {\r\n                    utils.showLog(\"注册小游戏banner回调!\");\r\n                    this._bannerAd.onError(((err) => {\r\n                        utils.showLog(\"VIVO 广告条加载失败! code : \" + err.errCode + \"; msg : \" + err.errMsg);\r\n                        let bannerInfo = this.getNativeBannerInfo();\r\n                        if (bannerInfo.st_banner_show_back_up == -1) {\r\n                            utils.showLog(\"服务器配置不显示备用广告\");\r\n                            return;\r\n                        }\r\n                        if (this._isBannerShow) {\r\n                            this._isBannerShow = false;\r\n                            if (this.ServerConfig.banner_first_ad == \"default\") {\r\n                                this._curPosIdIndexNativeBanner = 0;\r\n                                this._createNativeBannerAd(this._showNativeBanner.bind(this));\r\n                            }\r\n                        }\r\n                    }).bind(this));\r\n\r\n\r\n                } else {\r\n                    if (this.ServerConfig.banner_first_ad == \"default\") {\r\n                        this._curPosIdIndexNativeBanner = 0;\r\n                        this._createNativeBannerAd(this._showNativeBanner.bind(this));\r\n                    }\r\n                }\r\n                // }\r\n\r\n                if (this._bannerAd) {\r\n                    let adshow = this._bannerAd.show();\r\n\r\n                    adshow && adshow.then(() => {\r\n                        utils.showLog(\"vivo小游戏banner广告展示成功\");\r\n                        if (this._nativeBannerNode) {\r\n                            this._nativeBannerNode.active = false;\r\n                        }\r\n                    }).catch((err) => {\r\n                        switch (err.code) {\r\n                            case 30003:\r\n                                utils.showLog(\"新用户7天内不能曝光Banner，请将手机时间调整为7天后，退出游戏重新进入\")\r\n                                break;\r\n                            case 30009:\r\n                                utils.showLog(\"10秒内调用广告次数超过1次，10秒后再调用\")\r\n                                // setTimeout(() => {\r\n                                //     show()\r\n                                // }, 10000);\r\n                                break;\r\n                            case 30002:\r\n                                utils.showLog(\"加载广告失败，重新加载广告\")\r\n                                break;\r\n                            default:\r\n                                // 参考 https://minigame.vivo.com.cn/documents/#/lesson/open-ability/ad?id=广告错误码信息 对错误码做分类处理\r\n                                utils.showLog(\"banner广告展示失败\")\r\n                                break;\r\n                        }\r\n                    });\r\n\r\n\r\n                } else {\r\n                    utils.showLog(\"vivo 小游戏Banner广告创建失败!\");\r\n                    if (this.ServerConfig.banner_first_ad == \"default\") {\r\n                        this._curPosIdIndexNativeBanner = 0;\r\n                        this._createNativeBannerAd(this._showNativeBanner.bind(this));\r\n                    }\r\n                }\r\n            } else {\r\n                utils.showLog(\"vivo 小游戏Banner广告配置信息错误!\");\r\n                let bannerInfo = this.getNativeBannerInfo();\r\n                if (bannerInfo.st_banner_show_back_up == -1) {\r\n                    utils.showLog(\"服务器配置不显示备用广告\");\r\n                    return;\r\n                }\r\n                if (this.ServerConfig.banner_first_ad == \"default\") {\r\n                    this._curPosIdIndexNativeBanner = 0;\r\n                    this._createNativeBannerAd(this._showNativeBanner.bind(this));\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    _curNativeBannerInfo: any = {};\r\n    _createNativeBannerAd(completeCallback: Function) {\r\n        if (PlatUtils.IsVIVO) {\r\n            //@ts-ignore\r\n            if (!qg.isSupportNativeAd) {\r\n                utils.showLog(\"当前引擎不支持原生Banner广告！\");\r\n                return;\r\n            }\r\n            let callback = completeCallback;\r\n\r\n            utils.showLog(\"curPosIdIndexNativeBanner:\" + this._curPosIdIndexNativeBanner);\r\n\r\n            if (utils.config.vivoconfig.nativeBannerIds\r\n                && utils.config.vivoconfig.nativeBannerIds[this._curPosIdIndexNativeBanner]) {\r\n                utils.showLog(\"创建原生广告Banner。 posId:\" + utils.config.vivoconfig.nativeBannerIds[this._curPosIdIndexNativeBanner]);\r\n                //@ts-ignore\r\n                let nativeBannerAd = qg.createNativeAd({\r\n                    posId: utils.config.vivoconfig.nativeBannerIds[this._curPosIdIndexNativeBanner]\r\n                });\r\n\r\n                if (nativeBannerAd) {\r\n                    nativeBannerAd.onLoad((res) => {\r\n                        if (this._nativeIsClose) {\r\n                            utils.showLog(\"隐藏了BANNER，不做任何处理！\");\r\n                            return;\r\n                        }\r\n                        if (res && res.adList && res.adList.length > 0) {\r\n                            this._startBannerTimerTask = new Date().getTime();\r\n                            utils.showLog(\"原生Banner广告资源拉取成功！\");\r\n                            utils.showLog(JSON.stringify(res));\r\n                            res = JSON.parse(JSON.stringify(res));\r\n                            let data = res.adList[0];\r\n                            if (this._checkNativeDataValid(data) || this.getNativeBannerInfo().show_st_banner == \"true\") {\r\n                                this._curPosIdIndexNativeBanner = 0;\r\n                                this._showNativeBanner(nativeBannerAd, data);\r\n                                this._curNativeBannerInfo.nativeBannerAd = nativeBannerAd;\r\n                                this._curNativeBannerInfo.data = data;\r\n                                // 删除当前广告\r\n                                if (this._bannerAd) {\r\n                                    var adhide = this._bannerAd.hide();\r\n\r\n                                    adhide && adhide.then(() => {\r\n                                        console.log(\"banner广告隐藏成功\");\r\n                                    }).catch(err => {\r\n                                        console.log(\"banner广告隐藏失败\", JSON.stringify(err));\r\n\r\n                                        var addestroy = this._bannerAd.destroy();\r\n                                        addestroy && addestroy.then(() => {\r\n                                            console.log(\"banner广告销毁成功\");\r\n                                        }).catch(err => {\r\n                                            console.log(\"banner广告销毁失败\", JSON.stringify(err));\r\n                                        });\r\n                                    });\r\n                                }\r\n                                return;\r\n                            }\r\n                        }\r\n\r\n                        utils.showLog(\"原生Banner广告资源出错！\");\r\n                        this._curPosIdIndexNativeBanner++;\r\n                        if (this._curPosIdIndexNativeBanner < utils.config.vivoconfig.nativeBannerIds.length) {\r\n                            this._createNativeBannerAd(callback);\r\n                        } else {\r\n                            this._curPosIdIndexNativeBanner = 0;\r\n                            // 原生广告遍历完毕\r\n                            utils.showLog(\"原生广告条遍历完毕，无法展示！\");\r\n                            let bannerInfo = this.getNativeBannerInfo();\r\n                            if (bannerInfo.st_banner_show_back_up == -1) {\r\n                                utils.showLog(\">>>>>服务器配置不显示备用广告！\");\r\n                                return;\r\n                            }\r\n                            if (this.ServerConfig.banner_first_ad == \"native\") {\r\n                                utils.showLog(\"开始展示小游戏广告条！\")\r\n                                this._createMiniGameBannerAd();\r\n                            }\r\n                        }\r\n\r\n                    });\r\n\r\n                    let adLoad = nativeBannerAd.load();\r\n                    adLoad && adLoad.then((res) => {\r\n                        console.log(\"res\", JSON.stringify(res));\r\n                    }).catch(err => {\r\n                        utils.showLog(\"原生Banner广告资源拉取失败！\" + JSON.stringify(err));\r\n                        if (this._nativeIsClose) {\r\n                            utils.showLog(\"隐藏了BANNER，不做任何处理！\");\r\n                            return;\r\n                        }\r\n                        this._curPosIdIndexNativeBanner++;\r\n                        if (this._curPosIdIndexNativeBanner < utils.config.vivoconfig.nativeBannerIds.length) {\r\n                            this._createNativeBannerAd(callback);\r\n                        } else {\r\n                            this._curPosIdIndexNativeBanner = 0;\r\n                            // 原生广告遍历完毕\r\n                            utils.showLog(\"原生广告条遍历完毕，无法展示！\");\r\n                            let bannerInfo = this.getNativeBannerInfo();\r\n                            if (bannerInfo.st_banner_show_back_up == -1) {\r\n                                utils.showLog(\">>>>>服务器配置不显示备用广告！\");\r\n                                return;\r\n                            }\r\n                            if (this.ServerConfig.banner_first_ad == \"native\") {\r\n                                utils.showLog(\"开始展示小游戏广告条！\")\r\n                                this._createMiniGameBannerAd();\r\n                            }\r\n                        }\r\n                    })\r\n                } else {\r\n                    this._curPosIdIndexNativeBanner++;\r\n                    if (utils.config.vivoconfig.nativeBannerIds && this._curPosIdIndexNativeBanner < utils.config.vivoconfig.nativeBannerIds.length) {\r\n                        this._createNativeBannerAd(callback);\r\n                    } else {\r\n                        this._curPosIdIndexNativeBanner = 0;\r\n                        // 原生广告遍历完毕\r\n                        utils.showLog(\"原生广告条遍历完毕，无法展示！\");\r\n                        let bannerInfo = this.getNativeBannerInfo();\r\n                        if (bannerInfo.st_banner_show_back_up == -1) {\r\n                            utils.showLog(\">>>>>服务器配置不显示备用广告！\");\r\n                            return;\r\n                        }\r\n                        if (this.ServerConfig.banner_first_ad == \"native\") {\r\n                            utils.showLog(\"开始展示小游戏广告条！\")\r\n                            this._createMiniGameBannerAd();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    _createNativeInsertAd(completeCallback: Function) {\r\n        if (PlatUtils.IsVIVO) {\r\n            //@ts-ignore\r\n            if (!qg.isSupportNativeAd) {\r\n                utils.showLog(\"当前引擎不支持原生插屏广告！\");\r\n                return;\r\n            }\r\n            let callback = completeCallback;\r\n\r\n            utils.showLog(\"curPosIdIndexNativeInsert:\" + this._curPosIdIndexNativeInser);\r\n\r\n\r\n\r\n            if (utils.config.vivoconfig.nativeInsertIds\r\n                && utils.config.vivoconfig.nativeInsertIds[this._curPosIdIndexNativeInser]) {\r\n                utils.showLog(\"创建原生插屏广告。 posId:\" + utils.config.vivoconfig.nativeInsertIds[this._curPosIdIndexNativeInser]);\r\n                //@ts-ignore\r\n                let nativeInsertAd = qg.createNativeAd({\r\n                    posId: utils.config.vivoconfig.nativeInsertIds[this._curPosIdIndexNativeInser]\r\n                });\r\n\r\n                if (nativeInsertAd) {\r\n                    // this._nativeInsertAd.push(nativeInsertAd);\r\n\r\n                    nativeInsertAd.onLoad((res) => {\r\n                        if (res && res.adList && res.adList.length > 0) {\r\n                            utils.showLog(\"原生插屏广告资源拉取成功！\");\r\n                            utils.showLog(JSON.stringify(res));\r\n                            res = JSON.parse(JSON.stringify(res));\r\n                            let data = res.adList[0];\r\n                            if (this._checkNativeInsertDataValid(data)) {\r\n\r\n                                this._curPosIdIndexNativeInser = 0;\r\n                                this._showNativeInsert(nativeInsertAd, data);\r\n                                return;\r\n                            } else {\r\n                                utils.showLog(\"原生插屏广告资源不合法！\");\r\n                            }\r\n                        }\r\n\r\n                        utils.showLog(\"原生插屏广告资源出错！\");\r\n                        this._curPosIdIndexNativeInser++;\r\n                        if (this._curPosIdIndexNativeInser < utils.config.vivoconfig.nativeInsertIds.length) {\r\n                            this._createNativeInsertAd(callback);\r\n                        } else {\r\n                            this._curPosIdIndexNativeInser = 0;\r\n                            // 原生广告遍历完毕\r\n                            utils.showLog(\"原生插屏广告遍历完毕，无法展示！\");\r\n                            if (this.ServerConfig.intersititial_first_ad == \"native\") {\r\n                                utils.showLog(\"开始展示小游戏插屏广告!\");\r\n                                this._createMiniGameInsertAd();\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                    nativeInsertAd.onError((err) => {\r\n                        utils.showLog(\"原生插屏广告创建失败！\" + JSON.stringify(err));\r\n                    });\r\n\r\n                    let adLoad = nativeInsertAd.load();\r\n                    adLoad && adLoad.then((res) => {\r\n                        console.log(\"res\", JSON.stringify(res));\r\n                    }).catch(err => {\r\n                        utils.showLog(\"原生插屏广告资源拉取失败！\" + JSON.stringify(err));\r\n                        this._curPosIdIndexNativeInser++;\r\n                        if (this._curPosIdIndexNativeInser < utils.config.vivoconfig.nativeInsertIds.length) {\r\n                            this._createNativeInsertAd(callback);\r\n                        } else {\r\n                            this._curPosIdIndexNativeInser = 0;\r\n                            // 原生广告遍历完毕\r\n                            utils.showLog(\"原生插屏广告遍历完毕，无法展示！\");\r\n                            if (this.ServerConfig.intersititial_first_ad == \"native\") {\r\n                                utils.showLog(\"开始展示小游戏插屏广告!\");\r\n                                this._createMiniGameInsertAd();\r\n                            }\r\n                        }\r\n                    })\r\n                } else {\r\n                    this._curPosIdIndexNativeInser++;\r\n                    if (utils.config.vivoconfig.nativeInsertIds && this._curPosIdIndexNativeInser < utils.config.vivoconfig.nativeInsertIds.length) {\r\n                        this._createNativeInsertAd(callback);\r\n                    } else {\r\n                        this._curPosIdIndexNativeInser = 0;\r\n                        // 原生广告遍历完毕\r\n                        utils.showLog(\"原生插屏广告遍历完毕，无法展示！\");\r\n                        if (this.ServerConfig.intersititial_first_ad == \"native\") {\r\n                            utils.showLog(\"开始展示小游戏插屏广告!\");\r\n                            this._createMiniGameInsertAd();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 显示原生banner组件\r\n     */\r\n    _showNativeBanner(nativeBannerAd: any, data: any) {\r\n        if (PlatUtils.IsVIVO) {\r\n            if (data) {\r\n                utils.showLog(\"显示原生banner\");\r\n\r\n                if (cc.isValid(this._nativeBannerNode) && this._nativeBannerNode) {\r\n                    this._nativeBannerNode.destroy();\r\n                }\r\n\r\n\r\n                // if (!cc.isValid(this._nativeBannerNode) || (!this._nativeBannerNode && utils.config.otherconfig.nativeBanner)) {\r\n                utils.showLog(\"创建原生广告banner位\");\r\n                this._nativeBannerNode = cc.instantiate(utils.config.otherconfig.nativeBanner);\r\n                this._nativeBannerNode.position = CompatibleTool.position(cc.winSize.width / 2, this._nativeBannerNode.height * this._nativeBannerNode.scaleY / 2);\r\n                cc.director.getScene().addChild(this._nativeBannerNode, 1000);\r\n                // }\r\n\r\n                if (this._nativeBannerNode) {\r\n                    this._nativeBannerNode.active = true;\r\n                    let nativeBanner: YZ_NativeBanner = this._nativeBannerNode.getComponent(\"YZ_NativeBanner\");\r\n                    if (nativeBanner) {\r\n                        nativeBanner.init(nativeBannerAd, data, this.getNativeBannerInfo());\r\n                    } else {\r\n                        utils.showLog(\"NativeBanner组件不存在!\");\r\n                    }\r\n                } else {\r\n                    utils.showLog(\"原生广告banner位没有创建！\");\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 显示原生插屏组件\r\n     */\r\n    _showNativeInsert(nativeInsertAd: any, data: any) {\r\n        if (PlatUtils.IsVIVO) {\r\n            if (data) {\r\n                utils.showLog(\"显示原生插屏\");\r\n                if ((!cc.isValid(this._nativeInsertNode)) || !this._nativeInsertNode && utils.config.otherconfig.nativeInsert) {\r\n                    utils.showLog(\"创建原生插屏广告位\");\r\n                    this._nativeInsertNode = cc.instantiate(utils.config.otherconfig.nativeInsert);\r\n                    this._nativeInsertNode.position = CompatibleTool.position(cc.winSize.width / 2, cc.winSize.height / 2);\r\n                    cc.director.getScene().addChild(this._nativeInsertNode, 9999);\r\n                }\r\n\r\n                if (this._nativeInsertNode) {\r\n                    let nativeInsert = this._nativeInsertNode.getComponent(\"YZ_NativeInsert\");\r\n                    if (nativeInsert) {\r\n                        this._nativeInsertAdShowCount = 0;\r\n                        nativeInsert.init(nativeInsertAd, data);\r\n                    } else {\r\n                        utils.showLog(\"NativeInsert组件不存在!\");\r\n                    }\r\n                } else {\r\n                    utils.showLog(\"原生广告插屏位没有创建！\");\r\n                }\r\n\r\n                if (!this.ServerConfig.show_insert_hide_banner || this.ServerConfig.show_insert_hide_banner != \"false\") {\r\n                    utils.showLog(\"原生广告插屏展示后隐藏Banner！\");\r\n                    this.HideBanner();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    public ShowCloseBtnBanner(location: BannerLocation = BannerLocation.Home, args: any) {\r\n        utils.showLog(\"ShowCloseBtnBanner >>>>>>>>>.\");\r\n\r\n        let isMoveBtn = 0;\r\n        let btn = args.closeBtn;\r\n        let winHeight = cc.winSize.height;\r\n        if (this.ServerConfig) {\r\n            if (this.ServerConfig.is_move_btn) {\r\n                isMoveBtn = this.ServerConfig.is_move_btn;\r\n            }\r\n            utils.showLog(isMoveBtn == 0 ? \"显示banner,且按钮在上面\" : `显示Banner,按钮居底部且${isMoveBtn}毫秒后移动`);\r\n            // if (!isMoveBtn || isMoveBtn == 0) {\r\n            //     btn.y = -(winHeight / 2) + btn.height;\r\n            //     this.ShowBanner(location, args);\r\n            // } else {\r\n            setTimeout(() => {\r\n                // if (!this._bannerIsHide) {\r\n                utils.showLog(\"延迟调用关闭按钮的Banner >>>>\");\r\n                this.ShowBanner(location, args);\r\n                // } else {\r\n                //     utils.showLog(\"当前Banner为隐藏状态，关闭按钮的Banner不显示 >>>>\");\r\n                // }\r\n                var adY = 240;\r\n                utils.showLog('utils - adY:' + adY);\r\n                if (adY > 0 && btn) {\r\n                    btn.y = -(winHeight / 2 - adY) + btn.height;\r\n                    utils.showLog(\"btnClose.y\" + btn.y);\r\n                }\r\n            }, isMoveBtn);\r\n\r\n\r\n            // }\r\n        }\r\n    }\r\n\r\n\r\n    // {\"adList\":[{\"adId\":0,\"title\":\"快手\",\"desc\":\"手机总是这么卡，如何解决\",\"icon\":\"http://imgwsdl.vivo.com.cn/appstore/developer/icon/20190918/201909181113001599041.png\",\r\n    // \"imgUrlList\":[\"http://ads-marketing-vivofs.vivo.com.cn/NtBrJ9dueygDLoz8/material/201908/78707646401346ca9fc8398ff79850d220190809.jpg\"],\r\n    // \"logoUrl\":\"\",\"creativeType\":0,\"interactionType\":2},\r\n    // {\"adId\":1,\"title\":\"快手\",\"desc\":\"手机总是这么卡，如何解决\",\"icon\":\"http://imgwsdl.vivo.com.cn/appstore/developer/icon/20190918/201909181113001599041.png\",\r\n    // \"imgUrlList\":[\"http://ads-marketing-vivofs.vivo.com.cn/NtBrJ9dueygDLoz8/material/201908/78707646401346ca9fc8398ff79850d220190809.jpg\"],\"logoUrl\":\"\",\"creativeType\":0,\"interactionType\":2},\r\n    // {\"adId\":2,\"title\":\"快手\",\"desc\":\"手机总是这么卡，如何解决\",\"icon\":\"http://imgwsdl.vivo.com.cn/appstore/developer/icon/20190918/201909181113001599041.png\",\"imgUrlList\":[\"http://ads-marketing-vivofs.vivo.com.cn/NtBrJ9dueygDLoz8/material/201908/78707646401346ca9fc8398ff79850d220190809.jpg\r\n    _checkNativeDataValid(data: any) {\r\n        if (!data) {\r\n            return false;\r\n        }\r\n\r\n        return (data.icon || (data.imgUrlList && data.imgUrlList.length > 0));\r\n    }\r\n    _checkNativeInsertDataValid(data: any) {\r\n        if (!data) {\r\n            return false;\r\n        }\r\n        return (data.icon || (data.imgUrlList && data.imgUrlList.length > 0));\r\n    }\r\n\r\n\r\n    _checkNativeSignDataValid(data: any) {\r\n        if (!data) {\r\n            return false;\r\n        }\r\n        return (data.imgUrlList && data.imgUrlList.length > 0);\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    _nativeTryGameNode: cc.Node = null;\r\n    /**\r\n     * 显示浮窗广告挂件\r\n     * @param params \r\n     * ```\r\n     * {\r\n     * group:string\r\n     * left:number\r\n     * bottom:number\r\n     * scale:number\r\n     * parent:cc.Node\r\n     * }\r\n     * ```\r\n     * @returns 生成的组件\r\n     */\r\n    public createNativeTryGameWidget(params: any = null) {\r\n\r\n        if (this._nativeTryGameNode && cc.isValid(this._nativeTryGameNode)) {\r\n            this._nativeTryGameNode.destroy();\r\n        }\r\n        let node = cc.instantiate(utils.config.otherconfig.nativeTryGameWidget);\r\n        if (node) {\r\n            this._nativeTryGameNode = node;\r\n            this._nativeTryGameNode.zIndex = 9999;\r\n\r\n        }\r\n        node = this._nativeTryGameNode;\r\n        let widget: cc.Widget = node.getComponent(cc.Widget);\r\n        if (params) {\r\n            if (params.group) {\r\n                node.group = params.group;\r\n            }\r\n            if (params.scale != null) {\r\n                node.scale = params.scale;\r\n            }\r\n            if (params.top != null) {\r\n                widget.isAlignTop = true;\r\n                widget.isAlignBottom = false;\r\n                widget.top = params.top;\r\n            } else if (params.bottom != null) {\r\n                widget.isAlignTop = false;\r\n                widget.isAlignBottom = true;\r\n                widget.bottom = params.bottom;\r\n            }\r\n            if (params.left != null) {\r\n                widget.isAlignLeft = true;\r\n                widget.isAlignRight = false;\r\n                widget.left = params.left;\r\n            } else if (params.right != null) {\r\n                widget.isAlignLeft = false;\r\n                widget.isAlignRight = true;\r\n                widget.right = params.right;\r\n            }\r\n            if (params.parent != null) {\r\n                node.parent = params.parent;\r\n            }\r\n        }\r\n        widget.updateAlignment();\r\n        node.active = true;\r\n        if (this._nativeTryGameNode) {\r\n            this._nativeTryGameNode.getComponent(NativeTryGamesWidget).init();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 隐藏浮动试玩挂件\r\n     */\r\n    public hideNativeTryGameWidget() {\r\n        if (this._nativeTryGameNode && cc.isValid(this._nativeTryGameNode)) {\r\n            this._nativeTryGameNode.destroy();\r\n        }\r\n    }\r\n\r\n\r\n    signleNativeAd: cc.Node = null;\r\n    /**\r\n     * 创建结算页面推广组件\r\n     */\r\n    public ShowSingleNativeAd(params?: any) {\r\n\r\n        if (utils.config.otherconfig.singleNativeAd) {\r\n            if (this.signleNativeAd && cc.isValid(this.signleNativeAd)) {\r\n                this.signleNativeAd.destroy();\r\n            }\r\n            this.signleNativeAd = cc.instantiate(utils.config.otherconfig.singleNativeAd);\r\n\r\n            let nativeItem: YZ_NativeItem = this.signleNativeAd.getComponent(\"YZ_NativeItem\");\r\n            nativeItem.showType = 2;\r\n            nativeItem.params = params;\r\n            this._curNativeItem = nativeItem;\r\n\r\n            if (params && params.parent) {\r\n                params.parent.addChild(this.signleNativeAd, cc.macro.MAX_ZINDEX);\r\n            }\r\n            this.createNativeAd();\r\n            utils.showLog(\"单个原生广告创建成功！\");\r\n            return this.signleNativeAd;\r\n        } else {\r\n            utils.showLog(\"未找到预制体 singleNativeAd, 请查看CommonUtils组件上是否赋值！\");\r\n            return null;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    _singleAdCreateTime: number = 0;\r\n\r\n\r\n    /**\r\n     * 创建单个原生广告\r\n     * @param completeCallback \r\n     */\r\n    createNativeAd(params: any = null, nativeItem?: YZ_NativeItem) {\r\n        utils.showLog(\"_createNativeAd >>>>>\");\r\n        if (PlatUtils.IsVIVO) {\r\n            if (nativeItem) {\r\n                this._curNativeItem = nativeItem;\r\n            }\r\n\r\n            let refreshTime = this.ServerConfig.st_native_ad_refresh_time ? this.ServerConfig.st_native_ad_refresh_time : 0;\r\n            if (this._nativeAdObject && this._nativeAdObject.data && !this._nativeAdObject.is_reportClick && (new Date().getTime() - this._singleAdCreateTime) / 1000 < refreshTime) {\r\n                utils.showLog(`当前原生广告的展示时间${(new Date().getTime() - this._singleAdCreateTime) / 1000}秒，未达刷新时间${refreshTime}秒限制，直接使用上一次数据！`);\r\n                this._showNativeAd();\r\n                return;\r\n            }\r\n\r\n            utils.showLog(\"_curPosIdIndexSingleNative:\" + this._curPosIdIndexSingleNative + \"  #this._nativeSingleAd.length\" + this._nativeSingleAd.length);\r\n\r\n            let nativeSingleAd = this._nativeSingleAd[this._curPosIdIndexSingleNative];\r\n            if (!nativeSingleAd) {\r\n\r\n                if (utils.config.vivoconfig.nativeSingleAdIds\r\n                    && utils.config.vivoconfig.nativeSingleAdIds[this._curPosIdIndexSingleNative]) {\r\n                    utils.showLog(\"创建原生广告。 posId:\" + utils.config.vivoconfig.nativeSingleAdIds[this._curPosIdIndexSingleNative]);\r\n                    //@ts-ignore\r\n                    nativeSingleAd = qg.createNativeAd({\r\n                        posId: utils.config.vivoconfig.nativeSingleAdIds[this._curPosIdIndexSingleNative]\r\n                    });\r\n\r\n                    if (nativeSingleAd) {\r\n                        this._nativeSingleAd.push(nativeSingleAd);\r\n\r\n                        nativeSingleAd.onLoad((res) => {\r\n                            if (res && res.adList && res.adList.length > 0) {\r\n                                utils.showLog(\"原生广告资源拉取成功！\");\r\n                                utils.showLog(JSON.stringify(res));\r\n                                res = JSON.parse(JSON.stringify(res));\r\n                                let data = res.adList[0];\r\n                                if (this._checkNativeSignDataValid(data)) {\r\n                                    this._singleAdCreateTime = new Date().getTime();\r\n                                    this._curPosIdIndexSingleNative = 0;\r\n                                    this._nativeData = data;\r\n                                    this._nativeAd = nativeSingleAd;\r\n                                    // utils.showLog(\"callback >>>\", callback);\r\n                                    // callback(this.getNativeAdData());\r\n                                    this._showNativeAd();\r\n                                    return;\r\n                                } else {\r\n                                    utils.showLog(\"原生广告资源不合法！\");\r\n                                }\r\n                            }\r\n\r\n                            utils.showLog(\"原生广告资源出错！\");\r\n                            this._curPosIdIndexSingleNative++;\r\n                            if (this._curPosIdIndexSingleNative < utils.config.vivoconfig.nativeSingleAdIds.length) {\r\n                                this.createNativeAd();\r\n                            } else {\r\n                                this._curPosIdIndexSingleNative = 0;\r\n                                // 原生广告遍历完毕\r\n                                utils.showLog(\"单个原生广告ID遍历完毕，无法展示！\");\r\n                            }\r\n                        });\r\n\r\n                        nativeSingleAd.onError((err) => {\r\n                            utils.showLog(\"原生单个广告资源拉取失败！\" + err.code + err.msg);\r\n                            this._curPosIdIndexSingleNative++;\r\n                            if (this._curPosIdIndexSingleNative < utils.config.vivoconfig.nativeSingleAdIds.length) {\r\n                                this.createNativeAd();\r\n                            } else {\r\n                                this._curPosIdIndexSingleNative = 0;\r\n                                // 原生广告遍历完毕\r\n                                utils.showLog(\"单个原生广告ID遍历完毕，无法展示！\");\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (nativeSingleAd) {\r\n                utils.showLog(\"nativeSingleAd reload\");\r\n                nativeSingleAd.load();\r\n            } else {\r\n                this._curPosIdIndexSingleNative++;\r\n                if (utils.config.vivoconfig.nativeSingleAdIds && this._curPosIdIndexSingleNative < utils.config.vivoconfig.nativeSingleAdIds.length) {\r\n                    this.createNativeAd();\r\n                } else {\r\n                    this._curPosIdIndexSingleNative = 0;\r\n                    // 原生广告遍历完毕\r\n                    utils.showLog(\"单个原生广告ID 遍历完毕，无法展示！\");\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    _showNativeAd() {\r\n        if (this._curNativeItem && cc.isValid(this._curNativeItem.node)) {\r\n            this._curNativeItem.init(this.getNativeAdData());\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * 获取原生广告数据\r\n     * @param args \r\n     */\r\n    getNativeAdData() {\r\n        if (!this._nativeAdObject) {\r\n            this._nativeAdObject = new YZ_NativeAdObject();\r\n        }\r\n        this._nativeAdObject._nativeObj = this._nativeAd;\r\n        if (this._nativeAdObject.data) {\r\n            if (this._nativeAdObject.data.adId != this._nativeData.adId) {\r\n                this._nativeAdObject.is_reportClick = false;\r\n                this._nativeAdObject.is_reportShow = false;\r\n            }\r\n        }\r\n        this._nativeAdObject.data = this._nativeData;\r\n\r\n\r\n        // setTimeout(() => {\r\n        //     utils.showLog(\"延迟两秒重新请求原生广告数据\");\r\n        //     this._createNativeAd(args);\r\n        // }, 2000);\r\n        if (this._nativeData && this._nativeAd) {\r\n            // this._nativeData = null;\r\n            utils.showLog(\"获取原生数据 >>>\", this._nativeData, \"...\", this._nativeAdObject)\r\n            return this._nativeAdObject;\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n\r\n\r\n    _customAd: any = null;\r\n\r\n    _refreshCustomAdTimerTask = null;\r\n\r\n    _isHide: boolean = false;\r\n\r\n    _lastLocation: string = \"\";\r\n    /**\r\n     * 显示模版广告\r\n     * @param parmas \r\n     */\r\n    public showCustomAd(parme?: any) {\r\n\r\n\r\n        if (utils.config.vivoconfig.customAdInfos.length <= 0) {\r\n            utils.showLog(\"服务器配置未配置模版广告！\");\r\n            return;\r\n        }\r\n\r\n\r\n        //@ts-ignore\r\n        if (qg.createCustomAd) {\r\n            clearTimeout(this._refreshCustomAdTimerTask);\r\n\r\n\r\n            let customAdInfo = utils.config.vivoconfig.getCustomAdInfoInfo(parme.location);\r\n            utils.showLog(\"当前位置 obj >>>\", customAdInfo.customAdObj);\r\n\r\n            if (customAdInfo.is_show_ad != \"true\") {\r\n                utils.showLog(\"当前位置服务器配置为不显示模版广告！\");\r\n                return;\r\n            }\r\n            if (this._lastLocation != parme.location) {\r\n                this.hideCustomAd();\r\n            }\r\n            if (customAdInfo.customAdObj != null) {\r\n                this._customAd = customAdInfo.customAdObj;\r\n                if (!customAdInfo.customAdObj.isShow()) {\r\n                    utils.showLog(\"当前位置上次展示过原生模版，当前重新显示出来！\");\r\n                    customAdInfo.customAdObj.show().then(() => {\r\n                        if (customAdInfo.hide_banner == \"true\") {\r\n                            this.HideBanner();\r\n                        }\r\n                        utils.showLog(\"重新展示成功！\");\r\n                    }).catch((err) => {\r\n                        customAdInfo.customAdObj.destroy();\r\n                        customAdInfo.customAdObj = null;\r\n                        utils.showLog('重新展示原生模板广告失败', JSON.stringify(err));\r\n                        this.showCustomAd(parme);\r\n                    });\r\n                } else {\r\n                    utils.showLog(\"当前位置的模版正在显示中，不执行加载！\");\r\n                }\r\n                if (customAdInfo.refresh_time > 0) {\r\n                    this._refreshCustomAdTimerTask = setTimeout(() => {\r\n                        utils.showLog(`定时${customAdInfo.refresh_time}秒刷新原生模版`);\r\n                        this.showCustomAd(parme)\r\n                    }, customAdInfo.refresh_time * 1000);\r\n                }\r\n                return;\r\n            }\r\n\r\n\r\n\r\n            this._lastLocation = parme.location;\r\n            this._isHide = false;\r\n            let style: any = {};\r\n            if (customAdInfo.top > 0) {\r\n                style.top = customAdInfo.top / cc.winSize.height * this.SysInfo.screenHeight;\r\n            } else if (customAdInfo.bottom > 0) {\r\n                style.top = this.SysInfo.screenHeight - customAdInfo.height - customAdInfo.bottom / cc.winSize.height * this.SysInfo.screenHeight;\r\n            }\r\n            if (customAdInfo.left > 0) {\r\n                style.left = customAdInfo.left / cc.winSize.width * this.SysInfo.screenWidth;\r\n            } else if (customAdInfo.right > 0) {\r\n                style.left = this.SysInfo.screenWidth - customAdInfo.width - customAdInfo.right / cc.winSize.width * this.SysInfo.screenWidth;\r\n            }\r\n            utils.showLog(\"custom ad style>>\" + JSON.stringify(style));\r\n            //@ts-ignore\r\n            var _customAd = qg.createCustomAd({\r\n                posId: customAdInfo.id,\r\n                style: style\r\n            });\r\n\r\n\r\n            _customAd.onError(err => {\r\n                try {\r\n                    utils.showLog(\"原生模板广告加载失败\", JSON.stringify(err));\r\n                } catch (erro) {\r\n                    console.log(\"模版异常：#errMsg=\" + erro);\r\n                }\r\n            });\r\n\r\n            _customAd.onClose(() => {\r\n                utils.showLog(\"原生模板广告 onClose\");\r\n                _customAd.destroy();\r\n                _customAd = null;\r\n                customAdInfo.customAdObj = null;\r\n            })\r\n\r\n            _customAd.onLoad(() => {\r\n                _customAd.offLoad();\r\n                utils.showLog(\"原生模板广告加载成功！\");\r\n                this._customAd = _customAd;\r\n                customAdInfo.customAdObj && customAdInfo.customAdObj.destroy();\r\n                customAdInfo.customAdObj = _customAd;\r\n                if (!this._isHide) {\r\n                    _customAd.show().then(() => {\r\n                        if (customAdInfo.hide_banner == \"true\") {\r\n                            this.HideBanner();\r\n                        }\r\n                        utils.showLog('原生模板广告展示完成！');\r\n                    }).catch((err) => {\r\n                        utils.showLog('原生模板广告展示失败', JSON.stringify(err));\r\n                    })\r\n                } else {\r\n                    utils.showLog('原生模板广告调用了隐藏，当前广告不显示！');\r\n                }\r\n            });\r\n\r\n\r\n            if (customAdInfo.refresh_time > 0) {\r\n                this._refreshCustomAdTimerTask = setTimeout(() => {\r\n                    utils.showLog(`定时${customAdInfo.refresh_time}秒刷新原生模版`);\r\n                    this.showCustomAd(parme)\r\n                }, customAdInfo.refresh_time * 1000);\r\n            }\r\n        } else {\r\n            utils.showLog(\"当前平台不支持原生模版广告！\");\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 显示模版广告\r\n     * @param parmas \r\n     */\r\n    public showCustomAdV2(parme?: any) {\r\n\r\n\r\n        if (utils.config.vivoconfig.customAdInfos.length <= 0) {\r\n            utils.showLog(\"服务器配置未配置模版广告！\");\r\n            return;\r\n        }\r\n\r\n\r\n        //@ts-ignore\r\n        if (qg.createCustomAd) {\r\n            clearTimeout(this._refreshCustomAdTimerTask);\r\n\r\n\r\n            let customAdInfo = utils.config.vivoconfig.getCustomAdInfoInfo(parme.location);\r\n            utils.showLog(\"当前位置的广告对象 >>>\", customAdInfo.customAdObj);\r\n\r\n            if (customAdInfo.is_show_ad != \"true\") {\r\n                utils.showLog(\"当前位置服务器配置为不显示模版广告！\");\r\n                return;\r\n            }\r\n\r\n            var isRefresh = true;\r\n            if (this._lastLocation != parme.location) {\r\n                this.hideCustomAd();\r\n            } else {\r\n                if (customAdInfo.customAdObj != null) {\r\n                    if (!customAdInfo.customAdObj.isShow()) {\r\n                        utils.showLog(\"当前位置上次展示过原生模版，当前重新显示出来！\");\r\n                        isRefresh = false;\r\n                        customAdInfo.customAdObj.show().then(() => {\r\n                            if (customAdInfo.hide_banner == \"true\") {\r\n                                this.HideBanner();\r\n                            }\r\n                            utils.showLog(\"重新展示成功！\");\r\n                        }).catch((err) => {\r\n                            isRefresh = true;\r\n                            customAdInfo.customAdObj.destroy();\r\n                            customAdInfo.customAdObj = null;\r\n                            utils.showLog('重新展示原生模板广告失败', JSON.stringify(err));\r\n                            // this.showCustomAd(parme);\r\n                        });\r\n                    } else {\r\n                        utils.showLog(\"当前位置的模版正在显示中，不执行加载！\");\r\n                    }\r\n                    // if (customAdInfo.refresh_time > 0) {\r\n                    //     this._refreshCustomAdTimerTask = setTimeout(() => {\r\n                    //         utils.showLog(`定时${customAdInfo.refresh_time}秒刷新原生模版`);\r\n                    //         this.showCustomAd(parme)\r\n                    //     }, customAdInfo.refresh_time * 1000);\r\n                    // }\r\n                    // return;\r\n                }\r\n            }\r\n\r\n\r\n            this._lastLocation = parme.location;\r\n            this._isHide = false;\r\n            let style: any = {};\r\n            if (customAdInfo.top > 0) {\r\n                style.top = customAdInfo.top / cc.winSize.height * this.SysInfo.screenHeight;\r\n            } else if (customAdInfo.bottom > 0) {\r\n                style.top = this.SysInfo.screenHeight - customAdInfo.height - customAdInfo.bottom / cc.winSize.height * this.SysInfo.screenHeight;\r\n            }\r\n            if (customAdInfo.left > 0) {\r\n                style.left = customAdInfo.left / cc.winSize.width * this.SysInfo.screenWidth;\r\n            } else if (customAdInfo.right > 0) {\r\n                style.left = this.SysInfo.screenWidth - customAdInfo.width - customAdInfo.right / cc.winSize.width * this.SysInfo.screenWidth;\r\n            }\r\n            utils.showLog(\"custom ad style>>\" + JSON.stringify(style));\r\n            //@ts-ignore\r\n            var _customAd = qg.createCustomAd({\r\n                posId: customAdInfo.id,\r\n                style: style\r\n            });\r\n\r\n\r\n            _customAd.onError(err => {\r\n                try {\r\n                    utils.showLog(\"原生模板广告加载失败\", JSON.stringify(err));\r\n                } catch (erro) {\r\n                    console.log(\"模版异常：#errMsg=\" + erro);\r\n                }\r\n            });\r\n\r\n            _customAd.onClose(() => {\r\n                utils.showLog(\"原生模板广告 onClose\");\r\n                _customAd.destroy();\r\n                _customAd = null;\r\n                customAdInfo.customAdObj = null;\r\n            })\r\n\r\n            _customAd.onLoad(() => {\r\n\r\n                utils.showLog(\"原生模板广告加载成功！\");\r\n                this._customAd = _customAd;\r\n                customAdInfo.customAdObj && customAdInfo.customAdObj.destroy();\r\n                customAdInfo.customAdObj = _customAd;\r\n                if (!this._isHide && isRefresh) {\r\n                    _customAd.show().then(() => {\r\n                        if (customAdInfo.hide_banner == \"true\") {\r\n                            this.HideBanner();\r\n                        }\r\n                        utils.showLog('原生模板广告展示完成！');\r\n                    }).catch((err) => {\r\n                        utils.showLog('原生模板广告展示失败', JSON.stringify(err));\r\n                    })\r\n                } else {\r\n                    utils.showLog('原生模板广告调用了隐藏或者当前不刷新广告，当前广告不显示！');\r\n                }\r\n            });\r\n\r\n\r\n            if (customAdInfo.refresh_time > 0) {\r\n                this._refreshCustomAdTimerTask = setTimeout(() => {\r\n                    utils.showLog(`定时${customAdInfo.refresh_time}秒刷新原生模版`);\r\n                    this.showCustomAd(parme)\r\n                }, customAdInfo.refresh_time * 1000);\r\n            }\r\n        } else {\r\n            utils.showLog(\"当前平台不支持原生模版广告！\");\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 隐藏模版广告\r\n     */\r\n    public hideCustomAd() {\r\n        this._isHide = true;\r\n        clearTimeout(this._refreshCustomAdTimerTask);\r\n        if (this._customAd) {\r\n            this._customAd.hide();\r\n        }\r\n    }\r\n\r\n\r\n}"]}