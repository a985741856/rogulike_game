{"version":3,"sources":["assets\\common-plugin\\Scripts\\YZ_Tool_QTT.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import PlatUtils from \"./PlatUtils\";\r\nimport { utils } from \"./Utils\";\r\nimport YZ_Constant, { LevelStatus } from \"./YZ_Constant\";\r\nimport YZ_LocalStorage from \"./YZ_LocalStorage\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n\r\nlet ST_DefaultServerConfig: string = \"\";\r\nconst ST_ServerUrl: string = \"http://apps.youlesp.com/gss?\";\r\nconst POST_ServerUrl: string = \"http://report.youlesp.com/gss?\";\r\n//@ts-ignore\r\nconst md5 = require('./md5.js');\r\nconst QTT_ServerUrl: string = \"https://newidea4-gamecenter-backend.1sapp.com/x/open/user/ticket?\"\r\nconst QTT_Report: string = \"https://newidea4-gamecenter-backend.1sapp.com/x/open/report/round\"\r\n/**\r\n * 趣头条工具类\r\n */\r\n@ccclass\r\nexport default class YZ_Tool_QTT {\r\n    /**\r\n        * 平台标示 \r\n        */\r\n    platForm: string = \"\";\r\n\r\n    //@ts-ignore\r\n    qttGame = window.qttGame;\r\n    _serverConfig: any = null;\r\n    public get ServerConfig() {\r\n        return this._serverConfig;\r\n    }\r\n    /**\r\n     * 用户临时标示\r\n     */\r\n    ticket: string = \"\";\r\n\r\n    _ip: string = \"192.168.0.1\";\r\n    _sign: string = \"\";\r\n    /**\r\n     * 服务器地址\r\n     */\r\n    private serverPath: string = \"http://apps.youlesp.com/gss?\";\r\n\r\n\r\n    //设备UID\r\n    _uid: string = \"0\";\r\n\r\n    public get uid() {\r\n        if (this._service_uid != \"0\") return this._uid;\r\n        this._login();\r\n        return \"0\";\r\n    }\r\n\r\n    //服务器返回UID\r\n    _service_uid: string = \"0\";\r\n\r\n    /**\r\n     * 服务器返回UID\r\n     */\r\n    public get serviceId() {\r\n        if (this._service_uid != \"0\") return this._service_uid;\r\n        this.reportLogin();\r\n        return \"0\";\r\n    }\r\n\r\n\r\n    _loginTime: number = 0;\r\n    _loginInterval: number = 30;\r\n    async _login() {\r\n\r\n        let curTime: number = new Date().getTime();\r\n        let interval: number = (curTime - this._loginTime) / 1000;\r\n        if (interval > 0 && interval < 30) {\r\n            utils.showLog(`登录请求间隔小于：${this._loginInterval}秒`);\r\n            return;\r\n        }\r\n        this._loginTime = curTime;\r\n        let self = this;\r\n        utils.showLog(\"qtt暂时不获取uid，uid全部为0\");\r\n        this._uid = \"0\";\r\n        let url = this.getUrl();\r\n        console.log(\"qtt获取用户的地址为：\" + url)\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.timeout = 6000;    // 单位毫秒\r\n        xhr.open('get', url);\r\n        xhr.send();\r\n        xhr.onreadystatechange = function () {\r\n            utils.showLog(\"请求状态改变, reaedyState=\", xhr.readyState, \"; status=\", xhr.status);\r\n            if (xhr.readyState == 4 && xhr.status == 200) {\r\n                console.log(\"请求成功\");\r\n                console.log(xhr.responseText);\r\n                let msg = xhr.responseText\r\n                let result = JSON.parse(msg);\r\n                console.log(result)\r\n                utils.showLog(\"获取数据成功1\");\r\n                self._uid = result.data.open_id;\r\n                self.postServerData(QTT_REPORT_TYPE.ready);\r\n                YZ_LocalStorage.setItem(YZ_Constant.ST_UID, self._uid);\r\n                console.log(self._uid)\r\n            }\r\n\r\n            if (xhr.status != 200) {\r\n\r\n            }\r\n        }\r\n        xhr.ontimeout = function () {\r\n            utils.showLog(\"请求超时!\");\r\n        }\r\n        xhr.onerror = function (err) {\r\n            utils.showLog(\"请求出错! err=\", JSON.stringify(err));\r\n        }\r\n        // this.reportLogin();\r\n\r\n    }\r\n\r\n    _reportLoginTime: number = 0;\r\n    _reportLoginInterval: number = 30;\r\n    isReport: boolean = false;\r\n\r\n    /**\r\n     * 上报登录接口获取UID\r\n     */\r\n    reportLogin() {\r\n        if (this.isReport) return;\r\n        this.isReport = true;\r\n        let self = this;\r\n        let curTime: number = new Date().getTime();\r\n        let interval: number = (curTime - self._reportLoginTime) / 1000;\r\n        if (interval > 0 && interval < 30) {\r\n            utils.showLog(`上报登录获取UID小于：${self._reportLoginInterval}秒`);\r\n            return;\r\n        }\r\n        self._reportLoginTime = curTime;\r\n        let method = \"m=login\";\r\n        let url: string = ST_ServerUrl + method + `&device_data=0`;\r\n\r\n        utils.commomHttpRequest(url, (ret, data) => {\r\n            if (ret) {\r\n                if (data) {\r\n                    let result = JSON.parse(data);\r\n                    utils.showLog(\"data=\" + data);\r\n                    utils.showLog(\"result=\" + result);\r\n                    utils.showLog(\"result.uid=\" + result.uid);\r\n                    if (result.ip) {\r\n                        this._ip = result.ip;\r\n                    }\r\n                    if (result.uid) {\r\n                        self._service_uid = \"\" + result.uid;\r\n                        utils.showLog(\"服务器请求登录成功! _service_uid=\" + self._service_uid);\r\n                        YZ_LocalStorage.setItem(YZ_Constant.ST_SERVICE_UID, self._service_uid);\r\n                    }\r\n                }\r\n            } else {\r\n                utils.showLog(\"获取数据失败1\");\r\n            }\r\n            this.isReport = false;\r\n        })\r\n    }\r\n    /**\r\n     * 初始化\r\n     * @param data 配置数据\r\n     */\r\n    public init(data: string): void {\r\n        utils.showLog(\"qtt 初始化>>\", data);\r\n        if (data) {\r\n            let configObj: any = JSON.parse(data);\r\n            if (configObj && configObj.qutoutiao) {\r\n                ST_DefaultServerConfig = JSON.stringify(configObj.qutoutiao);\r\n            }\r\n        }\r\n\r\n        cc.game.on(QTT_REPORT_TYPE.ready, () => {\r\n            this.postServerData(QTT_REPORT_TYPE.login);\r\n        }, this)\r\n\r\n        cc.game.on(QTT_REPORT_TYPE.login, () => {\r\n            this.postServerData(QTT_REPORT_TYPE.load);\r\n        }, this)\r\n        this._uid = YZ_LocalStorage.getItem(YZ_Constant.ST_UID);\r\n        this._uid = this._uid ? this._uid : \"0\";\r\n\r\n        this.postServerData(QTT_REPORT_TYPE.ready);\r\n        this._service_uid = YZ_LocalStorage.getItem(YZ_Constant.ST_SERVICE_UID);\r\n        this._service_uid = this._service_uid ? this._service_uid : \"0\";\r\n\r\n        this.platForm = this.GetRequest(\"platform\");\r\n        this.ticket = this.GetRequest(\"ticket\");\r\n        if (this.ticket && this.platForm) {\r\n            // this.getUserInfo();\r\n            // new QTTHELP().g\r\n            // let qttHelp = new QTTHELP();\r\n            // QTTHelp();\r\n            // QTTHelp().then((res) => {\r\n            //     utils.showLog(\">>>>>>>>>>>\");\r\n            // }).catch(() => {\r\n\r\n            // })\r\n        }\r\n        this.loadServerData();\r\n\r\n\r\n    }\r\n\r\n    /**\r\n     * 每局结束上报数据\r\n     */\r\n    public postGameOverData(level: number): void {\r\n        if (PlatUtils.IsQTT) {\r\n            this.qttGame.completeTask();\r\n            this.qttGame.userInfo({ role: '趣头条', region: '区域1', level: level, ce: '1000000', round: '1', revenue: '100000', extend_info: { age: '18' } })\r\n        }\r\n        // Sys\r\n\r\n        let time = Math.floor(new Date().getTime() / 1000);\r\n        const values: any = {\r\n            app_id: utils.config.qttconfig.appID,\r\n            open_id: this.uid,\r\n            ip: this._ip,\r\n            round: level,\r\n            game_time: time,\r\n        };\r\n        this.getSign(values);\r\n        var formData = new FormData();\r\n        formData.append(\"app_id\", values.app_id);\r\n        formData.append(\"open_id\", values.open_id);\r\n        formData.append(\"ip\", values.ip);\r\n        formData.append(\"round\", values.round);\r\n        formData.append(\"game_time\", values.game_time);\r\n        formData.append(\"sign\", this._sign);\r\n        this.post(values)\r\n    }\r\n\r\n    iframe: HTMLIFrameElement = null;\r\n    form: HTMLFormElement = null;\r\n    post(values) {\r\n        if (!this.form) {\r\n            this.form = document.createElement(\"form\")\r\n        } else {\r\n            this.form.innerHTML = \"\";\r\n        }\r\n        if (!this.iframe) {\r\n            this.iframe = document.createElement(\"iframe\")\r\n        }\r\n        this.form.action = QTT_Report;\r\n        this.form.enctype = \"application/x-www-form-urlencoded\";\r\n        this.form.method = \"post\";\r\n        this.iframe.name = \"form\"\r\n        this.iframe.id = \"form\"\r\n        this.form.target = \"form\";\r\n        for (var item in values) {\r\n            var opt = document.createElement(\"textarea\");\r\n            opt.name = item;\r\n            opt.value = values[item];\r\n            this.form.appendChild(opt);\r\n        }\r\n        document.body.appendChild(this.iframe);\r\n        this.iframe.appendChild(this.form);\r\n        this.form.submit();\r\n\r\n    }\r\n\r\n    /**\r\n     * 获取用户信息\r\n     */\r\n    public getUserInfo() {\r\n\r\n        this.qttGame.getUserInfo(utils.config.qttconfig.appKey, utils.config.qttconfig.appID, this.ticket, this.platForm).then(res => {\r\n            // 成功\r\n            utils.showLog(\"获取用户信息成功 #userInfo=\", JSON.stringify(res));\r\n        }).catch(err => {\r\n            // 失败\r\n        })\r\n    }\r\n\r\n\r\n    /**\r\n     * 通过参数名称获取链接里的值\r\n     * @param key 参数名称\r\n     */\r\n    private GetRequest(key) {\r\n        var url = location.search;\r\n        var theRequest = new Object();\r\n        if (url.indexOf(\"?\") != -1) {\r\n            var str: string = url.substr(1);\r\n            let strs = str.split(\"&\");\r\n            for (var i = 0; i < strs.length; i++) {\r\n                theRequest[strs[i].split(\"=\")[0]] = unescape(strs[i].split(\"=\")[1]);\r\n            }\r\n        }\r\n        var value = theRequest[key];\r\n        return value;\r\n    }\r\n\r\n    /**\r\n    * 请求服务器数据\r\n    */\r\n    public loadServerData() {\r\n        if (!this.uid) {\r\n            cc.error(\"用户ID为空>>>\");\r\n            this._uid = \"0\";\r\n        }\r\n        let method: string = \"m=g\";\r\n        utils.commomHttpRequest(ST_ServerUrl + method, (ret: boolean, data: any) => {\r\n            utils.showLog(\"loadServerUserdate #ret=\", ret, \" #data=\", data);\r\n            if (ret) {\r\n                if (data) {\r\n                    utils.showLog(\"qtt服务器配置数据获取成功: data = \", data);\r\n                    let result = JSON.parse(data);\r\n                    if (result) {\r\n                        if (!utils.DebugLoacalConfig) {\r\n                            this._serverConfig = result;\r\n                            if (this._serverConfig.is_show_log_view && this._serverConfig.is_show_log_view == \"true\") {\r\n                                utils.showLogView = true;\r\n                                utils.showLog();\r\n                            }\r\n                        } else {\r\n                            cc.warn(\"开启了本地数据测试，使用本地配置!\");\r\n                        }\r\n                    } else {\r\n                        utils.showLog(\"qtt服务器配置数据不是合法的JSON数据, 使用本地配置!\");\r\n                    }\r\n                } else {\r\n                    utils.showLog(\"qtt服务器配置数据获取失败, 使用本地配置!\");\r\n                }\r\n\r\n            } else {\r\n            }\r\n            if (!this._serverConfig) {\r\n                this._serverConfig = JSON.parse(ST_DefaultServerConfig);\r\n            } else {\r\n                if (this._serverConfig.is_local_pos_id\r\n                    && this._serverConfig.is_local_pos_id == \"false\") {\r\n                    // 使用服务器下发的广告id\r\n                    utils.showLog(\"使用服务器下发的广告id\");\r\n                    utils.showLog(\"趣头条没有广告id\")\r\n                } else {\r\n                    utils.showLog(\"使用本地配置的广告ID\");\r\n                }\r\n            }\r\n            utils.emitServerInitEvent();\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 上报关卡数据\r\n     * @param level 当前关卡ID\r\n     * @param levelName 关卡名称\r\n     * @param status 状态\r\n     */\r\n    public postLevel(level: string, status: LevelStatus, levelName?: string) {\r\n        if (PlatUtils.IsQTT) {\r\n            let method = \"m=rlevel\";\r\n            let url: string = POST_ServerUrl + method + `&level_id=${level}&level_name=${encodeURI(levelName)}&status=${status}`;\r\n            utils.commomHttpRequest(url, function (ret, data) {\r\n                if (ret) {\r\n                    utils.showLog(\"关卡数据上报成功！\");\r\n                } else {\r\n                    utils.showLog(\"关卡数据上报失败！\");\r\n                }\r\n            }.bind(this));\r\n\r\n            if (status == LevelStatus.GameStart) {\r\n                this.postServerData(QTT_REPORT_TYPE.start);\r\n            }\r\n\r\n            //上报到qtt的官方服务器\r\n            if (status == LevelStatus.GameWin) {\r\n                this.postGameOverData(Number(level));\r\n            }\r\n        }\r\n    }\r\n\r\n    getSign(values) {\r\n        let s = this.sign(values);\r\n        values.sign = s\r\n        this.checkSign(values);\r\n        this._sign = s;\r\n    }\r\n    public getUrl(): string {\r\n        let params = this.getParams();\r\n        const values: any = {\r\n            app_id: utils.config.qttconfig.appID,\r\n            platform: params.platform,\r\n            ticket: params.ticket,\r\n            time: Math.floor(new Date().getTime() / 1000)\r\n        }\r\n        let s = this.sign(values);\r\n        values.sign = s\r\n        this._sign = s;\r\n        return QTT_ServerUrl + \"app_id=\" + values.app_id + \"&platform=\" + params.platform + \"&ticket=\" + params.ticket + \"&time=\" + values.time + \"&sign=\" + values.sign;\r\n    }\r\n\r\n    getParams(): any {\r\n        let url: string = window.location.href;\r\n        let paramArr = url.split(\"&\");\r\n        let platform;\r\n        let ticket;\r\n        paramArr.forEach(str => {\r\n\r\n            if (str.indexOf(\"platform\") != -1) {\r\n                platform = str.split(\"=\")[1];\r\n            }\r\n            if (str.indexOf(\"ticket\") != -1) {\r\n                ticket = str.split(\"=\")[1];\r\n            }\r\n        });\r\n        return { platform: platform, ticket: ticket };\r\n    }\r\n    public sign(values) {\r\n        delete values.sign;\r\n        values.app_key = utils.config.qttconfig.appKey;\r\n        let keysArr = [];\r\n        for (let key in values) {\r\n            keysArr.push(key)\r\n        }\r\n        keysArr.sort();\r\n        let keys = ''\r\n        keysArr.forEach((e) => {\r\n            keys += e;\r\n            keys += values[e];\r\n        });\r\n        console.log(\"原串：\" + keys)\r\n        delete values.app_key;\r\n        let sign = md5(keys);\r\n\r\n        return sign;\r\n    }\r\n\r\n    public checkSign(values) {\r\n        let sign1 = values.sign;\r\n        if (!sign1) {\r\n            console.log('sign error');\r\n            return false;\r\n        }\r\n        let sign2 = this.sign(values);\r\n        if (sign1 !== sign2) {\r\n            console.log(\"sign error\")\r\n            return false;\r\n        }\r\n        console.log('ok')\r\n        return true;\r\n    }\r\n\r\n\r\n    _isReady: boolean = false;\r\n    _isLogin: boolean = false;\r\n    _isLoad: boolean = false;\r\n    _isStart: boolean = false;\r\n    /** \r\n    *  趣头条服务器上报\r\n    * \r\n    *  参数为object对象, 根据type 属性传入对应字段\r\n    *   @param type {String} ready 游戏资源加载完毕  login 用户成功登陆 load 成功进入游戏界面/主页 start 开始游戏\r\n    *   @param app_id { String} [必填] \r\n    *   @param open_id {String}  参考具体上报说明\r\n    *   @param game_name {String} 参考具体上报说明\r\n    *   @param extend_info  [选填] json对象 {}\r\n    *   \r\n    **/\r\n    public postServerData(type: QTT_REPORT_TYPE, info?: any) {\r\n        console.log(\"趣头条数据上报：\" + type, this._uid)\r\n        if (!this.uid && this._uid != \"0\") {\r\n            cc.error(\"用户ID不存在 ,不上报数据>>>\");\r\n            return;\r\n        }\r\n        switch (type) {\r\n            case QTT_REPORT_TYPE.ready:\r\n                if (this._isReady) {\r\n                    console.log(\"已经上传过资源加载完毕事件\")\r\n                    return;\r\n                }\r\n                break;\r\n            case QTT_REPORT_TYPE.login:\r\n                if (this._isLogin) {\r\n                    console.log(\"以及上传过资源加载完毕事件\")\r\n                    return;\r\n                }\r\n                break;\r\n            case QTT_REPORT_TYPE.load:\r\n                if (this._isLoad) {\r\n                    console.log(\"以及上传过资源加载完毕事件\")\r\n                    return;\r\n                }\r\n                break;\r\n            case QTT_REPORT_TYPE.start:\r\n                if (this._isStart) {\r\n                    console.log(\"以及上传过资源加载完毕事件\")\r\n                    return;\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        let app_id = utils.config.qttconfig.appID;\r\n        let game_name = utils.config.qttconfig.gamename;\r\n        let extend_info = info ? info : {};\r\n        if (this.qttGame && this.qttGame.reportData) {\r\n            switch (type) {\r\n                case QTT_REPORT_TYPE.ready:\r\n                    this._isReady = true;\r\n                    break;\r\n                case QTT_REPORT_TYPE.login:\r\n                    this._isLogin = true;\r\n                    break;\r\n                case QTT_REPORT_TYPE.load:\r\n                    this._isLoad = true;\r\n                    break;\r\n                case QTT_REPORT_TYPE.start:\r\n                    this._isStart = true;\r\n                    break;\r\n            }\r\n            this.qttGame.reportData({ \"type\": type, \"open_id\": this.uid, \"app_id\": app_id, \"game_name\": game_name, \"extend_info\": extend_info })\r\n            console.log(\"趣头条成功发送事件：\" + type);\r\n            cc.game.emit(type);\r\n        } else {\r\n            let self = this;\r\n            console.log(\"趣头条发送：\" + type + \"失败\");\r\n            setTimeout(() => {\r\n                self.postServerData(type, info);\r\n            }, 100);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 上报自定义事件\r\n     * @param level 当前关卡ID\r\n     * @param levelName 关卡名称\r\n     * @param status 状态\r\n     */\r\n    public sendEvent(eventName: string) {\r\n        if (PlatUtils.IsQTT) {\r\n            let method = \"m=revent\";\r\n            let url: string = POST_ServerUrl + method + `&event=${encodeURI(eventName)}`;\r\n            utils.commomHttpRequest(url, function (ret, data) {\r\n                if (ret) {\r\n                    utils.showLog(\"上报自定义事件成功！\");\r\n                } else {\r\n                    utils.showLog(\"上报自定义事件失败！\");\r\n                }\r\n            }.bind(this));\r\n        }\r\n    }\r\n}\r\n\r\nexport enum QTT_REPORT_TYPE {\r\n    ready = \"ready\",          //游戏资源加载完毕\r\n    login = \"login\",          //用户成功登陆\r\n    load = \"load\",            //成功进入游戏界面/主页\r\n    start = \"start\",          //开始游戏\r\n    newRole = \"newRole\",      //新增创角\r\n    newUser = \"newUser\",      //新增用户\r\n    upgrade = \"upgrade\",      //用户等级提升\r\n    userInfo = \"userInfo\",    //用户游戏信息\r\n    abnormal = \"abnormal\",    //游戏异常\r\n}\r\n"]}