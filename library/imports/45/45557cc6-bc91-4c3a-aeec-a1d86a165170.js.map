{"version":3,"sources":["assets\\scripts\\UI\\UIPausePanel.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mEAA8D;AAC9D,2DAA0D;AAC1D,uEAAyE;AACzE,8CAA6C;AAC7C,kDAAsE;AAEtE,8CAAyC;AACzC,2CAA0C;AAC1C,iDAAgD;AAE1C,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAA0C,gCAAM;IAE5C;QAAA,YACI,kBAAM,oBAAS,CAAC,YAAY,CAAC,SAEhC;QAEO,WAAK,GAAY,IAAI,CAAC;QACtB,YAAM,GAAY,IAAI,CAAC;QAJ3B,KAAI,CAAC,OAAO,EAAE,IAAI,KAAI,CAAC,MAAM,EAAE,CAAC;;IACpC,CAAC;IAID,6BAAM,GAAN;QACI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;QAC/C,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;QAEjD,IAAI,UAAU,GAAG,EAAE,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QACpD,IAAG,eAAM,CAAC,QAAQ,IAAI,CAAC,EAAC;YACpB,IAAG,eAAM,CAAC,OAAO,CAAC,aAAa,GAAG,CAAC,EAAC;gBAChC,UAAU,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,YAAY,GAAG,IAAI,CAAC;aAC1D;iBAAI;gBACD,UAAU,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,YAAY,GAAG,KAAK,CAAC;aAC3D;SACJ;QAED,IAAI,QAAQ,GAAa,CAAC,YAAY,EAAE,WAAW,EAAE,SAAS,CAAC,CAAC;QAChE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACtC,IAAI,GAAG,GAAY,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;YACrD,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;SACxE;IACL,CAAC;IAES,6BAAM,GAAhB;QACI,aAAK,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;QACzB,IAAI,CAAC,MAAM,EAAE,CAAC;QACd,8CAA8C;QAC9C,6CAA6C;QAC7C,eAAM,CAAC,UAAU,EAAE,CAAC;IACxB,CAAC;IACS,8BAAO,GAAjB;QACI,IAAI,mBAAS,CAAC,MAAM,EAAE;YAClB,aAAK,CAAC,SAAS,CAAC,YAAY,CAAC,EAAE,QAAQ,EAAE,4BAAc,CAAC,KAAK,EAAE,CAAC,CAAC;SACpE;QACD,eAAM,CAAC,UAAU,EAAE,CAAC;IACxB,CAAC;IAED,6BAAM,GAAN;QACI,IAAI,eAAM,CAAC,QAAQ,EAAE;YACjB,IAAI,mBAAS,CAAC,MAAM,EAAE;gBAClB,aAAK,CAAC,SAAS,CAAC,YAAY,CAAC,EAAE,QAAQ,EAAE,4BAAc,CAAC,KAAK,EAAE,CAAC,CAAC;aACpE;SACJ;IACL,CAAC;IAED;;;;OAIG;IACW,2CAAoB,GAAlC,UAAmC,KAAe,EAAE,IAAS;;;;;oBACzD,UAAU;oBACV,qBAAM,eAAM,CAAC,QAAQ,CAAC,aAAa,EAAE,CAAC,KAAK,EAAE,EAAA;;wBAD7C,UAAU;wBACV,SAA6C,CAAC;wBAC9C,QAAQ,KAAK,CAAC,MAAM,CAAC,IAAI,EAAE;4BACvB,KAAK,YAAY,CAAC,CAAC;gCACf,IAAG,eAAM,CAAC,QAAQ,IAAI,CAAC,EAAC;oCACpB,IAAG,eAAM,CAAC,OAAO,CAAC,aAAa,GAAG,CAAC,EAAC;wCAChC,iBAAO,CAAC,MAAM,GAAG,IAAI,CAAC;wCACtB,iBAAO,CAAC,sBAAsB,EAAE,CAAC;wCACjC,uBAAU,IAAI,uBAAU,CAAC,sBAAsB,EAAE,CAAC;wCAClD,eAAM,CAAC,KAAK,CAAC,UAAU,CAAC,oBAAS,CAAC,YAAY,CAAC,CAAC;wCAEhD,IAAI,eAAM,CAAC,QAAQ,IAAI,CAAC,EAAE;4CACtB,eAAM,CAAC,OAAO,CAAC,aAAa,IAAI,CAAC,CAAC;4CAClC,eAAM,CAAC,OAAO,CAAC,SAAS,CAAC,eAAM,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;yCAC1D;qCACJ;iCACJ;qCAAI;oCACD,iBAAO,CAAC,MAAM,GAAG,IAAI,CAAC;oCACtB,iBAAO,CAAC,sBAAsB,EAAE,CAAC;oCACjC,uBAAU,IAAI,uBAAU,CAAC,sBAAsB,EAAE,CAAC;oCAClD,eAAM,CAAC,KAAK,CAAC,UAAU,CAAC,oBAAS,CAAC,YAAY,CAAC,CAAC;oCAChD,eAAM,CAAC,OAAO,CAAC,SAAS,CAAC,eAAM,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;iCAC1D;gCACD,MAAM;6BACT;4BACD,KAAK,WAAW,CAAC,CAAC;gCACd,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;qCAChB,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,EAAE,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,CAAC;qCAC3D,IAAI,CAAC;oCACF,eAAM,CAAC,KAAK,CAAC,UAAU,CAAC,oBAAS,CAAC,YAAY,CAAC,CAAC;gCACpD,CAAC,CAAC;qCACD,KAAK,EAAE,CAAC;gCACb,MAAM;6BACT;4BACD,KAAK,SAAS,CAAC,CAAC;gCACZ,iBAAO,CAAC,MAAM,GAAG,IAAI,CAAC;gCACtB,iBAAO,CAAC,sBAAsB,EAAE,CAAC;gCACjC,uBAAU,IAAI,uBAAU,CAAC,sBAAsB,EAAE,CAAC;gCAClD,eAAM,CAAC,KAAK,CAAC,UAAU,CAAC,oBAAS,CAAC,YAAY,CAAC,CAAC;gCAChD,eAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC;oCAC/B,eAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,mBAAQ,CAAC,UAAU,CAAC,CAAC;gCAC/C,CAAC,CAAC,CAAC,CAAA;gCACH,MAAM;6BACT;yBACJ;;;;;KACJ;IAtGgB,YAAY;QADhC,OAAO;OACa,YAAY,CAwGhC;IAAD,mBAAC;CAxGD,AAwGC,CAxGyC,gBAAM,GAwG/C;kBAxGoB,YAAY","file":"","sourceRoot":"/","sourcesContent":["import PlatUtils from \"../../common-plugin/Scripts/PlatUtils\";\r\nimport { utils } from \"../../common-plugin/Scripts/Utils\";\r\nimport { BannerLocation } from \"../../common-plugin/Scripts/YZ_Constant\";\r\nimport { cocosz } from \"../Framework/CocosZ\";\r\nimport Constant, { PageName, PanelName } from \"../Framework/Constant\";\r\nimport TweenEffect from \"../Framework/TweenEffect\";\r\nimport UIPage from \"../Framework/UIPage\";\r\nimport { gameMgr } from \"../Game/gameMgr\";\r\nimport { upgradeMgr } from \"../Game/UpgradeMgr\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class UIPausePanel extends UIPage {\r\n\r\n    constructor() {\r\n        super(PanelName.UIPausePanel);\r\n        this.isValid() && this.onLoad();\r\n    }\r\n\r\n    private _mask: cc.Node = null;\r\n    private _panel: cc.Node = null;\r\n    onLoad() {\r\n        this._mask = this._page.getChildByName(\"mask\");\r\n        this._panel = this._page.getChildByName(\"Panel\");\r\n\r\n        let restartBtn = cc.find(\"BtnRestart\", this._panel);\r\n        if(cocosz.gameMode == 6){\r\n            if(cocosz.dataMgr.PhysicalCount > 0){\r\n                restartBtn.getComponent(cc.Button).interactable = true;\r\n            }else{\r\n                restartBtn.getComponent(cc.Button).interactable = false;\r\n            }\r\n        }\r\n\r\n        let btnNames: string[] = [\"BtnRestart\", \"BtnResume\", \"BtnHome\"];\r\n        for (let i = 0; i < btnNames.length; i++) {\r\n            let btn: cc.Node = cc.find(btnNames[i], this._panel);\r\n            btn.on(cc.Node.EventType.TOUCH_END, this._onBtnClickedHandler, this);\r\n        }\r\n    }\r\n\r\n    protected onOpen(): void {\r\n        utils.SendEvent(\"页面-暂停\");\r\n        this.showAd();\r\n        // TweenEffect.panel_mask_opacity(this._mask);\r\n        // TweenEffect.panel_open_moveY(this._panel);\r\n        cocosz.pauseCount++;\r\n    }\r\n    protected onClose(): void {\r\n        if (PlatUtils.IsVIVO) {\r\n            utils.adManager.hideCustomAd({ location: BannerLocation.Pause });\r\n        }\r\n        cocosz.pauseCount--;\r\n    }\r\n\r\n    showAd() {\r\n        if (cocosz.isShowAd) {\r\n            if (PlatUtils.IsVIVO) {\r\n                utils.adManager.showCustomAd({ location: BannerLocation.Pause });\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 所有按钮点击事件\r\n     * @param event \r\n     * @param data \r\n     */\r\n    private async _onBtnClickedHandler(event: cc.Event, data: any) {\r\n        //播放按钮点击音效\r\n        await cocosz.audioMgr.playBtnEffect().catch();\r\n        switch (event.target.name) {\r\n            case \"BtnRestart\": {\r\n                if(cocosz.gameMode == 6){\r\n                    if(cocosz.dataMgr.PhysicalCount > 0){\r\n                        gameMgr.isFail = true;\r\n                        gameMgr.unscheduleAllCallbacks();\r\n                        upgradeMgr && upgradeMgr.unscheduleAllCallbacks();\r\n                        cocosz.uiMgr.closePanel(PanelName.UIPausePanel);\r\n                    \r\n                        if (cocosz.gameMode == 6) {\r\n                            cocosz.dataMgr.PhysicalCount -= 1;\r\n                            cocosz.gameMgr.gameStart(cocosz.dataMgr.TotoalCount_6);\r\n                        }\r\n                    }\r\n                }else{\r\n                    gameMgr.isFail = true;\r\n                    gameMgr.unscheduleAllCallbacks();\r\n                    upgradeMgr && upgradeMgr.unscheduleAllCallbacks();\r\n                    cocosz.uiMgr.closePanel(PanelName.UIPausePanel);\r\n                    cocosz.gameMgr.gameStart(cocosz.dataMgr.TotoalCount_6);  \r\n                }\r\n                break;\r\n            }\r\n            case \"BtnResume\": {\r\n                cc.tween(this._panel)\r\n                    .to(0.5, { y: this._panel.y + 1000 }, { easing: \"sineOut\" })\r\n                    .call(() => {\r\n                        cocosz.uiMgr.closePanel(PanelName.UIPausePanel);\r\n                    })\r\n                    .start();\r\n                break;\r\n            }\r\n            case \"BtnHome\": {\r\n                gameMgr.isFail = true;\r\n                gameMgr.unscheduleAllCallbacks();\r\n                upgradeMgr && upgradeMgr.unscheduleAllCallbacks();\r\n                cocosz.uiMgr.closePanel(PanelName.UIPausePanel);\r\n                cocosz.sceneMgr.loadScene(\"Home\", (() => {\r\n                    cocosz.uiMgr.openPage(PageName.UIHomePage);\r\n                }))\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n"]}