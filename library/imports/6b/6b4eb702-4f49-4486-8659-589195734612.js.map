{"version":3,"sources":["assets\\scripts\\UI\\UIUpgradePanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import UIPage from \"../Framework/UIPage\";\r\nimport { PanelName } from \"../Framework/Constant\";\r\nimport { cocosz } from \"../Framework/CocosZ\";\r\nimport { utils } from \"../../common-plugin/Scripts/Utils\";\r\nimport TweenEffect from \"../Framework/TweenEffect\";\r\nimport { SkillType, upgradeMgr } from \"../Game/UpgradeMgr\";\r\nimport PlatUtils from \"../../common-plugin/Scripts/PlatUtils\";\r\nimport { gameMgr } from \"../Game/gameMgr\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n/**\r\n * 皮肤试用面板\r\n */\r\n@ccclass\r\nexport default class UIUpgradePanel extends UIPage {\r\n\r\n    private _mask: cc.Node = null;\r\n    private _panel: cc.Node = null;\r\n    private _skill0: cc.Node = null;\r\n    private _skill1: cc.Node = null;\r\n    private _skill2: cc.Node = null;\r\n    private _skill3: cc.Node = null;\r\n    private _skill4: cc.Node = null;\r\n    private _btnRefresh: cc.Node = null;\r\n\r\n    private _betterArr: number[] = [];\r\n    private _otherArr: number[] = [];// 可以获取的技能数组\r\n    private _uiSkillIdArr: number[] = [];// 随机4个技能\r\n    private _curIndex: number = -1;// 当前选中下标\r\n\r\n    private _canClick: boolean = true;// 能否点击\r\n\r\n    private _lockArr: boolean[] = [false, false, false, false, false];\r\n\r\n    constructor() {\r\n        super(PanelName.UIUpgradePanel);\r\n        this.isValid() && this.onLoad();\r\n    }\r\n\r\n    protected onLoad() {\r\n        this._mask = this._page.getChildByName(\"Mask\");\r\n        this._panel = this._page.getChildByName(\"Panel\");\r\n        let btnNames: string[] = [\"skill0\", \"skill1\", \"skill2\", \"skill3\", \"skill4\", \"btnRefresh\"];\r\n        for (let i = 0; i < btnNames.length; i++) {\r\n            let btn: cc.Node = cc.find(btnNames[i], this._panel);\r\n            if (btn) {\r\n                btn.on(cc.Node.EventType.TOUCH_END, this._onBtnClickedHandler, this);\r\n                if (btn.name == \"skill0\") {\r\n                    this._skill0 = btn;\r\n                } else if (btn.name == \"skill1\") {\r\n                    this._skill1 = btn;\r\n                } else if (btn.name == \"skill2\") {\r\n                    this._skill2 = btn;\r\n                } else if (btn.name == \"skill3\") {\r\n                    this._skill3 = btn;\r\n                } else if (btn.name == \"skill4\") {\r\n                    this._skill4 = btn;\r\n                } else if (btn.name == \"btnRefresh\") {\r\n                    this._btnRefresh = btn;\r\n                    btn.active = cocosz.isADON;\r\n                }\r\n            }\r\n        }\r\n        // 服务器锁的数量\r\n        let serverValue = cocosz.getConfigByKey(\"skillLockNum\");\r\n        if (Number.isInteger(serverValue)) {\r\n            for (let i = 0; i < 5; i++) {\r\n                if (i + serverValue >= 5) {\r\n                    this._lockArr[i] = true;\r\n                } else {\r\n                    this._lockArr[i] = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    protected onOpen() {\r\n        utils.SendEvent(\"页面-技能\");\r\n        // 优先技能数组\r\n        let better = [\r\n            SkillType.双发, SkillType.子弹碎片, SkillType.枪林弹雨, SkillType.谢幕,\r\n            SkillType.瞬斩, SkillType.冰霜精通, SkillType.火焰精通, SkillType.萃取,\r\n            SkillType.再生, SkillType.护甲靴子, SkillType.疾走, SkillType.神圣守护,\r\n            SkillType.通灵匕首, SkillType.飞轮, SkillType.闪电, SkillType.燃烧瓶\r\n        ];\r\n        // 可以获取的技能数组\r\n        for (let i = 0; i <= 34; i++) {\r\n            if ([SkillType.雷电精通, SkillType.龙卵, SkillType.通灵镰刀].includes(i)) {\r\n                // 剔除的技能\r\n            } else if (upgradeMgr && upgradeMgr.isValid && upgradeMgr.upgradeSkillArr[i] >= upgradeMgr.upgradeSkillMaxLevelArr[i]) {\r\n                // 达到最大级\r\n            } else if (better.includes(i)) {\r\n                // 优先数组\r\n                this._betterArr.push(i);\r\n            } else {\r\n                // 其它数组\r\n                this._otherArr.push(i);\r\n            }\r\n        }\r\n        this._initPanel();\r\n\r\n        if (PlatUtils.IsWechat) {\r\n            utils.adManager.hideCustomAd({ location: 3 });\r\n            utils.adManager.hideCustomAd({ location: 4 });\r\n        }\r\n    }\r\n\r\n    protected onClose(): void {\r\n        cocosz.pauseCount--;\r\n        if (PlatUtils.IsWechat) {\r\n            utils.adManager.showCustomAd({ location: 3 });\r\n            utils.adManager.showCustomAd({ location: 4 });\r\n        }\r\n    }\r\n\r\n    private _initPanel() {\r\n        TweenEffect.panel_mask_opacity(this._mask)\r\n        TweenEffect.panel_open_moveY(this._panel);\r\n        this._curIndex = -1;\r\n        // 刷新技能\r\n        this._skill_refresh();\r\n    }\r\n\r\n    /**\r\n     * 所有按钮点击事件\r\n     * @param event \r\n     * @param data \r\n     */\r\n    private async _onBtnClickedHandler(event: cc.Event, data: any) {\r\n        //播放按钮点击音效\r\n        await cocosz.audioMgr.playBtnEffect().catch();\r\n        if (!this._canClick) return;\r\n        switch (event.target.name) {\r\n            case \"btnRefresh\": {\r\n                this._canClick = false;\r\n                // 分享\r\n                if (event.target.getChildByName(\"share\") && event.target.getChildByName(\"share\").active) {\r\n                    utils.SendEvent(\"分享-刷新技能\")\r\n                    cocosz.share(() => {\r\n                        utils.SendEvent(\"分享-刷新技能-成功\")\r\n                        this._skill_refresh();\r\n                        this._canClick = true;\r\n                    }, () => {\r\n                        utils.SendEvent(\"分享-刷新技能-失败\")\r\n                        this._canClick = true;\r\n                    })\r\n                }\r\n                // 视频\r\n                else if (event.target.getChildByName(\"video\") && event.target.getChildByName(\"video\").active) {\r\n                    utils.SendEvent(\"视频-技能刷新(地下城僵尸)-播放\")\r\n                    cocosz.watchAD(() => {\r\n                        utils.SendEvent(\"视频-技能刷新(地下城僵尸)-成功\")\r\n                        this._skill_refresh();\r\n                        this._canClick = true;\r\n                    }, () => {\r\n                        utils.SendEvent(\"视频-技能刷新(地下城僵尸)-失败\")\r\n                        this._canClick = true;\r\n                    });\r\n                }\r\n                break;\r\n            }\r\n            case \"skill0\":\r\n            case \"skill1\":\r\n            case \"skill2\":\r\n            case \"skill3\":\r\n            case \"skill4\": {\r\n                this._canClick = false;\r\n\r\n                let callback = () => {\r\n                    if (\"skill0\" == event.target.name)\r\n                        this._curIndex = 0;\r\n                    else if (\"skill1\" == event.target.name)\r\n                        this._curIndex = 1;\r\n                    else if (\"skill2\" == event.target.name)\r\n                        this._curIndex = 2;\r\n                    else if (\"skill3\" == event.target.name)\r\n                        this._curIndex = 3;\r\n                    else if (\"skill4\" == event.target.name)\r\n                        this._curIndex = 4;\r\n                    // 刷新\r\n                    this.updateFrame();\r\n                    // 选中技能\r\n                    this._selectSkill();\r\n                }\r\n                let lockNode = event.target.getChildByName(\"lock\");\r\n                if (lockNode && lockNode.active) {\r\n                    // 分享\r\n                    if (lockNode.getChildByName(\"share\") && lockNode.getChildByName(\"share\").active) {\r\n                        utils.SendEvent(\"分享-技能解锁\")\r\n                        cocosz.share(() => {\r\n                            utils.SendEvent(\"分享-技能解锁-成功\")\r\n                            callback && callback();\r\n                        }, () => {\r\n                            utils.SendEvent(\"分享-技能解锁-失败\")\r\n                            this._canClick = true;\r\n                        })\r\n                    }\r\n                    // 视频\r\n                    else if (lockNode.getChildByName(\"video\") && lockNode.getChildByName(\"video\").active) {\r\n                        utils.SendEvent(\"视频-技能解锁-播放\")\r\n                        cocosz.watchAD(() => {\r\n                            utils.SendEvent(\"视频-技能解锁-成功\")\r\n                            callback && callback();\r\n                        }, () => {\r\n                            utils.SendEvent(\"视频-技能解锁-失败\")\r\n                            this._canClick = true;\r\n                        });\r\n                    } else {\r\n                        callback && callback();\r\n                    }\r\n                } else {\r\n                    callback && callback();\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    private _selectSkill() {\r\n        this._canClick = false;\r\n        // 获取技能\r\n        if (this._uiSkillIdArr[this._curIndex]) {\r\n            upgradeMgr && upgradeMgr.isValid && upgradeMgr.getSkill(this._uiSkillIdArr[this._curIndex]);\r\n        }\r\n        // 卡片效果\r\n        let arr: cc.Node[] = [this._skill0, this._skill1, this._skill2, this._skill3, this._skill4];\r\n        arr.forEach((v, i) => {\r\n            if (i == this._curIndex) {\r\n                this.card_click(v);\r\n            } else {\r\n                this.card_recycle(v);\r\n            }\r\n        })\r\n        // 关闭弹窗\r\n        cocosz.scheduleOnce(() => {\r\n            cocosz.uiMgr.closePanel(PanelName.UIUpgradePanel);\r\n            if (gameMgr && gameMgr.playerTs && gameMgr.playerTs.isValid) {\r\n                gameMgr.playerTs.avoidInjury(2);\r\n            }\r\n        }, 1.5);\r\n    }\r\n\r\n    private _getSkillIDName(id: number) {\r\n        return id + (upgradeMgr.upgradeSkillMaxLevelArr[id] > 1 ? \"_\" + (upgradeMgr.upgradeSkillArr[id] + 1) : \"\")\r\n    }\r\n\r\n    private _skill_load(card: cc.Node, id) {\r\n        let redArr = [\"8\",\"20\",\"21\",\"22\",\"23\",\"31\"];\r\n        let blueArr = [\"24\",\"26\",\"27\",\"29\",\"33_1\",\"33_2\",\"34_1\",\"34_2\"];\r\n        let yellowArr = [\"9\",\"10\",\"11\"];\r\n        let greenArr = [\"2\",\"4\",\"5\",\"6\",\"7\"];\r\n        let pinkArr = [\"12\",\"13\",\"14\",\"15\",\"16\",\"20\",\"32_3\"];\r\n        let purpleArr = [\"17\",\"18\",\"19\",\"32_1\",\"32_2\",\"33_3\",\"34_3\"];\r\n        let moreblueArr = [\"0\",\"1\",\"3\"];\r\n\r\n        let node_kuang_select = card.getChildByName(\"kuang_select\");\r\n        let node_kuang_common = card.getChildByName(\"kuang_common\");\r\n        // 名字\r\n        let node_name = card.getChildByName(\"name\");\r\n        if (node_name) {\r\n            let spr_name = node_name.getComponent(cc.Sprite);\r\n            if (spr_name) {\r\n                cocosz.resMgr.loadAndCacheRes(\"i18n/tex_zombie/\" + cocosz.curLanguage + \"/zombieSkill_name_\" + this._getSkillIDName(id), cc.SpriteFrame, null, (err, res) => {\r\n                    if (spr_name && spr_name.isValid) {\r\n                        spr_name.spriteFrame = res;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        // 图标\r\n        let node_icon = card.getChildByName(\"icon\");\r\n        if (node_icon) {\r\n            if(this._getSkillIDName(id) == \"0\" || this._getSkillIDName(id) == \"5\"){\r\n                node_icon.x = 12;\r\n                node_icon.y = 28;\r\n                node_kuang_select.scale = 0.88;\r\n                node_kuang_common.scale = 0.88;\r\n            }else if(this._getSkillIDName(id) == \"2\"){\r\n                node_icon.x = -2;\r\n                node_icon.y = 30.5;\r\n                node_kuang_select.scaleX = 0.95;\r\n                node_kuang_select.scaleY = 0.9;\r\n                node_kuang_common.scaleX = 0.95;\r\n                node_kuang_common.scaleY = 0.9;\r\n            }else if(this._getSkillIDName(id) == \"6\"){\r\n                node_kuang_select.scaleX = 0.94;\r\n                node_kuang_common.scaleX = 0.94;\r\n            }\r\n            let spr_icon = node_icon.getComponent(cc.Sprite);\r\n            if (spr_icon) {\r\n                cocosz.resMgr.loadAndCacheRes(\"tex_zombie/zombieSkill_icon_\" + this._getSkillIDName(id), cc.SpriteFrame, null, (err, res) => {\r\n                    if (spr_icon && spr_icon.isValid) {\r\n                        spr_icon.spriteFrame = res;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        // 介绍\r\n        let node_introduce = card.getChildByName(\"introduce\");\r\n        if (node_introduce) {\r\n            let spr_introduce = node_introduce.getComponent(cc.Sprite);\r\n            if (spr_introduce) {\r\n                cocosz.resMgr.loadAndCacheRes(\"i18n/tex_zombie/\" + cocosz.curLanguage + \"/zombieSkill_introduce_\" + this._getSkillIDName(id), cc.SpriteFrame, null, (err, res) => {\r\n                    if (spr_introduce && spr_introduce.isValid) {\r\n                        spr_introduce.spriteFrame = res;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        //选择框的颜色\r\n        if (node_kuang_select) {\r\n            let spr_kuang_select = node_kuang_select.getComponent(cc.Sprite);\r\n            if (spr_kuang_select && spr_kuang_select.isValid) {\r\n                if(redArr.includes(this._getSkillIDName(id))){\r\n                    spr_kuang_select.spriteFrame = cc.find(\"framNode\", this._panel).getComponent(\"frameNode\").selectSprite[2];\r\n                }else if(blueArr.includes(this._getSkillIDName(id))){\r\n                    spr_kuang_select.spriteFrame = cc.find(\"framNode\", this._panel).getComponent(\"frameNode\").selectSprite[0];\r\n                }else if(yellowArr.includes(this._getSkillIDName(id))){\r\n                    spr_kuang_select.spriteFrame = cc.find(\"framNode\", this._panel).getComponent(\"frameNode\").selectSprite[1];\r\n                }else if(greenArr.includes(this._getSkillIDName(id))){\r\n                    spr_kuang_select.spriteFrame = cc.find(\"framNode\", this._panel).getComponent(\"frameNode\").selectSprite[5];\r\n                }else if(pinkArr.includes(this._getSkillIDName(id))){\r\n                    spr_kuang_select.spriteFrame = cc.find(\"framNode\", this._panel).getComponent(\"frameNode\").selectSprite[3];\r\n                }else if(purpleArr.includes(this._getSkillIDName(id))){\r\n                    spr_kuang_select.spriteFrame = cc.find(\"framNode\", this._panel).getComponent(\"frameNode\").selectSprite[4];\r\n                }else if(moreblueArr.includes(this._getSkillIDName(id))){\r\n                    spr_kuang_select.spriteFrame = cc.find(\"framNode\", this._panel).getComponent(\"frameNode\").selectSprite[6];\r\n                }\r\n                \r\n            }\r\n        }\r\n\r\n        //框的颜色\r\n        if (node_kuang_common) {\r\n            let spr_kuang_common = node_kuang_common.getComponent(cc.Sprite);\r\n            if (spr_kuang_common && spr_kuang_common.isValid) {\r\n                if(redArr.includes(this._getSkillIDName(id))){\r\n                    spr_kuang_common.spriteFrame = cc.find(\"framNode\", this._panel).getComponent(\"frameNode\").commonSprite[2];\r\n                }else if(blueArr.includes(this._getSkillIDName(id))){\r\n                    spr_kuang_common.spriteFrame = cc.find(\"framNode\", this._panel).getComponent(\"frameNode\").commonSprite[0];\r\n                }else if(yellowArr.includes(this._getSkillIDName(id))){\r\n                    spr_kuang_common.spriteFrame = cc.find(\"framNode\", this._panel).getComponent(\"frameNode\").commonSprite[1];\r\n                }else if(greenArr.includes(this._getSkillIDName(id))){\r\n                    spr_kuang_common.spriteFrame = cc.find(\"framNode\", this._panel).getComponent(\"frameNode\").commonSprite[5];\r\n                }else if(pinkArr.includes(this._getSkillIDName(id))){\r\n                    spr_kuang_common.spriteFrame = cc.find(\"framNode\", this._panel).getComponent(\"frameNode\").commonSprite[3];\r\n                }else if(purpleArr.includes(this._getSkillIDName(id))){\r\n                    spr_kuang_common.spriteFrame = cc.find(\"framNode\", this._panel).getComponent(\"frameNode\").commonSprite[4];\r\n                }else if(moreblueArr.includes(this._getSkillIDName(id))){\r\n                    spr_kuang_common.spriteFrame = cc.find(\"framNode\", this._panel).getComponent(\"frameNode\").commonSprite[6];\r\n                }\r\n                \r\n            }\r\n        }\r\n    }\r\n\r\n    /** 技能刷新 */\r\n    private _skill_refresh() {\r\n        this._uiSkillIdArr.length = 0;\r\n        // 从技能数组中获取5个技能\r\n        if (this._betterArr.length) {\r\n            for (let i = Math.min(5 - this._uiSkillIdArr.length, this._betterArr.length); i > 0; i--) {\r\n                let index = Math.floor(Math.random() * this._betterArr.length);\r\n                if (this._betterArr[index] >= 0) {\r\n                    this._uiSkillIdArr.push(this._betterArr[index]);\r\n                    this._betterArr.splice(index, 1);\r\n                }\r\n            }\r\n        }\r\n        if (this._otherArr.length) {\r\n            for (let i = Math.min(5 - this._uiSkillIdArr.length, this._otherArr.length); i > 0; i--) {\r\n                let index = Math.floor(Math.random() * this._otherArr.length);\r\n                if (this._otherArr[index] >= 0) {\r\n                    this._uiSkillIdArr.push(this._otherArr[index]);\r\n                    this._otherArr.splice(index, 1);\r\n                }\r\n            }\r\n        }\r\n        // 排序\r\n        for (let i = 0; i < this._uiSkillIdArr.length; i++) {\r\n            // 3级技能(非视频位置)\r\n            if (upgradeMgr.upgradeSkillArr[this._uiSkillIdArr[i]] == 2 && !this._lockArr[i]) {\r\n                // 与视频位置交换\r\n                for (let j = this._uiSkillIdArr.length - 1; j > i; j--) {\r\n                    if (this._lockArr[j] && upgradeMgr.upgradeSkillArr[this._uiSkillIdArr[j]] != 2) {\r\n                        // 交换\r\n                        [this._uiSkillIdArr[i], this._uiSkillIdArr[j]] = [this._uiSkillIdArr[j], this._uiSkillIdArr[i]]\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // 技能0 ///////////////////////////////////////////////////////////////////////////////////////////////\r\n        if (this._uiSkillIdArr[0] >= 0) {\r\n            this._skill0.active = true;\r\n            let id = this._uiSkillIdArr[0];\r\n            this._skill_load(this._skill0, id);\r\n\r\n        } else {\r\n            this._skill0.active = false;\r\n        }\r\n        // 技能1 ///////////////////////////////////////////////////////////////////////////////////////////////\r\n        if (this._uiSkillIdArr[1] >= 0) {\r\n            this._skill1.active = true;\r\n            let id = this._uiSkillIdArr[1];\r\n            this._skill_load(this._skill1, id);\r\n        } else {\r\n            this._skill1.active = false;\r\n        }\r\n        // 技能2 ///////////////////////////////////////////////////////////////////////////////////////////////\r\n        if (this._uiSkillIdArr[2] >= 0) {\r\n            this._skill2.active = true;\r\n            let id = this._uiSkillIdArr[2];\r\n            this._skill_load(this._skill2, id);\r\n        } else {\r\n            this._skill2.active = false;\r\n        }\r\n        // 技能3 ///////////////////////////////////////////////////////////////////////////////////////////////\r\n        if (this._uiSkillIdArr[3] >= 0) {\r\n            this._skill3.active = true;\r\n            let id = this._uiSkillIdArr[3];\r\n            this._skill_load(this._skill3, id);\r\n        } else {\r\n            this._skill3.active = false;\r\n        }\r\n        // 技能4 ///////////////////////////////////////////////////////////////////////////////////////////////\r\n        if (this._uiSkillIdArr[4] >= 0) {\r\n            this._skill4.active = true;\r\n            let id = this._uiSkillIdArr[4];\r\n            this._skill_load(this._skill4, id);\r\n        } else {\r\n            this._skill4.active = false;\r\n        }\r\n\r\n        // 视频按钮隐藏\r\n        if (this._otherArr.length == 0 && this._btnRefresh && this._btnRefresh.active) {\r\n            this._btnRefresh.active = false;\r\n        }\r\n        this.updateFrame();\r\n    }\r\n\r\n    // 更新外发光\r\n    updateFrame() {\r\n        // 选中框\r\n        this._skill0.children[0].active = (this._curIndex == 0);\r\n        this._skill1.children[0].active = (this._curIndex == 1);\r\n        this._skill2.children[0].active = (this._curIndex == 2);\r\n        this._skill3.children[0].active = (this._curIndex == 3);\r\n        this._skill4.children[0].active = (this._curIndex == 4);\r\n        // 解锁框\r\n        this._skill0.children[5].active = this._lockArr[0] && this._curIndex != 0;\r\n        this._skill1.children[5].active = this._lockArr[1] && this._curIndex != 1;\r\n        this._skill2.children[5].active = this._lockArr[2] && this._curIndex != 2;\r\n        this._skill3.children[5].active = this._lockArr[3] && this._curIndex != 3;\r\n        this._skill4.children[5].active = this._lockArr[4] && this._curIndex != 4;\r\n    }\r\n\r\n    /** 卡牌选中特效 */\r\n    card_click(card: cc.Node) {\r\n        card.zIndex = cc.macro.MAX_ZINDEX;\r\n        cc.tween(card)\r\n            .to(0.5, { x: 0, y: 200 }, { easing: \"sineIn\" })\r\n            .to(1, { scale: 2, opacity: 0 }, { easing: \"fade\" })\r\n            .start();\r\n    }\r\n\r\n    /** 卡牌回收 */\r\n    card_recycle(card: cc.Node) {\r\n        let btnUnLock = card.getChildByName(\"btnUnLock\")\r\n        if (btnUnLock) btnUnLock.active = false;\r\n        cc.tween(card)\r\n            .to(0.5, { opacity: 0 }, { easing: \"sineIn\" })\r\n            .start();\r\n    }\r\n\r\n}\r\n"]}