{"version":3,"sources":["assets\\scripts\\Game\\showEffect.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { gameMgr } from \"./gameMgr\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    @property()\r\n    texMess: cc.Vec4 = new cc.Vec4(0, 0, 0, 0);\r\n\r\n    @property()\r\n    intervalTime: number = 0.05;\r\n\r\n    @property()\r\n    effectType: number = 0;\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start() {\r\n        gameMgr && gameMgr.setMapTs.checkNode(this.node, true);\r\n        if (this.node.name.includes(\"bullet_boom\")) {\r\n            if (gameMgr.mainCamereRootNode.getBoundingBoxToWorld().intersects(this.node.getBoundingBoxToWorld())) {\r\n                gameMgr.shakeEffect(3, 1, true);\r\n            }\r\n        }\r\n        if (this.effectType == 0) {\r\n            if (this.getComponent(cc.Sprite) && this.getComponent(cc.Sprite).getMaterial(0).name == \"fire\") {\r\n                let mtl = this.getComponent(cc.Sprite).getMaterial(0);\r\n                mtl.setProperty(\"totalTex\", this.texMess);\r\n\r\n                let num = 1;\r\n                this.schedule(() => {\r\n                    if (!gameMgr.mainCamera.containsNode(this.node)) {\r\n                        this.node.opacity = 0;\r\n                    }\r\n                    else {\r\n                        this.node.opacity = 255;\r\n                    }\r\n                    mtl.setProperty(\"curTex\", num);\r\n                    num++;\r\n                    // if (num > this.texMess.x) {\r\n                    //     num = 1;\r\n                    // }\r\n                    if (num > this.texMess.x) {\r\n                        cc.tween(this.node).to(0.2, { opacity: 0 }).call(() => { this.node.destroy() }).start();\r\n                    }\r\n                }, this.intervalTime, this.texMess.x);\r\n            } else {\r\n                this.node.destroy();\r\n            }\r\n        }\r\n        else if (this.effectType == 1) {\r\n            this.scheduleOnce(() => {\r\n                this.node.destroy();\r\n            }, 2)\r\n        }\r\n        else if (this.effectType == 3) {\r\n            cc.tween(this.node).set({ scale: 3 }).to(0.5, { scale: 1 }).to(0.5, { opacity: 0 }).call(() => {\r\n                this.node.destroy();\r\n            }).start();\r\n        }\r\n        else if (this.effectType == 4) {\r\n            cc.tween(this.node).to(1.5, { angle: 720, scale: 0.5 }).to(0.3, { opacity: 0 }).call(() => { this.node.destroy() }).start();\r\n        }\r\n        else if (this.effectType == 5) {\r\n            let ani = this.node.children[0].getComponent(sp.Skeleton);\r\n            ani.setCompleteListener(() => { cc.isValid(this.node.isValid) && this.node.destroy(); })\r\n            this.scheduleOnce(() => { cc.isValid(this.node.isValid) && this.node.destroy(); }, 2);\r\n        }\r\n        else if (this.effectType == 6) {\r\n            cc.tween(this.node).delay(0.5).to(0.2, { opacity: 0 }).call(() => { this.node.destroy() }).start();\r\n        }\r\n        else if (this.effectType == 7) {\r\n            let icon = this.node.children[0];\r\n            cc.tween(icon)\r\n                .bezierTo(0.6, cc.Vec2.ZERO, cc.v2(-50, 50), cc.v2(-50 - 50 * Math.random(), -150))\r\n                .to(1, { opacity: 0 }, { easing: 'fade' })\r\n                .call(() => { this.node.destroy(); })\r\n                .start();\r\n        }\r\n        else if (this.effectType == 8) {\r\n            cc.tween(this.node)\r\n                .to(0.5, { opacity: 0 })\r\n                .call(() => { this.node.destroy(); })\r\n                .start();\r\n        }\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}