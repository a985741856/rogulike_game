{"version":3,"sources":["assets\\common-plugin\\Scripts\\YzUserPrivacyPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nimport CompatibleTool from \"./CompatibleTool\";\nimport PlatUtils from \"./PlatUtils\";\nimport { utils } from \"./Utils\";\nimport YZ_Constant, { BannerLocation } from \"./YZ_Constant\";\nimport YZ_LocalStorage from \"./YZ_LocalStorage\";\n\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class YzUserPrivacyPanel extends cc.Component {\n\n    _userPrivacyInfo: cc.Node = null;\n\n    _checkExit: cc.Node = null;\n\n    _mainPanel: cc.Node = null;\n\n    _userPrivacyDesc: cc.Label = null;\n\n    showDesc: boolean = false; //直接显示详情页面\n\n    ratio: number = 1;\n\n    imgCount: number = 7; //图片数量 横屏：5 竖屏：7\n    scale: number = 1.5;\n    imgPath: string = \"http://xcx.youletd.com/xcx/h5/privacyImg/\"\n\n    companyInfoNode: cc.Node = null;\n    onLoad() {\n\n        if (PlatUtils.IsWechat || PlatUtils.IsQQ || PlatUtils.IsDouyin || PlatUtils.IsBaidu) {\n            this.imgPath = \"https://xcx.youletd.com/xcx/h5/privacyImg/\"\n        }\n        this._userPrivacyInfo = cc.find(\"PrivacyDesc\", this.node)\n        this._checkExit = cc.find(\"CheckPanel\", this.node)\n\n        this._mainPanel = cc.find(\"Panel\", this.node);\n\n        // this._userPrivacyDesc = this._userPrivacyInfo.getComponent(cc.ScrollView).content.getChildByName(\"item\").getComponent(cc.Label);\n\n        // if (utils.ServerConfig.user_privacy_info) {\n        //     this._userPrivacyDesc.string = utils.ServerConfig.user_privacy_info;\n        // }\n\n        if (this.showDesc) {\n            this._mainPanel.active = false;\n            this._checkExit.active = false;\n            // this._userPrivacyInfo.active = true;\n            this._userPrivacyInfo.getComponent(cc.ScrollView).content.getChildByName(\"choiseNode\").active = false;\n\n            this.showDescPanel();\n        }\n\n\n        if (cc.winSize.height < cc.winSize.width) {\n            // 横屏游戏\n            this.ratio = cc.winSize.width / 1920 * 0.75;\n            this.imgCount = 5;\n            this.imgPath += \"h_\"\n            this.scale = 1.4;\n        } else {\n            this.ratio = cc.winSize.width / 1080;\n            this.imgPath += \"p_\"\n        }\n\n        this._mainPanel.scale = this.ratio;\n        this._checkExit.scale = this.ratio;\n        this._userPrivacyInfo.getComponent(cc.ScrollView).content.getChildByName(\"choiseNode\").scale = this.ratio;\n        this._userPrivacyInfo.getChildByName(\"view\").getChildByName(\"closeImg\").scale = this.ratio;\n        this._userPrivacyInfo.getChildByName(\"view\").getChildByName(\"LaodingLabel\").scale = this.ratio;\n        this.companyInfoNode = this._userPrivacyInfo.getComponent(cc.ScrollView).content.getChildByName(\"ContactInfo\");\n\n\n        let subject = \"深圳市优智信息技术有限公司\";\n        let contact = \"联系邮箱：youzhixx@163.com\";\n        if (utils.ServerConfig.company) {\n            subject = utils.ServerConfig.company.subject;\n            contact = utils.ServerConfig.company.contact;\n        }\n\n\n        this.companyInfoNode.getChildByName(\"subject\").getComponent(cc.Label).string = subject;\n        this.companyInfoNode.getChildByName(\"contact\").getComponent(cc.Label).string = contact;\n\n\n\n    }\n\n\n    // onDestroy() {\n    //     utils.emitPrivacyCloseEvent();\n    // }\n\n    onOKClickListener() {\n        YZ_LocalStorage.setItem(YZ_Constant.YZ_GAME_YSXY, \"isOK\");\n        this.node.destroy();\n        utils.emitPrivacyCloseEvent();\n    }\n\n    onCloseClickListener() {\n        if (PlatUtils.IsHuaWei) {\n            utils.GameExit();\n            return;\n        }\n        if (this._checkExit.active && (PlatUtils.IsQQ || PlatUtils.IsOPPO || PlatUtils.IsXiaoMi)) {\n            utils.GameExit();\n            return;\n        }\n        this._checkExit.active = !this._checkExit.active;\n        this._mainPanel.active = !this._mainPanel.active;\n    }\n\n    onClosePrivacyDesc() {\n\n        if (this.showDesc) {\n            this.node.destroy();\n        } else {\n            this._userPrivacyInfo.active = false;\n            let childs = this._userPrivacyInfo.getComponent(cc.ScrollView).content.children;\n            for (let i = 0; i < childs.length; i++) {\n                childs[i].active = false;\n            }\n        }\n    }\n\n    is_btn_jump_desc: boolean = false;\n    onJumpDescBtnClickListner() {\n        this.is_btn_jump_desc = true;\n        this.showDescPanel();\n    }\n\n\n\n    showDescPanel() {\n        this._userPrivacyInfo.active = true;\n        this._userPrivacyInfo.getChildByName(\"view\").getChildByName(\"LaodingLabel\").active = true;\n\n        this.scheduleOnce(() => {\n            let p = new cc.Node();\n            p.addComponent(cc.Sprite);\n            for (let i = 1; i <= this.imgCount; i++) {\n                let p = new cc.Node();\n                p.addComponent(cc.Sprite);\n                this._userPrivacyInfo.getComponent(cc.ScrollView).content.addChild(p);\n                // cc.loader.loadRes(\"img_font/h_\" + i, (err, res) => {\n                //     if (!err && cc.isValid(this)) {\n                //         p.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(res);\n                //         console.log(p.width, \"===\", p.height);\n                //         p.height *= this.scale * this.ratio;\n                //         p.width *= this.scale * this.ratio;\n                //         if (i >= 1) {\n                //             this._userPrivacyInfo.getChildByName(\"view\").getChildByName(\"LaodingLabel\").active = false;\n                //         }\n                //     } else {\n                //         utils.showLog(\"yinsi\");\n                //     }\n                // })\n                CompatibleTool.LoadRes(this.imgPath + i + \".png\", (err, res) => {\n                    if (!err && cc.isValid(this)) {\n                        p.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(res);\n                        p.height *= this.scale * this.ratio;\n                        p.width *= this.scale * this.ratio;\n                        if (i >= 1) {\n                            this._userPrivacyInfo.getChildByName(\"view\").getChildByName(\"LaodingLabel\").active = false;\n                        }\n                        if (i >= this.imgCount) {\n                            this.companyInfoNode.zIndex = this.imgCount;\n                            this.companyInfoNode.active = true;\n\n                            if (this.is_btn_jump_desc) {\n                                this._userPrivacyInfo.getComponent(cc.ScrollView).content.getChildByName(\"choiseNode\").zIndex = this.imgCount + 1;\n                                this._userPrivacyInfo.getComponent(cc.ScrollView).content.getChildByName(\"choiseNode\").active = true;\n                            }\n\n                        }\n\n                    } else {\n                        utils.showMsg(\"隐私协议加载失败，请关闭窗口重新打开\");\n                    }\n                })\n            }\n            // let childs = this._userPrivacyInfo.getComponent(cc.ScrollView).content.children;\n            // for (let i = 0; i < childs.length; i++) {\n            //     childs[i].opacity = 0;\n            //     childs[i].active = true;\n            //     childs[i].runAction(cc.fadeIn(0.3));\n            // }\n        }, 0.5);\n    }\n\n\n\n    // update (dt) {}\n}\n\n\n\n\n\n\n\n\n\n"]}