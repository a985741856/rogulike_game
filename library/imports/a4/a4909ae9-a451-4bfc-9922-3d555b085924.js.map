{"version":3,"sources":["assets\\common-plugin\\Scripts\\AdAgentBroser.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import AdAgent from \"./AdAgent\";\nimport YZ_NativeBanner from \"./YZ_NativeBanner\";\nimport YZ_NativeInsert from \"./YZ_NativeInsert\";\nimport { BeForGameOverAdId, LevelStatus, BannerLocation } from \"./YZ_Constant\";\nimport { NativeBannerInfo } from \"./CommonConfig\";\nimport { utils } from \"./Utils\";\nimport YZ_NativeItem from \"./YZ_NativeItem\";\nimport YZ_NativeAdObject from \"./YZ_NativeAdObject\";\n\nexport default class AdAgentBroser extends AdAgent {\n\t_nativeBannerNode: cc.Node;\n\t_nativeInsertNode: cc.Node;\n\n\t_nativeBannerInfo: NativeBannerInfo = null;\n\t//当前显示Banner的位置\n\t_curLocation: BannerLocation = BannerLocation.None;\n\t/**\n\t * 获取当前banner配置\n\t */\n\tgetNativeBannerInfo() {\n\t\treturn new NativeBannerInfo();\n\t}\n\n\tpublic ShowBanner(location: BannerLocation = null) {\n\t\tif (this._curLocation != location) {\n\t\t\tthis.HideBanner(location);\n\t\t}\n\t\tthis._curLocation = location;\n\t\tif (this.getNativeBannerInfo().is_show_banner == -1) {\n\t\t\tutils.showLog(\"当前位置配置为不展示banner!\");\n\t\t\tthis.HideBanner(location);\n\t\t\treturn;\n\t\t}\n\t\tif (!this._nativeBannerNode) {\n\t\t\tthis._nativeBannerNode = cc.instantiate(utils.config.otherconfig.nativeBanner);\n\t\t\tcc.director.getScene().addChild(this._nativeBannerNode, 1000);\n\t\t}\n\n\n\t\tthis._nativeBannerNode.active = true;\n\t\tlet nativeBanner = this._nativeBannerNode.getComponent(YZ_NativeBanner);\n\t\tif (nativeBanner) {\n\t\t\tlet addate = { title: \"今日头条\", desc: \"看新闻用今日头条\", imgUrlList: [utils.cur_tool.img_url], icon: utils.cur_tool.img_url };\n\t\t\tnativeBanner.init(null, addate, this.getNativeBannerInfo());\n\t\t}\n\t\t// utils.showRecommendGamesBanner();\n\t}\n\tpublic ShowInterstitial() {\n\t\tif (!this._nativeInsertNode) {\n\t\t\tthis._nativeInsertNode = cc.instantiate(utils.config.otherconfig.nativeInsert);\n\t\t\tcc.director.getScene().addChild(this._nativeInsertNode, 9999);\n\t\t}\n\t\tthis._nativeInsertNode.active = true;\n\t\tlet nativeBanner = this._nativeInsertNode.getComponent(YZ_NativeInsert);\n\t\tif (nativeBanner) {\n\t\t\tlet addate = { title: \"今日头条\", desc: \"看新闻用今日头条\", imgUrlList: [utils.cur_tool.img_url], icon: utils.cur_tool.img_url };\n\t\t\tnativeBanner.init(null, addate);\n\t\t}\n\t\t// utils.showRecommendGamesBanner();\n\t}\n\tshowStatementAds(data) {\n\t\tutils.adManager.ShowInterstitial();\n\t\t// utils.showCrossWidget6();\n\t}\n\tpublic HideBanner(location: BannerLocation = null) {\n\t\tif (this._nativeBannerNode) {\n\t\t\tthis._nativeBannerNode.active = false;\n\t\t}\n\t\tutils.hideRecommendGamesBanner();\n\t}\n\tpublic ShowVideo(callback: Function) {\n\t\tcallback(true, \"视频播放成功!\");\n\t}\n\n\tshowBeforGameOverAd(level: number, levelStatus: LevelStatus, rewardValue: number, closeCallFunc: Function, rewardFunc: Function): void {\n\t\tcc.log(\"显示结算前广告：  #Level= \", level, \" #LevelStatys=\", levelStatus, \" #rewardValue = \", rewardValue);\n\t\tutils.currentLevel = level;\n\t\tutils.isSuccess = levelStatus == LevelStatus.GameWin;\n\t\tutils.rewardCallFunc = rewardFunc;\n\t\tutils.rewardCloseFunc = closeCallFunc;\n\t\tutils.rewardValue = rewardValue;\n\n\t\tlet adType = utils.adManager.checkShowBeforGameOverAd(level, levelStatus == LevelStatus.GameWin);\n\t\tswitch (adType) {\n\t\t\tcase BeForGameOverAdId.SharePanel:\n\t\t\t\tutils.recordEnd();\n\t\t\t\tutils.showShareRecordPanel();\n\t\t\t\tbreak;\n\t\t\tcase BeForGameOverAdId.GoldBox:\n\t\t\t\tutils.adManager.showRewardBoxPanel();\n\t\t\t\tbreak;\n\t\t\tcase BeForGameOverAdId.Turntable:\n\t\t\t\tutils.adManager.showrewardTurnTablePanel();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcloseCallFunc && closeCallFunc();\n\t\t\t\tbreak;\n\t\t}\n\n\t}\n\n\tsignleNativeAd: cc.Node = null;\n\n\t_curNativeItem: YZ_NativeItem = null;\n\t/**\n\t * 创建结算页面推广组件\n\t */\n\tpublic ShowSingleNativeAd(params?: any) {\n\n\t\tif (utils.config.otherconfig.singleNativeAd) {\n\t\t\tif (this.signleNativeAd && cc.isValid(this.signleNativeAd)) {\n\t\t\t\tthis.signleNativeAd.destroy();\n\t\t\t}\n\t\t\tthis.signleNativeAd = cc.instantiate(utils.config.otherconfig.singleNativeAd);\n\n\t\t\tlet nativeItem: YZ_NativeItem = this.signleNativeAd.getComponent(\"YZ_NativeItem\");\n\t\t\tnativeItem.showType = 2;\n\t\t\tnativeItem.params = params;\n\t\t\tthis._curNativeItem = nativeItem;\n\n\t\t\tif (params && params.parent) {\n\t\t\t\tparams.parent.addChild(this.signleNativeAd, cc.macro.MAX_ZINDEX);\n\t\t\t}\n\t\t\tlet nativeObj = new YZ_NativeAdObject();\n            let data = {\n\t\t\t\timgUrlList: [utils.cur_tool.img_url],\n                icon: utils.cur_tool.img_url,\n                title: \"爱奇艺视频\",\n                desc: \"下载爱奇艺，即送VIP！\"\n            }\n            nativeObj.data = data;\n            nativeItem._nativeAd = nativeObj;\n\t\t\tthis._curNativeItem.init(nativeObj);\n\n\t\t\tutils.showLog(\"单个原生广告创建成功！\");\n\t\t\treturn this.signleNativeAd;\n\t\t} else {\n\t\t\tutils.showLog(\"未找到预制体 singleNativeAd, 请查看CommonUtils组件上是否赋值！\");\n\t\t\treturn null;\n\t\t}\n\t}\n}\n"]}