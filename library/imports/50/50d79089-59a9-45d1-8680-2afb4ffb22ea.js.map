{"version":3,"sources":["assets\\common-plugin\\Scripts\\AdAgent4399.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import AdAgent from \"./AdAgent\";\r\nimport { BannerLocation } from \"./YZ_Constant\";\r\nimport PlatUtils from \"./PlatUtils\";\r\nimport { utils } from \"./Utils\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n/**\r\n * uc广告组件\r\n */\r\n@ccclass\r\nexport default class AdAgent4399 extends AdAgent {\r\n\r\n\r\n\t_videoCallback: Function = null;\r\n\t_isVideoLoaded: boolean = false;\r\n\r\n\t_videoAd: any = null;\r\n\r\n\t//@ts-ignore\r\n\t_4399 = window.h5api;\r\n\t_canPlayAd: boolean = true;\r\n\t_remain: number = 0;\r\n\r\n\tpublic Init() {\r\n\t\tthis.checkPlayAd();\r\n\t}\r\n\r\n\t/**\r\n\t * 获得是否可以播放广告及剩余次数\r\n\t */\r\n\tpublic checkPlayAd() {\r\n\t\tthis._canPlayAd = true;\r\n\t\treturn;\r\n\t\t// this._4399.canPlayAd((data: any) => {\r\n\t\t// \tif (data.canPlayAd) {\r\n\t\t// \t\tthis._canPlayAd = data.canPlayAd;\r\n\t\t// \t} else {\r\n\t\t// \t\tthis._canPlayAd = false;\r\n\t\t// \t}\r\n\t\t// \tif (data.remain) {\r\n\t\t// \t\tthis._remain = data.remain;\r\n\t\t// \t}\r\n\t\t// \tutils.showLog(\"是否可播放广告\", data.canPlayAd, \"剩余次数\", data.remain)\r\n\t\t// })\r\n\t}\r\n\r\n\r\n\r\n\tpublic ShowBanner() {\r\n\t\tutils.showLog(\"4399平台暂无banner广告\");\r\n\t}\r\n\r\n\r\n\r\n\tpublic ShowInterstitial() {\r\n\t\tutils.showLog(\"4399平台暂时无插屏广告\");\r\n\t}\r\n\r\n\t/**\r\n\t* 播放全屏广告\r\n\t* @param callback   播放广告时的广告状态回调函数\r\n\t*/\r\n\tpublic ShowVideo(callback: Function) {\r\n\t\tif (PlatUtils.Is4399) {\r\n\t\t\tthis._videoCallback = callback;\r\n\t\t\tif (this._canPlayAd) {\r\n\t\t\t\tthis._4399.playAd((obj: any) => {\r\n\t\t\t\t\tutils.showLog('代码:' + obj.code + ',消息:' + obj.message)\r\n\t\t\t\t\tif (obj.code === 10000) {\r\n\t\t\t\t\t\tutils.showLog('视频开始播放')\r\n\t\t\t\t\t} else if (obj.code === 10001) {\r\n\t\t\t\t\t\tutils.showLog('视频播放结束')\r\n\t\t\t\t\t\tif (this._videoCallback) {\r\n\t\t\t\t\t\t\tthis._videoCallback(true, \"\");\r\n\t\t\t\t\t\t\tthis._videoCallback = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.checkPlayAd();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (this._videoCallback) {\r\n\t\t\t\t\t\t\tthis._videoCallback(false, \"激励视频异常!\");\r\n\t\t\t\t\t\t\tthis._videoCallback = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.checkPlayAd();\r\n\t\t\t\t\t\tutils.showLog('视频广告异常')\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tutils.showLog('4399获取到不能播放广告! #this._canPlayAd=', this._canPlayAd, \"剩余次数\", this._remain);\r\n\t\t\t\tif (this._videoCallback) {\r\n\t\t\t\t\tthis._videoCallback(false, \"今日次数用完，明天再来!\");\r\n\t\t\t\t\tthis._videoCallback = null;\r\n\t\t\t\t}\r\n\t\t\t\tthis.checkPlayAd();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\r\n}\r\n"]}