{"version":3,"sources":["assets\\common-plugin\\Scripts\\YZ_Tool_Douyin.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import PlatUtils from \"./PlatUtils\";\r\nimport { utils } from \"./Utils\";\r\nimport YZ_Constant, { LevelStatus } from \"./YZ_Constant\";\r\nimport YZ_LocalStorage from \"./YZ_LocalStorage\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nconst ST_ServerUrl: string = \"https://apps.youlesp.com/gss?\";\r\nconst POST_ServerUrl: string = \"https://report.youletd.com/gss?\";\r\n// 默认配置\r\nlet ST_DefaultServerConfig: string = \"\";\r\n\r\n@ccclass\r\nexport default class YZ_Tool_Douyin {\r\n\r\n    _recorder: any = null;\r\n    _videoPath: string = null;\r\n\r\n    _shareCallback: Function = null;\r\n\r\n\r\n    recorderStarTime: number = 0; //开始录屏时间\r\n    isAutoShare: boolean = true;  //是否自动分享\r\n    isClickEnd: boolean = false;\r\n    isNewsArticleLite: boolean = false; //是否头条极速版\r\n    //@ts-ignore\r\n    tt = window.tt;\r\n    /**\r\n     * 服务器配置信息\r\n     */\r\n    _serverConfig: any = null;\r\n    public get ServerConfig() {\r\n        return this._serverConfig;\r\n    }\r\n\r\n\r\n    /**\r\n     * 当前版本号\r\n     */\r\n    public gameVersion(): string {\r\n        return utils.config.douyinconfig.version;\r\n    }\r\n\r\n\r\n    //设备UID\r\n    _uid: string = \"0\";\r\n\r\n    public get uid() {\r\n        // if (this._service_uid != \"0\") return this._uid;\r\n        // this._login();\r\n        return \"0\";\r\n    }\r\n\r\n    //服务器返回UID\r\n    _service_uid: string = \"0\";\r\n\r\n    /**\r\n     * 服务器返回UID\r\n     */\r\n    public get serviceId() {\r\n        if (this._service_uid != \"0\") return this._service_uid;\r\n        this.reportLogin();\r\n        return \"0\";\r\n    }\r\n\r\n\r\n    _loginTime: number = 0;\r\n    _loginInterval: number = 30;\r\n    async _login() {\r\n\r\n        let curTime: number = new Date().getTime();\r\n        let interval: number = (curTime - this._loginTime) / 1000;\r\n        if (interval > 0 && interval < 30) {\r\n            utils.showLog(`登录请求间隔小于：${this._loginInterval}秒`);\r\n            return;\r\n        }\r\n        this._loginTime = curTime;\r\n        let self = this;\r\n        utils.showLog(\"douying暂时不获取uid，uid全部为0\");\r\n        this._uid = \"0\";\r\n\r\n        // this.reportLogin();\r\n\r\n    }\r\n\r\n    login() {\r\n        utils.showLog(\"douying login\");\r\n        //@ts-ignore\r\n        tt.login({\r\n            withRealNameAuthenticationInfo: true,\r\n            success: (_res) => {\r\n                utils.showLog(\"登录成功\");\r\n                // 调用 getUserInfo 前, 请确保登录成功\r\n                //实名认证需要用户点击触发\r\n                //@ts-ignore\r\n                // 获取用户信息\r\n                tt.getUserInfo({\r\n                    // withCredentials: true,\r\n                    withRealNameAuthenticationInfo: true,\r\n                    success: (res) => {\r\n                        utils.showLog(`getUserInfo 调用成功`, res.userInfo);\r\n                        if (res.userInfo) {\r\n                            if (res.userInfo.realNameAuthenticationStatus && res.userInfo.realNameAuthenticationStatus == \"uncertified\") {\r\n                                utils.showLog(`getUserInfo 用户未进行实名制！`);\r\n                                this.realNameAuth();\r\n                            } else if (res.userInfo.realNameAuthenticationStatus && res.userInfo.realNameAuthenticationStatus == \"certified\") {\r\n                                utils.showLog(`getUserInfo 用户已实名制！`);\r\n                                cc.game.emit(YZ_Constant.ST_LOGIN_SUCCESS);\r\n                            } else {\r\n                                cc.game.emit(YZ_Constant.ST_LOGIN_FAIL);\r\n                            }\r\n                        }\r\n                    },\r\n                    fail(res) {\r\n                        utils.showLog(`getUserInfo 调用失败`, res.errMsg);\r\n                    }\r\n                })\r\n            },\r\n            fail: () => {\r\n                cc.game.emit(YZ_Constant.ST_LOGIN_FAIL);\r\n                this.showToast(\"登录失败！\");\r\n            }\r\n        });\r\n    }\r\n\r\n    realNameAuth() {\r\n        utils.showLog(\"douying realNameAuth\");\r\n        //@ts-ignore\r\n        tt.authenticateRealName({\r\n            success: (_res) => {\r\n                utils.showLog(\"用户实名认证成功\");\r\n                cc.game.emit(YZ_Constant.ST_LOGIN_SUCCESS);\r\n            },\r\n            fail: (res) => {\r\n                this.showToast(\"实名制认证失败，请稍后重试！\");\r\n                cc.game.emit(YZ_Constant.ST_LOGIN_FAIL);\r\n                utils.showLog(\"用户实名认证失败\", res.errMsg);\r\n            },\r\n        });\r\n    }\r\n\r\n\r\n    _reportLoginTime: number = 0;\r\n    _reportLoginInterval: number = 30;\r\n    isReport: boolean = false;\r\n\r\n    _jumpIds: string = \"\";\r\n\r\n    /**\r\n     * 上报登录接口获取UID\r\n     */\r\n    reportLogin() {\r\n        if (this.isReport) return;\r\n        this.isReport = true;\r\n        let self = this;\r\n        let curTime: number = new Date().getTime();\r\n        let interval: number = (curTime - self._reportLoginTime) / 1000;\r\n        if (interval > 0 && interval < 30) {\r\n            utils.showLog(`上报登录获取UID小于：${self._reportLoginInterval}秒`);\r\n            return;\r\n        }\r\n        self._reportLoginTime = curTime;\r\n        let method = \"m=login\";\r\n        let url: string = ST_ServerUrl + method + `&device_data=0`;\r\n\r\n        utils.commomHttpRequest(url, (ret, data) => {\r\n            if (ret) {\r\n                if (data) {\r\n                    let result = JSON.parse(data);\r\n                    utils.showLog(\"data=\" + data);\r\n                    utils.showLog(\"result=\" + result);\r\n                    utils.showLog(\"result.uid=\" + result.uid);\r\n                    if (result.uid) {\r\n                        self._service_uid = \"\" + result.uid;\r\n                        utils.showLog(\"服务器请求登录成功! _service_uid=\" + self._service_uid);\r\n                        YZ_LocalStorage.setItem(YZ_Constant.ST_SERVICE_UID, self._service_uid);\r\n                    }\r\n                }\r\n            } else {\r\n                utils.showLog(\"获取数据失败1\");\r\n            }\r\n            this.isReport = false;\r\n        })\r\n    }\r\n    _sysInfo: any = null;\r\n\r\n    //是否是点完暂停按钮后自动分享得录屏\r\n    is_auto_share_video: boolean = false;\r\n    /**\r\n     * 自动分享次数\r\n    */\r\n    recored_share_count: number = 0;\r\n    appLaunchOptions: any[] = [];\r\n    /**\r\n     * \r\n     * @param data 配置数据.\r\n     */\r\n    public init(data: string) {\r\n\r\n        if (PlatUtils.IsDouyin) {\r\n            if (data) {\r\n                let configObj: any = JSON.parse(data);\r\n                if (configObj && configObj.toutiao) {\r\n                    utils.showLog(\"本地配置数据:\" + JSON.stringify(configObj.toutiao));\r\n                    ST_DefaultServerConfig = JSON.stringify(configObj.toutiao);\r\n                }\r\n            }\r\n            this._service_uid = YZ_LocalStorage.getItem(YZ_Constant.ST_SERVICE_UID);\r\n            this._service_uid = this._service_uid ? this._service_uid : \"0\";\r\n\r\n            this._sysInfo = this.tt.getSystemInfoSync();\r\n            utils.showLog(\"抖音平台信息：\" + JSON.stringify(this._sysInfo));\r\n            if (this._sysInfo && this._sysInfo.appName && this._sysInfo.appName == \"news_article_lite\") {\r\n                this.isNewsArticleLite = true;\r\n            }\r\n\r\n\r\n            // // 拉取服务器配置\r\n            // this.loadJumpIds().then(() => {\r\n            //     console.log(\"本地跳转ID加载成功！\");\r\n            //     this._loadConfig();\r\n            // }).catch((erro) => {\r\n            //     console.error(\"本地跳转ID加载失败：\", erro);\r\n            this._loadConfig();\r\n            // })\r\n\r\n\r\n            let self = this;\r\n\r\n            this._recorder = this.tt.getGameRecorderManager();\r\n            if (this._recorder) {\r\n                this._recorder.onStart((res) => {\r\n                    self._videoPath = \"\";\r\n                    this.isClickEnd = false;\r\n                    this.is_auto_share_video = false;\r\n                    utils.isRecording = true;\r\n                    console.log(\"录屏开始>>>\");\r\n                    utils.showLog('录屏开始');\r\n                    this.recorderStarTime = new Date().getTime();\r\n                    cc.game.emit(\"YZ_CommonMessage\", { type: \"YZ_RecordStart\" });\r\n                });\r\n\r\n                this._recorder.onStop((res) => {\r\n                    utils.showLog(\"录屏结束 :\" + res.videoPath);\r\n                    utils.isRecording = false;\r\n                    cc.game.emit(\"YZ_CommonMessage\", { type: \"YZ_RecordEnd\" });\r\n\r\n\r\n                    let curTime: number = new Date().getTime();\r\n                    let interval: number = (curTime - this.recorderStarTime) / 1000;\r\n\r\n                    if (interval > 3) {\r\n                        self._videoPath = res.videoPath;\r\n                        utils.showLog(\"录屏时间大于3秒\", interval);\r\n                        if (this.isAutoShare) {\r\n                            if (this.isClickEnd) {\r\n                                this.shareVideo();\r\n                                this._shareCallback = null;\r\n                                this.is_auto_share_video = true;\r\n                            } else if (utils.checkResultShow(1)) {\r\n                                utils.showLog(\"满足自动分享条件，弹出分享窗口！\");\r\n                                if (utils.rewardCloseFunc == null) {\r\n                                    utils.rewardValue = 0;\r\n                                    utils.showShareRecordPanel();\r\n                                }\r\n                            } else if (interval > 100) {\r\n                                if (utils.rewardCloseFunc == null) {\r\n                                    utils.rewardValue = 0;\r\n                                    utils.showShareRecordPanel();\r\n                                }\r\n                            }\r\n                        } else {\r\n                            this.isAutoShare = true;\r\n                        }\r\n                    } else {\r\n                        //@ts-ignore\r\n                        if (this.isClickEnd) {\r\n                            this.tt.showToast({\r\n                                title: \"录屏时间小于3秒!\",\r\n                                icon: \"fail\",\r\n                                duration: 2000,\r\n                                success(res) {\r\n                                    console.log(`${res}`);\r\n                                },\r\n                                fail(res) {\r\n                                    console.log(`showToast调用失败`);\r\n                                }\r\n                            });\r\n                        }\r\n\r\n                        self._videoPath = \"\";\r\n\r\n                        utils.showLog(\"录屏时间小于3秒，录录屏地址置空！\");\r\n                    }\r\n\r\n\r\n                });\r\n            }\r\n\r\n            // 开启右上角分享按钮\r\n            //@ts-ignore\r\n            this.tt.showShareMenu({\r\n                withShareTicket: false\r\n            });\r\n\r\n            //@ts-ignore\r\n            this.tt.onShareAppMessage((res) => {\r\n                return self._getShareInfo();\r\n            });\r\n\r\n\r\n            utils.registerServerInitEvent(() => {\r\n                if (this.ServerConfig.add_favorite) {\r\n                    setTimeout(() => {\r\n                        utils.showLog(\"延迟调用添加搜藏!!\");\r\n                        this.showFavoriteGuide();\r\n                    }, this.ServerConfig.add_favorite * 1000);\r\n                }\r\n\r\n            }, this);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n      * 添加搜藏\r\n      */\r\n    showFavoriteGuide() {\r\n        if (this.tt.showFavoriteGuide) {\r\n            this.tt.showFavoriteGuide({\r\n                type: \"bar\",\r\n                content: \"一键添加到我的小程序\",\r\n                position: this.ServerConfig.favorite_type ? this.ServerConfig.favorite_type : \"bottom\",\r\n                success(res: any) {\r\n                    utils.showLog(\"引导组件展示成功\");\r\n                },\r\n                fail(res: any) {\r\n                    utils.showLog(\"引导组件展示失败:ero=\" + JSON.stringify(res));\r\n                },\r\n            });\r\n        } else {\r\n            utils.showLog(\"当前头条版本不支持添加收藏！\");\r\n        }\r\n\r\n    }\r\n\r\n    loadJumpIds() {\r\n        return new Promise((resolve, reject) => {\r\n            cc.loader.load(\"game.json\", (err, res) => {\r\n                if (!err) {\r\n                    res.ttNavigateToMiniGameAppIdList.forEach(element => {\r\n                        this._jumpIds += element + \",\";\r\n                    });\r\n                    this._jumpIds.substring(0, this._jumpIds.lastIndexOf(\",\"));\r\n                    //@ts-ignore\r\n                    resolve();\r\n                }\r\n                reject(err);\r\n            });\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    _loadConfig() {\r\n        if (PlatUtils.IsDouyin) {\r\n            let method: string = \"m=g\";\r\n\r\n            utils.commomHttpRequest(ST_ServerUrl + method + `&jump_id=${this._jumpIds}`, (ret, data) => {\r\n                if (ret && data) {\r\n                    utils.showLog(\"抖音服务器配置数据获取成功: data = \" + data);\r\n                    let result = JSON.parse(data);\r\n                    if (!utils.DebugLoacalConfig) {\r\n                        this._serverConfig = result;\r\n                    } else {\r\n                        utils.showLog(\"调试模式，使用本地配置!\");\r\n                    }\r\n                } else {\r\n                    utils.showLog(\"抖音服务器配置数据获取失败, 使用本地配置!\");\r\n                }\r\n\r\n                if (!this.ServerConfig) {\r\n                    this._serverConfig = JSON.parse(ST_DefaultServerConfig);\r\n                } else {\r\n                    if (this.ServerConfig.is_local_pos_id == \"false\") {\r\n                        utils.showLog(\"使用服务器下发的广告ID\");\r\n                        utils.config.douyinconfig.bannerId = this.ServerConfig.banner_pos_id;\r\n                        utils.config.douyinconfig.insertId = this.ServerConfig.intersititia_pos_id;\r\n                        utils.config.douyinconfig.videoId = this.ServerConfig.video_pos_id;\r\n                    }\r\n\r\n                    if (this._serverConfig.shares && this._serverConfig.shares.sy_title) {\r\n                        utils.config.otherconfig.shareTitle = this._serverConfig.shares.sy_title;\r\n                    }\r\n                    if (this._serverConfig.shares && this._serverConfig.shares.sy_img) {\r\n                        utils.config.otherconfig.shareImgUrl = this._serverConfig.shares.sy_img;\r\n                    }\r\n                }\r\n\r\n                utils.emitServerInitEvent();\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n    * 开始录屏\r\n    */\r\n    public recordStart() {\r\n        if (PlatUtils.IsDouyin) {\r\n            if (this._recorder) {\r\n                this._recorder.start({\r\n                    duration: this.ServerConfig.record_duration ? this.ServerConfig.record_duration : 120\r\n                });\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 结束录屏\r\n     */\r\n    public recordEnd() {\r\n        if (PlatUtils.IsDouyin) {\r\n            this._recorder.stop();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 分享，有录屏就分享录屏，没有录屏就分享图片\r\n     */\r\n    public share(callback?: Function) {\r\n        if (PlatUtils.IsDouyin) {\r\n            this._shareCallback = callback;\r\n            if (this._videoPath && !utils.isRecording) {\r\n                this.shareVideo();\r\n            } else {\r\n                this.shareImage();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 分享录屏\r\n     */\r\n    public shareVideo() {\r\n        if (PlatUtils.IsDouyin) {\r\n            if (this._videoPath) {\r\n                let self = this;\r\n                //@ts-ignore\r\n                this.tt.shareAppMessage({\r\n                    channel: 'video',\r\n                    extra: {\r\n                        videoPath: self._videoPath // 可用录屏得到的视频地址\r\n                    },\r\n                    success() {\r\n                        cc.log('视频分享成功!');\r\n                        if (self._shareCallback) {\r\n                            self._shareCallback(true);\r\n                        }\r\n                    },\r\n                    fail(e) {\r\n                        cc.log('视频分享失败!', JSON.stringify(e));\r\n                        self._videoPath = \"\";\r\n                        let msg: string = \"分享失败!\";\r\n                        if (e && e.errMsg) {\r\n                            msg = e.errMsg;\r\n                            if (msg.indexOf(\"fail\") != -1) {\r\n                                console.log(self._sysInfo);\r\n                                if (self._sysInfo.appName == \"XiGua\") {\r\n                                    msg = \"分享失败!\";\r\n                                } else {\r\n                                    // 视频太短\r\n                                    msg = \"分享失败，录屏时间太短！\";\r\n                                }\r\n\r\n                            } else {\r\n                                msg = \"分享失败!\";\r\n                            }\r\n                        }\r\n                        if (self._shareCallback) {\r\n                            self._shareCallback(false, msg);\r\n                        }\r\n                        if (self.is_auto_share_video) {\r\n                            self.is_auto_share_video = false;\r\n                            self.tt.showToast({\r\n                                title: msg,\r\n                                icon: \"fail\",\r\n                                duration: 2000,\r\n                                success(res) {\r\n                                    console.log(`${res}`);\r\n                                },\r\n                                fail(res) {\r\n                                    console.log(`showToast调用失败`);\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 分享图片\r\n     */\r\n    public shareImage() {\r\n        if (PlatUtils.IsDouyin) {\r\n            let shareInfo = utils.getShareInfo();\r\n            utils.showLog(`分享图片：title:${shareInfo.title}; imageUrl:${shareInfo.imageUrl}`);\r\n            if (shareInfo) {\r\n                let self = this;\r\n                //@ts-ignore\r\n                this.tt.shareAppMessage({\r\n                    title: shareInfo.title,\r\n                    imageUrl: shareInfo.imageUrl,\r\n                    success() {\r\n                        utils.showLog('图片分享成功!');\r\n                        if (self._shareCallback) {\r\n                            self._shareCallback(true);\r\n                        }\r\n                    },\r\n                    fail(e) {\r\n                        utils.showLog('图片分享失败!' + JSON.stringify(e));\r\n                        if (self._shareCallback) {\r\n                            self._shareCallback(false);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 显示更多游戏按钮\r\n     */\r\n    public showMoreGamesButton(params: any) {\r\n        if (PlatUtils.IsDouyin) {\r\n            let left: number = 0;\r\n            let top: number = 0;\r\n            let width: number = 0;\r\n            let height: number = 0;\r\n            if (cc.view.getDesignResolutionSize().width < 1080) {\r\n                width = 188 / 1080 * this._sysInfo.screenWidth;\r\n                height = 223 / 1080 * this._sysInfo.screenWidth;\r\n            } else {\r\n                width = 188 / cc.view.getDesignResolutionSize().width * this._sysInfo.screenWidth;\r\n                height = 223 / cc.view.getDesignResolutionSize().width * this._sysInfo.screenWidth;\r\n            }\r\n\r\n            if (params) {\r\n                if (params.left) {\r\n                    left = params.left / cc.view.getDesignResolutionSize().width * this._sysInfo.screenWidth;\r\n                } else if (params.right) {\r\n                    left = this._sysInfo.screenWidth - params.right / cc.view.getDesignResolutionSize().width * this._sysInfo.screenWidth - width;\r\n                }\r\n\r\n                if (params.top) {\r\n                    top = params.top / cc.view.getDesignResolutionSize().height * this._sysInfo.screenHeight;\r\n                } else if (params.bottom) {\r\n                    top = this._sysInfo.screenHeight - params.bottom / cc.view.getDesignResolutionSize().height * this._sysInfo.screenHeight - height;\r\n                }\r\n            }\r\n\r\n            utils.showLog(`更多游戏按钮参数：left:${left}; top:${top}; width:${width}; height:${height}`);\r\n            //@ts-ignore\r\n            return this.tt.createMoreGamesButton({\r\n                type: \"image\",\r\n                image: \"img/more_game.png\",\r\n                style: {\r\n                    left: left,\r\n                    top: top,\r\n                    width: width,\r\n                    height: height,\r\n                    lineHeight: 40,\r\n                    backgroundColor: \"#ff0000\",\r\n                    textColor: \"#ffffff\",\r\n                    textAlign: \"center\",\r\n                    fontSize: 16,\r\n                    borderRadius: 4,\r\n                    borderWidth: 0,\r\n                    borderColor: '#ff0000'\r\n                },\r\n                appLaunchOptions: [\r\n                ],\r\n                onNavigateToMiniGame(res) {\r\n                    utils.showLog('跳转其他小游戏' + res)\r\n                    if (res && res.errCode == 0) {\r\n                        // 跳转成功\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    _getShareInfo() {\r\n        if (PlatUtils.IsDouyin) {\r\n            let shareInfo = utils.getShareInfo();\r\n            if (shareInfo) {\r\n                return {\r\n                    title: shareInfo.title,\r\n                    imageUrl: shareInfo.imageUrl,\r\n                    success: function (res) {\r\n                        utils.showLog(\"分享成功!\");\r\n                    },\r\n                    fail: function (err) {\r\n                        utils.showLog(\"分享失败!\");\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return {};\r\n    }\r\n\r\n    /**\r\n     * 比较当前平台版本是否高于指定的版本号\r\n     * @param miniVersion 最低平台版本号\r\n     */\r\n    public isOverMiniVersion(miniVersion: string) {\r\n        if (PlatUtils.IsDouyin) {\r\n            if (this._sysInfo && miniVersion != null) {\r\n                return this._compareVersion(this._sysInfo.SDKVersion, miniVersion);\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    _compareVersion(first: string, second: string) {\r\n        return parseInt(first.split(\".\").join(\"\")) >= parseInt(second.split(\".\").join(\"\"));\r\n    }\r\n\r\n\r\n    /**\r\n     * 判断是否支持显示更多游戏弹窗\r\n     */\r\n    isShowMoreGamesModal() {\r\n\r\n        if (PlatUtils.IsAndroid && this.tt.showMoreGamesModal) {\r\n            return true;\r\n        }\r\n        utils.showLog(\"当前版本不支持显示抖音更多游戏弹窗！\");\r\n        return false;\r\n    }\r\n    /**\r\n     * 持显示更多游戏弹窗\r\n     */\r\n    showMoreGamesModal() {\r\n        if (PlatUtils.IsAndroid) {\r\n            this.tt.showMoreGamesModal({\r\n                appLaunchOptions: [],\r\n                success(res) {\r\n                    console.log(\"success\", res.errMsg);\r\n                },\r\n                fail(res) {\r\n                    console.log(\"fail\", res.errMsg);\r\n                }\r\n            });\r\n        } else {\r\n            utils.showMsg(\"当前平台暂时不支持跳转\");\r\n        }\r\n    }\r\n\r\n    /**\r\n   * 获取交叉推广数据\r\n   */\r\n    public getRecommondGameList() {\r\n        if (PlatUtils.IsDouyin\r\n            && this.ServerConfig) {\r\n            return this.ServerConfig.jump_list;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * 上报关卡数据\r\n     * @param level 当前关卡ID\r\n     * @param levelName 关卡名称\r\n     * @param status 状态\r\n     */\r\n    public postLevel(level: string, status: LevelStatus, levelName?: string) {\r\n        if (PlatUtils.IsDouyin) {\r\n            let method = \"m=rlevel\";\r\n            let url: string = POST_ServerUrl + method + `&level_id=${level}&level_name=${encodeURI(levelName)}&status=${status}`;\r\n            utils.commomHttpRequest(url, function (ret, data) {\r\n                if (ret) {\r\n                    utils.showLog(\"关卡数据上报成功！\");\r\n                } else {\r\n                    utils.showLog(\"关卡数据上报失败！\");\r\n                }\r\n            }.bind(this));\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n    * 上报自定义事件\r\n    * @param level 当前关卡ID\r\n    * @param levelName 关卡名称\r\n    * @param status 状态\r\n    */\r\n    public sendEvent(eventName: string) {\r\n        if (PlatUtils.IsDouyin) {\r\n            let method = \"m=revent\";\r\n            let url: string = POST_ServerUrl + method + `&event=${encodeURI(eventName)}`;\r\n            utils.commomHttpRequest(url, function (ret, data) {\r\n                if (ret) {\r\n                    utils.showLog(\"上报自定义事件成功！\");\r\n                } else {\r\n                    utils.showLog(\"上报自定义事件失败！\");\r\n                }\r\n            }.bind(this));\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n      * 弹出提示框\r\n      * @param msg 消息\r\n      */\r\n    public showToast(msg: string) {\r\n        if (PlatUtils.IsDouyin) {\r\n            //@ts-ignore\r\n            tt.showToast({\r\n                title: msg,\r\n                icon: \"none\",\r\n                duration: 2000,\r\n                success(res) {\r\n                    console.log(`${res}`);\r\n                },\r\n                fail(res) {\r\n                    console.log(`showToast调用失败`);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    public GameExit() {\r\n        //@ts-ignore\r\n        tt.exitMiniProgram({\r\n            success(res) {\r\n                console.log(\"调用成功\", res.data);\r\n            },\r\n            fail(res) {\r\n                console.log(\"调用失败\", res.errMsg);\r\n            },\r\n        });\r\n    }\r\n}\r\n"]}