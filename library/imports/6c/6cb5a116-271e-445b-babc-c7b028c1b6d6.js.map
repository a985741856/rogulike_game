{"version":3,"sources":["assets\\common-plugin\\Scripts\\AdAgentQQ.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import AdAgent from \"./AdAgent\";\r\nimport { BannerLocation } from \"./YZ_Constant\";\r\nimport PlatUtils from \"./PlatUtils\";\r\nimport { utils } from \"./Utils\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class AdAgentQQ extends AdAgent {\r\n\r\n    _sysData: any = null;\r\n    _curBannerAd: any = null;\r\n    _videoAd: any = null;\r\n    _insertAd: any = null;\r\n    _oldAd: any = null;\r\n    _appBox: any = null; //游戏盒子广告\r\n\r\n    _videoCallback: Function = null;\r\n    _isVideoLoaded: boolean = false;\r\n    _isVideoShow: boolean = false;\r\n    //@ts-ignore\r\n    qq: any = window.qq;\r\n    public Init() {\r\n        if (PlatUtils.IsQQ) {\r\n            utils.registerServerInitEvent(() => {\r\n                this._sysData = utils.Tool_QQ.getSystemInfo();\r\n                this._initVideoAd();\r\n            }, this);\r\n        }\r\n    }\r\n\r\n\r\n    public get ServerConfig() {\r\n        return utils.Tool_QQ.ServerConfig;\r\n    }\r\n\r\n    // /**\r\n    //  * 初始化游戏盒子\r\n    //  */\r\n    // _initAppBox() {\r\n    //     let checkVersion: boolean = utils.Tool_QQ.isOverMinVersion(\"1.7.1\");\r\n    //     if (checkVersion) {\r\n    //         this._appBox = qq.createAppBox({\r\n    //             adUnitId: utils.config.qqconfig.appBoxId\r\n    //         });\r\n    //         this._appBox.load().then(() => {\r\n    //             utils.showLog(\"游戏盒子加载成功！\")\r\n    //         }).catch(() => {\r\n    //             utils.showLog(\"游戏盒子加载失败！\");\r\n    //         });\r\n    //     } else {\r\n    //         cc.warn(\"当前基础库版本低于1.7.1，不显示盒子广告\");\r\n    //     }\r\n    // }\r\n\r\n    _initVideoAd() {\r\n        if (!this._videoAd) {\r\n            utils.showLog(\"初始化视频!\");\r\n            if (!utils.config.qqconfig.videoId) {\r\n                utils.showLog(\"视频ID配置错误!\");\r\n\r\n                if (this._videoCallback) {\r\n                    this._videoCallback(false, \"暂无视频广告!\");\r\n                    this._videoCallback = null;\r\n                }\r\n                return;\r\n            }\r\n\r\n            // if (!utils.Tool_QQ.isOverMinVersion(\"0.1.26\")) {\r\n            //     utils.showLog(\"当前版本不支持视频广告!\");\r\n            //     if (this._videoCallback) {\r\n            //         this._videoCallback(false, \"暂无视频广告!\");\r\n            //         this._videoCallback = null;\r\n            //     }\r\n            //     return;\r\n            // }\r\n\r\n            utils.showLog(\"视频广告ID:\", utils.config.qqconfig.videoId.trim());\r\n            this._videoAd = this.qq.createRewardedVideoAd({\r\n                adUnitId: utils.config.qqconfig.videoId\r\n            });\r\n\r\n            if (this._videoAd) {\r\n                utils.showLog(\"初始化注册视频回调!\");\r\n                this._videoAd.onLoad(() => {\r\n                    utils.showLog(\"激励视频加载成功\");\r\n                    this._isVideoLoaded = true;\r\n\r\n                    if (this._isVideoShow) {\r\n                        this._videoAd.show().then(() => {\r\n                        }).catch(() => {\r\n                            utils.showLog(\"视频播放失败！\");\r\n                            if (this._videoCallback) {\r\n                                this._videoCallback(\"暂无视频广告!\");\r\n                                this._videoCallback = null;\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n\r\n                this._videoAd.onError((err) => {\r\n                    utils.showLog(\"激励视频加载失败!\", err.code, err.msg);\r\n                    this._isVideoLoaded = false;\r\n                    if (this._videoCallback) {\r\n                        this._videoCallback(false, \"暂无视频广告!\");\r\n                        this._videoCallback = null;\r\n                    }\r\n                });\r\n\r\n                this._videoAd.onClose((res) => {\r\n                    this._isVideoShow = false;\r\n                    if (res && res.isEnded || res === undefined) {\r\n                        // 正常播放结束，可以下发游戏奖励\r\n                        utils.showLog('激励视频广告完成，发放奖励');\r\n                        if (this._videoCallback) {\r\n                            this._videoCallback(true, \"\");\r\n                            this._videoCallback = null;\r\n                        }\r\n                    } else {\r\n                        // 播放中途退出，不下发游戏奖励\r\n                        utils.showLog('激励视频广告取消关闭，不发放奖励');\r\n                        if (this._videoCallback) {\r\n                            this._videoCallback(false, \"观看完视频才能获得奖励!\");\r\n                            this._videoCallback = null;\r\n                        }\r\n                    }\r\n                });\r\n            } else {\r\n                utils.showLog(\"激励视频初始化失败!\");\r\n                if (this._videoCallback) {\r\n                    this._videoCallback(false, \"暂无视频广告!\");\r\n                    this._videoCallback = null;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    _bannerShow: boolean = false;\r\n    _bannerSizePercent: number = 0.5;\r\n    _bannerBottom: number = 0;\r\n    _oldBannerLocation: BannerLocation = BannerLocation.None;\r\n\r\n    _curBannerHeight: number = 240;\r\n\r\n    _moveBtn: cc.Node = null;\r\n    _cur_level: any = null;\r\n    _createBanner(location: BannerLocation, args: any = null) {\r\n        if (PlatUtils.IsQQ) {\r\n\r\n\r\n            if (!utils.config.qqconfig.bannerId) {\r\n                utils.showLog(\"banner广告ID不存在\");\r\n                return;\r\n            }\r\n            var argsTmp: any = args;\r\n            this._bannerShow = false;\r\n\r\n            if (argsTmp && argsTmp.width) {\r\n                this._bannerSizePercent = argsTmp.width < 0 ? 0 : argsTmp.width;\r\n                this._bannerSizePercent = argsTmp.width > 1 ? 1 : this._bannerSizePercent;\r\n            }\r\n\r\n            if (argsTmp && argsTmp.bottom) {\r\n                this._bannerBottom = argsTmp.bottom / this._sysData.pixelRatio;\r\n                this._bannerBottom = this._bannerBottom < 0 ? 0 : this._bannerBottom;\r\n                this._bannerBottom = this._bannerBottom > this._sysData.screenHeight ? this._sysData.screenHeight : this._bannerBottom;\r\n            }\r\n\r\n            // IOS平台不支持onResize更改尺寸，所以这里宽度固定最小值\r\n            // let width = this._sysData.screenWidth * this._bannerSizePercent;\r\n            let width = 300;\r\n            let height = 72;\r\n            let left = (this._sysData.screenWidth - width) / 2;\r\n            let top = this._sysData.screenHeight - height - this._bannerBottom;\r\n            let params = {\r\n                adUnitId: utils.config.qqconfig.bannerId,\r\n                style: {\r\n                    left: left,\r\n                    width: width,\r\n                    top: top,\r\n                    height: height,\r\n                }\r\n            };\r\n\r\n            let bannerAd: any = null;\r\n            let oldBannerAd: any = this._curBannerAd;\r\n\r\n            bannerAd = this.qq.createBannerAd(params);\r\n\r\n            utils.showLog(\"bannerAd \", bannerAd);\r\n            if (bannerAd) {\r\n                bannerAd.onError((err) => {\r\n                    utils.showLog(\"广告条加载失败! \", JSON.stringify(err));\r\n                    this._bannerShow = false;\r\n                    // if (location == BannerLocation.Game && this.ServerConfig.banner_first_ad && this.ServerConfig.banner_first_ad == \"1\") {\r\n                    //     utils.showLog(\"服务器配置banner广告优先级为默认banner，游戏页面备用显示积木广告！\");\r\n                    //     this.showBlockAd({ bottom: 0 });\r\n                    // }\r\n                });\r\n\r\n                bannerAd.onLoad(() => {\r\n                    if (this._bannerShow) {\r\n                        return;\r\n                    }\r\n\r\n                    this._bannerShow = true;\r\n                    try {\r\n                        bannerAd.show().then(() => {\r\n                            utils.showLog(\"Banner广告显示成功!\");\r\n                            if (this.ServerConfig.banner_move_btn_interval && this._cur_level && this._cur_level % this.ServerConfig.banner_move_btn_interval == 0) {\r\n                                this.moveBtnToBannerTop();\r\n                            }\r\n                            if (oldBannerAd) {\r\n                                oldBannerAd.destroy();\r\n                            }\r\n                            this._curBannerAd = bannerAd;\r\n                        }).catch((err) => {\r\n                            utils.showLog(\"Banner广告出错\", JSON.stringify(err));\r\n                            this._bannerShow = false;\r\n                        });\r\n                    } catch (error) {\r\n                        if (this.ServerConfig.banner_move_btn_interval && this._cur_level && this._cur_level % this.ServerConfig.banner_move_btn_interval == 0) {\r\n                            this.moveBtnToBannerTop();\r\n                        }\r\n                        utils.showLog(\"Banner ad Show erro\", error);\r\n                    }\r\n\r\n                });\r\n\r\n                bannerAd.onResize((res: any) => {\r\n                    if (res) {\r\n                        this._curBannerHeight = res.height * this._sysData.pixelRatio;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    _showBannerTimer(location: BannerLocation, args: any) {\r\n        let locationTmp: BannerLocation = location;\r\n        let argsTmp: any = args;\r\n        utils.showLog(`显示Banner广告xxx！location:${locationTmp}; 间隔时间:${utils.Tool_QQ.ServerConfig.refresh_ad_time}:优先级：${this.ServerConfig.banner_first_ad}`);\r\n\r\n        // if (this.ServerConfig.banner_first_ad) {\r\n        //     switch (this.ServerConfig.banner_first_ad) {\r\n        //         case \"default\":\r\n        //             this._createBanner(locationTmp, argsTmp);\r\n        //             break;\r\n        //         case \"box\":\r\n        //             if (!utils.Tool_QQ.isOverMinVersion(\"1.15.0\")) {\r\n        //                 utils.showLog(\"当前版本不支持积木广告，显示默认banner\");\r\n        //                 this._createBanner(locationTmp, argsTmp);\r\n        //                 return;\r\n        //             }\r\n        //             this.showBlockAd();\r\n        //             break;\r\n        //         // case \"3\":\r\n        //         //     this._createBanner(locationTmp, argsTmp);\r\n        //         //     this.showBlockAd();\r\n        //         //     break;\r\n        //     }\r\n\r\n        // } else {\r\n\r\n        let banner_delay_time = this.ServerConfig.banner_delay_time ? this.ServerConfig.banner_delay_time : 0;\r\n        utils.showLog(`延迟${banner_delay_time}秒显示banner`);\r\n        if (!this.ServerConfig.banner_move_btn_interval || !this._cur_level || this._cur_level % this.ServerConfig.banner_move_btn_interval != 0) {\r\n            utils.showLog(\"当前关卡不做延迟移动！\");\r\n            this.moveBtnToBannerTop();\r\n        }\r\n        this._showBannerTimerId = setTimeout(() => {\r\n            this._createBanner(locationTmp, argsTmp)\r\n        }, banner_delay_time * 1000);\r\n        // }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    _showBannerTimerId: number = 0;\r\n    public ShowBanner(location: BannerLocation = BannerLocation.Home, args: any = null) {\r\n        if (PlatUtils.IsQQ) {\r\n            if (utils.Tool_QQ.ServerConfig) {\r\n                let locationTmp: BannerLocation = location;\r\n                let argsTmp: any = args;\r\n                this._moveBtn = args ? args.moveBtn : null;\r\n                this._cur_level = args ? args.cur_level : null;\r\n                this._showBannerTimer(locationTmp, argsTmp);\r\n            } else {\r\n                utils.showLog(\"服务器配置数据未初始化!\");\r\n            }\r\n        }\r\n    }\r\n\r\n    public HideBanner(location: BannerLocation = BannerLocation.Home) {\r\n        if (PlatUtils.IsQQ) {\r\n            utils.showLog(\"隐藏广告条\");\r\n            this._bannerShow = false;\r\n            clearInterval(this._showBannerTimerId);\r\n            if (this._curBannerAd) {\r\n                this._curBannerAd.hide();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    public ShowVideo(callback: Function) {\r\n        if (PlatUtils.IsQQ) {\r\n            this._videoCallback = callback;\r\n            this._isVideoShow = true;\r\n\r\n            if (!this._videoAd) {\r\n                this._initVideoAd();\r\n            } else {\r\n                this._videoAd.show().then(() => {\r\n                    utils.showLog(\"视频显示成功！\");\r\n                }).catch((err) => {\r\n                    utils.showLog(\"视频未加载！\");\r\n                    this._videoAd.load();\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 显示插屏\r\n     * 2001\t触发频率限制\t小程序启动一定时间内不允许展示插屏广告\r\n     * 2002\t触发频率限制\t距离小程序插屏广告或者激励视频广告上次播放时间间隔不足，不允许展示插屏广告\r\n     * 2003\t触发频率限制\t当前正在播放激励视频广告或者插屏广告，不允许再次展示插屏广告\r\n     * 2004\t广告渲染失败\t该项错误不是开发者的异常情况，或因小程序页面切换导致广告渲染失败\r\n     * 2005\t广告调用异常\t插屏广告实例不允许跨页面调用\r\n     * 销毁插屏广告后才能重新创建\r\n     * @param location \r\n     */\r\n    public ShowInterstitial(location: BannerLocation = null) {\r\n        if (PlatUtils.IsQQ) {\r\n\r\n            if (!utils.Tool_QQ.isOverMinVersion(\"1.12.0\")) {\r\n                utils.showLog(\"当前版本\" + utils.Tool_QQ._sysInfo.SDKVersion + \"不支持插屏广告和盒子广告!\");\r\n                return;\r\n            }\r\n\r\n            if (this.ServerConfig) {\r\n                if (this.ServerConfig.intersititial_first_ad) {\r\n                    utils.showLog(`服务器插屏优先级>>>${this.ServerConfig.intersititial_first_ad}`);\r\n                    switch (this.ServerConfig.intersititial_first_ad) {\r\n                        case \"default\":\r\n                            utils.delayCall(this._createInsterstitial.bind(this), this.ServerConfig.intersititia_delay_show_time || 0);\r\n                            break;\r\n                        case \"box\":\r\n                            if (!utils.Tool_QQ.isOverMinVersion(\"1.7.1\")) {\r\n                                utils.showLog(\"当前版本\" + utils.Tool_QQ._sysInfo.SDKVersion + \"不支持盒子广告,显示插屏\");\r\n                                utils.delayCall(this._createInsterstitial.bind(this), this.ServerConfig.intersititia_delay_show_time || 0);\r\n                                return;\r\n                            }\r\n                            utils.delayCall(this.ShowAppBox.bind(this), this.ServerConfig.intersititia_delay_show_time || 0);\r\n                            break;\r\n                        case \"onlydefault\":\r\n                            utils.delayCall(this._createInsterstitial.bind(this), this.ServerConfig.intersititia_delay_show_time || 0);\r\n                            break;\r\n                    }\r\n                } else {\r\n                    utils.showLog(\"服务器未配置优先级，显示默认插屏\");\r\n                    utils.delayCall(this._createInsterstitial.bind(this), this.ServerConfig.intersititia_delay_show_time || 0);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    _isShow: boolean = false;\r\n    public _createInsterstitial() {\r\n        utils.showLog(\"_createInsterstitial >>> 222\");\r\n        // if (this._insertAd) {\r\n        //     this._insertAd.destroy();\r\n        // }\r\n        // let insertId;\r\n\r\n        if (!this._insertAd) {\r\n            this._insertAd = this.qq.createInterstitialAd({ adUnitId: utils.config.qqconfig.insertId })\r\n\r\n            this._insertAd.onError((err) => {\r\n                switch (err.errCode) {\r\n                    case 2001:\r\n                        utils.showLog(\"小程序启动一定时间内不允许展示插屏广告\");\r\n                        break;\r\n                    case 2002:\r\n                        utils.showLog(\"距离小程序插屏广告或者激励视频广告上次播放时间间隔不足，不允许展示插屏广告\");\r\n                        break;\r\n                    case 2003:\r\n                        utils.showLog(\"当前正在播放激励视频广告或者插屏广告，不允许再次展示插屏广告\");\r\n                        break;\r\n                    case 2004:\r\n                        utils.showLog(\"该项错误不是开发者的异常情况，或因小程序页面切换导致广告渲染失败\");\r\n                        break;\r\n                    case 2005:\r\n                        utils.showLog(\"插屏广告实例不允许跨页面调用\");\r\n                        break;\r\n                    default:\r\n                        utils.showLog(\"插屏加载失败! \", JSON.stringify(err));\r\n                        break;\r\n                }\r\n\r\n                if (this.ServerConfig.intersititial_first_ad && this.ServerConfig.intersititial_first_ad == \"default\") {\r\n                    utils.showLog(\"优先显示的是插屏广告，备用显示盒子广告！\");\r\n                    let show_level = this.ServerConfig.insert_show_appBox_level ? this.ServerConfig.insert_show_appBox_level : 0;\r\n                    if (utils.currentLevel > show_level) {\r\n                        this.ShowAppBox();\r\n                    } else {\r\n                        utils.showLog(\"备用显示盒子广告未达到关卡限制要求\");\r\n                    }\r\n                }\r\n            });\r\n            // this._insertAd.onLoad(() => {\r\n            //     utils.showLog(\"插屏加载成功! \");\r\n            // })\r\n\r\n\r\n            this._insertAd.onClose(() => {\r\n                utils.showLog(\"插屏广告关闭成功！\");\r\n            });\r\n\r\n        }\r\n\r\n\r\n        if (this._insertAd) {\r\n\r\n            this._insertAd.load().then(() => {\r\n                utils.showLog(\"插屏加载成功! \");\r\n                this._insertAd.show().then(() => {\r\n                    utils.showLog(\"插屏广告显示成功!\");\r\n                }).catch((err) => {\r\n                    utils.showLog(\"插屏广告出错\", JSON.stringify(err));\r\n                });\r\n            }).catch(() => {\r\n                utils.showLog(\"插屏加载失败! \");\r\n            });\r\n\r\n\r\n            if (!this._isShow) {\r\n                this._insertAd.show().then(() => {\r\n                    utils.showLog(\"插屏广告显示成功!\");\r\n                }).catch((err) => {\r\n                    utils.showLog(\"插屏广告出错\", JSON.stringify(err));\r\n                });\r\n                this._isShow = true;\r\n            }\r\n\r\n        }\r\n    }\r\n    /**\r\n     * 显示游戏盒子\r\n     */\r\n    public ShowAppBox(isMoreGame?: boolean) {\r\n        if (PlatUtils.IsQQ) {\r\n            if (!utils.Tool_QQ.isOverMinVersion(\"1.7.1\")) {\r\n                utils.showLog(\"当前版本\" + utils.Tool_QQ._sysInfo.SDKVersion + \"不支持游戏盒子!\");\r\n                return;\r\n            }\r\n            utils.showLog(\">>>>>ShowAppBox\");\r\n\r\n            if (this._appBox) {\r\n                this._appBox.destroy().then(() => {\r\n\r\n                    utils.showLog(\"游戏盒子id为:\", utils.config.qqconfig.boxId);\r\n                    this._appBox = this.qq.createAppBox({\r\n                        adUnitId: utils.config.qqconfig.boxId\r\n                    });\r\n                    this._appBox.load().then(() => {\r\n                        utils.showLog(\"游戏盒子加载成功！\")\r\n                        this._appBox.show().then(() => {\r\n                            utils.showLog(\"游戏盒子显示成功！\");\r\n                        }).catch((err) => {\r\n                            utils.showLog(\"游戏盒子未加载！#err=\", JSON.stringify(err));\r\n                        });\r\n                    }).catch((err) => {\r\n                        utils.showLog(\"游戏盒子加载失败！ #err=\", JSON.stringify(err));\r\n\r\n                        if (!isMoreGame && this.ServerConfig.intersititial_first_ad && this.ServerConfig.intersititial_first_ad == \"box\") {\r\n                            utils.showLog(\"优先显示的是盒子广告，备用显示插屏\");\r\n                            this._createInsterstitial();\r\n                        }\r\n                    });\r\n                }).catch((err) => {\r\n                    utils.showLog(\"游戏盒子销毁失败！ #err=\", JSON.stringify(err));\r\n                });;\r\n            } else {\r\n\r\n                utils.showLog(\"游戏盒子id为:\", utils.config.qqconfig.boxId);\r\n                this._appBox = this.qq.createAppBox({\r\n                    adUnitId: utils.config.qqconfig.boxId\r\n                });\r\n                this._appBox.load().then(() => {\r\n                    utils.showLog(\"游戏盒子加载成功！\")\r\n                    this._appBox.show().then(() => {\r\n                        utils.showLog(\"游戏盒子显示成功！\");\r\n                    }).catch((err) => {\r\n                        utils.showLog(\"游戏盒子未加载！#err=\", JSON.stringify(err));\r\n                    });\r\n                }).catch((err) => {\r\n                    utils.showLog(\"游戏盒子加载失败！ #err=\", JSON.stringify(err));\r\n                    if (!isMoreGame && this.ServerConfig.intersititial_first_ad && this.ServerConfig.intersititial_first_ad == \"box\") {\r\n                        utils.showLog(\"优先显示的是盒子广告，备用显示插屏\");\r\n                        this._createInsterstitial();\r\n                    }\r\n                });\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 隐藏游戏盒子\r\n     */\r\n    public HideAppbox() {\r\n        if (PlatUtils.IsQQ) {\r\n            if (this._appBox) {\r\n                this._appBox.destroy().then(() => {\r\n                    utils.showLog(\"游戏盒子销毁成功！\");\r\n                }).catch(() => {\r\n                    cc.warn(\"游戏盒子销毁失败!\");\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    _blockAd: any = null;\r\n    /**\r\n      * 显示积木广告\r\n      */\r\n    public showBlockAd(parme?: any) {\r\n        if (!this.ServerConfig) {\r\n            utils.showLog(\"组件未初始化！\");\r\n            return;\r\n        }\r\n\r\n        if (!utils.config.qqconfig.bannerBoxId) {\r\n            utils.showLog(\"积木广告ID不存在\");\r\n            return;\r\n        }\r\n\r\n        if (this.ServerConfig.is_banner_box == \"false\") {\r\n            utils.showLog(\"服务器配置积木广告不展示！\");\r\n            return;\r\n        }\r\n\r\n        if (this._blockAd) {\r\n            this._blockAd.offLoad();\r\n            this._blockAd.offResize();\r\n            this._blockAd.offError();\r\n            this._blockAd.destroy();\r\n        }\r\n\r\n        if (PlatUtils.IsIOS && this._sysData.screenHeight < 736) {\r\n\r\n            let top = 16;\r\n            let left = 16;\r\n            let width = 65;\r\n            if (parme.top) {\r\n                // top = parme.top\r\n                top = parme.top / cc.winSize.height * this._sysData.screenHeight\r\n            } else {\r\n                // top = this._sysData.screenHeight - 65.5 - parme.bottom\r\n                top = this._sysData.screenHeight - 65.5 - parme.bottom / cc.winSize.height * this._sysData.screenHeight;\r\n            }\r\n\r\n            this._blockAd = this.qq.createBlockAd({\r\n                adUnitId: utils.config.qqconfig.bannerBoxId,\r\n                style: {\r\n                    left: left,\r\n                    top: top\r\n                },\r\n                size: parme.showNum ? parme.showNum : 5,\r\n                orientation: \"landscape\"\r\n            })\r\n\r\n            this._blockAd.onResize((res) => {\r\n                this._blockAd.offResize();\r\n                utils.showLog(\"this._sysData\", JSON.stringify(this._sysData));\r\n                utils.showLog(\"onresize >>\", JSON.stringify(res));\r\n\r\n                this._blockAd.show().then(() => {\r\n                    utils.showLog(\"显示成功！\");\r\n                }).catch((res) => {\r\n                    utils.showLog(\"显示异常\", JSON.stringify(res));\r\n                });\r\n                if (parme.showNum == 1) {\r\n                    width = 0\r\n                } else {\r\n                    width = res.width;\r\n                }\r\n                if (parme.left) {\r\n                    // left = width + parme.left;\r\n                    left = parme.left / cc.winSize.width * this._sysData.screenWidth;\r\n                } else if (parme.right) {\r\n                    left = this._sysData.screenWidth - res.width - parme.right / cc.winSize.width * this._sysData.screenWidth;\r\n                } else {\r\n                    left = (this._sysData.screenWidth - width) / 2;\r\n                }\r\n                this._blockAd.style.left = left;\r\n                utils.showLog(\"onresize end>>\", this._blockAd.style.top, \"<<\", this._blockAd.style.left, \"<<\");\r\n            })\r\n        } else {\r\n            this._blockAd = this.qq.createBlockAd({\r\n                adUnitId: utils.config.qqconfig.bannerBoxId,\r\n                style: {\r\n                    left: 16,\r\n                    top: 16\r\n                },\r\n                size: parme.showNum ? parme.showNum : 5,\r\n                orientation: \"landscape\"\r\n            })\r\n            // if (parme.top) {\r\n            //     console.log(\"实际位置:\", parme.top / cc.winSize.height * this._sysData.screenHeight, cc.winSize.height, parme.top)\r\n            // }\r\n            // else if (parme.bottom) {\r\n            //     console.log(\"实际位置:\", this._sysData.screenHeight - 60 - parme.bottom / cc.winSize.height * this._sysData.screenHeight,cc.winSize.height,parme.bottom)\r\n            // }\r\n\r\n            this._blockAd.onResize((res) => {\r\n                this._blockAd.offResize();\r\n                utils.showLog(\"this._sysData\", JSON.stringify(this._sysData));\r\n                utils.showLog(\"onresize >>\", JSON.stringify(res));\r\n                if (parme) {\r\n                    utils.showLog(\"parme:\" + JSON.stringify(parme))\r\n                    if (parme.top) {\r\n                        utils.showLog(\"积木广告TOP位置：\", parme.top);\r\n                        this._blockAd.style.top = parme.top / cc.winSize.height * this._sysData.screenHeight;\r\n                    } else if (parme.bottom) {\r\n                        // let bottom = this._sysData.screenHeight - res.height;\r\n                        // this._blockAd.style.top = bottom - parme.bottom;\r\n                        this._blockAd.style.top = this._sysData.screenHeight - res.height - parme.bottom / cc.winSize.height * this._sysData.screenHeight;\r\n                    }\r\n                    if (parme.left) {\r\n                        // this._blockAd.style.left = parme.left;\r\n                        this._blockAd.style.left = parme.left / cc.winSize.width * this._sysData.screenWidth;\r\n                    } else if (parme.right) {\r\n                        // this._blockAd.style.left = this._sysData.screenWidth - res.width - parme.right;\r\n                        this._blockAd.style.left = this._sysData.screenWidth - res.width - parme.right / cc.winSize.width * this._sysData.screenWidth;\r\n                    } else {\r\n                        this._blockAd.style.left = (this._sysData.screenWidth - res.width) / 2;\r\n                    }\r\n                } else {\r\n                    this._blockAd.style.top = this._sysData.screenHeight - res.height;\r\n                    this._blockAd.style.left = (this._sysData.screenWidth - res.width) / 2;\r\n                }\r\n\r\n                this._blockAd.show().then(() => {\r\n                    utils.showLog(\"显示成功！\");\r\n                }).catch((res) => {\r\n                    utils.showLog(\"显示异常\", JSON.stringify(res));\r\n                });\r\n\r\n                utils.showLog(\"onresize end>>\", this._blockAd.style.top, \"<<\", this._blockAd.style.left, \"<<\");\r\n            })\r\n        }\r\n\r\n        this._blockAd.onLoad(() => {\r\n            utils.showLog(\"积木广告加载成功！\");\r\n        });\r\n\r\n        this._blockAd.onError((res) => {\r\n            utils.showLog(\"积木广告加载失败！\", res.errMsg, \">>\", res.errCode);\r\n        });\r\n\r\n    }\r\n\r\n    /**\r\n     * 隐藏积木广告\r\n     */\r\n    public hideBlockAd() {\r\n        utils.showLog(\"隐藏积木广告\");\r\n        if (this._blockAd) this._blockAd.hide()\r\n    }\r\n\r\n    public moveBtnToBannerTop() {\r\n        utils.showLog(\"moveBtnToBannerTop >>>>>>>>>.\");\r\n\r\n        if (this.ServerConfig && this._moveBtn && cc.isValid(this._moveBtn)) {\r\n            let moveBtnTime = 0;\r\n            let btn: cc.Node = this._moveBtn;\r\n            if (this.ServerConfig.banner_move_btn_interval && this._cur_level && this._cur_level % this.ServerConfig.banner_move_btn_interval == 0) {\r\n                if (this.ServerConfig.banner_move_btn_time) {\r\n                    moveBtnTime = this.ServerConfig.banner_move_btn_time;\r\n                }\r\n            }\r\n\r\n            utils.showLog(moveBtnTime == 0 ? \"按钮直接显示在banner上面\" : `按钮居底部且${moveBtnTime}秒后移动`);\r\n            setTimeout(() => {\r\n                if (btn && cc.isValid(btn)) {\r\n                    if (this._sysData.screenHeight < 600) {\r\n                        btn.getComponent(cc.Widget).bottom = 250;\r\n                    } else {\r\n                        btn.getComponent(cc.Widget).bottom = 220;\r\n                    }\r\n                    btn.getComponent(cc.Widget).updateAlignment();\r\n                }\r\n            }, moveBtnTime * 1000);\r\n        }\r\n    }\r\n\r\n}\r\n"]}