{"version":3,"sources":["assets\\scripts\\Game\\person.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import PlatUtils from \"../../common-plugin/Scripts/PlatUtils\";\r\nimport CocosZ, { cocosz } from \"../Framework/CocosZ\";\r\nimport Constant, { PanelName, ZindexLayer } from \"../Framework/Constant\";\r\nimport GameDate from \"./gameDate\";\r\nimport { gameMgr } from \"./gameMgr\";\r\nimport Weapon, { WeaponType } from \"./weapon\";\r\n// @ts-ignore\r\nconst i18n = require('LanguageData');\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Person extends cc.Component {\r\n    // 光环特效\r\n    ghAniNode: cc.Node = null;\r\n    // 烟尘动画节点\r\n    ycAniNode: cc.Node = null;\r\n\r\n    personAtk: number = 0;\r\n    playerName: string = \"\";\r\n    personLevel: number = 0;\r\n    atkNum: number = 40;\r\n    atkRange: number = 800;\r\n    atkSpeed: number = 4;\r\n    reloadSpeed: number = 2;\r\n    totleHp: number = 300;\r\n    curHp: number = 300;\r\n\r\n    atkRate: number = 1;\r\n    speedRate: number = 1;\r\n    atkSpeedRate: number = 1;\r\n    reloadRate: number = 1;\r\n    bulletRate: number = 1;\r\n    meleeAtkRate: number = 1;\r\n    damageReduction: number = 0;\r\n\r\n    recoverItemNum: number = 0;\r\n    killNum: number = 0;\r\n    curKillNum: number = 0;\r\n\r\n    MoveSpeed: number = 600;\r\n    moveDir: cc.Vec2 = cc.v2(0, 0);\r\n    atkDir: cc.Vec2 = cc.v2(0, 0);\r\n\r\n    footNum: number = 0;\r\n    lastPos: cc.Vec2 = cc.v2(0, 0);\r\n\r\n    // 开关\r\n    public canMove: boolean = true;//能否移动\r\n    public canMoveDir: boolean = true;//能否改变移动方向\r\n\r\n    // 检测范围\r\n    detectRange: number = 1000;\r\n\r\n    @property(cc.Material)\r\n    mat_common: cc.Material = null;\r\n    @property(cc.Material)\r\n    mat_attacked: cc.Material = null;\r\n\r\n\r\n    // onLoad () {}\r\n    @property(cc.Node)\r\n    body: cc.Node = null;\r\n    @property(cc.Node)\r\n    leg: cc.Node = null;\r\n    @property(cc.Node)\r\n    leg_back: cc.Node = null;\r\n    @property(cc.Node)\r\n    head: cc.Node = null;\r\n    @property(cc.ProgressBar)\r\n    hpBar: cc.ProgressBar = null;\r\n    @property(cc.Node)\r\n    hpSpr: cc.Node = null;\r\n    @property(cc.ProgressBar)\r\n    shieldBar: cc.ProgressBar = null;\r\n    @property(cc.ProgressBar)\r\n    atkBar: cc.ProgressBar = null;\r\n\r\n    head_atk: cc.Node = null;\r\n    head_hart: cc.Node = null;\r\n    head_death: cc.Node = null;\r\n\r\n    playerMess: cc.Node = null;\r\n    ani: cc.Animation = null;\r\n\r\n    id: number = 0;//1玩家\r\n    isPlayer: boolean = false;\r\n    atkTarget: cc.Node = null;\r\n\r\n    weapon: cc.Node = null;\r\n    weapon_dao: cc.Node = null;\r\n\r\n    hpNumNode: cc.Node = null;\r\n\r\n    get HP() {\r\n        return this.curHp;\r\n    }\r\n    set HP(num) {\r\n        num = Math.floor(num);\r\n        if (num < 0) num = 0;\r\n        else if (num > this.totleHp) num = this.totleHp;\r\n        this.curHp = num;\r\n\r\n        // 血条\r\n        if (this.hpBar && this.hpBar.isValid) {\r\n            this.hpBar.progress = this.curHp / this.totleHp;\r\n        }\r\n        // 主动使用道具\r\n        if (this.isPlayer) {\r\n            if (cocosz.gameMode == 6 || cocosz.gameMode == 8) {\r\n                gameMgr.update_model6_xuedi();\r\n            }\r\n        }\r\n    }\r\n    _shield: number = 0;\r\n    maxShield: number = 100;\r\n    get Shiled() {\r\n        return this._shield;\r\n    }\r\n    set Shiled(num) {\r\n        cc.Tween.stopAllByTarget(this.shieldBar);\r\n        this._shield = num;\r\n        if (this._shield < 0) {\r\n            this._shield = 0;\r\n            this.shieldBar.node.opacity = 0;\r\n            this.body.getChildByName(\"body\").children[0].active = false;\r\n        }\r\n        else {\r\n            this.shieldBar.node.opacity = 255;\r\n        }\r\n        cc.tween(this.shieldBar).to(0.3, { progress: this._shield / this.maxShield }).start();\r\n    }\r\n\r\n    rig: cc.RigidBody = null;\r\n\r\n    protected onLoad(): void { }\r\n\r\n    protected start(): void {\r\n        // 人物信息\r\n        if (this.playerMess && this.playerMess.isValid) {\r\n            this._playerMessY = this.playerMess.y;\r\n            this.playerMess.setParent(this.node.parent);\r\n            this.playerMess.zIndex = ZindexLayer.zindex_hp;\r\n            this.updateMess();\r\n        } else if (this.hpBar && this.hpBar.isValid) {\r\n            this._playerMessY = this.hpBar.node.y;\r\n            this.hpBar.node.setParent(this.node.parent);\r\n            this.hpBar.node.zIndex = ZindexLayer.zindex_hp;\r\n            this.updateMess();\r\n        }\r\n    }\r\n\r\n    curTime: number = 0;\r\n    update(dt) { }\r\n    lateUpdate(dt) { }\r\n\r\n    protected _playerMessY: number = 200;\r\n    /** 人物信息 */\r\n    protected updateMess() {\r\n        if (this.playerMess && this.playerMess.isValid) {\r\n            if (this.node && this.node.isValid && this.node.active && this.node.opacity && this.HP) {\r\n                this.playerMess.active = true;\r\n                this.playerMess.setPosition(this.node.x, this.node.y + this._playerMessY);\r\n            } else {\r\n                this.playerMess.active = false;\r\n            }\r\n        } else if (this.hpBar && this.hpBar.isValid && this.hpBar.node && this.hpBar.node.isValid) {\r\n            if (this.node && this.node.isValid && this.node.active && this.node.opacity && this.HP) {\r\n                this.hpBar.node.active = true;\r\n                this.hpBar.node.setPosition(this.node.x, this.node.y + this._playerMessY);\r\n            } else {\r\n                this.hpBar.node.active = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    /** 光环 */\r\n    protected updateGhAni() {\r\n        if (this.ghAniNode && this.ghAniNode.isValid) {\r\n            if (this.node && this.node.isValid && this.node.active && this.node.opacity && this.HP) {\r\n                this.ghAniNode.active = true;\r\n                this.ghAniNode.angle = this.node.angle;\r\n                this.ghAniNode.setPosition(this.node.x, this.node.y - 90);\r\n            } else {\r\n                this.ghAniNode.active = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    /** 烟尘 */\r\n    protected updateYcAni() {\r\n        if (this.ycAniNode && this.ycAniNode.isValid) {\r\n            if (this.node && this.node.isValid && this.node.active && this.node.opacity && this.HP && !this.moveDir.equals(cc.Vec2.ZERO)) {\r\n                this.ycAniNode.active = true;\r\n                this.ycAniNode.setPosition(this.node.x, this.node.y - 50);\r\n                this.ycAniNode.scaleX = this.moveDir.x > 0 ? 1 : -1;\r\n            } else {\r\n                this.ycAniNode.active = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    isReady: boolean = false;\r\n    curSkin: number = 0;\r\n    setProperty() {\r\n        this.ani = this.body.getComponent(cc.Animation);\r\n        this.node.getComponent(cc.CircleCollider).radius = this.detectRange;\r\n        if (this.isPlayer) this.atkRange = 1000;\r\n\r\n        this.personLevel = Math.floor(Math.random() * 6);\r\n        let num1 = Weapon.meleeWaapon[Math.floor(Math.random() * Weapon.meleeWaapon.length)];\r\n        let num2 = Weapon.rangeWeapon[Math.floor(Math.random() * 13/* Weapon.rangedWeapon.length */)];\r\n        if (this.isPlayer) {\r\n            num1 = cocosz.dataMgr.CurMelee + 1;\r\n            num2 = cocosz.dataMgr.CurRange + 1;\r\n            if (cocosz.gameMgr.gameCtr.curUseSkinId < 0) {\r\n                this.curSkin = cocosz.dataMgr.CurSkinId;\r\n            } else {\r\n                this.curSkin = cocosz.gameMgr.gameCtr.curUseSkinId;\r\n            }\r\n            this.head.children[0].children[this.curSkin].active = true;\r\n            let head1 = this.head.children[0].children[this.curSkin];\r\n            this.head.children[1].children[this.curSkin].active = true;\r\n            let head2 = this.head.children[1].children[this.curSkin];\r\n            for (let i = this.head.children[0].childrenCount - 1; i >= 0; i--) {\r\n                if (this.head.children[0].children[i].uuid != head1.uuid) {\r\n                    this.head.children[0].children[i].destroy();\r\n                }\r\n            }\r\n            for (let i = this.head.children[1].childrenCount - 1; i >= 0; i--) {\r\n                if (this.head.children[1].children[i].uuid != head2.uuid) {\r\n                    this.head.children[1].children[i].destroy();\r\n                }\r\n            }\r\n            // 表情(父节点设置为正脸)\r\n            this.head_atk = this.head.children[2].children[this.curSkin];\r\n            this.head_atk.active = true;\r\n            this.head_atk.opacity = 0;\r\n            this.head_hart = this.head.children[3].children[this.curSkin];\r\n            this.head_hart.active = true;\r\n            this.head_hart.opacity = 0;\r\n            this.head_death = this.head.children[4].children[this.curSkin];\r\n            this.head_death.active = true;\r\n            this.head_death.opacity = 0;\r\n\r\n            this.head_atk.setParent(this.head.children[0]);\r\n            this.head_hart.setParent(this.head.children[0]);\r\n            this.head_death.setParent(this.head.children[0]);\r\n            this.head_atk.zIndex = 1;\r\n            this.head_hart.zIndex = 2;\r\n            this.head_death.zIndex = 3;\r\n            // 删除多余表情\r\n            this.head.children[2].destroy();\r\n            this.head.children[3].destroy();\r\n            this.head.children[4].destroy();\r\n\r\n            this.personLevel = cocosz.dataMgr.getSkinInfo(this.curSkin).Level;\r\n            this.personAtk = GameDate.SkinMess[`${this.curSkin + 1}`].atk[this.personLevel];\r\n            if (cocosz.gameMode == 6 || cocosz.gameMode == 8) {\r\n                this.totleHp = GameDate.SkinMess[`${this.curSkin + 1}`].xuedi;\r\n            } else {\r\n                this.totleHp = GameDate.SkinMess[`${this.curSkin + 1}`].hp[this.personLevel];\r\n            }\r\n            // 玩家血量增加\r\n            if ([1, 2, 4].includes(cocosz.gameMode)) {\r\n                this.totleHp *= 4;\r\n            }\r\n            else if (3 == cocosz.gameMode) {\r\n                if (cocosz.curLevel >= 15) {\r\n                    this.totleHp *= 9;\r\n                } else if (cocosz.curLevel >= 10) {\r\n                    this.totleHp *= 8;\r\n                } else if (cocosz.curLevel >= 5) {\r\n                    this.totleHp *= 6;\r\n                } else {\r\n                    this.totleHp *= 4;\r\n                }\r\n            }\r\n            else if (5 == cocosz.gameMode) {\r\n                this.totleHp *= 6;\r\n            }\r\n            else if (7 == cocosz.gameMode) {\r\n                this.totleHp *= 3;\r\n            }\r\n            this.HP = this.totleHp;\r\n        }\r\n        else { }\r\n        // 初始武器\r\n        if (cocosz.gameMode == 4) {\r\n            if (this.isPlayer) {\r\n                this.setNewWeapon(14 - 1);// 玩家固定木棒\r\n            } else {\r\n                this.setNewWeapon(num1 - 1);// 敌人随机近战武器\r\n            }\r\n            this.changeCurWeapon(this.meleeWeapon, false);\r\n        } else {\r\n            if (cocosz.gameMode === 7) {\r\n                this.setNewWeapon(num2 - 1);\r\n            }\r\n            else {\r\n                this.setNewWeapon(num1 - 1);\r\n                this.setNewWeapon(num2 - 1);\r\n            }\r\n            this.changeCurWeapon(this.rangedWeapon, false);\r\n            // 广告远程武器\r\n            if (this.isPlayer /* && cocosz.isShowAd */) {\r\n                cc.tween(gameMgr.rangedWeaponAdMess)\r\n                    .call(() => {\r\n                        this.refreshWeaponAd();\r\n                    })\r\n                    .delay(10)\r\n                    .union()\r\n                    .repeatForever()\r\n                    .start();\r\n            }\r\n        }\r\n        // 血条\r\n        if (cocosz.gameMode == 6 || cocosz.gameMode == 8) {\r\n            this.hpBar.node.active = false;\r\n            this.atkBar.node.active = false;\r\n        }\r\n        // 角色速度\r\n        this.MoveSpeed = 200 + GameDate.SkinMess[`${this.curSkin + 1}`].speed[this.personLevel];\r\n        if (PlatUtils.IsOPPO) { this.MoveSpeed /= 2; }\r\n        // 光环\r\n        if (this.personLevel > 0) {\r\n            this.ghAniNode.color = cc.Color.WHITE;\r\n            let arr = [\"\", \"y\", \"p\", \"r\"];\r\n            let ghAni = this.ghAniNode.getComponent(sp.Skeleton);\r\n            if (ghAni) {\r\n                ghAni.setSkin(arr[Math.ceil(this.personLevel / 2)]);\r\n            }\r\n        } else {\r\n            this.ghAniNode.color = cc.Color.BLACK;\r\n            let ghAni = this.ghAniNode.getComponent(sp.Skeleton);\r\n            ghAni.setSkin(\"r\");\r\n            ghAni.setAnimation(0, \"animation\", true);\r\n        }\r\n\r\n        if (!this.playerName) {\r\n            this.playerName = i18n.t(\"game.player\") + this.id;\r\n        }\r\n        let name = this.playerMess.getChildByName(\"nameLabel\");\r\n        if (name) name.active = false;\r\n\r\n        this.lastPos = this.node.getPosition();\r\n        this.isReady = true;\r\n    }\r\n\r\n    /** 视频武器 */\r\n    weaponAdArr = [9, 10, 14, 17, 18];\r\n    weaponAdIndex: number = Math.floor(Math.random() * this.weaponAdArr.length);\r\n    refreshWeaponAd() {\r\n        if (cocosz.isPause || !this.isPlayer) { return; }\r\n        if (++this.weaponAdIndex >= this.weaponAdArr.length) {\r\n            this.weaponAdIndex = 0;\r\n        }\r\n        let weaponNum = this.weaponAdArr[this.weaponAdIndex];\r\n        let str = Weapon.WeaponName[weaponNum];\r\n        let prefab = cocosz.resMgr.getRes(\"weapon_\" + str, cc.Prefab);\r\n        let new_weapon = cc.instantiate(prefab);\r\n        let new_weaponTs: Weapon = new_weapon.getComponent(Weapon);\r\n        // 初始化\r\n        new_weaponTs.person = this;\r\n        this.body.addChild(new_weapon);\r\n        new_weapon.active = false;\r\n        new_weaponTs.weaponType = WeaponType.weapon_rangeAd;\r\n        this.rangedWeaponAd && this.rangedWeaponAd.destroy();\r\n        this.rangedWeaponAd = new_weapon;\r\n        this.rangedWeaponAdNum = new_weaponTs.weaponNum;\r\n\r\n        let str2 = \"w_\" + Weapon.WeaponName[this.rangedWeaponAdNum - 1];\r\n        let spr2 = cocosz.resMgr.getRes(str2, cc.SpriteFrame);\r\n        gameMgr.rangedWeaponAdMess.children[3].getComponent(cc.Sprite).spriteFrame = spr2;\r\n        gameMgr.rangedWeaponAdMess.children[4].getComponent(cc.Sprite).spriteFrame = cocosz.resMgr.getRes(\"w_\" + (weaponNum + 1), cc.SpriteFrame);\r\n        gameMgr.rangedWeaponAdMess.children[5].getComponent(cc.Label).string = new_weaponTs.atkNum.toString();\r\n        new_weaponTs.setBulletUI();\r\n    }\r\n\r\n    meleeWeaponNum: number = 3;\r\n    rangedWeaponNum: number = 1;\r\n    rangedWeaponAdNum: number = 1;\r\n    meleeWeapon: cc.Node = null;\r\n    rangedWeapon: cc.Node = null;\r\n    rangedWeaponAd: cc.Node = null;\r\n    curWeapon: Weapon = null;\r\n    startPosNode: cc.Node = null;\r\n    setNewWeapon(weaponNum: number = this.newWeapon) {\r\n        if (weaponNum < 0) return;\r\n        let str = Weapon.WeaponName[weaponNum];\r\n        let prefab = cocosz.resMgr.getRes(\"weapon_\" + str, cc.Prefab);\r\n        let new_weapon = cc.instantiate(prefab);\r\n        let new_weaponTs: Weapon = new_weapon.getComponent(Weapon);\r\n        new_weaponTs.person = this;\r\n        this.body.addChild(new_weapon);\r\n        new_weapon.active = false;\r\n        if (new_weaponTs.isRangeWeapon) {\r\n            if (this.curWeapon && this.curWeapon.weaponType == WeaponType.weapon_rangeAd) {\r\n                // 设置广告远程\r\n                new_weaponTs.weaponType = WeaponType.weapon_rangeAd;\r\n                this.rangedWeaponAd && this.rangedWeaponAd.destroy();\r\n                this.rangedWeaponAd = new_weapon;\r\n                this.rangedWeaponAdNum = new_weaponTs.weaponNum;\r\n                if (this.isPlayer) {\r\n                    let str2 = \"w_\" + Weapon.WeaponName[this.rangedWeaponAdNum - 1];\r\n                    let spr2 = cocosz.resMgr.getRes(str2, cc.SpriteFrame);\r\n                    gameMgr.rangedWeaponAdMess.children[3].getComponent(cc.Sprite).spriteFrame = spr2;\r\n                    gameMgr.rangedWeaponAdMess.children[4].getComponent(cc.Sprite).spriteFrame = cocosz.resMgr.getRes(\"w_\" + (weaponNum + 1), cc.SpriteFrame);\r\n                    gameMgr.rangedWeaponAdMess.children[5].getComponent(cc.Label).string = new_weaponTs.atkNum.toString();\r\n                    new_weaponTs.setBulletUI();\r\n                }\r\n            } else {\r\n                // 设置远程\r\n                new_weaponTs.weaponType = WeaponType.weapon_range;\r\n                this.rangedWeapon && this.rangedWeapon.destroy();\r\n                this.rangedWeapon = new_weapon;\r\n                this.rangedWeaponNum = new_weaponTs.weaponNum;\r\n                if (this.isPlayer) {\r\n                    let str2 = \"w_\" + Weapon.WeaponName[this.rangedWeaponNum - 1];\r\n                    let spr2 = cocosz.resMgr.getRes(str2, cc.SpriteFrame);\r\n                    gameMgr.rangedWeaponMess.children[3].getComponent(cc.Sprite).spriteFrame = spr2;\r\n                    gameMgr.rangedWeaponMess.children[4].getComponent(cc.Sprite).spriteFrame = cocosz.resMgr.getRes(\"w_\" + (weaponNum + 1), cc.SpriteFrame);\r\n                    gameMgr.rangedWeaponMess.children[5].getComponent(cc.Label).string = new_weaponTs.atkNum.toString();\r\n                    new_weaponTs.setBulletUI();\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            // 设置近战\r\n            new_weaponTs.weaponType = WeaponType.weapon_melee;\r\n            this.meleeWeapon && this.meleeWeapon.destroy();\r\n            this.meleeWeapon = new_weapon;\r\n            this.meleeWeaponNum = new_weaponTs.weaponNum;\r\n        }\r\n        // 替换当前武器\r\n        if (this.curWeapon && this.curWeapon.isRangeWeapon === new_weaponTs.isRangeWeapon) {\r\n            this.changeCurWeapon(new_weapon, false);\r\n        }\r\n        // 销毁武器道具\r\n        this.newWeapon = -1;\r\n        if (this.newWeaponItem && this.newWeaponItem.isValid) this.newWeaponItem.destroy();\r\n        this.newWeaponItem = null;\r\n    }\r\n\r\n    lastTime: number = 0;\r\n    changeCurWeapon(newWeaponNode: cc.Node, isCheck: boolean = true) {\r\n        if (!newWeaponNode || !newWeaponNode.isValid) return;\r\n        if (this.curWeapon && this.curWeapon.isValid && newWeaponNode == this.curWeapon.node) return;\r\n        let curTime = Number(new Date());\r\n        if (isCheck && (curTime - this.lastTime < 1000)) return;\r\n        this.lastTime = curTime;\r\n        // 切换武器显示\r\n        if (this.curWeapon && cc.isValid(this.curWeapon)) this.curWeapon.node.active = false;\r\n        newWeaponNode.active = true;\r\n        // 切换当前武器\r\n        let newWeapinTs = newWeaponNode.getComponent(Weapon);\r\n        if (newWeapinTs) {\r\n            // UI效果\r\n            if (this.isPlayer) {\r\n                let newWeapinMess: cc.Node = null;\r\n                if (newWeapinTs.weaponType == WeaponType.weapon_melee) {\r\n                    gameMgr.BtnBullet.active = false;\r\n                } else if (newWeapinTs.weaponType == WeaponType.weapon_range) {\r\n                    newWeapinMess = gameMgr.rangedWeaponMess;\r\n                } else if (newWeapinTs.weaponType == WeaponType.weapon_rangeAd) {\r\n                    newWeapinMess = gameMgr.rangedWeaponAdMess;\r\n                }\r\n                newWeapinMess.children[0].active = true;\r\n\r\n                if (this.curWeapon && this.curWeapon.isValid) {\r\n                    cocosz.audioMgr.playEffect(\"changeWeapon\");\r\n                    let oldWeapinMess: cc.Node = null;\r\n                    if (this.curWeapon.weaponType == WeaponType.weapon_melee) {\r\n                    } else if (this.curWeapon.weaponType == WeaponType.weapon_range) {\r\n                        oldWeapinMess = gameMgr.rangedWeaponMess;\r\n                    } else if (this.curWeapon.weaponType == WeaponType.weapon_rangeAd) {\r\n                        oldWeapinMess = gameMgr.rangedWeaponAdMess;\r\n                    }\r\n                    if (oldWeapinMess !== newWeapinMess) {\r\n                        oldWeapinMess.children[0].active = false;\r\n                        oldWeapinMess.children[1].active = true;\r\n                        cc.tween(oldWeapinMess.children[1].getComponent(cc.Sprite))\r\n                            .set({ fillRange: -1 })\r\n                            .to(1, { fillRange: 0 })\r\n                            .call(() => {\r\n                                if (oldWeapinMess.isValid) {\r\n                                    oldWeapinMess.children[1].active = false;\r\n                                }\r\n                            })\r\n                            .start();\r\n                    }\r\n                }\r\n            }\r\n            // 开火点\r\n            if (newWeapinTs.isRangeWeapon) {\r\n                this.startPosNode = newWeaponNode.getChildByName(\"startPos\");\r\n            }\r\n            this.curWeapon = newWeapinTs;\r\n            this.atkNum = this.curWeapon.atkNum * (this.curWeapon.isRangeWeapon ? 1 : this.meleeAtkRate);\r\n            this.atkSpeed = this.curWeapon.atkSpeed;\r\n            this.reloadSpeed = this.curWeapon.reload;\r\n        }\r\n    }\r\n    atkStart() { }\r\n\r\n    atkEnemy() { }\r\n\r\n    atkComplete() { }\r\n\r\n    setWeaponAngle(dir: cc.Vec2) {\r\n        if (this.curWeapon && this.curWeapon.isValid && this.curWeapon.isRangeWeapon) {\r\n            if (dir.equals(cc.Vec2.ZERO)) {\r\n                this.curWeapon.node.angle = 0;\r\n            } else {\r\n                if (dir.x < 0) {\r\n                    this.curWeapon.node.angle = cc.v2(dir).signAngle(cc.v2(-1, 0)) / Math.PI * 180;\r\n                } else {\r\n                    this.curWeapon.node.angle = -cc.v2(dir).signAngle(cc.v2(1, 0)) / Math.PI * 180;\r\n                }\r\n                if (dir.y > 0) {\r\n                    if (this.curWeapon.node) this.rangedWeapon.zIndex = -1;\r\n                } else {\r\n                    if (this.curWeapon.node) this.rangedWeapon.zIndex = 1;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    _aniName: string = \"\";\r\n    /**\r\n     * 设置动画\r\n     * @param name 动画名字 \r\n     * @param enforce 强制播放\r\n     */\r\n    updateAni(name?: string, enforce: boolean = false) {\r\n        if (enforce) {\r\n            this._playAni(name);\r\n        }\r\n        else if (gameMgr.isGameStart) {\r\n            if (this.isDeath) {\r\n                name = \"die\";\r\n            } else if (this.moveDir.equals(cc.Vec2.ZERO)) {\r\n                name = \"daiji_body\";\r\n            } else {\r\n                name = \"run_body\";\r\n            }\r\n            this._playAni(name);\r\n        }\r\n    }\r\n    _playAni(name: string) {\r\n        if (name && name != this._aniName) {\r\n            this.ani.play(name);\r\n            this._aniName = name;\r\n        }\r\n    }\r\n\r\n    getCurSpeed() {\r\n        let speed: number = this.MoveSpeed * this.speedRate * (this.curWeapon && this.curWeapon.isRangeWeapon ? 1 : 1.2);\r\n        if (speed > 1000) speed = 1000;\r\n        return speed;\r\n    }\r\n\r\n    isAtk: boolean = false;\r\n    udpateRBody(dir: cc.Vec2) {\r\n        if (this.rig.type == cc.RigidBodyType.Dynamic) {\r\n            if (this.canMove) {\r\n                if (!dir.equals(cc.Vec2.ZERO)) {\r\n                    this.rig.linearVelocity = dir.mul(this.getCurSpeed());\r\n                } else {\r\n                    this.rig.linearVelocity = cc.Vec2.ZERO;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    updatePerson() {\r\n        let dir = null;\r\n        if (this.atkDir && !this.atkDir.equals(cc.Vec2.ZERO)) {\r\n            dir = this.atkDir;\r\n        } else if (this.moveDir && !this.moveDir.equals(cc.Vec2.ZERO)) {\r\n            dir = this.moveDir;\r\n        } else {\r\n            return;\r\n        }\r\n\r\n        if (dir.x < 0) this.body.scaleX = -Math.abs(this.body.scaleX);\r\n        else this.body.scaleX = Math.abs(this.body.scaleX);\r\n\r\n        if (dir.y > 0) {\r\n            this.leg_back.opacity = 255;\r\n            this.leg.opacity = 0;\r\n            this.head.children[1].opacity = 255;\r\n            this.head.children[0].opacity = 0;\r\n        }\r\n        else {\r\n            this.leg_back.opacity = 0;\r\n            this.leg.opacity = 255;\r\n            this.head.children[0].opacity = 255;\r\n            this.head.children[1].opacity = 0;\r\n        }\r\n        // 远程武器\r\n        this.setWeaponAngle(dir);\r\n    }\r\n\r\n    updateAtk() {\r\n        if (this.atkList.length > 0) {\r\n            let dt = 1000;\r\n            let n = -1;\r\n            for (let i = 0; i < this.atkList.length; i++) {\r\n                let ts = this.atkList[i].getComponent(Person);\r\n                let dt2 = this.atkList[i].getPosition().sub(this.node.getPosition()).mag();\r\n                if (dt2 < dt) {\r\n                    dt = dt2;\r\n                    n = i;\r\n                }\r\n            }\r\n            if (n >= 0) {\r\n                this.atkDir = cc.v2(this.atkList[n].getPosition().sub(this.node.getPosition()).normalize());\r\n                this.atkTarget = this.atkList[n];\r\n            }\r\n            else {\r\n                this.atkDir = this.moveDir.mag() == 0 ? this.atkDir : cc.v2(this.moveDir);\r\n            }\r\n        }\r\n        else {\r\n            this.atkDir = this.moveDir.mag() == 0 ? this.atkDir : cc.v2(this.moveDir);\r\n        }\r\n    }\r\n\r\n    atkList: cc.Node[] = [];\r\n    curItem: number = 0;\r\n    curItemEffect: cc.Prefab = null;\r\n\r\n    itemTarget: cc.Node = null;\r\n\r\n    grassID: number = 0;\r\n    houseID: number = 0;\r\n    isInHouse: boolean = false;\r\n    // 0:检测碰撞；1:检测子弹；2:检测在层级下，3:检测在层级上\r\n    onCollisionEnter(other: cc.Collider, self: cc.Collider) { }\r\n    newWeapon: number = -1;\r\n    newWeaponItem: cc.Node = null;\r\n    poisonCount: number = 0;\r\n\r\n    onCollisionExit(other: cc.Collider, self: cc.Collider) { }\r\n\r\n    isDeath: boolean = false;\r\n    isAttackedEffect: boolean = false;\r\n    maxNum: number = 0;\r\n    /** 受伤 */\r\n    hart(atkNum: number, from: cc.Node, dir: cc.Vec2 = null, isAudio: boolean = true, isEmit: boolean = true, labelColor?: cc.Color) { }\r\n\r\n    isAvoidInjury: number = 0;\r\n    /** 免伤 */\r\n    avoidInjury(time: number) {\r\n        this.isAvoidInjury++;\r\n        this.scheduleOnce(() => {\r\n            this.isAvoidInjury--;\r\n        }, time);\r\n    }\r\n\r\n    killer: any = null;\r\n    death() {\r\n        this.isDeath = true;\r\n        // 隐藏光环\r\n        if (this.ghAniNode && this.ghAniNode.isValid) {\r\n            this.ghAniNode.active = false;\r\n        }\r\n        if (this.playerMess && this.playerMess.isValid) {\r\n            this.playerMess.active = false;\r\n        }\r\n        this.head_death.opacity = 255;\r\n        // 死亡音效\r\n        gameMgr.playEffect(\"death\", this.node);\r\n\r\n        this.unscheduleAllCallbacks();\r\n        // this.ani.stop();\r\n        // this.ani.play(\"die\");\r\n        this.updateAni(\"die\");\r\n        if (this.meleeWeapon) {\r\n            let ani = this.meleeWeapon.getComponent(cc.Animation);\r\n            ani && ani.stop();\r\n        }\r\n        this.leg.opacity = 255;\r\n        this.leg_back.opacity = 0;\r\n        this.head.children[0].opacity = 255;\r\n        this.head.children[1].opacity = 0;\r\n\r\n        if (this.curWeapon && this.curWeapon.isValid) this.curWeapon.node.active = false;\r\n        if (this.rig) this.rig.active = false;\r\n        this.node.getComponent(cc.BoxCollider).enabled = false;\r\n        this.node.getComponent(cc.CircleCollider).enabled = false;\r\n\r\n        gameMgr.deathNum++;\r\n        if (this.isPlayer) {\r\n            let rate = 0.3;\r\n            cc.director.getScheduler().setTimeScale(rate);\r\n            setTimeout(() => {\r\n                cc.director.getScheduler().setTimeScale(1);\r\n            }, rate * 3000);\r\n        }\r\n\r\n        // if(!Constant.isEndless){\r\n        //     if (this.isPlayer) {\r\n        //         if (!gameMgr.isWin && !gameMgr.isFail) {\r\n        //             this.revivePos = this.node.getPosition();\r\n        //             this.scheduleOnce(() => {\r\n        //                 cocosz.uiMgr.openPanel(PanelName.UIRevivePanel);\r\n        //             }, 2)\r\n        //         }\r\n        //     }\r\n        // }else{\r\n                // if (this.isPlayer) {\r\n                //     if (!gameMgr.isWin && !gameMgr.isFail) {\r\n                //         this.revivePos = this.node.getPosition();\r\n                //         gameMgr.fail();\r\n                //     }\r\n                // }\r\n        // }\r\n        if (this.isPlayer) {\r\n            if (!gameMgr.isWin && !gameMgr.isFail) {\r\n                this.revivePos = this.node.getPosition();\r\n                gameMgr.fail();\r\n            }\r\n        }\r\n    }\r\n\r\n    revive() {\r\n        if (gameMgr && !gameMgr.isWin && !gameMgr.isFail) {\r\n            gameMgr.deathNum--;\r\n            // 恢复光环\r\n            if (this.ghAniNode && this.ghAniNode.isValid) {\r\n                this.ghAniNode.active = true;\r\n            }\r\n            if (this.playerMess && this.playerMess.isValid) {\r\n                this.playerMess.active = true;\r\n            }\r\n            if (this.rangedWeapon) this.rangedWeapon.getComponent(Weapon).reset();\r\n            if (this.rangedWeaponAd) this.rangedWeaponAd.getComponent(Weapon).reset();\r\n            // if (this.rangedWeapon) this.rangedWeapon.zIndex = 1;\r\n            // if (this.rangedWeapon) this.rangedWeapon.angle = 0;\r\n            if (this.meleeWeapon) {\r\n                let ani = this.meleeWeapon.getComponent(cc.Animation);\r\n                ani && ani.play();\r\n            }\r\n            if (this.curWeapon && this.curWeapon.isValid) this.curWeapon.node.active = true;\r\n            this.head_death.opacity = 0;\r\n            let pos = this.revivePos;\r\n            this.node.setPosition(pos);\r\n            this.HP = this.totleHp;\r\n\r\n\r\n            this.body.setPosition(cc.v2(0, 0));\r\n            this.body.angle = 0;\r\n            this.leg.opacity = 255;\r\n            this.leg_back.opacity = 0;\r\n\r\n            this.head.children[0].opacity = 255;\r\n            this.head.children[1].opacity = 0;\r\n            if (this.node.scaleX < 0) this.node.scaleX *= -1;\r\n\r\n            if (this.rig) this.rig.active = true;\r\n            // this.node.getComponent(cc.RigidBody).enabled = true;\r\n            this.node.getComponent(cc.BoxCollider).enabled = true;\r\n            this.node.getComponent(cc.CircleCollider).enabled = true;\r\n\r\n            this.isDeath = false;\r\n            this.canMove = true;\r\n        }\r\n    }\r\n\r\n    // findTime: number = 0;\r\n    revivePos: cc.Vec2 = cc.v2(0, 0);\r\n\r\n    creatItem() { }\r\n}\r\n"]}