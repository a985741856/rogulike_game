{"version":3,"sources":["assets\\common-plugin\\Scripts\\MoreGamesPanel1.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import GameItem from \"./GameItem\";\r\nimport { SubLocation } from \"./YZ_Constant\";\r\nimport { utils } from \"./Utils\";\r\nimport QCrossWidgetItem from \"./QCrossWidgetItem\";\r\nimport CompatibleTool from \"./CompatibleTool\";\r\nimport List from \"./List\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nconst _panelSize: cc.Size[] = [cc.size(225, 1000), cc.size(506, 1000)];\r\nconst _titleSize: cc.Size[] = [cc.size(111, 54), cc.size(275, 54)];\r\nconst _titleBgSize: cc.Size[] = [cc.size(376, 104), cc.size(545, 104)];\r\nconst _starSize: cc.Size[] = [cc.size(251, 89), cc.size(425, 89)];\r\n\r\n@ccclass\r\nexport default class MoreGamesPanel extends cc.Component {\r\n\r\n\t_panel: cc.Node = null;\r\n\t_gameList: cc.Node = null;\r\n\t_originScale: number = 1;\r\n\r\n\t_gameItems: GameItem[] = [];\r\n\t_jumpList: any = null;\r\n\t_dataDirty: boolean = false;\r\n\r\n\t_closeBtnRight: cc.Node = null;\r\n\t_closeBtnLine: cc.Node = null;\r\n\r\n\t_title: cc.Node = null;\r\n\t_titleBg: cc.Node = null;\r\n\t_star: cc.Node = null;\r\n\tprivate gameItemNode: cc.Node = null;\r\n\r\n\tlistView: List = null;\r\n\r\n\tonLoad() {\r\n\t\tif (utils.otherConfig && utils.otherConfig.group) {\r\n\t\t\tthis.node.group = utils.otherConfig.group;\r\n\t\t}\r\n\t\tthis._panel = this.node.getChildByName(\"Panel\");\r\n\t\tthis.listView = this._panel.getChildByName(\"GameList\").getComponent(List)\r\n\t\t// this._gameList = this._panel.getChildByName(\"GameList\").getComponent(cc.ScrollView).content;\r\n\r\n\t\t// this.gameItemNode = this._gameList.children[0];\r\n\t\t// this._gameList.removeAllChildren();\r\n\r\n\t\tthis._closeBtnRight = this._panel.getChildByName(\"Btn_Close\");\r\n\t\tthis._closeBtnRight.active = true;\r\n\t\tthis._closeBtnLine = this._panel.getChildByName(\"Btn_CloseSide\");\r\n\t\tthis._closeBtnLine.active = false;\r\n\r\n\t\tthis._titleBg = cc.find(\"Title/TitleBg\", this._panel);\r\n\t\tthis._title = cc.find(\"Title/Txt\", this._panel);\r\n\t\tthis._star = cc.find(\"Title/Star\", this._panel);\r\n\r\n\t\tthis.node.active = false;\r\n\t\tlet ratio: number = 1;\r\n\t\tif (cc.winSize.height < cc.winSize.width) {\r\n\t\t\t// 横屏游戏\r\n\t\t\tratio = cc.winSize.width / 1920 * 0.5;\r\n\t\t} else {\r\n\t\t\tratio = cc.winSize.width / 1080;\r\n\t\t}\r\n\r\n\t\tthis._panel.scale = ratio;\r\n\t\tthis._originScale = this._panel.scale;\r\n\t}\r\n\r\n\tupdate(dt) {\r\n\t\tif (this.autoScorll && !this.listView.scrollView.isScrolling()) {\r\n\t\t\tthis.listView.content.y += dt * 100;\r\n\t\t\tthis.listView._onScrolling();\r\n\t\t}\r\n\t}\r\n\r\n\tonListRender(item: cc.Node, idx: number) {\r\n\t\tlet qcrossWidgetItem: GameItem = item.getComponent(GameItem);\r\n\t\tqcrossWidgetItem.init(this._jumpList[idx], SubLocation.isMoreGame);\r\n\t}\r\n\r\n\tautoScorll: boolean = false;\r\n\tprivate _initWidget() {\r\n\t\tif (this._jumpList.length > 5) {\r\n\t\t\tif (utils.ServerConfig.more_game_pannel_auto_scroll && utils.ServerConfig.more_game_pannel_auto_scroll == \"false\") {\r\n\t\t\t\tutils.showLog(\"服务器不开启自动滚动！\");\r\n\t\t\t} else {\r\n\t\t\t\tthis.scheduleOnce(() => {\r\n\t\t\t\t\tthis.autoScorll = true;\r\n\t\t\t\t}, 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tutils.postRecommentShowData(SubLocation.isMoreGame);\r\n\t}\r\n\r\n\tpublic init(jumpList: any) {\r\n\t\tthis._jumpList = jumpList;\r\n\t\tthis._dataDirty = true;\r\n\r\n\t\tif (this._jumpList && this._jumpList.length > 0) {\r\n\t\t\tthis._initWidget();\r\n\t\t\tthis.listView.numItems = this._jumpList.length;\r\n\t\t} else {\r\n\t\t\tcc.warn(\"交叉推广数据为null, 6元素交叉推广组件不显示!\");\r\n\t\t\tthis.node.destroy();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic show() {\r\n\t\tthis.node.active = true;\r\n\t\t// this._panel.x = -this._panel.getContentSize().width;\r\n\t\tthis._panel.y = 0;\r\n\t\tthis._panel.runAction(cc.moveBy(0.3, cc.v2(this._panel.getContentSize().width, 0)).easing(cc.easeQuadraticActionOut()));\r\n\t}\r\n\r\n\tpublic hide() {\r\n\t\tlet self = this;\r\n\t\tthis._panel.runAction(cc.sequence(cc.moveBy(0.3, cc.v2(-this._panel.getContentSize().width, 0)).easing(cc.easeQuadraticActionOut()), cc.callFunc(() => {\r\n\t\t\tself.node.active = false;\r\n\t\t})));\r\n\t}\r\n\r\n\tpublic onCloseBtnHandler(event: any, data: any) {\r\n\t\tthis.hide();\r\n\t}\r\n}\r\n"]}