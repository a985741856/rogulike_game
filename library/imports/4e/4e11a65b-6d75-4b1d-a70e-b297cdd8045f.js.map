{"version":3,"sources":["assets\\common-plugin\\Scripts\\AdAgentWechat.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import AdAgent from \"./AdAgent\";\r\nimport { AttributedKey, AttributedType, AttributedValue, BannerLocation, SubLocation } from \"./YZ_Constant\";\r\nimport PlatUtils from \"./PlatUtils\";\r\nimport { utils } from \"./Utils\";\r\nimport RewardInsert from \"./RewardInsert\";\r\nimport CompatibleTool from \"./CompatibleTool\";\r\nimport BeforGameOverRecGamesPanel from \"./BeforGameOverRecGamesPanel\";\r\nimport { CustomAdInfo } from \"./CommonConfig\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class AdAgentWechat extends AdAgent {\r\n\r\n    _curBannerAd: any = null;\r\n    _videoAd: any = null;\r\n    _videoCallback: Function = null;\r\n    _insertAd: any = null;\r\n    _rewardInsertNode: cc.Node = null;\r\n    public get ServerConfig() {\r\n        return utils.wechatTool.ServerConfig;\r\n    }\r\n\r\n    _sysInfo: any = null;\r\n    public get sysInfo() {\r\n        if (this._sysInfo) return this._sysInfo;\r\n        this._sysInfo = utils.wechatTool.getSystemInfo();\r\n        return this._sysInfo;\r\n    }\r\n\r\n\r\n    public Init() {\r\n        if (PlatUtils.IsWechat) {\r\n            utils.registerServerInitEvent(() => {\r\n                this._initVideoAd();\r\n                this._initInsertAd();\r\n                if (utils.getConfigByKey(\"game_time_report\")) {\r\n                    utils.scheduleOnce(() => {\r\n                        utils.wechatTool.reportAttributedEvent(AttributedType.GameAddiction, AttributedKey.GameAddiction, AttributedValue.GameTimeAction);\r\n                    }, utils.getConfigByKey(\"game_time_report\"));\r\n                }\r\n            }, this);\r\n        }\r\n    }\r\n\r\n    _initVideoAd() {\r\n        if (PlatUtils.IsWechat) {\r\n            if (!utils.wechatTool.isOverMinVersion(\"2.0.4\")) {\r\n                utils.showLog(\"当前版本不支持视频广告!\");\r\n                return;\r\n            }\r\n            if (!this._videoAd) {\r\n                utils.showLog(\"初始化视频!\");\r\n                if (!utils.config.wechatconfig.videoId) {\r\n                    utils.showLog(\"视频ID配置错误!\");\r\n                    return;\r\n                }\r\n\r\n                utils.showLog(\"视频广告ID:\", utils.config.wechatconfig.videoId.trim());\r\n                //@ts-ignore\r\n                this._videoAd = wx.createRewardedVideoAd({\r\n                    adUnitId: utils.config.wechatconfig.videoId\r\n                });\r\n\r\n                let self = this;\r\n                if (this._videoAd) {\r\n                    utils.showLog(\"初始化注册视频回调!\");\r\n                    this._videoAd.onLoad(function () {\r\n                        utils.showLog(\"激励视频加载成功\");\r\n                        // this._isVideoLoaded = true;\r\n                    }.bind(this));\r\n\r\n                    this._videoAd.onError(function (err) {\r\n                        utils.showLog(\"激励视频加载失败!\", err.code, err.msg);\r\n                        // this._isVideoLoaded = false;\r\n                    }.bind(this));\r\n\r\n                    this._videoAd.onClose(function (res) {\r\n                        // this._isVideoLoaded = false;\r\n                        if (res && res.isEnded || res === undefined) {\r\n                            // 正常播放结束，可以下发游戏奖励\r\n                            utils.showLog('激励视频广告完成，发放奖励');\r\n                            if (self._videoCallback) {\r\n                                self._videoCallback(true, \"\");\r\n                                self._videoCallback = null;\r\n                            }\r\n                        } else {\r\n                            // 播放中途退出，不下发游戏奖励\r\n                            utils.showLog('激励视频广告取消关闭，不发放奖励');\r\n                            if (self._videoCallback) {\r\n                                self._videoCallback(false, \"观看完视频才能获得奖励!\");\r\n                                self._videoCallback = null;\r\n                            }\r\n                        }\r\n                    }.bind(this));\r\n                } else {\r\n                    utils.showLog(\"激励视频初始化失败!\");\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    _bannerSizePercent: number = 0.1;\r\n    _bannerBottom: number = 0;\r\n    _oldBannerLocation: BannerLocation = BannerLocation.None;\r\n    _createBanner(location: BannerLocation, args: any = null) {\r\n        if (PlatUtils.IsWechat) {\r\n            let locationTmp: BannerLocation = location;\r\n            let argsTmp: any = args;\r\n\r\n            if (argsTmp && argsTmp.width) {\r\n                this._bannerSizePercent = argsTmp.width < 0 ? 0 : argsTmp.width;\r\n                this._bannerSizePercent = argsTmp.width > 1 ? 1 : argsTmp.width;\r\n            }\r\n\r\n            if (argsTmp && argsTmp.bottom) {\r\n                this._bannerBottom = argsTmp.bottom < 0 ? 0 : argsTmp.bottom;\r\n                this._bannerBottom = argsTmp.bottom > cc.winSize.height ? cc.winSize.height : argsTmp.bottom;\r\n            }\r\n            let params = {\r\n                adUnitId: utils.config.wechatconfig.getBannerId(locationTmp),\r\n                style: {\r\n                    left: 0,\r\n                    width: 300,\r\n                    top: 0\r\n                }\r\n            };\r\n\r\n            if (this._oldBannerLocation != locationTmp && this._curBannerAd) {\r\n                this._curBannerAd.destroy();\r\n                this._oldBannerLocation = locationTmp;\r\n            }\r\n            //@ts-ignore\r\n            let curBannerAd = wx.createBannerAd(params);\r\n            if (curBannerAd) {\r\n                curBannerAd.onError((err) => {\r\n                    utils.showLog(\"广告条加载失败! \", JSON.stringify(err));\r\n                    if (curBannerAd) {\r\n                        curBannerAd.destroy();\r\n                    }\r\n                    if (this.ServerConfig.banner_first_ad && this.ServerConfig.banner_first_ad == \"default\") {\r\n                        this.showNativeBannerAd(location, args);\r\n                    }\r\n                });\r\n\r\n                let self = this;\r\n                curBannerAd.onLoad(() => {\r\n                    curBannerAd.show().then(() => {\r\n                        let old = self._curBannerAd;\r\n                        if (old) {\r\n                            old.destroy();\r\n                        }\r\n                        self._curBannerAd = curBannerAd;\r\n                        utils.showLog(\"默认Banner广告显示成功!\");\r\n                        this.HideNativeBanner();\r\n\r\n                    }).catch((err) => {\r\n                        utils.showLog(\"Banner广告出错\", JSON.stringify(err));\r\n                        if (curBannerAd) {\r\n                            curBannerAd.destroy();\r\n                        }\r\n                        if (this.ServerConfig.banner_first_ad && this.ServerConfig.banner_first_ad == \"default\") {\r\n                            this.showNativeBannerAd(location, args);\r\n                        }\r\n                    });\r\n                });\r\n\r\n                curBannerAd.onResize((res) => {\r\n                    curBannerAd.style.width = utils.wechatTool.getSystemInfo().screenWidth * self._bannerSizePercent;\r\n                    curBannerAd.style.left = (utils.wechatTool.getSystemInfo().screenWidth - res.width) * 0.5;\r\n\r\n                    if (self._bannerBottom == cc.winSize.height) {\r\n                        curBannerAd.style.top = 0;\r\n                    } else {\r\n                        curBannerAd.style.top = utils.wechatTool.getSystemInfo().screenHeight - res.height - self._bannerBottom;\r\n                    }\r\n                });\r\n            } else {\r\n                utils.showLog(\"广告条创建失败!\");\r\n            }\r\n        }\r\n    }\r\n\r\n    createCustomADBanner(location: BannerLocation = BannerLocation.Game, args: any = null) {\r\n        if (PlatUtils.IsWechat) {\r\n\r\n            let locationTmp: BannerLocation = location;\r\n            if (!utils.config.wechatconfig.getBannerId(locationTmp)) {\r\n                locationTmp = BannerLocation.Home;\r\n            }\r\n\r\n            let argsTmp: any = args;\r\n\r\n            if (argsTmp && argsTmp.width) {\r\n                this._bannerSizePercent = argsTmp.width < 0 ? 0 : argsTmp.width;\r\n                this._bannerSizePercent = argsTmp.width > 1 ? 1 : argsTmp.width;\r\n            }\r\n\r\n            if (argsTmp && argsTmp.bottom) {\r\n                this._bannerBottom = argsTmp.bottom < 0 ? 0 : argsTmp.bottom;\r\n                this._bannerBottom = argsTmp.bottom > cc.winSize.height ? cc.winSize.height : argsTmp.bottom;\r\n            }\r\n\r\n            let params = {\r\n                adUnitId: utils.config.wechatconfig.getBannerId(locationTmp),\r\n                style: {\r\n                    left: 0,\r\n                    width: 300,\r\n                    top: 0\r\n                }\r\n            };\r\n\r\n            if (this._oldBannerLocation != locationTmp && this._curBannerAd) {\r\n                this._curBannerAd.destroy();\r\n                this._oldBannerLocation = locationTmp;\r\n            }\r\n            //@ts-ignore\r\n            let curBannerAd = wx.createBannerAd(params);\r\n            if (curBannerAd) {\r\n                curBannerAd.onError((err) => {\r\n                    utils.showLog(\"广告条加载失败! \", JSON.stringify(err));\r\n                    if (curBannerAd) {\r\n                        curBannerAd.destroy();\r\n                    }\r\n                });\r\n\r\n                let self = this;\r\n                curBannerAd.onLoad(() => {\r\n                    cc.director.on(\"CloseCustomADPanel\", (() => {\r\n                        curBannerAd.show().then(() => {\r\n                            let old = self._curBannerAd;\r\n                            if (old) {\r\n                                old.destroy();\r\n                            }\r\n                            self._curBannerAd = curBannerAd;\r\n                            utils.showLog(\"Banner广告显示成功!\");\r\n                            let interval: number = 18;\r\n                            if (utils.wechatTool.ServerConfig.refresh_ad_time) {\r\n                                interval = utils.wechatTool.ServerConfig.refresh_ad_time;\r\n                            }\r\n                            clearInterval(self._showBannerTimerId);\r\n                            //@ts-ignore\r\n                            self._showBannerTimerId = setInterval(function () {\r\n                                utils.showLog(`显示Banner广告！location:${locationTmp}; args:${JSON.stringify(argsTmp)}; 间隔时间:${utils.wechatTool.ServerConfig.refresh_ad_time}`);\r\n                                self._showBannerTimer(locationTmp, argsTmp);\r\n                            }.bind(self), interval * 1000);\r\n\r\n                        }).catch((err) => {\r\n                            utils.showLog(\"Banner广告出错\", JSON.stringify(err));\r\n                            if (curBannerAd) {\r\n                                curBannerAd.destroy();\r\n                            }\r\n                        });\r\n                        cc.director.targetOff(self);\r\n                    }), self);\r\n                });\r\n\r\n                curBannerAd.onResize((res) => {\r\n                    curBannerAd.style.width = utils.wechatTool.getSystemInfo().screenWidth * self._bannerSizePercent;\r\n                    curBannerAd.style.left = (utils.wechatTool.getSystemInfo().screenWidth - res.width) * 0.5;\r\n\r\n                    if (self._bannerBottom == cc.winSize.height) {\r\n                        curBannerAd.style.top = 0;\r\n                    } else {\r\n                        curBannerAd.style.top = utils.wechatTool.getSystemInfo().screenHeight - res.height - self._bannerBottom;\r\n                    }\r\n                });\r\n            } else {\r\n                utils.showLog(\"广告条创建失败!\");\r\n            }\r\n        }\r\n    }\r\n\r\n    _initInsertAd() {\r\n        if (PlatUtils.IsWechat) {\r\n            if (!utils.wechatTool.isOverMinVersion(\"2.6.0\")) {\r\n                utils.showLog(\"当前版本不支持插屏广告!\");\r\n                return;\r\n            }\r\n\r\n            if (!this._insertAd) {\r\n                utils.showLog(\"初始化插屏广告!\");\r\n                if (!utils.config.wechatconfig.insertId) {\r\n                    utils.showLog(\"插屏广告ID配置错误!\");\r\n                    return;\r\n                }\r\n                utils.showLog(\"插屏广告ID:\", utils.config.wechatconfig.insertId.trim());\r\n                //@ts-ignore\r\n                this._insertAd = wx.createInterstitialAd({\r\n                    adUnitId: utils.config.wechatconfig.insertId.trim()\r\n                });\r\n\r\n                if (this._insertAd) {\r\n                    this._insertAd.onLoad(function () {\r\n                        utils.showLog(\"插屏广告拉取成功!\");\r\n                    });\r\n\r\n                    this._insertAd.onError((err) => {\r\n                        utils.showLog(\"插屏广告拉取失败!\", JSON.stringify(err));\r\n                        if (this.ServerConfig.intersititial_first_ad && this.ServerConfig.intersititial_first_ad == \"default\") {\r\n                            this.showNativeIntersititialAd();\r\n                        }\r\n                    });\r\n\r\n                    this._insertAd.onClose(function () {\r\n                        utils.showLog(\"插屏广告被关闭!\");\r\n                    });\r\n                } else {\r\n                    utils.showLog(\"插屏组件初始化失败!\");\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    _showBannerTimer(location: BannerLocation, args: any) {\r\n        let locationTmp: BannerLocation = location;\r\n        let argsTmp: any = args;\r\n        utils.showLog(`显示Banner广告xxx！location:${locationTmp}; args:${JSON.stringify(argsTmp)}; 间隔时间:${utils.wechatTool.ServerConfig.refresh_ad_time};优先级：${this.ServerConfig.banner_first_ad}`);\r\n\r\n        if (this.ServerConfig.banner_first_ad && this.ServerConfig.banner_first_ad == \"native\") {\r\n            this.showNativeBannerAd(location, args);\r\n        } else {\r\n            if (locationTmp == BannerLocation.None) {\r\n                utils.showLog(\"未定义的BannerLocation,\", locationTmp);\r\n            } else {\r\n                if (utils.config.wechatconfig.getBannerId(locationTmp)) {\r\n                    this._createBanner(locationTmp, argsTmp);\r\n                } else {\r\n                    utils.showLog(`未找到位置为 ${locationTmp} 的广告ID!`);\r\n                    this._createBanner(BannerLocation.Home, argsTmp);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    _showBannerTimerId: number = 0;\r\n    public ShowBanner(location: BannerLocation = BannerLocation.Home, args: any = null) {\r\n        if (PlatUtils.IsWechat) {\r\n            if (!utils.wechatTool.isOverMinVersion(\"2.0.4\")) {\r\n                utils.showLog(\"当前版本不支持Banner广告!\");\r\n                return;\r\n            }\r\n\r\n            if (utils.wechatTool.ServerConfig) {\r\n                let locationTmp: BannerLocation = location;\r\n                let argsTmp: any = args;\r\n\r\n                this._showBannerTimer(locationTmp, argsTmp);\r\n\r\n                let interval: number = 18;\r\n                if (utils.wechatTool.ServerConfig.refresh_ad_time) {\r\n                    interval = utils.wechatTool.ServerConfig.refresh_ad_time;\r\n                }\r\n                clearInterval(this._showBannerTimerId);\r\n                //@ts-ignore\r\n                this._showBannerTimerId = setInterval(function () {\r\n                    utils.showLog(`显示Banner广告！location:${locationTmp}; args:${JSON.stringify(argsTmp)}; 间隔时间:${utils.wechatTool.ServerConfig.refresh_ad_time}`);\r\n                    this._showBannerTimer(locationTmp, argsTmp);\r\n                }.bind(this), interval * 1000);\r\n            } else {\r\n                utils.showLog(\"服务器配置数据未初始化!\");\r\n            }\r\n        }\r\n    }\r\n\r\n    public HideBanner(location: BannerLocation = BannerLocation.Home) {\r\n        if (PlatUtils.IsWechat) {\r\n            utils.showLog(\"隐藏广告条\");\r\n            clearInterval(this._showBannerTimerId);\r\n\r\n            this.HideDefaultBanner();\r\n            this.HideNativeBanner();\r\n        }\r\n    }\r\n\r\n\r\n    private HideDefaultBanner(): void {\r\n        this._curBannerAd && this._curBannerAd.hide();\r\n    }\r\n\r\n    private HideNativeBanner(): void {\r\n        this.nativeBannerAd && this.nativeBannerAd.hide();\r\n    }\r\n\r\n\r\n    public ShowInterstitial(location: BannerLocation = BannerLocation.Home) {\r\n        if (PlatUtils.IsWechat) {\r\n            if (!utils.wechatTool.isOverMinVersion(\"2.6.0\")) {\r\n                utils.showLog(\"当前版本不支持插屏广告!\");\r\n                return;\r\n            }\r\n            let delayTime: number = 0;\r\n            if (utils.wechatTool\r\n                && utils.wechatTool.ServerConfig\r\n                && utils.wechatTool.ServerConfig.intersititia_delay_show_time) {\r\n                delayTime = utils.wechatTool.ServerConfig.intersititia_delay_show_time;\r\n            }\r\n\r\n            utils.showLog(`插屏广告延时展示！ delayTime:${delayTime}秒`);\r\n\r\n            setTimeout(() => {\r\n\r\n                if (this.ServerConfig && this.ServerConfig.intersititial_first_ad && this.ServerConfig.intersititial_first_ad == \"box\") {\r\n                    utils.showLog(\"优先展示盒子插屏广告!\");\r\n                    if (this.canShowBoxInsertAd()) {\r\n                        this._createBoxInsertAd();\r\n                    } else {\r\n                        utils.showLog(\"盒子插屏广告展示失败，展示默认插屏!\");\r\n                        this._createMiniGameInsertAd();\r\n                    }\r\n                } else if (this.ServerConfig && this.ServerConfig.intersititial_first_ad && this.ServerConfig.intersititial_first_ad == \"native\") {\r\n                    this.showNativeIntersititialAd();\r\n                } else {\r\n                    utils.showLog(\"优先展示小游戏插屏广告!\");\r\n                    this._createMiniGameInsertAd();\r\n                }\r\n\r\n            }, delayTime * 1000);\r\n        }\r\n    }\r\n\r\n\r\n    _createBoxInsertAd() {\r\n        utils.rewardCallFunc = null;\r\n        utils.rewardCloseFunc = null;\r\n        if (utils.config && utils.config.otherconfig.beforGameOverRecGamesPanel && utils.getRecommondGameList()) {\r\n            let panel = cc.instantiate(utils.config.otherconfig.beforGameOverRecGamesPanel);\r\n            panel.zIndex = 999999;\r\n            let morePanel: BeforGameOverRecGamesPanel = panel.getComponent(\"BeforGameOverRecGamesPanel\");\r\n            cc.director.getScene().addChild(panel);\r\n            morePanel._location = SubLocation.isBoxInsertAd;\r\n            morePanel.init(utils.getRecommondGameList());\r\n            morePanel.show();\r\n        } else {\r\n            utils.showLog(\"互推插屏展示失败！\");\r\n        }\r\n    }\r\n    /**\r\n     * 是否能够显示互推插屏\r\n     */\r\n    canShowBoxInsertAd() {\r\n        let jumpList: any = utils.getRecommondGameList();\r\n        if (jumpList && jumpList.length > 0) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    isFirstShowInsertAd: boolean = true; //首次展示广告\r\n\r\n\r\n    _createMiniGameInsertAd() {\r\n        if (this._insertAd) {\r\n            this._insertAd.show().then(() => {\r\n                utils.showLog(\"插屏广告展示成功!\");\r\n                if (this.isFirstShowInsertAd && utils.getConfigByKey(\"insert_ad_first_show_active\") == \"true\") {\r\n                    this.isFirstShowInsertAd = false;\r\n                    utils.wechatTool.reportAttributedEvent(AttributedType.GameAddiction, AttributedKey.GameAddiction, AttributedValue.InsertAdFirstShowAction);\r\n                }\r\n\r\n            }).catch((err) => {\r\n                utils.showLog(\"插屏广告展示失败!\", JSON.stringify(err));\r\n                if (this.ServerConfig.intersititial_first_ad && this.ServerConfig.intersititial_first_ad == \"default\") {\r\n                    this.showNativeIntersititialAd();\r\n                }\r\n                // if (this.ServerConfig && this.ServerConfig.intersititial_first_ad == \"default\") {\r\n                //     utils.showLog(\"优先展示默认插屏，显示备选盒子插屏！\");\r\n                //     if (this.canShowBoxInsertAd()) {\r\n                //         this._createBoxInsertAd();\r\n                //     }\r\n                // }\r\n            });\r\n        } else {\r\n            utils.showLog(\"插屏广告未初始化\");\r\n            if (this.ServerConfig.intersititial_first_ad && this.ServerConfig.intersititial_first_ad == \"default\") {\r\n                this.showNativeIntersititialAd();\r\n            }\r\n            // if (this.ServerConfig && this.ServerConfig.intersititial_first_ad == \"default\") {\r\n            //     utils.showLog(\"优先展示默认插屏，显示备选盒子插屏！\");\r\n            //     if (this.canShowBoxInsertAd()) {\r\n            //         this._createBoxInsertAd();\r\n            //     }\r\n            // }\r\n        }\r\n    }\r\n\r\n\r\n    public ShowVideo(callback: Function) {\r\n        if (PlatUtils.IsWechat) {\r\n            this._videoCallback = callback;\r\n\r\n\r\n            if (this.checkRewardInsertIsShow() && utils.wechatTool\r\n                && utils.wechatTool.ServerConfig\r\n                && utils.wechatTool.ServerConfig.reward_first_ad && utils.wechatTool.ServerConfig.reward_first_ad != \"video\") {\r\n                utils.showLog(\"<<<服务器默认优先展示激励插屏>>>\");\r\n                this.showRewardInsert();\r\n                return;\r\n            }\r\n\r\n            if (!utils.wechatTool.isOverMinVersion(\"2.0.4\")) {\r\n                utils.showLog(\"当前版本不支持视频广告!\");\r\n                if (this._videoCallback) {\r\n                    // this._videoCallback(false, \"暂无视频广告!\");\r\n                    this.showRewardInsert();\r\n                }\r\n                return;\r\n            }\r\n\r\n            if (this._videoAd) {\r\n                this._videoAd.show().then(function () {\r\n                    utils.showLog(\"视频显示成功！\");\r\n                }.bind(this)).catch(function (err) {\r\n                    utils.showLog(\"视频未加载！\");\r\n                    this._videoAd.load();\r\n                    if (this._videoCallback) {\r\n                        // this._videoCallback(false, \"暂无视频广告!\");\r\n                        this.showRewardInsert();\r\n                    }\r\n                }.bind(this));\r\n            } else {\r\n                utils.showLog(\"视频未初始化!\");\r\n                if (this._videoCallback) {\r\n                    // this._videoCallback(false, \"暂无视频广告!\");\r\n                    this.showRewardInsert();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 验证是否显示激励插屏\r\n     */\r\n    private checkRewardInsertIsShow() {\r\n        let jumpList = utils.getRecommondGameList();\r\n        if (utils.isSupportnavigateToMiniGame()) {\r\n            if (utils.wechatTool\r\n                && utils.wechatTool.ServerConfig\r\n                && utils.wechatTool.ServerConfig.is_reward_intersititia) {\r\n                if (utils.wechatTool.ServerConfig.is_reward_intersititia == \"true\"\r\n                    && jumpList && jumpList.length > 0) {\r\n                    utils.showLog(\"激励插屏显示环境验证通过！\");\r\n                    return true;\r\n                } else {\r\n                    cc.warn(\"is_reward_intersititia 参数为false，激励插屏组件不显示！\");\r\n                    return false;\r\n                }\r\n            } else {\r\n                cc.warn(\"配置中没有is_reward_intersititia参数，激励插屏组件组件不显示！\");\r\n                return false;\r\n            }\r\n        }\r\n        utils.showLog(\"当前平台不支持小程序跳转！\");\r\n        return false;\r\n    }\r\n\r\n    /**\r\n    * 显示激励插屏组件\r\n    */\r\n    public showRewardInsert() {\r\n        utils.showLog(\"show reward\");\r\n        if (!this.checkRewardInsertIsShow()) {\r\n            utils.adManager.videoCallBack && utils.adManager.videoCallBack(false, \"暂无视频广告！\");\r\n            utils.adManager.videoCallBack = null;\r\n            return;\r\n        }\r\n\r\n\r\n        if (((!cc.isValid(this._rewardInsertNode)) || !this._rewardInsertNode) && utils.config.otherconfig.rewardInsert) {\r\n            utils.showLog(\"创建激励插屏广告\");\r\n            this._rewardInsertNode = cc.instantiate(utils.config.otherconfig.rewardInsert);\r\n            this._rewardInsertNode.position = CompatibleTool.position(cc.winSize.width / 2, cc.winSize.height / 2);\r\n            cc.director.getScene().addChild(this._rewardInsertNode, 9999);\r\n        }\r\n\r\n\r\n        if (this._rewardInsertNode) {\r\n            let rewardInsert: RewardInsert = this._rewardInsertNode.getComponent(\"RewardInsert\");\r\n            if (rewardInsert) {\r\n                rewardInsert.isShow = false;\r\n                utils.showLog(\"显示激励插屏组件！\");\r\n            } else {\r\n                utils.showLog(\"RewardInsert组件不存在!\");\r\n            }\r\n        } else {\r\n            utils.showLog(\"激励插屏没有创建！\");\r\n        }\r\n\r\n    }\r\n\r\n    public hideRewardInsert() {\r\n        if (this._rewardInsertNode) {\r\n            let rewardInsert: RewardInsert = this._rewardInsertNode.getComponent(\"RewardInsert\");\r\n            if (rewardInsert) {\r\n                rewardInsert.hide();\r\n                utils.showLog(\"隐藏激励插屏组件！\");\r\n            } else {\r\n                utils.showLog(\"RewardInsert组件不存在!\");\r\n            }\r\n        } else {\r\n            utils.showLog(\"激励插屏没有创建！\");\r\n        }\r\n    }\r\n\r\n    public ShowCloseBtnBanner(location: BannerLocation = BannerLocation.Home, args: any) {\r\n        if (PlatUtils.IsWechat) {\r\n            if (utils.wechatTool && !utils.wechatTool.isOverMinVersion(\"2.0.4\")) {\r\n                utils.showLog(\"当前版本不支持Banner广告!\");\r\n                return;\r\n            }\r\n            if (utils.wechatTool.ServerConfig && (!utils.wechatTool.ServerConfig.isMoveBtn || utils.wechatTool.ServerConfig.isMoveBtn != \"true\")) {\r\n                utils.showLog(\"服务器没有开启移动按钮，不显示广告！\");\r\n                return;\r\n            }\r\n\r\n            if (utils.wechatTool && utils.wechatTool.ServerConfig) {\r\n                if (PlatUtils.IsWechat) {\r\n                    let locationTmp: BannerLocation = location;\r\n                    // let argsTmp: any = args;\r\n\r\n\r\n                    let params = {\r\n                        adUnitId: utils.config.wechatconfig.getBannerId(locationTmp),\r\n                        style: {\r\n                            left: 0,\r\n                            width: 300,\r\n                            top: 0\r\n                        }\r\n                    };\r\n\r\n                    if (this._oldBannerLocation != locationTmp && this._curBannerAd) {\r\n                        this._curBannerAd.destroy();\r\n                        this._oldBannerLocation = locationTmp;\r\n                    }\r\n                    //@ts-ignore\r\n                    let curBannerAd = wx.createBannerAd(params);\r\n                    if (curBannerAd) {\r\n                        curBannerAd.onError((err) => {\r\n                            utils.showLog(\"广告条加载失败! \", JSON.stringify(err));\r\n                            if (curBannerAd) {\r\n                                curBannerAd.destroy();\r\n                            }\r\n                        });\r\n\r\n                        let self = this;\r\n                        curBannerAd.onLoad(() => {\r\n                            curBannerAd.show().then(() => {\r\n                                let old = self._curBannerAd;\r\n                                if (old) {\r\n                                    old.destroy();\r\n                                }\r\n                                self._curBannerAd = curBannerAd;\r\n\r\n                                let closeBtn = args.closeBtn;\r\n                                if (!closeBtn) {\r\n                                    return;\r\n                                }\r\n\r\n                                // closeBtn.active = true;\r\n                                //调整关闭按钮位置\r\n                                let winHeight = cc.winSize.height;\r\n                                var adY = self.getBannerAdHeight();\r\n                                utils.showLog('utils - adY:', adY);\r\n                                if (adY > 0) {\r\n                                    closeBtn.y = -(winHeight / 2 - adY) + closeBtn.height;\r\n                                    utils.showLog(\"btnClose.y\", closeBtn.y);\r\n                                }\r\n\r\n                                utils.showLog(\"关闭按钮---Banner广告显示成功!\");\r\n\r\n\r\n\r\n                            }).catch((err) => {\r\n                                utils.showLog(\"Banner广告出错\", JSON.stringify(err));\r\n                                if (curBannerAd) {\r\n                                    curBannerAd.destroy();\r\n                                }\r\n                            });\r\n                        });\r\n\r\n                        curBannerAd.onResize((res) => {\r\n                            curBannerAd.style.width = utils.wechatTool.getSystemInfo().screenWidth * 0.6;\r\n                            curBannerAd.style.left = (utils.wechatTool.getSystemInfo().screenWidth - res.width) * 0.5;\r\n\r\n                            // if (self._bannerBottom == cc.winSize.height) {\r\n                            //     curBannerAd.style.top = 0;\r\n                            // } else {\r\n                            curBannerAd.style.top = utils.wechatTool.getSystemInfo().screenHeight - res.height;\r\n                            // }\r\n                        });\r\n                    } else {\r\n                        utils.showLog(\"广告条创建失败!\");\r\n                    }\r\n                }\r\n            } else {\r\n                utils.showLog(\"服务器配置数据未初始化!\");\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n  * 是否能显示6个元素的交叉推广组件\r\n  */\r\n    public canShowCrossWidget6() {\r\n        if (PlatUtils.IsWechat) {\r\n            if (utils.isSupportnavigateToMiniGame()) {\r\n                return true;\r\n            } else {\r\n                cc.warn(\"当前平台不支持游戏内跳转，6元素交叉推广组件不显示！\");\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n    * 显示6元素交叉推广组件\r\n    */\r\n    public showCrossWidget6(): cc.Node {\r\n\r\n        if (this.canShowCrossWidget6()) {\r\n\r\n            if (utils.config.otherconfig.crossWidget6) {\r\n                return cc.instantiate(utils.config.otherconfig.crossWidget6);\r\n            } else {\r\n                utils.showLog(\"未找到预制体 CrossWidget6, 请查看CommonUtils组件上是否赋值！\");\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n    * 显示结算广告\r\n    * @param data 参数： closeBtn:\r\n    * statement_type \r\n    * 1:只显示小游戏插屏广告\r\n    * 2:只显示6个互推广告\r\n    * 3:显示插屏广告+6个互推\r\n    */\r\n    showStatementAds(data?: any): any {\r\n        let result: any = { \"type\": 0, \"node\": null };\r\n        let node: cc.Node = null;\r\n        this.ShowInterstitial();\r\n        if (utils.canShowCrossWidget6()) {\r\n            utils.showLog(\"服务器配置显示6个互推组件\");\r\n            node = this.showCrossWidget6();\r\n            result.type = 1;\r\n            result.node = node;\r\n            return result;\r\n        }\r\n        return result;\r\n        // if (this.ServerConfig && this.ServerConfig.statement_type) {\r\n        //     // let type = this.ServerConfig.statement_type;\r\n        //     let node: cc.Node = null;\r\n        //     let resType: number = 0;\r\n        //     this.ShowInterstitial();\r\n        //     if (this.canShowCrossWidget6()) {\r\n        //         node = this.showCrossWidget6();\r\n        //         resType = 1;\r\n        //     }\r\n        //     // switch (type) {\r\n        //     //     case 1:\r\n        //     //         utils.showLog(\"结算广告 >> 只显示小游戏插屏广告\");\r\n        //     //         this.ShowInterstitial();\r\n        //     //         break;\r\n        //     //     case 2:\r\n        //     //         utils.showLog(\"结算广告 >> 只显示6个互推广告\");\r\n        //     //         node = this.showCrossWidget6();\r\n        //     //         resType = 1;\r\n        //     //         break;\r\n        //     //     case 3:\r\n        //     //         utils.showLog(\"结算广告 >> 显示插屏广告+6个互推\");\r\n        //     //         this.ShowInterstitial();\r\n        //     //         node = this.showCrossWidget6();\r\n        //     //         resType = 1;\r\n        //     //         break;\r\n        //     //     default:\r\n        //     //         utils.showLog(\"非法的结算广告类型，：\", type)\r\n        //     //         break;\r\n        //     // }\r\n        //     result.type = resType;\r\n        //     result.node = node;\r\n        //     return result;\r\n        // } else {\r\n        //     cc.warn(\"配置未初始化！\");\r\n        //     return result;\r\n        // }\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * 获取banner广告高度\r\n     */\r\n    public getBannerAdHeight() {\r\n        if (this._curBannerAd) {\r\n            let i = this._curBannerAd.style.realHeight * 2;\r\n            if (i === null || i === undefined || isNaN(i)) {\r\n                return 0;\r\n            } else {\r\n                return i;\r\n            }\r\n\r\n        }\r\n        return 0;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    _customAdObjs: any[] = [];\r\n    public showNativeTryGameWidget(params: any = null) {\r\n\r\n        if (!utils.wechatTool.isOverMinVersion(\"2.11.1\")) {\r\n            utils.showLog(\"当前版本不支持原生广告!\");\r\n            return;\r\n        }\r\n\r\n        if (!this.ServerConfig) {\r\n            utils.showLog(\"组件未初始化！\");\r\n            return;\r\n        }\r\n\r\n\r\n        if (!utils.config.wechatconfig.bannerBoxId) {\r\n            utils.showLog(\"原生广告ID不存在\");\r\n            return;\r\n        }\r\n\r\n        let top = 0;\r\n        let left = 0;\r\n        if (params.top) {\r\n            top = params.top / cc.winSize.height * this.sysInfo.screenHeight\r\n        } else {\r\n            top = this.sysInfo.screenHeight - 112 - params.bottom / cc.winSize.height * this.sysInfo.screenHeight;\r\n        }\r\n\r\n        if (params.left) {\r\n            left = params.left / cc.winSize.width * this.sysInfo.screenWidth;\r\n        } else if (params.right) {\r\n            left = this.sysInfo.screenWidth - 70 - params.right / cc.winSize.width * this.sysInfo.screenWidth;\r\n        }\r\n\r\n        //@ts-ignore\r\n        let customAd = wx.createCustomAd({\r\n            // adUnitId: utils.config.wechatconfig.bannerBoxId,\r\n            adUnitId: utils.config.wechatconfig.bannerBoxId,\r\n            adIntervals: 30,\r\n            style: {\r\n                left: left,\r\n                top: top\r\n            }\r\n        });\r\n\r\n        customAd.onError((erro) => {\r\n            utils.showLog(\"原生广告异常！>>>>> #code=\" + erro.errCode + \" #msg=\" + erro.errMsg);\r\n            if (params.onError) {\r\n                utils.showLog(\"执行微信原生广告异常回调！\")\r\n                params.onError();\r\n            }\r\n        })\r\n\r\n        customAd.onLoad(() => {\r\n            utils.showLog(\"微信原生广告加载成功！\");\r\n            customAd.show().then(() => {\r\n                if (params.onSuccess) {\r\n                    utils.showLog(\"执行微信原生广告显示成功回调！\")\r\n                    params.onSuccess();\r\n                }\r\n                utils.showLog(\"微信原生广告显示成功！\");\r\n            }).catch((err) => {\r\n                utils.showLog(\"微信原生广告显示失败！\");\r\n            });\r\n        })\r\n\r\n        this._customAdObjs.push(customAd);\r\n    }\r\n\r\n    _nativeCustomAdObjs: any[] = [];\r\n    public showCustomAd(params: any = null) {\r\n\r\n        if (!utils.wechatTool.isOverMinVersion(\"2.11.1\")) {\r\n            utils.showLog(\"当前版本不支持原生模版广告!\");\r\n            return;\r\n        }\r\n\r\n        if (!this.ServerConfig) {\r\n            utils.showLog(\"组件未初始化！\");\r\n            return;\r\n        }\r\n\r\n\r\n        if (utils.config.wechatconfig.customAdInfos.length < 1) {\r\n            utils.showLog(\"原生广告配置不存在\");\r\n            return;\r\n        }\r\n\r\n        let customAdInfo: CustomAdInfo = utils.config.wechatconfig.getCustomAdInfoInfo(params.location);\r\n        if (!customAdInfo) {\r\n            utils.showLog(\"当前位置未配置模版广告！\");\r\n            return;\r\n        }\r\n        // utils.showLog(\"显示原生模版广告：位置：\" + params.location + \"，配置:\" + customAdInfo.toStrong);\r\n        let top = 0;\r\n        let left = 0;\r\n\r\n        //   about：左右居中\r\n        //   updown:上下\r\n        //   all:上下和左右居中\r\n        //  false:自定义对齐方式\r\n        if (customAdInfo.is_center == \"false\") {\r\n            if (customAdInfo.top > -1) {\r\n                top = customAdInfo.top / cc.winSize.height * this.sysInfo.screenHeight\r\n            } else {\r\n                top = this.sysInfo.screenHeight - customAdInfo.height - customAdInfo.bottom / cc.winSize.height * this.sysInfo.screenHeight;\r\n            }\r\n\r\n            if (customAdInfo.left > -1) {\r\n                left = customAdInfo.left / cc.winSize.width * this.sysInfo.screenWidth;\r\n            } else {\r\n                left = this.sysInfo.screenWidth - customAdInfo.width - customAdInfo.right / cc.winSize.width * this.sysInfo.screenWidth;\r\n            }\r\n        } else if (customAdInfo.is_center == \"updown\") {\r\n            utils.showLog(\"原生模版上下居中对齐！\")\r\n            if (customAdInfo.left > -1) {\r\n                left = customAdInfo.left / cc.winSize.width * this.sysInfo.screenWidth;\r\n            } else {\r\n                left = this.sysInfo.screenWidth - customAdInfo.width - customAdInfo.right / cc.winSize.width * this.sysInfo.screenWidth;\r\n            }\r\n            top = (this.sysInfo.screenHeight - customAdInfo.height) / 2;\r\n        } else if (customAdInfo.is_center == \"about\") {\r\n            utils.showLog(\"原生模版左右居中对齐！\")\r\n            left = (this.sysInfo.screenWidth - customAdInfo.width) / 2;\r\n            if (customAdInfo.top > -1) {\r\n                top = customAdInfo.top / cc.winSize.height * this.sysInfo.screenHeight\r\n            } else {\r\n                top = this.sysInfo.screenHeight - customAdInfo.height - customAdInfo.bottom / cc.winSize.height * this.sysInfo.screenHeight;\r\n            }\r\n        }\r\n        else {\r\n            utils.showLog(\"原生模版上下左右居中对齐！\")\r\n            left = (this.sysInfo.screenWidth - customAdInfo.width) / 2;\r\n            top = (this.sysInfo.screenHeight - customAdInfo.height) / 2;\r\n        }\r\n\r\n\r\n        //@ts-ignore\r\n        let customAd = wx.createCustomAd({\r\n            adUnitId: customAdInfo.id,\r\n            adIntervals: customAdInfo.refresh_time,\r\n            style: {\r\n                left: left,\r\n                top: top,\r\n                width: customAdInfo.width\r\n            }\r\n        });\r\n        customAd.location = params.location;\r\n        utils.showLog(\"customAd style left=\" + left + \",top=\" + top + \";  screenWidth=\" + this.sysInfo.screenWidth + \", screenHeight=\" + this.sysInfo.screenHeight)\r\n        customAd.onError((erro) => {\r\n            utils.showLog(\"原生广告异常！>>>>> #code=\" + erro.errCode + \" #msg=\" + erro.errMsg);\r\n            if (params.onError) {\r\n                utils.showLog(\"执行微信原生广告异常回调！\")\r\n                params.onError();\r\n            }\r\n        })\r\n\r\n        customAd.onLoad(() => {\r\n            utils.showLog(\"微信原生广告加载成功！\");\r\n            customAd.show().then(() => {\r\n                if (params.onSuccess) {\r\n                    utils.showLog(\"执行微信原生广告显示成功回调！\")\r\n                    params.onSuccess();\r\n                }\r\n                utils.showLog(\"微信原生广告显示成功！\");\r\n            }).catch((err) => {\r\n                utils.showLog(\"微信原生广告显示失败！\");\r\n            });\r\n        })\r\n\r\n        this._customAdObjs.push(customAd);\r\n    }\r\n\r\n    /**\r\n     * 隐藏原生模版广告\r\n     */\r\n    hideCustomAd(params?: any) {\r\n        for (let i = 0; i < this._customAdObjs.length; i++) {\r\n            if (this._customAdObjs[i]) {\r\n                if (params && \"location\" in params) {\r\n                    if (this._customAdObjs[i].location == params.location) {\r\n                        utils.showLog(\"隐藏位置：\" + params.location + \"的原生模版广告\");\r\n                        this._customAdObjs[i].destroy()\r\n                        this._customAdObjs.splice(i, 1)\r\n                    }\r\n                } else {\r\n                    this._customAdObjs[i].destroy()\r\n                    this._customAdObjs.splice(i, 1)\r\n                }\r\n            }\r\n        }\r\n        if (!params || !(\"location\" in params)) utils.showLog(\"隐藏所有位置的原生模版广告\");\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * 隐藏原生试玩广告\r\n     */\r\n    hideNativeTryGameWidget() {\r\n\r\n        for (let i = 0; i < this._customAdObjs.length; i++) {\r\n            if (this._customAdObjs[i]) {\r\n                this._customAdObjs[i].destroy()\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < this._customAdObjs.length; i++) {\r\n            this._customAdObjs.splice(i, 1)\r\n        }\r\n    }\r\n\r\n\r\n\r\n    nativeBannerAd: any = null;\r\n    public showNativeBannerAd(location: BannerLocation, args: any = null) {\r\n        utils.showLog(\"展示原生banner广告!\");\r\n\r\n        if (!utils.wechatTool.isOverMinVersion(\"2.11.1\")) {\r\n            utils.showLog(\"当前版本不支持原生模版广告!\");\r\n            return;\r\n        }\r\n\r\n        if (!this.ServerConfig) {\r\n            utils.showLog(\"组件未初始化！\");\r\n            return;\r\n        }\r\n\r\n\r\n        if (!utils.config.wechatconfig.nativeBannerId) {\r\n            utils.showLog(\"原生Banner广告ID配置不存在\");\r\n            return;\r\n        }\r\n\r\n        let bannerWidth = 325;\r\n        let bannerHeight = 100;\r\n\r\n        let left = (this.sysInfo.screenWidth - bannerWidth) / 2;\r\n        let top = this.sysInfo.screenHeight - bannerHeight;\r\n\r\n        if (this.nativeBannerAd) {\r\n            if (this.nativeBannerAd.isShow()) {\r\n                utils.showLog(\"原生Banner正在显示，不重新创建！\")\r\n            } else {\r\n                this.nativeBannerAd.show().then(() => {\r\n                    utils.showLog(\"原生Banner广告显示成功！\");\r\n                    this.HideDefaultBanner();\r\n                }).catch((err) => {\r\n                    utils.showLog(\"原生Banner广告显示失败！\");\r\n                    this.nativeBannerAd && this.nativeBannerAd.destroy();\r\n                    this.nativeBannerAd = null;\r\n                    if (this.ServerConfig.banner_first_ad && this.ServerConfig.banner_first_ad == \"native\") {\r\n                        this._createBanner(location, args);\r\n                    }\r\n                });\r\n            }\r\n            return;\r\n        }\r\n        //@ts-ignore\r\n        let customAd = wx.createCustomAd({\r\n            adUnitId: utils.config.wechatconfig.nativeBannerId,\r\n            adIntervals: utils.wechatTool.ServerConfig.refresh_ad_time || 30,\r\n            style: {\r\n                left: left,\r\n                top: top,\r\n                width: bannerWidth\r\n            }\r\n        });\r\n        utils.showLog(\"native nanner ad style left=\" + left + \",top=\" + top + \";  screenWidth=\" + this.sysInfo.screenWidth + \", screenHeight=\" + this.sysInfo.screenHeight)\r\n        customAd.onError((erro) => {\r\n            utils.showLog(\"原生Banner广告异常！>>>>> #code=\" + erro.errCode + \" #msg=\" + erro.errMsg);\r\n            this.nativeBannerAd && this.nativeBannerAd.destroy();\r\n            this.nativeBannerAd = null;\r\n            if (this.ServerConfig.banner_first_ad && this.ServerConfig.banner_first_ad == \"native\") {\r\n                this._createBanner(location, args);\r\n            }\r\n        })\r\n\r\n        customAd.onLoad(() => {\r\n            utils.showLog(\"原生Banner广告加载成功！\");\r\n            customAd.show().then(() => {\r\n                this.nativeBannerAd && this.nativeBannerAd.destroy();\r\n                this.nativeBannerAd = customAd;\r\n                utils.showLog(\"原生Banner广告显示成功！\");\r\n                this.HideDefaultBanner();\r\n\r\n            }).catch((err) => {\r\n                utils.showLog(\"原生Banner广告显示失败！\");\r\n                this.nativeBannerAd && this.nativeBannerAd.destroy();\r\n                this.nativeBannerAd = null;\r\n                if (this.ServerConfig.banner_first_ad && this.ServerConfig.banner_first_ad == \"native\") {\r\n                    this._createBanner(location, args);\r\n                }\r\n            });\r\n        })\r\n    }\r\n\r\n    nativeIntersititialAd: any = null;\r\n    public showNativeIntersititialAd() {\r\n        utils.showLog(\"展示原生插屏广告!\");\r\n\r\n        if (!utils.wechatTool.isOverMinVersion(\"2.11.1\")) {\r\n            utils.showLog(\"当前版本不支持原生模版广告!\");\r\n            return;\r\n        }\r\n\r\n        if (!this.ServerConfig) {\r\n            utils.showLog(\"组件未初始化！\");\r\n            return;\r\n        }\r\n\r\n\r\n        if (!utils.config.wechatconfig.nativeInsertIds) {\r\n            utils.showLog(\"原生插屏广告ID配置不存在\");\r\n            return;\r\n        }\r\n\r\n\r\n        let insertWidth = 345;\r\n        let insertHeight = 420;\r\n        if (cc.winSize.width > cc.winSize.height) {\r\n            insertHeight = 300\r\n        }\r\n        let left = (this.sysInfo.screenWidth - insertWidth) / 2;\r\n        let top = (this.sysInfo.screenHeight - insertHeight) / 2;\r\n\r\n        if (this.nativeIntersititialAd) {\r\n            if (this.nativeIntersititialAd.isShow()) {\r\n                utils.showLog(\"原生插屏正在显示，不重新创建！\")\r\n            } else {\r\n                this.nativeIntersititialAd.show().then(() => {\r\n                    utils.showLog(\"原生插屏广告显示成功！\");\r\n                }).catch((err) => {\r\n                    utils.showLog(\"原生插屏广告显示失败！\");\r\n                    this.nativeIntersititialAd && this.nativeIntersititialAd.destroy();\r\n                    this.nativeIntersititialAd = null;\r\n                    if (this.ServerConfig.intersititial_first_ad && this.ServerConfig.intersititial_first_ad == \"native\") {\r\n                        this._createMiniGameInsertAd();\r\n                    }\r\n                });\r\n            }\r\n            return;\r\n        }\r\n        //@ts-ignore\r\n        let customAd = wx.createCustomAd({\r\n            adUnitId: utils.config.wechatconfig.nativeInsertIds,\r\n            adIntervals: 60,\r\n            style: {\r\n                left: left,\r\n                top: top,\r\n                width: insertWidth\r\n            }\r\n        });\r\n        utils.showLog(\"native insert ad style left=\" + left + \",top=\" + top + \";  screenWidth=\" + this.sysInfo.screenWidth + \", screenHeight=\" + this.sysInfo.screenHeight)\r\n        customAd.onError((erro) => {\r\n            utils.showLog(\"原生插屏广告异常！>>>>> #code=\" + erro.errCode + \" #msg=\" + erro.errMsg);\r\n            this.nativeIntersititialAd && this.nativeIntersititialAd.destroy();\r\n            this.nativeIntersititialAd = null;\r\n            if (this.ServerConfig.intersititial_first_ad && this.ServerConfig.intersititial_first_ad == \"native\") {\r\n                this._createMiniGameInsertAd();\r\n            }\r\n        })\r\n        customAd.onLoad(() => {\r\n            utils.showLog(\"原生插屏广告加载成功！\");\r\n            customAd.show().then(() => {\r\n                this.nativeIntersititialAd && this.nativeIntersititialAd.destroy();\r\n                this.nativeIntersititialAd = customAd;\r\n                utils.showLog(\"原生插屏广告显示成功！\");\r\n            }).catch((err) => {\r\n                utils.showLog(\"原生插屏广告显示失败！\");\r\n                this.nativeIntersititialAd && this.nativeIntersititialAd.destroy();\r\n                this.nativeIntersititialAd = null;\r\n                if (this.ServerConfig.intersititial_first_ad && this.ServerConfig.intersititial_first_ad == \"native\") {\r\n                    this._createMiniGameInsertAd();\r\n                }\r\n            });\r\n        })\r\n    }\r\n}\r\n"]}