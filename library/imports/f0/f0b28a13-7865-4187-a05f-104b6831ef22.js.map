{"version":3,"sources":["assets\\scripts\\Game\\prop.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAElF,8CAA6C;AAC7C,qCAAoC;AACpC,mCAA8B;AAC9B,mCAA8B;AAC9B,2CAA0C;AAEpC,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAkC,wBAAY;IAA9C;QAEI,wBAAwB;QAF5B,qEAsCC;QAlCG,eAAe;QAEf,kBAAY,GAAa,IAAI,CAAC;QAE9B,SAAG,GAAY,CAAC,CAAC;;QA6BjB,iBAAiB;IACrB,CAAC;IA5BG,oBAAK,GAAL;QAAA,iBAgBC;QAfG,iBAAO,IAAI,iBAAO,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QACvD,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;aAClB,KAAK,CAAC,CAAC,CAAC;aACR,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;aACX,IAAI,CAAC;YACF,uBAAU,CAAC,aAAa,CAAC,MAAM,CAAC,KAAI,CAAC,GAAG,EAAC,CAAC,CAAC,CAAC;YAC5C,KAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;YACpB,uBAAU,CAAC,SAAS,EAAG,CAAC;QAC5B,CAAC,CAAC;aACD,KAAK,EAAE,CAAC;QAET,mCAAmC;QACnC,0DAA0D;QAC1D,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QACpD,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,GAAG,eAAM,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,GAAG,gBAAM,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,WAAW,CAAC,CAAC;IAChI,CAAC;IAED,+BAAgB,GAAhB,UAAiB,KAAU,EAAE,IAAS;QAClC,IAAI,EAAE,GAAG,KAAK,CAAC,YAAY,CAAC,gBAAM,CAAC,CAAA;QACnC,IAAI,KAAK,CAAC,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,QAAQ,EAAE;YAC/B,uBAAU,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAC,CAAC,CAAC,CAAC;YAC5C,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;YACpB,uBAAU,CAAC,SAAS,EAAG,CAAC;YACxB,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;SACjC;IACL,CAAC;IA9BD;QADC,QAAQ,EAAG;8CACkB;IANb,IAAI;QADxB,OAAO;OACa,IAAI,CAsCxB;IAAD,WAAC;CAtCD,AAsCC,CAtCiC,EAAE,CAAC,SAAS,GAsC7C;kBAtCoB,IAAI","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { cocosz } from \"../Framework/CocosZ\";\r\nimport { gameMgr } from \"./gameMgr\";\r\nimport Person from \"./person\";\r\nimport Weapon from \"./weapon\";\r\nimport { upgradeMgr } from \"./UpgradeMgr\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Prop extends cc.Component {\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n    @property () \r\n    weaponSprite : cc.Node = null;\r\n\r\n    idx : number = 0;\r\n\r\n    start () {\r\n        gameMgr && gameMgr.setMapTs.checkNode(this.node, true);\r\n        cc.tween(this.node)\r\n        .delay(5)\r\n        .blink(3, 3)\r\n        .call(() => {\r\n            upgradeMgr.createPropArr.splice(this.idx,1);\r\n            this.node.destroy();\r\n            upgradeMgr.createNum --;\r\n        })\r\n        .start();\r\n        \r\n        // console.log('当前idx为：'+this.idx);\r\n        // console.log('当前武器为：'+ Weapon.WeaponName[this.idx - 1]);\r\n        let weaponSp = this.node.getChildByName('weaponSp');\r\n        weaponSp.getComponent(cc.Sprite).spriteFrame = cocosz.resMgr.getRes(\"w_\" + Weapon.WeaponName[this.idx - 1], cc.SpriteFrame);\r\n    }\r\n\r\n    onCollisionEnter(other: any, self: any) {\r\n        let ts = other.getComponent(Person)\r\n        if (other.tag == 1 && ts.isPlayer) {\r\n            upgradeMgr.createPropArr.splice(this.idx,1);\r\n            this.node.destroy();\r\n            upgradeMgr.createNum --;\r\n            ts.setNewWeapon(this.idx - 1);\r\n        }\r\n    }\r\n    // update (dt) {}\r\n}\r\n"]}