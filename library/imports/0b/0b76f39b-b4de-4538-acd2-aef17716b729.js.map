{"version":3,"sources":["assets\\scripts\\Framework\\DataMgr.ts"],"names":[],"mappings":";;;;;;AAAA,yCAAoC;AACpC,mCAAkC;AAClC,uCAA+E;AAE/E;;GAEG;AACH;IAAA;QAUY,cAAS,GAAQ,EAAE,CAAC;IAmdhC,CAAC;IA1dG,sBAAkB,eAAI;aAAtB;YACI,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE;gBAChB,OAAO,CAAC,KAAK,GAAG,IAAI,OAAO,EAAE,CAAC;aACjC;YACD,OAAO,OAAO,CAAC,KAAK,CAAC;QACzB,CAAC;;;OAAA;IAIM,sBAAI,GAAX;QACI,+BAA+B;QAE/B,IAAI,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,kBAAQ,CAAC,WAAW,CAAC,EAAE;YACnD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,kBAAQ,CAAC,WAAW,CAAC,CAAC,CAAC;SAClF;aAAM;YACH,OAAO;YACP,IAAI,CAAC,SAAS,CAAC,kBAAQ,CAAC,YAAY,CAAC,GAAG,MAAM,CAAC;YAC/C,OAAO;YACP,IAAI,CAAC,SAAS,CAAC,kBAAQ,CAAC,eAAe,CAAC,GAAG,MAAM,CAAC;YAClD,OAAO;YACP,IAAI,CAAC,SAAS,CAAC,kBAAQ,CAAC,gBAAgB,CAAC,GAAG,GAAG,CAAC;YAChD,OAAO;YACP,IAAI,CAAC,SAAS,CAAC,kBAAQ,CAAC,YAAY,CAAC,GAAG,GAAG,CAAC;YAC5C,OAAO;YACP,IAAI,CAAC,SAAS,CAAC,kBAAQ,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC;YAC9C,IAAI,CAAC,SAAS,CAAC,kBAAQ,CAAC,aAAa,CAAC,GAAG,GAAG,CAAC;YAC7C,QAAQ;YACR,IAAI,CAAC,SAAS,CAAC,kBAAQ,CAAC,sBAAsB,CAAC,GAAG,IAAI,CAAC;YACvD,IAAI,CAAC,SAAS,CAAC,kBAAQ,CAAC,qBAAqB,CAAC,GAAG,GAAG,CAAC;YAErD,IAAI,CAAC,SAAS,CAAC,kBAAQ,CAAC,mBAAmB,CAAC,GAAG,GAAG,CAAC;YAEnD,SAAS;YACT,IAAI,CAAC,cAAc,EAAE,CAAC;YACtB,UAAU;YACV,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,SAAS;YACT,IAAI,CAAC,YAAY,EAAE,CAAC;YAEpB,IAAI,CAAC,KAAK,EAAE,CAAC;SAChB;IACL,CAAC;IACD;;QAEI;IACI,gCAAc,GAAtB;QACI,EAAE,CAAA;QACF,IAAI,YAAY,GAAiC,EAAE,CAAC;QACpD,KAAK;QACL,IAAI,SAAS,GAAc,IAAI,oBAAS,CAAC,eAAU,IAAI,uBAAc,CAAC,wBAAgB,CAAC,CAAC;QACxF,YAAY,CAAC,MAAM,CAAC,GAAG,SAAS,CAAC;QACjC,KAAK,IAAI,CAAC,GAAG,IAAI,EAAE,CAAC,IAAI,IAAI,GAAG,kBAAQ,CAAC,kBAAkB,EAAE,CAAC,EAAE,EAAE;YAC7D,IAAI,WAAS,GAAc,IAAI,oBAAS,CAAC,eAAU,CAAC,uBAAc,CAAC,wBAAgB,CAAC,CAAC;YACrF,YAAY,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,GAAG,WAAS,CAAC;SAC1C;QACD,KAAK;QACL,KAAK,IAAI,CAAC,GAAG,IAAI,EAAE,CAAC,IAAI,IAAI,GAAG,kBAAQ,CAAC,kBAAkB,EAAE,CAAC,EAAE,EAAE;YAC7D,IAAI,WAAS,GAAc,IAAI,oBAAS,CAAC,eAAU,CAAC,uBAAc,CAAC,wBAAgB,CAAC,CAAC;YACrF,YAAY,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,GAAG,WAAS,CAAC;SAC1C;QACD,KAAK;QACL,KAAK,IAAI,CAAC,GAAG,IAAI,EAAE,CAAC,IAAI,IAAI,GAAG,kBAAQ,CAAC,kBAAkB,EAAE,CAAC,EAAE,EAAE;YAC7D,IAAI,WAAS,GAAc,IAAI,oBAAS,CAAC,eAAU,CAAC,uBAAc,CAAC,wBAAgB,CAAC,CAAC;YACrF,YAAY,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,GAAG,WAAS,CAAC;SAC1C;QACD,IAAI,CAAC,SAAS,CAAC,kBAAQ,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;IACzE,CAAC;IAEO,+BAAa,GAArB;QACI,SAAS;QACT,IAAI,KAAK,GAAa,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QAC5F,IAAI,WAAW,GAAe,EAAE,CAAC;QACjC,IAAI,QAAQ,GAAa,IAAI,mBAAQ,CAAC,eAAU,CAAC,uCAA0B,KAAK,CAAC,CAAC,CAAC,6CAAiC,CAAC,CAAC;QACtH,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC3B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACnC,IAAI,UAAQ,GAAa,IAAI,mBAAQ,CAAC,eAAU,CAAC,uCAA0B,KAAK,CAAC,CAAC,CAAC,6CAAiC,CAAC,CAAC;YACtH,WAAW,CAAC,IAAI,CAAC,UAAQ,CAAC,CAAC;SAC9B;QACD,IAAI,CAAC,SAAS,CAAC,kBAAQ,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;IACvE,CAAC;IAEO,8BAAY,GAApB;QACI,SAAS;QACT,IAAI,KAAK,GAAa;YAClB,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI;YACvD,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI;YACvD,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI;SAC/B,CAAC;QACF,IAAI,UAAU,GAAc,EAAE,CAAC;QAC/B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACnC,IAAI,OAAO,GAAY,IAAI,CAAC;YAC5B,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE;gBACnB,OAAO,GAAG,IAAI,kBAAO,CAAC,eAAU,CAAC,uCAA0B,KAAK,CAAC,CAAC,CAAC,6CAAiC,CAAC,CAAC;aACzG;iBAAM;gBACH,OAAO,GAAG,IAAI,kBAAO,CAAC,eAAU,CAAC,uCAA0B,KAAK,CAAC,CAAC,CAAC,6CAAiC,CAAC,CAAC;aACzG;YACD,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAC5B;QACD,IAAI,CAAC,SAAS,CAAC,kBAAQ,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;IACrE,CAAC;IAID,sBAAW,4BAAO;QAFlB,yDAAyD;QACzD,WAAW;aACX;YACI,OAAO,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,UAAU,EAAE,GAAG,CAAC,IAAI,GAAG,CAAC;QACzD,CAAC;aACD,UAAmB,KAAc;YAC7B,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACzD,CAAC;;;OAHA;IAKD,sBAAW,4BAAO;QADlB,WAAW;aACX;YACI,OAAO,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,UAAU,EAAE,GAAG,CAAC,IAAI,GAAG,CAAC;QACzD,CAAC;aACD,UAAmB,KAAc;YAC7B,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACzD,CAAC;;;OAHA;IAKD,sBAAW,8BAAS;QADpB,WAAW;aACX;YACI,OAAO,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC,CAAC;QAC9D,CAAC;aACD,UAAqB,KAAa;YAC9B,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,YAAY,EAAE,KAAK,GAAG,EAAE,CAAC,CAAC;YAChD,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAQ,CAAC,YAAY,EAAE,EAAE,IAAI,EAAE,kBAAQ,CAAC,aAAa,EAAE,CAAC,CAAC;QAC1E,CAAC;;;OAJA;IAMD,sBAAW,iCAAY;QADvB,YAAY;aACZ;YACI,OAAO,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,eAAe,EAAE,GAAG,CAAC,CAAC,CAAC;QACjE,CAAC;aACD,UAAwB,KAAa;YACjC,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,eAAe,EAAE,KAAK,GAAG,EAAE,CAAC,CAAC;YACnD,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAQ,CAAC,YAAY,EAAE,EAAE,IAAI,EAAE,kBAAQ,CAAC,gBAAgB,EAAE,CAAC,CAAC;QAC7E,CAAC;;;OAJA;IAOD,sBAAW,kCAAa;QADxB,YAAY;aACZ;YACI,OAAO,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,gBAAgB,EAAE,GAAG,CAAC,CAAC,CAAC;QAClE,CAAC;aACD,UAAyB,KAAa;YAClC,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,gBAAgB,EAAE,KAAK,GAAG,EAAE,CAAC,CAAC;YACpD,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAQ,CAAC,YAAY,EAAE,EAAE,IAAI,EAAE,kBAAQ,CAAC,gBAAgB,EAAE,CAAC,CAAC;QAC7E,CAAC;;;OAJA;IAOD,sBAAW,kCAAa;QADxB,eAAe;aACf;YACI,OAAO,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,cAAc,GAAG,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;QACtE,CAAC;aACD,UAAyB,KAAa;YAClC,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,cAAc,GAAG,GAAG,EAAE,KAAK,GAAG,EAAE,CAAC,CAAC;QAC5D,CAAC;;;OAHA;IAMD,sBAAW,wCAAmB;QAD9B,cAAc;aACd;YACI,OAAO,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,sBAAsB,EAAE,IAAI,CAAC,CAAC,CAAC;QACzE,CAAC;aACD,UAA+B,KAAa;YACxC,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,sBAAsB,EAAE,KAAK,GAAG,EAAE,CAAC,CAAC;QAC9D,CAAC;;;OAHA;IAMD,sBAAW,uCAAkB;QAD7B,gBAAgB;aAChB;YACI,OAAO,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,qBAAqB,EAAE,GAAG,CAAC,CAAC;QAC7D,CAAC;aACD,UAA8B,KAAa;YACvC,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,qBAAqB,EAAE,KAAK,GAAG,EAAE,CAAC,CAAC;QAC7D,CAAC;;;OAHA;IAMD,sBAAW,qCAAgB;QAD3B,eAAe;aACf;YACI,OAAO,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,mBAAmB,EAAE,GAAG,CAAC,CAAC;QAC3D,CAAC;aACD,UAA4B,KAAa;YACrC,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,mBAAmB,EAAE,KAAK,GAAG,EAAE,CAAC,CAAC;QAC3D,CAAC;;;OAHA;IAMD,sBAAW,iCAAY;QADvB,aAAa;aACb;YACI,OAAO,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,eAAe,EAAE,EAAE,CAAC,CAAA;QACrD,CAAC;aACD,UAAwB,CAAS;YAC7B,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC;QAC9C,CAAC;;;OAHA;IAMD,sBAAW,gCAAW;QADtB,aAAa;aACb;YACI,OAAO,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC,CAAC;QAChE,CAAC;aACD,UAAuB,CAAS;YAC5B,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,cAAc,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC;QAClD,CAAC;;;OAHA;IAKD,sBAAW,iCAAY;QADvB,iBAAiB;aACjB;YACI,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,eAAe,EAAE,iBAAiB,CAAC,CAAC,CAAC;QACjF,CAAC;aACD,UAAwB,CAAW;YAC/B,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,eAAe,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;QAC9D,CAAC;;;OAHA;IAQD,sBAAW,8BAAS;QAHpB;;WAEG;aACH;YACI,OAAO,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC,CAAC;QAC9D,CAAC;QAED;;WAEG;aACH,UAAqB,KAAa;YAC9B,IAAI,KAAK,IAAI,IAAI,CAAC,SAAS,EAAE;gBACzB,OAAO;aACV;YAED,IAAI,KAAK,GAAW,IAAI,CAAC,SAAS,CAAC;YACnC,IAAI,QAAQ,GAAa,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;YACjD,IAAI,QAAQ,EAAE;gBACV,QAAQ,CAAC,KAAK,GAAG,CAAC,CAAC;gBACnB,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;aACrC;YAED,IAAI,WAAW,GAAa,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;YACpD,IAAI,WAAW,EAAE;gBACb,WAAW,CAAC,KAAK,GAAG,CAAC,CAAC;gBACtB,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,WAAW,CAAC,CAAC;aACxC;YAED,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,YAAY,EAAE,KAAK,GAAG,EAAE,CAAC,CAAC;QACpD,CAAC;;;OAxBA;IA0BD;;;OAGG;IACI,6BAAW,GAAlB,UAAmB,EAAU;QACzB,IAAI,SAAS,GAAW,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;QAC/D,IAAI,SAAS,EAAE;YACX,IAAI,WAAW,GAAe,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YACpD,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,GAAG,WAAW,CAAC,MAAM,EAAE;gBACpC,OAAO,WAAW,CAAC,EAAE,CAAC,CAAC;aAC1B;SACJ;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IAED;;;;OAIG;IACI,6BAAW,GAAlB,UAAmB,EAAU,EAAE,IAAc;QACzC,IAAI,SAAS,GAAW,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;QAC/D,IAAI,SAAS,EAAE;YACX,IAAI,WAAW,GAAe,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YACpD,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,GAAG,WAAW,CAAC,MAAM,EAAE;gBACpC,WAAW,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;gBACvB,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,CAAC;aACnE;SACJ;IACL,CAAC;IAED;;OAEG;IACI,mCAAiB,GAAxB;QACI,IAAI,GAAG,GAAa,EAAE,CAAC;QACvB,IAAI,SAAS,GAAW,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;QAC/D,IAAI,SAAS,EAAE;YACX,IAAI,WAAW,GAAe,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YACpD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACzC,IAAI,WAAW,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,EAAE;oBAC3B,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;iBAC/B;aACJ;SACJ;QACD,OAAO,GAAG,CAAC;IACf,CAAC;IAED;;;OAGG;IACI,4BAAU,GAAjB,UAAkB,EAAU;QACxB,IAAI,QAAQ,GAAW,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;QAC7D,IAAI,QAAQ,EAAE;YACV,IAAI,UAAU,GAAc,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;YACjD,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,GAAG,UAAU,CAAC,MAAM,EAAE;gBACnC,OAAO,UAAU,CAAC,EAAE,CAAC,CAAC;aACzB;SACJ;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IAGD;;;;OAIG;IACI,4BAAU,GAAjB,UAAkB,EAAU,EAAE,IAAa;QACvC,IAAI,QAAQ,GAAW,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;QAC7D,IAAI,QAAQ,EAAE;YACV,IAAI,UAAU,GAAc,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;YACjD,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,GAAG,UAAU,CAAC,MAAM,EAAE;gBACnC,UAAU,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;gBACtB,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;aACjE;SACJ;IACL,CAAC;IAEC;;;KAGC;IACM,8BAAY,GAAnB,UAAoB,EAAU;QAC5B,IAAI,UAAU,GAAW,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;QACjE,IAAI,UAAU,EAAE;YACZ,IAAI,YAAY,GAAgB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;YACvD,IAAI,EAAE,IAAI,YAAY,CAAC,EAAE,CAAC,EAAE;gBACxB,OAAO,YAAY,CAAC,EAAE,CAAC,CAAC;aAC3B;SACJ;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IAGD;;;;OAIG;IACI,8BAAY,GAAnB,UAAoB,EAAU,EAAE,IAAe;QAC3C,IAAI,UAAU,GAAW,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;QACjE,IAAI,UAAU,EAAE;YACZ,IAAI,YAAY,GAAgB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;YACvD,IAAI,EAAE,IAAI,YAAY,CAAC,EAAE,CAAC,EAAE;gBACxB,YAAY,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;gBACxB,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,YAAY,EAAE,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,CAAC;aACrE;SACJ;IACL,CAAC;IAKD,sBAAW,6BAAQ;QAHnB;;UAEE;aACF;YACI,OAAO,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC,CAAC;QAChE,CAAC;aACD,UAAqB,EAAU;YAC3B,IAAI,EAAE,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,gBAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE;gBAC7D,OAAO;aACV;YACD,IAAI,KAAK,GAAW,IAAI,CAAC,QAAQ,CAAC;YAClC,IAAI,OAAO,GAAY,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YAC9C,IAAI,OAAO,EAAE;gBACT,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC;gBAClB,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;aACnC;YACD,IAAI,UAAU,GAAY,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;YAC9C,IAAI,UAAU,EAAE;gBACZ,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC;gBACrB,IAAI,CAAC,UAAU,CAAC,EAAE,EAAE,UAAU,CAAC,CAAC;aACnC;YACD,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,aAAa,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;QAClD,CAAC;;;OAjBA;IAqBD,sBAAW,6BAAQ;QAHnB;;UAEE;aACF;YACI,IAAG,eAAM,CAAC,QAAQ,IAAI,CAAC,EAAC;gBACpB,OAAO,CAAC,CAAC;aACZ;iBAAI;gBACD,OAAO,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,aAAa,EAAE,GAAG,CAAC,CAAC,CAAC;aAC9D;QACL,CAAC;aACD,UAAqB,EAAU;YAC3B,IAAI,EAAE,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,gBAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE;gBAC7D,OAAO;aACV;YACD,IAAI,KAAK,GAAW,IAAI,CAAC,QAAQ,CAAC;YAClC,IAAI,OAAO,GAAY,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YAC9C,IAAI,OAAO,EAAE;gBACT,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC;gBAClB,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;aACnC;YACD,IAAI,UAAU,GAAY,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;YAC9C,IAAI,UAAU,EAAE;gBACZ,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC;gBACrB,IAAI,CAAC,UAAU,CAAC,EAAE,EAAE,UAAU,CAAC,CAAC;aACnC;YACD,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,aAAa,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;QAClD,CAAC;;;OAjBA;IAkBD,sBAAW,8BAAS;aAApB;YACI,OAAO,IAAI,CAAC,QAAQ,CAAC;QACzB,CAAC;aACD,UAAqB,EAAU;YAC3B,IAAI,gBAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE;gBACrC,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;aACtB;iBAAM,IAAI,gBAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE;gBAC5C,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;aACtB;QACL,CAAC;;;OAPA;IAUD,sBAAW,gCAAW;QADtB,WAAW;aACX;YACI,OAAO,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;QACxD,CAAC;QACD,WAAW;aACX,UAAuB,KAAc;YACjC,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;YAC7C,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAQ,CAAC,cAAc,CAAC,CAAC;QAC1C,CAAC;;;OALA;IASD,sBAAW,8BAAS;QAFpB,6CAA6C;QAC7C,OAAO;aACP;YACI,OAAO,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC,CAAC;QACpD,CAAC;aACD,UAAqB,CAAS;YAC1B,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,EAAE;gBACpB,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC;aACrC;QACL,CAAC;;;OALA;IAOD,sBAAW,8BAAS;QADpB,MAAM;aACN;YACI,OAAO,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC,CAAC;QACpD,CAAC;aACD,UAAqB,CAAS;YAC1B,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,EAAE;gBACpB,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC;aACrC;QACL,CAAC;;;OALA;IAOD,sBAAW,+BAAU;QADrB,KAAK;aACL;YACI,OAAO,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC,CAAC;QACrD,CAAC;aACD,UAAsB,CAAS;YAC3B,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,EAAE;gBACrB,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC;aACtC;QACL,CAAC;;;OALA;IAOD,sBAAW,8BAAS;QADpB,KAAK;aACL;YACI,OAAO,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC,CAAC;QACpD,CAAC;aACD,UAAqB,CAAS;YAC1B,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,EAAE;gBACpB,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC;aACrC;QACL,CAAC;;;OALA;IAOD,sBAAW,6BAAQ;QADnB,OAAO;aACP;YACI,OAAO,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,WAAW,EAAE,CAAC,CAAC,CAAA;QAChD,CAAC;aACD,UAAoB,CAAS;YACzB,IAAI,CAAC,OAAO,CAAC,kBAAQ,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;YACtC,WAAW;YACX,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAQ,CAAC,cAAc,CAAC,CAAC;YACtC,EAAE,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;QAC5B,CAAC;;;OANA;IAQD,gFAAgF;IACzE,yBAAO,GAAd,UAAe,GAAW,EAAE,YAAiB;QACzC,IAAI,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,IAAI,EAAE;YACjE,OAAO,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;SAC9B;QACD,OAAO,YAAY,CAAC;IACxB,CAAC;IACM,yBAAO,GAAd,UAAe,GAAW,EAAE,KAAU;QAClC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,KAAK,EAAE,CAAC;IACjB,CAAC;IACO,uBAAK,GAAb;QACI,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,kBAAQ,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;IACtF,CAAC;IAEL,cAAC;AAAD,CA7dA,AA6dC,IAAA","file":"","sourceRoot":"/","sourcesContent":["import Weapon from \"../Game/weapon\";\r\nimport { cocosz } from \"./CocosZ\";\r\nimport Constant, { SkinInfo, Levelitem, SkillInfo, GunInfo } from \"./Constant\";\r\n\r\n/**\r\n * 数据管理类\r\n */\r\nexport default class DataMgr {\r\n\r\n    private static _inst: DataMgr;\r\n    public static get inst(): DataMgr {\r\n        if (!DataMgr._inst) {\r\n            DataMgr._inst = new DataMgr();\r\n        }\r\n        return DataMgr._inst;\r\n    }\r\n\r\n    private _dataPool: any = {};\r\n\r\n    public init() {\r\n        // cc.sys.localStorage.clear();\r\n\r\n        if (cc.sys.localStorage.getItem(Constant.ST_GameData)) {\r\n            this._dataPool = JSON.parse(cc.sys.localStorage.getItem(Constant.ST_GameData));\r\n        } else {\r\n            // 初始金币\r\n            this._dataPool[Constant.ST_CoinCount] = \"9000\";\r\n            // 初始钻石\r\n            this._dataPool[Constant.ST_DiamondCount] = \"9000\";\r\n            // 初始钻石\r\n            this._dataPool[Constant.ST_PhysicalCount] = \"3\";\r\n            //初始化皮肤\r\n            this._dataPool[Constant.ST_CurSkinId] = \"0\";\r\n            //初始化武器\r\n            this._dataPool[Constant.ST_CurMeleeId] = \"13\";\r\n            this._dataPool[Constant.ST_CurRangeId] = \"0\";\r\n            //初始签到信息\r\n            this._dataPool[Constant.ST_LastDailyBonusIndex] = \"-1\";\r\n            this._dataPool[Constant.ST_LastDailyBonusTime] = \"0\";\r\n\r\n            this._dataPool[Constant.ST_LastPhycicalTime] = \"0\";\r\n\r\n            //初始化关卡信息\r\n            this._initLevelData();\r\n            // 初始化皮肤数据\r\n            this._initSkinData();\r\n            //初始化枪械数据\r\n            this._initGunData();\r\n\r\n            this._save();\r\n        }\r\n    }\r\n    /**\r\n      * 初始化关卡信息\r\n      */\r\n    private _initLevelData() {\r\n        ``\r\n        let levelItemObj: { [key: string]: Levelitem } = {};\r\n        // 简单\r\n        let levelitem: Levelitem = new Levelitem(`{\"Id\":\"${1001}\",\"State\":\"${1}\",\"Grade\":\"0\"}`);\r\n        levelItemObj[\"1001\"] = levelitem;\r\n        for (let i = 1002; i <= 1000 + Constant.CT_TotalLevelCount; i++) {\r\n            let levelitem: Levelitem = new Levelitem(`{\"Id\":\"${i}\",\"State\":\"${0}\",\"Grade\":\"0\"}`);\r\n            levelItemObj[i.toString()] = levelitem;\r\n        }\r\n        // 困难\r\n        for (let i = 2001; i <= 2000 + Constant.CT_TotalLevelCount; i++) {\r\n            let levelitem: Levelitem = new Levelitem(`{\"Id\":\"${i}\",\"State\":\"${0}\",\"Grade\":\"0\"}`);\r\n            levelItemObj[i.toString()] = levelitem;\r\n        }\r\n        // 英雄\r\n        for (let i = 3001; i <= 3000 + Constant.CT_TotalLevelCount; i++) {\r\n            let levelitem: Levelitem = new Levelitem(`{\"Id\":\"${i}\",\"State\":\"${0}\",\"Grade\":\"0\"}`);\r\n            levelItemObj[i.toString()] = levelitem;\r\n        }\r\n        this._dataPool[Constant.ST_LevelItem] = JSON.stringify(levelItemObj);\r\n    }\r\n\r\n    private _initSkinData() {\r\n        // 皮肤数据读表\r\n        let price: number[] = [0, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000];\r\n        let skinInfoArr: SkinInfo[] = [];\r\n        let skinInfo: SkinInfo = new SkinInfo(`{\"Id\":\"${0}\",\"State\":\"2\",\"Price\":\"${price[0]}\",\"Level\":\"0\",\"VideoCount\":\"0\"}`);\r\n        skinInfoArr.push(skinInfo);\r\n        for (let i = 1; i < price.length; i++) {\r\n            let skinInfo: SkinInfo = new SkinInfo(`{\"Id\":\"${i}\",\"State\":\"0\",\"Price\":\"${price[i]}\",\"Level\":\"0\",\"VideoCount\":\"0\"}`);\r\n            skinInfoArr.push(skinInfo);\r\n        }\r\n        this._dataPool[Constant.ST_SkinInfo] = JSON.stringify(skinInfoArr);\r\n    }\r\n\r\n    private _initGunData() {\r\n        // 武器数据读表\r\n        let price: number[] = [\r\n            0, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000,\r\n            1000, 1000, 1000, 0, 1000, 1000, 1000, 1000, 1000, 1000,\r\n            1000, 1000, 1000, 1000, 1000\r\n        ];\r\n        let gunInfoArr: GunInfo[] = [];\r\n        for (let i = 0; i < price.length; i++) {\r\n            let gunInfo: GunInfo = null;\r\n            if (i == 0 || i == 13) {\r\n                gunInfo = new GunInfo(`{\"Id\":\"${i}\",\"State\":\"2\",\"Price\":\"${price[i]}\",\"Level\":\"0\",\"VideoCount\":\"0\"}`);\r\n            } else {\r\n                gunInfo = new GunInfo(`{\"Id\":\"${i}\",\"State\":\"0\",\"Price\":\"${price[i]}\",\"Level\":\"0\",\"VideoCount\":\"0\"}`);\r\n            }\r\n            gunInfoArr.push(gunInfo);\r\n        }\r\n        this._dataPool[Constant.ST_GunInfo] = JSON.stringify(gunInfoArr);\r\n    }\r\n\r\n    //////////////////////////////////////////////////// 当前使用\r\n    /** 声音开关 */\r\n    public get AudioOn() {\r\n        return this.getItem(Constant.ST_AudioOn, \"1\") == \"1\";\r\n    }\r\n    public set AudioOn(value: boolean) {\r\n        this.setItem(Constant.ST_AudioOn, value ? \"1\" : \"0\");\r\n    }\r\n    /** 震动开关 */\r\n    public get ShakeOn(): boolean {\r\n        return this.getItem(Constant.ST_ShakeOn, \"1\") == \"1\";\r\n    }\r\n    public set ShakeOn(value: boolean) {\r\n        this.setItem(Constant.ST_ShakeOn, value ? \"1\" : \"0\");\r\n    }\r\n    /** 金币数据 */\r\n    public get CoinCount() {\r\n        return parseInt(this.getItem(Constant.ST_CoinCount, \"0\"));\r\n    }\r\n    public set CoinCount(value: number) {\r\n        this.setItem(Constant.ST_CoinCount, value + \"\");\r\n        cc.game.emit(Constant.E_GAME_LOGIC, { type: Constant.E_COIN_CHANGE });\r\n    }\r\n    /** 取钻石数据 */\r\n    public get DiamondCount() {\r\n        return parseInt(this.getItem(Constant.ST_DiamondCount, \"0\"));\r\n    }\r\n    public set DiamondCount(value: number) {\r\n        this.setItem(Constant.ST_DiamondCount, value + \"\");\r\n        cc.game.emit(Constant.E_GAME_LOGIC, { type: Constant.E_Diamond_CHANGE });\r\n    }\r\n\r\n    /** 取体力数据 */\r\n    public get PhysicalCount() {\r\n        return parseInt(this.getItem(Constant.ST_PhysicalCount, \"0\"));\r\n    }\r\n    public set PhysicalCount(value: number) {\r\n        this.setItem(Constant.ST_PhysicalCount, value + \"\");\r\n        cc.game.emit(Constant.E_GAME_LOGIC, { type: Constant.E_Diamond_CHANGE });\r\n    }\r\n\r\n    /** 总局数_割草模式 */\r\n    public get TotoalCount_6() {\r\n        return parseInt(this.getItem(Constant.ST_TotoalCount + \"6\", \"1\"));\r\n    }\r\n    public set TotoalCount_6(value: number) {\r\n        this.setItem(Constant.ST_TotoalCount + \"6\", value + \"\");\r\n    }\r\n\r\n    /** 最后奖励的天数 */\r\n    public get LastDailyBonusIndex() {\r\n        return parseInt(this.getItem(Constant.ST_LastDailyBonusIndex, \"-1\"));\r\n    }\r\n    public set LastDailyBonusIndex(value: number) {\r\n        this.setItem(Constant.ST_LastDailyBonusIndex, value + \"\");\r\n    }\r\n\r\n    /** 最后一次签到的时间 */\r\n    public get LastDailyBonusTime() {\r\n        return this.getItem(Constant.ST_LastDailyBonusTime, \"0\");\r\n    }\r\n    public set LastDailyBonusTime(value: string) {\r\n        this.setItem(Constant.ST_LastDailyBonusTime, value + \"\");\r\n    }\r\n\r\n    /** 记录上一次的时间 */\r\n    public get LastPhycicalTime() {\r\n        return this.getItem(Constant.ST_LastPhycicalTime, \"0\");\r\n    }\r\n    public set LastPhycicalTime(value: string) {\r\n        this.setItem(Constant.ST_LastPhycicalTime, value + \"\");\r\n    }\r\n\r\n    /** 加载游戏日期 */\r\n    public get LastLoadDate(): string {\r\n        return this.getItem(Constant.ST_LastLoadDate, \"\")\r\n    }\r\n    public set LastLoadDate(v: string) {\r\n        this.setItem(Constant.ST_LastLoadDate, v);\r\n    }\r\n\r\n    /** 今日在线时间 */\r\n    public get OnlineToday(): number {\r\n        return parseInt(this.getItem(Constant.ST_OnlineToday, \"0\"));\r\n    }\r\n    public set OnlineToday(v: number) {\r\n        this.setItem(Constant.ST_OnlineToday, v + \"\");\r\n    }\r\n    /** 今日在线奖励领取数量 */\r\n    public get receiveToday(): number[] {\r\n        return JSON.parse(this.getItem(Constant.ST_ReceiveToday, \"[0, 0, 0, 0, 0]\"));\r\n    }\r\n    public set receiveToday(v: number[]) {\r\n        this.setItem(Constant.ST_ReceiveToday, JSON.stringify(v));\r\n    }\r\n\r\n    /**\r\n     * 当前皮肤ID\r\n     */\r\n    public get CurSkinId() {\r\n        return parseInt(this.getItem(Constant.ST_CurSkinId, \"0\"));\r\n    }\r\n\r\n    /**\r\n     * 设置当前皮肤ID\r\n     */\r\n    public set CurSkinId(value: number) {\r\n        if (value == this.CurSkinId) {\r\n            return;\r\n        }\r\n\r\n        let preId: number = this.CurSkinId;\r\n        let skinInfo: SkinInfo = this.getSkinInfo(preId);\r\n        if (skinInfo) {\r\n            skinInfo.State = 1;\r\n            this.setSkinInfo(preId, skinInfo);\r\n        }\r\n\r\n        let curSkinInfo: SkinInfo = this.getSkinInfo(value);\r\n        if (curSkinInfo) {\r\n            curSkinInfo.State = 2;\r\n            this.setSkinInfo(value, curSkinInfo);\r\n        }\r\n\r\n        this.setItem(Constant.ST_CurSkinId, value + \"\");\r\n    }\r\n\r\n    /**\r\n     * 获取皮肤信息\r\n     * @param id 皮肤ID\r\n     */\r\n    public getSkinInfo(id: number) {\r\n        let skinInfos: string = this.getItem(Constant.ST_SkinInfo, \"\");\r\n        if (skinInfos) {\r\n            let skinInfoArr: SkinInfo[] = JSON.parse(skinInfos);\r\n            if (id >= 0 && id < skinInfoArr.length) {\r\n                return skinInfoArr[id];\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * 保存皮肤信息\r\n     * @param id 皮肤ID\r\n     * @param info  皮肤信息\r\n     */\r\n    public setSkinInfo(id: number, info: SkinInfo) {\r\n        let skinInfos: string = this.getItem(Constant.ST_SkinInfo, \"\");\r\n        if (skinInfos) {\r\n            let skinInfoArr: SkinInfo[] = JSON.parse(skinInfos);\r\n            if (id >= 0 && id < skinInfoArr.length) {\r\n                skinInfoArr[id] = info;\r\n                this.setItem(Constant.ST_SkinInfo, JSON.stringify(skinInfoArr));\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 随机获取3个未解锁的皮肤id\r\n     */\r\n    public getRandomLockSkin() {\r\n        let ids: number[] = [];\r\n        let skinInfos: string = this.getItem(Constant.ST_SkinInfo, \"\");\r\n        if (skinInfos) {\r\n            let skinInfoArr: SkinInfo[] = JSON.parse(skinInfos);\r\n            for (let i = 0; i < skinInfoArr.length; i++) {\r\n                if (skinInfoArr[i].State == 0) {\r\n                    ids.push(skinInfoArr[i].Id);\r\n                }\r\n            }\r\n        }\r\n        return ids;\r\n    }\r\n\r\n    /**\r\n     * 获取武器信息\r\n     * @param id 武器ID\r\n     */\r\n    public getGunInfo(id: number) {\r\n        let gunInfos: string = this.getItem(Constant.ST_GunInfo, \"\");\r\n        if (gunInfos) {\r\n            let gunInfoArr: GunInfo[] = JSON.parse(gunInfos);\r\n            if (id >= 0 && id < gunInfoArr.length) {\r\n                return gunInfoArr[id];\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    /**\r\n     * 保存武器信息\r\n     * @param id 皮肤ID\r\n     * @param info  皮肤信息\r\n     */\r\n    public setGunInfo(id: number, info: GunInfo) {\r\n        let gunInfos: string = this.getItem(Constant.ST_GunInfo, \"\");\r\n        if (gunInfos) {\r\n            let gunInfoArr: GunInfo[] = JSON.parse(gunInfos);\r\n            if (id >= 0 && id < gunInfoArr.length) {\r\n                gunInfoArr[id] = info;\r\n                this.setItem(Constant.ST_GunInfo, JSON.stringify(gunInfoArr));\r\n            }\r\n        }\r\n    }\r\n\r\n      /**\r\n     * 获取关卡信息\r\n     * @param id 关卡ID\r\n     */\r\n      public getLevelInfo(id: number) {\r\n        let levelInfos: string = this.getItem(Constant.ST_LevelItem, \"\");\r\n        if (levelInfos) {\r\n            let levelInfoArr: Levelitem[] = JSON.parse(levelInfos);\r\n            if (id && levelInfoArr[id]) {\r\n                return levelInfoArr[id];\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    /**\r\n     * 保存关卡信息\r\n     * @param id 关卡ID\r\n     * @param info  皮肤信息\r\n     */\r\n    public setLevelInfo(id: number, info: Levelitem) {\r\n        let levelInfos: string = this.getItem(Constant.ST_LevelItem, \"\");\r\n        if (levelInfos) {\r\n            let levelInfoArr: Levelitem[] = JSON.parse(levelInfos);\r\n            if (id && levelInfoArr[id]) {\r\n                levelInfoArr[id] = info;\r\n                this.setItem(Constant.ST_LevelItem, JSON.stringify(levelInfoArr));\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n    * 当前近战武器\r\n    */\r\n    public get CurMelee() {\r\n        return parseInt(this.getItem(Constant.ST_CurMeleeId, \"13\"));\r\n    }\r\n    private set CurMelee(id: number) {\r\n        if (id == this.CurMelee || !Weapon.meleeWaapon.includes(id + 1)) {\r\n            return;\r\n        }\r\n        let preId: number = this.CurMelee;\r\n        let gunInfo: GunInfo = this.getGunInfo(preId);\r\n        if (gunInfo) {\r\n            gunInfo.State = 1;\r\n            this.setGunInfo(preId, gunInfo);\r\n        }\r\n        let curGunInfo: GunInfo = this.getGunInfo(id);\r\n        if (curGunInfo) {\r\n            curGunInfo.State = 2;\r\n            this.setGunInfo(id, curGunInfo);\r\n        }\r\n        this.setItem(Constant.ST_CurMeleeId, id + \"\");\r\n    }\r\n    /**\r\n    * 当前远程武器\r\n    */\r\n    public get CurRange() {\r\n        if(cocosz.gameMode == 6){\r\n            return 0;\r\n        }else{\r\n            return parseInt(this.getItem(Constant.ST_CurRangeId, \"0\"));\r\n        }\r\n    }\r\n    private set CurRange(id: number) {\r\n        if (id == this.CurRange || !Weapon.rangeWeapon.includes(id + 1)) {\r\n            return;\r\n        }\r\n        let preId: number = this.CurRange;\r\n        let gunInfo: GunInfo = this.getGunInfo(preId);\r\n        if (gunInfo) {\r\n            gunInfo.State = 1;\r\n            this.setGunInfo(preId, gunInfo);\r\n        }\r\n        let curGunInfo: GunInfo = this.getGunInfo(id);\r\n        if (curGunInfo) {\r\n            curGunInfo.State = 2;\r\n            this.setGunInfo(id, curGunInfo);\r\n        }\r\n        this.setItem(Constant.ST_CurRangeId, id + \"\");\r\n    }\r\n    public get curWeapon() {\r\n        return this.CurRange;\r\n    }\r\n    public set curWeapon(id: number) {\r\n        if (Weapon.meleeWaapon.includes(id + 1)) {\r\n            this.CurMelee = id;\r\n        } else if (Weapon.rangeWeapon.includes(id + 1)) {\r\n            this.CurRange = id;\r\n        }\r\n    }\r\n\r\n    /** 技能指引 */\r\n    public get guide_skill(): boolean {\r\n        return this.getItem(Constant.ST_Guide_Skill, false);\r\n    }\r\n    /** 技能指引 */\r\n    public set guide_skill(value: boolean) {\r\n        this.setItem(Constant.ST_Guide_Skill, value);\r\n        cc.game.emit(Constant.E_ShareOrVideo);\r\n    }\r\n\r\n    ///////////////// 历史最佳 //////////////////////\r\n    // 游戏时间\r\n    public get best_time(): number {\r\n        return parseInt(this.getItem(\"best_time\", \"0\"));\r\n    }\r\n    public set best_time(v: number) {\r\n        if (v > this.best_time) {\r\n            this.setItem(\"best_time\", v + \"\");\r\n        }\r\n    }\r\n    // 击杀数\r\n    public get best_kill(): number {\r\n        return parseInt(this.getItem(\"best_kill\", \"0\"));\r\n    }\r\n    public set best_kill(v: number) {\r\n        if (v > this.best_kill) {\r\n            this.setItem(\"best_kill\", v + \"\");\r\n        }\r\n    }\r\n    // 等级\r\n    public get best_level(): number {\r\n        return parseInt(this.getItem(\"best_level\", \"0\"));\r\n    }\r\n    public set best_level(v: number) {\r\n        if (v > this.best_level) {\r\n            this.setItem(\"best_level\", v + \"\");\r\n        }\r\n    }\r\n    // 金币\r\n    public get best_coin(): number {\r\n        return parseInt(this.getItem(\"best_coin\", \"0\"));\r\n    }\r\n    public set best_coin(v: number) {\r\n        if (v > this.best_coin) {\r\n            this.setItem(\"best_coin\", v + \"\");\r\n        }\r\n    }\r\n    // 分享次数\r\n    public get shareNum(): number {\r\n        return this.getItem(Constant.ST_ShareNum, 0)\r\n    }\r\n    public set shareNum(v: number) {\r\n        this.setItem(Constant.ST_ShareNum, v);\r\n        // 发送事件更新图标\r\n        cc.game.emit(Constant.E_ShareOrVideo);\r\n        cc.log(\"今日分享了\", v, \"次\");\r\n    }\r\n\r\n    ////////////////////////////////////////////////////////////////////////////////\r\n    public getItem(key: string, defaultValue: any) {\r\n        if (this._dataPool[key] != undefined && this._dataPool[key] != null) {\r\n            return this._dataPool[key];\r\n        }\r\n        return defaultValue;\r\n    }\r\n    public setItem(key: string, value: any) {\r\n        this._dataPool[key] = value;\r\n        this._save();\r\n    }\r\n    private _save() {\r\n        cc.sys.localStorage.setItem(Constant.ST_GameData, JSON.stringify(this._dataPool));\r\n    }\r\n\r\n}\r\n"]}