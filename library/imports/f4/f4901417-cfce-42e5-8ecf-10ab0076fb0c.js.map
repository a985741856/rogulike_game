{"version":3,"sources":["assets\\scripts\\Game\\UpgradeMgr.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { cocosz } from \"../Framework/CocosZ\";\r\nimport Constant, { PanelName, ZindexLayer } from \"../Framework/Constant\";\r\nimport Bullet from \"./bullet\";\r\nimport { gameMgr } from \"./gameMgr\";\r\nimport Jingyan from \"./jingyan\";\r\nimport ZombieBase from \"./ZombieBase\";\r\nimport Weapon from \"./weapon\";\r\nimport prop from \"./prop\";\r\nimport { utils } from \"../../common-plugin/Scripts/Utils\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nexport enum SkillType {\r\n    整装待发 = 0,\r\n    瞄准,\r\n    强化,\r\n    瞬斩,\r\n    强力射击,\r\n    窃魂弹夹,\r\n    科技子弹,\r\n    站姿射击,\r\n    子弹碎片,\r\n    双发,\r\n    谢幕,\r\n    枪林弹雨,\r\n    疾走,\r\n    跑动射击,\r\n    意气风发,\r\n    护甲靴子,\r\n    磁场,\r\n    灵能补给,\r\n    容光焕发,\r\n    鹰眼,\r\n    生命力,\r\n    再生,\r\n    进化,\r\n    萃取,\r\n    火焰精通,\r\n    雷电精通,\r\n    冰霜精通,\r\n    双重附魔,\r\n    龙卵,\r\n    通灵匕首,\r\n    通灵镰刀,\r\n    神圣守护,\r\n    飞轮,\r\n    闪电,\r\n    燃烧瓶,\r\n}\r\n\r\nexport let upgradeMgr: UpgradeMgr = null;\r\n\r\n@ccclass\r\nexport default class UpgradeMgr extends cc.Component {\r\n    @property(cc.Prefab)\r\n    bulletPrefab: cc.Prefab = null;\r\n\r\n    zombieKillNum: number = 0;\r\n\r\n    // 掉落武器预制体\r\n    weaponPre: cc.Prefab = null;\r\n\r\n    createPropArr = [];\r\n\r\n    bossKillId: number[] = [];\r\n    // 经验层\r\n    jingyanLayer: cc.Node = null;\r\n    //道具层\r\n    propLayer : cc.Node = null;\r\n    // 经验预制体\r\n    jingyanPre: cc.Prefab = null;\r\n    // 经验触碰距离\r\n    jingyanRange: number = 200;\r\n    // 升级经验\r\n    private _jingyanArr: number[] = [25, 50, 80, 160, 200, 280, 360, 380, 470, 560, 650, 740, 840, 940, 1040, 1140,1340, 1540, 1740, 1940, 2240, 2540, 2840, 3140, 3440, 3740, 4100];// 经验数组\r\n    // private _jingyanArr: number[] = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1];// 经验数组\r\n    // 已拥有技能\r\n    upgradeSkillArr: number[] = [\r\n        0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0\r\n    ];\r\n    upgradeSkillMaxLevelArr: number[] = [\r\n        1, 1, 1, 1, 1,\r\n        1, 1, 1, 1, 1,\r\n        1, 1, 1, 1, 1,\r\n        1, 1, 1, 1, 1,\r\n        1, 1, 1, 1, 1,\r\n        1, 1, 1, 1, 1,\r\n        1, 1, 3, 3, 3,\r\n    ];\r\n    // 技能属性\r\n    skill_14: number = 1;//增强倍率（伤害和移动速度）\r\n    skill_18: number = 0;//加速时间\r\n    skill_magic: number = 0;//附魔技能的数量\r\n\r\n    private _maxLevel: number = 25;// 最大等级\r\n    private _curLevel: number = 0;// 当前等级\r\n    public get curLevel(): number { return this._curLevel; }\r\n    public set curLevel(v: number) {\r\n        if (v < 0) v = 0;\r\n        else if (v > this._maxLevel) v = this._maxLevel;\r\n        // 升级\r\n        if (v >= this._curLevel) {\r\n            this._curLevel = v;\r\n            gameMgr.model6_levelLabel.string = \"\" + this._curLevel;\r\n            // 升级效果\r\n            this.upgradeEffect();\r\n            // 弹窗\r\n            cocosz.pauseCount++;\r\n            cocosz.uiMgr.openPanel(PanelName.UIUpgradePanel);\r\n            this._curJingyan -= this._curMaxJingyan;\r\n            this._curMaxJingyan = this._jingyanArr[this.curLevel];\r\n        }\r\n    }\r\n\r\n    private _curMaxJingyan: number = this._jingyanArr[this.curLevel];\r\n    private _curJingyan: number = 0;// 当前经验\r\n    public get curJingyan(): number { return this._curJingyan; }\r\n    public set curJingyan(v: number) {\r\n        if (v < 0) v = 0;\r\n        this._curJingyan = v;\r\n    }\r\n\r\n    /** 初始化监听 */\r\n    onLoad() {\r\n        upgradeMgr = this;\r\n        cc.game.on(Constant.E_GAME_LOGIC, this._onGameMessageHandler, this);\r\n\r\n        // 经验预制体\r\n        this.jingyanPre = cocosz.resMgr.getRes(\"jingyan\", cc.Prefab);\r\n        // 添加经验层\r\n        this.jingyanLayer = new cc.Node();\r\n        this.jingyanLayer.name = \"jingyanLayer\";\r\n        this.jingyanLayer.zIndex = ZindexLayer.zinedx_jingyan;\r\n        this.jingyanLayer.setPosition(cc.Vec2.ZERO);\r\n        this.jingyanLayer.setParent(this.node);\r\n\r\n        this.weaponPre = cocosz.resMgr.getRes(\"weaponPop\",cc.Prefab);\r\n        // 添加经验层\r\n        this.propLayer = new cc.Node();\r\n        this.propLayer.name = \"propLayer\";\r\n        this.propLayer.zIndex = ZindexLayer.zinedx_jingyan;\r\n        this.propLayer.setPosition(cc.Vec2.ZERO);\r\n        this.propLayer.setParent(this.node);\r\n    }\r\n\r\n    protected start(): void { }\r\n\r\n    protected onDestroy(): void {\r\n        upgradeMgr = null;\r\n        cc.game.targetOff(this);\r\n    }\r\n\r\n    canUpgrade: boolean = true;\r\n    protected update(dt: number): void {\r\n        if (gameMgr && gameMgr.model6_jingyanBar) {\r\n            let from = gameMgr.model6_jingyanBar.progress;\r\n            let to = this.curJingyan / this._curMaxJingyan;\r\n            if (to == 0) { to = 0.001 }\r\n            gameMgr.model6_jingyanBar.progress = cc.misc.lerp(from, to, 0.2);\r\n        }\r\n        // 经验值满足,且可以升级\r\n        if (this.canUpgrade && !cocosz.isPause && this.curLevel < this._maxLevel && this._curJingyan >= this._curMaxJingyan) {\r\n            this.curLevel += 1;\r\n        }\r\n    }\r\n\r\n    /** 是否拥有技能 */\r\n    isHaveSkill(id) {\r\n        return this.upgradeSkillArr[id] > 0 ? true : false;\r\n    }\r\n\r\n    skillImgArr: cc.Node[] = [];\r\n    /** 设置技能UI */\r\n    setSkillImg(id: number) {\r\n        let str = \"zombieSkill_icon_\" + id + (this.upgradeSkillMaxLevelArr[id] > 1 ? (\"_\" + this.upgradeSkillArr[id]) : \"\");\r\n        let icon = cocosz.resMgr.getRes(str, cc.SpriteFrame);\r\n\r\n        if (icon && gameMgr.model6_skillScrollView_content && gameMgr.model6_skillScrollView_content.isValid) {\r\n            if (!this.skillImgArr[id] && gameMgr.model6_skillScrollView_item) {\r\n                this.skillImgArr[id] = cc.instantiate(gameMgr.model6_skillScrollView_item);\r\n                this.skillImgArr[id].active = true;\r\n                this.skillImgArr[id].setParent(gameMgr.model6_skillScrollView_content);\r\n                // 滑动到最右边\r\n                if (gameMgr.model6_skillScrollView_content.width > gameMgr.model6_skillScrollView.node.width) {\r\n                    gameMgr.model6_skillScrollView.scrollToRight();\r\n                }\r\n            }\r\n            if (this.skillImgArr[id]) {\r\n                let sprite = this.skillImgArr[id].getComponent(cc.Sprite);\r\n                if (sprite) sprite.spriteFrame = icon;\r\n            }\r\n        }\r\n    }\r\n\r\n    /** 设置技能cd */\r\n    setSkillCD(id: number, time: number) {\r\n        if (this.skillImgArr[id]) {\r\n            let skillCD = this.skillImgArr[id].getChildByName(\"skillCD\");\r\n            if (skillCD) {\r\n                skillCD.active = true;\r\n                skillCD.opacity = 255;\r\n                cc.tween(skillCD.children[0].getComponent(cc.Sprite))\r\n                    .set({ fillRange: 1 })\r\n                    .to(time, { fillRange: 0 })\r\n                    .call(() => { skillCD.opacity = 0; })\r\n                    .start();\r\n                let num = time;\r\n                let timeLabel = skillCD.children[1].getComponent(cc.Label);\r\n                cc.tween(skillCD)\r\n                    .call(() => { timeLabel.string = num.toString(); num--; })\r\n                    .delay(1)\r\n                    .union()\r\n                    .repeat(time)\r\n                    .start();\r\n            }\r\n        }\r\n    }\r\n\r\n    /** 获得技能 */\r\n    getSkill(id) {\r\n        this.upgradeSkillArr[id]++;\r\n        this.setSkillImg(id);\r\n\r\n        switch (id) {\r\n            case SkillType.整装待发: {\r\n                if (gameMgr.playerTs && gameMgr.playerTs.curWeapon) {\r\n                    gameMgr.playerTs.curWeapon.bulletNum += 4;\r\n                }\r\n                break;\r\n            }\r\n            case SkillType.瞄准: {\r\n                if (gameMgr.playerTs) {\r\n                    gameMgr.playerTs.atkRate *= 1.25;\r\n                }\r\n                break;\r\n            }\r\n            case SkillType.强化: {\r\n                if (gameMgr.playerTs && gameMgr.playerTs.curWeapon) {\r\n                    gameMgr.playerTs.curWeapon.bulletNum += 2;\r\n                    gameMgr.playerTs.atkRate *= 1.1;\r\n                }\r\n                break;\r\n            }\r\n            case SkillType.瞬斩: {\r\n                break;\r\n            }\r\n            case SkillType.强力射击: {\r\n                if (gameMgr.playerTs) {\r\n                    gameMgr.playerTs.atkRate *= 1.2;\r\n                }\r\n                break;\r\n            }\r\n            case SkillType.窃魂弹夹: {\r\n                break;\r\n            }\r\n            case SkillType.科技子弹: {\r\n                if (gameMgr.playerTs) {\r\n                    gameMgr.playerTs.atkSpeedRate -= 0.1;\r\n                }\r\n                break;\r\n            }\r\n            case SkillType.站姿射击: {\r\n                let can = true;\r\n                this.schedule(() => {\r\n                    if (can && gameMgr.playerTs.moveDir.mag() == 0) {\r\n                        can = false;\r\n                        gameMgr.playerTs.atkRate *= 1.3;\r\n                    } else if (!can && gameMgr.playerTs.moveDir.mag() > 0) {\r\n                        can = true;\r\n                        gameMgr.playerTs.atkRate /= 1.3;\r\n                    }\r\n                }, 0.1);\r\n                break;\r\n            }\r\n            case SkillType.子弹碎片: {\r\n                break;\r\n            }\r\n            case SkillType.双发: {\r\n                if (gameMgr.playerTs) {\r\n                    gameMgr.playerTs.atkBulletNum += 1;\r\n                }\r\n                break;\r\n            }\r\n            case SkillType.谢幕: {\r\n                break;\r\n            }\r\n            case SkillType.枪林弹雨: {\r\n                if (gameMgr.playerTs) {\r\n                    gameMgr.playerTs.atkBulletNum *= 2;\r\n                }\r\n                break;\r\n            }\r\n            case SkillType.疾走: {\r\n                if (gameMgr.playerTs) {\r\n                    gameMgr.playerTs.speedRate *= 1.1;\r\n                }\r\n                break;\r\n            }\r\n            case SkillType.跑动射击: {\r\n                let can = true;\r\n                this.schedule(() => {\r\n                    if (can && gameMgr.playerTs.isAtk) {\r\n                        can = false;\r\n                        gameMgr.playerTs.speedRate *= 1.2;\r\n                    } else if (!can && !gameMgr.playerTs.isAtk) {\r\n                        can = true;\r\n                        gameMgr.playerTs.speedRate /= 1.2;\r\n                    }\r\n                }, 0.1);\r\n                break;\r\n            }\r\n            case SkillType.意气风发: {\r\n                // 每10秒增加10%的伤害和移动速度\r\n                this.schedule(() => {\r\n                    if (gameMgr.playerTs) {\r\n                        let k = this.skill_14 + 0.1;\r\n                        if (k > 1.4) k = 1.4;\r\n                        else if (k < 1) k = 1;\r\n                        gameMgr.playerTs.atkRate *= (k / this.skill_14);\r\n                        gameMgr.playerTs.speedRate *= (k / this.skill_14);\r\n                        this.skill_14 = k;\r\n                    }\r\n                }, 10);\r\n                break;\r\n            }\r\n            case SkillType.护甲靴子: {\r\n                break;\r\n            }\r\n            case SkillType.磁场: {\r\n                this.jingyanRange += 200;\r\n                break;\r\n            }\r\n            case SkillType.灵能补给: {\r\n                this.jingyanRange += 50;\r\n                break;\r\n            }\r\n            case SkillType.容光焕发: {\r\n                this.jingyanRange += 50;\r\n                break;\r\n            }\r\n            case SkillType.鹰眼: {\r\n                this.jingyanRange += 50;\r\n                cc.tween(gameMgr.mainCamera).to(1, { zoomRatio: 0.6 }).start();\r\n                break;\r\n            }\r\n            case SkillType.生命力: {\r\n                if (gameMgr.playerTs) {\r\n                    gameMgr.playerTs.totleHp += 1;\r\n                    gameMgr.playerTs.HP = gameMgr.playerTs.totleHp;\r\n                    this.scheduleOnce(() => { gameMgr.playerTs.recoverEffect(); }, 1)\r\n                }\r\n                break;\r\n            }\r\n            case SkillType.再生: {\r\n                this.schedule(() => { this._updateZaisheng(); }, 1);\r\n                break;\r\n            }\r\n            case SkillType.进化: {\r\n                if (gameMgr.playerTs) {\r\n                    gameMgr.playerTs.atkRate *= 1.1;\r\n                    gameMgr.playerTs.totleHp += 1;\r\n                    gameMgr.playerTs.HP += 1;\r\n                    this.scheduleOnce(() => { gameMgr.playerTs.recoverEffect(); }, 1)\r\n                }\r\n                break;\r\n            }\r\n            case SkillType.萃取: {\r\n                break;\r\n            }\r\n            case SkillType.火焰精通: {\r\n                break;\r\n            }\r\n            case SkillType.冰霜精通: {\r\n                break;\r\n            }\r\n            case SkillType.双重附魔: {\r\n                break;\r\n            }\r\n            case SkillType.通灵匕首: {\r\n                let pre: cc.Prefab = cocosz.resMgr.getRes(\"zombieSkill_bishou\", cc.Prefab);\r\n                if (pre && gameMgr && gameMgr.playerTs) {\r\n                    this._bishou = cc.instantiate(pre);\r\n                    this._bishou.setParent(this.node);\r\n                    this._bishou.zIndex = cc.macro.MAX_ZINDEX;\r\n                    this._bishou.active = false;\r\n                    this.updateBishou();\r\n                }\r\n                break;\r\n            }\r\n            case SkillType.神圣守护: {\r\n                let pre: cc.Prefab = cocosz.resMgr.getRes(\"zombieSkill_hudun\", cc.Prefab);\r\n                if (pre && gameMgr && gameMgr.playerTs) {\r\n                    this.hudun = cc.instantiate(pre);\r\n                    this.hudun.setParent(gameMgr.playerTs.node);\r\n                    this.hudun.setPosition(0, 0);\r\n                    this.hudun.zIndex = cc.macro.MAX_ZINDEX - 1;\r\n                    break;\r\n                }\r\n            }\r\n            case SkillType.飞轮: {\r\n                let pre: cc.Prefab = cocosz.resMgr.getRes(\"zombieSkill_feilun\", cc.Prefab);\r\n                if (pre) {\r\n                    if (gameMgr && gameMgr.playerTs) {\r\n                        this._feilun && this._feilun.isValid && this._feilun.destroy();\r\n                        this._feilun = cc.instantiate(pre);\r\n                        this._feilun.setParent(gameMgr.playerTs.node);\r\n                        this._feilun.setPosition(cc.Vec2.ZERO);\r\n                        this._feilun.active = true;\r\n                        this._feilun.zIndex = cc.macro.MAX_ZINDEX;\r\n                        this.updateFeilun(this.upgradeSkillArr[SkillType.飞轮]);\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case SkillType.闪电: {\r\n                if (this.upgradeSkillArr[SkillType.闪电] == 1) {\r\n                    this.schedule(this.updateShandian, 1)\r\n                }\r\n                break;\r\n            }\r\n            case SkillType.燃烧瓶: {\r\n                if (this.upgradeSkillArr[SkillType.燃烧瓶] == 1) {\r\n                    this.schedule(this.updateFire, 1)\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    /** 消息 */\r\n    private _onGameMessageHandler(event: any) {\r\n        switch (event.type) {\r\n            case Constant.E_Jingyan_Finish: {\r\n                if (this.isHaveSkill(SkillType.灵能补给)) {\r\n                    if (gameMgr && gameMgr.playerTs && Math.random() < 0.01) {\r\n                        gameMgr.playerTs.curWeapon.curBullet += 1;\r\n                    }\r\n                }\r\n                else if (this.isHaveSkill(SkillType.容光焕发)) {\r\n                    if (this.skill_18 < 3) {\r\n                        if (this.skill_18 == 0) {\r\n                            this.accelerate();\r\n                        }\r\n                        this.skill_18++;\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case Constant.E_Zombie_Hart: {\r\n                if (event.node && event.node.isValid) {\r\n                    if (this.isHaveSkill(SkillType.瞬斩) && this.canAddMagic(event.node, SkillType.瞬斩)) {\r\n                        this.skill_effect_3(event.node);\r\n                    } else {\r\n                        let skillArr: number[] = [];\r\n                        if (this.isHaveSkill(SkillType.火焰精通) && this.canAddMagic(event.node, SkillType.火焰精通)) {\r\n                            skillArr.push(SkillType.火焰精通);\r\n                        }\r\n                        /* if (this.isHaveSkill(SkillType.雷电精通) && this.canAddMagic(event.node, SkillType.雷电精通)) {\r\n                            skillArr.push(SkillType.雷电精通);\r\n                        } */\r\n                        if (this.isHaveSkill(SkillType.冰霜精通) && this.canAddMagic(event.node, SkillType.冰霜精通)) {\r\n                            skillArr.push(SkillType.冰霜精通);\r\n                        }\r\n                        // 随机技能\r\n                        if (skillArr.length) {\r\n                            let skillIndex = Math.floor(Math.random() * skillArr.length);\r\n                            let skillId = skillArr[skillIndex];\r\n                            switch (skillId) {\r\n                                case SkillType.火焰精通: {\r\n                                    this.skill_effect_24(event.node);\r\n                                    break;\r\n                                }\r\n                                /* case SkillType.雷电精通: {\r\n                                    this.skill_effect_25(event.node);\r\n                                    break;\r\n                                } */\r\n                                case SkillType.冰霜精通: {\r\n                                    this.skill_effect_26(event.node);\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case Constant.E_Zombie_Death: {\r\n               \r\n                if (event.node) {\r\n                    if (this.isHaveSkill(SkillType.子弹碎片) && event.from) {\r\n                        let angle = 30 * Math.random();\r\n                        this.createBullet(event.node, 30 + angle, 40);\r\n                        this.createBullet(event.node, 150 + angle, 40);\r\n                        this.createBullet(event.node, 270 + angle, 40);\r\n                    }\r\n                    else if (this.isHaveSkill(SkillType.萃取)) {\r\n                        if (gameMgr && gameMgr.playerTs && gameMgr.playerTs.HP < gameMgr.playerTs.totleHp && Math.random() < 0.05 && !event.isBoom) {\r\n                            gameMgr.playerTs.HP += 1;\r\n                            gameMgr.playerTs.recoverEffect();\r\n                        }\r\n                    }\r\n                    // 统计击杀\r\n                    let ts: ZombieBase = event.node.getComponent(ZombieBase);\r\n                    if (ts) {\r\n                        this.zombieKillNum++;\r\n                        if (ts.isBoss) {\r\n                            this.bossKillId.push(ts.zombieId);\r\n                            gameMgr.bossShow = false;\r\n\r\n                            if(cocosz.gameMode == 8){\r\n                                let showLevelInfo = cocosz.dataMgr.getLevelInfo((1000+Constant.currentLevel));\r\n                                let nextLevelInfo = cocosz.dataMgr.getLevelInfo((1000+Constant.currentLevel + 1));\r\n                                if(nextLevelInfo){\r\n                                    nextLevelInfo.State = 1;\r\n                                    cocosz.dataMgr.setLevelInfo((1000+Constant.currentLevel+1), nextLevelInfo);\r\n                                }\r\n                                showLevelInfo.State = 2;\r\n                                cocosz.dataMgr.setLevelInfo((1000+Constant.currentLevel), showLevelInfo);\r\n                                \r\n                                if (!gameMgr.isWin && !gameMgr.isFail) {\r\n                                    gameMgr.win();\r\n                                }\r\n                            }else if(cocosz.gameMode == 6){\r\n                                console.log('击杀了boss');\r\n                                let randoms = [];\r\n                                while (true) {\r\n                                    //定义一个变量保存是否存在\r\n                                    var isExists = false;\r\n                                    // 获取一个1–100之间的数\r\n                                    var random = this.randomInteger(1,100)\r\n                                    // 判断当前随机数是否已经存在\r\n                                    //通过randoms.length来确定要判断几次\r\n                                    for (let i = 0; i < randoms.length; i++) {\r\n                                        if (random === randoms[i]) {\r\n                                            isExists = true;\r\n                                            break;\r\n                                        }\r\n                                    }\r\n                                    // 如果不存在，则添加进去\r\n                                    if (!isExists)\r\n                                        randoms.push(random);\r\n                                    // 如果有10位随机数了，就跳出\r\n                                    if (randoms.length === 10)\r\n                                        break;\r\n                                }\r\n                                // console.log(randoms);\r\n\r\n                                let randomNum = Math.floor(Math.random() * 100);\r\n                                // console.log(\"--------随机数种子--------\"+randomNum);\r\n                                if(randoms.indexOf(randomNum) > 0){\r\n                                    if (gameMgr && gameMgr.playerTs){\r\n                                        gameMgr.playerTs.lucky = 0;\r\n                                    }\r\n                                    let url: string = Constant.WEB_LINE_TITLE + '/qwk/details/getFallen/' + Constant.PERSON_TPKKEN //Constant.PERSON_TPKKEN;   //用户id与游戏id目前为1和1\r\n                                    utils.showLog(\"上报数据, url=\", url);\r\n                                    utils.commomHttpRequest(url, (ret, jsdata) => {\r\n                                        if (ret) {\r\n                                            let datajson = JSON.parse(jsdata);\r\n                                            console.log(datajson);\r\n                                            if(datajson.code == 200){\r\n                                                // console.log('显示掉落动画');\r\n                                            }\r\n                                            utils.showLog(\"数据上报成功！\");\r\n                                        } else {\r\n                                            utils.showLog(\"数据上报失败！\");\r\n                                        }\r\n                                    });\r\n                                    // console.log('---------发送消息------------');\r\n                                }else{\r\n                                    if (gameMgr && gameMgr.playerTs){\r\n                                        gameMgr.playerTs.lucky += 10;\r\n                                        if(gameMgr.playerTs.lucky >= 100){\r\n                                            gameMgr.playerTs.lucky = 0;\r\n                                            console.log(\"---------10次都没有强制发送消息------------\");\r\n                                            let url: string = Constant.WEB_LINE_TITLE + '/qwk/details/getFallen/' + Constant.PERSON_TPKKEN //Constant.PERSON_TPKKEN;   //用户id与游戏id目前为1和1\r\n                                            utils.showLog(\"上报数据, url=\", url);\r\n                                            utils.commomHttpRequest(url, (ret, jsdata) => {\r\n                                                if (ret) {\r\n                                                    let datajson = JSON.parse(jsdata);\r\n                                                    console.log(datajson);\r\n                                                    if(datajson.code == 200){\r\n                                                        console.log('显示掉落动画');\r\n                                                    }\r\n                                                    utils.showLog(\"数据上报成功！\");\r\n                                                } else {\r\n                                                    utils.showLog(\"数据上报失败！\");\r\n                                                }\r\n                                            });\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case Constant.E_Bullet_Last: {\r\n                if (this.isHaveSkill(SkillType.谢幕)) {\r\n                    if (gameMgr.playerTs) {\r\n                        this.createBullet(event.node, 36 * 1, 40);\r\n                        this.createBullet(event.node, 36 * 3, 40);\r\n                        this.createBullet(event.node, 36 * 5, 40);\r\n                        this.createBullet(event.node, 36 * 7, 40);\r\n                        this.createBullet(event.node, 36 * 9, 40);\r\n                        this.scheduleOnce(() => {\r\n                            this.createBullet(event.node, 36 * 2, 40);\r\n                            this.createBullet(event.node, 36 * 4, 40);\r\n                            this.createBullet(event.node, 36 * 6, 40);\r\n                            this.createBullet(event.node, 36 * 8, 40);\r\n                            this.createBullet(event.node, 36 * 10, 40);\r\n                        }, 0);\r\n\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case Constant.E_Bullet_Reload: {\r\n                if (this.isHaveSkill(SkillType.窃魂弹夹)) {\r\n                    if (gameMgr.playerTs) {\r\n                        gameMgr.playerTs.atkRate *= 1.3;\r\n                        this.scheduleOnce(() => {\r\n                            gameMgr.playerTs.atkRate /= 1.3;\r\n                        }, 1);\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case Constant.E_Player_Hart: {\r\n                if (this.isHaveSkill(SkillType.意气风发)) {\r\n                    this.skill_14 = 1;\r\n                }\r\n                break;\r\n            }\r\n            case Constant.E_Player_Death: {\r\n                if (this.hudun) {\r\n                    this.hudun.opacity = 0;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    createRandom (randoms) {\r\n        \r\n    }\r\n\r\n     //随机产生mix-max之间的一个数（避免首末概率不均，采用max+1，向下取整）\r\n    randomInteger(min, max) {\r\n        let rand = min + Math.random() * (max + 1 - min);\r\n        return Math.floor(rand);\r\n    }\r\n\r\n    /** 经验 */\r\n    createJingyan(pos: cc.Vec2) {\r\n        if (this.jingyanPre && this.jingyanLayer) {\r\n            let jingyan = gameMgr.nodeGet(\"jingyan\", this.jingyanPre);\r\n            let ts = jingyan.getComponent(Jingyan);\r\n            if (ts) { ts.init(); }\r\n            jingyan.setPosition(pos);\r\n            jingyan.setParent(this.jingyanLayer);\r\n        }\r\n    }\r\n\r\n    public createNum = 0;\r\n    public createMaxNum = 3;\r\n    createWeapon(pos: cc.Vec2){\r\n        // console.log(this.createNum,this.createMaxNum);\r\n        if(this.createNum >= this.createMaxNum){\r\n            return;\r\n        }\r\n        let randomArr = [];\r\n        let specialArr = [];\r\n        let usefulWeaponArr = [1,2,6,7,8,9,10,11,20,21];\r\n        let specialWeaponArr = [12,15,16,17,18,19,22];\r\n        let randnum = Math.floor(Math.random() * 100);\r\n        let specialRan = Math.floor(Math.random() * 100);\r\n        let weaponIdx = 0;\r\n\r\n        while (true) {\r\n            var random = this.randomInteger(1,100);\r\n\r\n            if(randomArr.indexOf(random) < 0){\r\n                randomArr.push(random);\r\n            }\r\n\r\n            if(randomArr.length == 40)\r\n                break;\r\n        }\r\n\r\n        while (true) {\r\n            var specialrandom = this.randomInteger(1,100);\r\n\r\n            if(specialArr.indexOf(specialrandom) < 0){\r\n                specialArr.push(specialrandom);\r\n            }\r\n\r\n            if(specialArr.length == 20)\r\n                break;\r\n        }\r\n\r\n        if(randomArr.indexOf(randnum) > 0){\r\n            weaponIdx = Weapon.rangeWeapon[Math.floor(Math.random() * usefulWeaponArr.length)];\r\n            this.createWeaponPre(pos,weaponIdx);\r\n        }else if(specialArr.indexOf(specialRan) > 0){\r\n            weaponIdx = Weapon.rangeWeapon[Math.floor(Math.random() * specialWeaponArr.length)];\r\n            this.createWeaponPre(pos,weaponIdx);\r\n        }\r\n\r\n        \r\n        // //正常武器idx\r\n        // let wprand = Math.floor((Math.random() * (1-100)) + 100);\r\n        // if(usefulWeaponArr.includes(weaponIdx)){\r\n        //     if((wprand >= 1 && wprand <= 33) || (wprand >= 44 && wprand <= 77) || (wprand >= 87 && wprand <= 100)){\r\n        //         this.createWeaponPre(pos,weaponIdx);\r\n        //     }   \r\n        // }\r\n        // //特殊武器idx\r\n        // if(specialWeaponArr.includes(weaponIdx)){\r\n        //     if((wprand >= 33 && wprand <= 44) || (wprand >= 77 && wprand <= 87)){\r\n        //         this.createWeaponPre(pos,weaponIdx);\r\n        //     }\r\n        // }\r\n    }\r\n\r\n    createWeaponPre (pos,weaponIdx) {\r\n        if(this.weaponPre && this.propLayer){\r\n            let weapon = gameMgr.nodeGet(\"weaponPop\",this.weaponPre);\r\n            weapon.setPosition(pos);\r\n            weapon.setParent(this.propLayer);\r\n            let wp = weapon.getComponent(prop)\r\n            wp.idx = weaponIdx;\r\n\r\n            this.createNum ++;\r\n        }\r\n    }\r\n\r\n    round (min,max) {\r\n        return Math.round(Math.random()*(max-min)+min)\r\n    }\r\n\r\n    /** 升级效果 */\r\n    upgradeEffect() {\r\n        if (gameMgr.playerTs && gameMgr.playerTs.isValid) {\r\n            let pre: cc.Prefab = cocosz.resMgr.getRes(\"zombieSkill_sjgx\", cc.Prefab);\r\n            if (pre) {\r\n                let node = cc.instantiate(pre);\r\n                node.setPosition(cc.Vec2.ZERO);\r\n                node.setParent(gameMgr.playerTs.node);\r\n                // node.zIndex = -1;\r\n                // 升级音效\r\n                gameMgr.playEffect(\"LevelUp\");\r\n            }\r\n        }\r\n    }\r\n\r\n    /** 子弹 */\r\n    createBullet(node: cc.Node, angle: number, atkNum: number) {\r\n        if (this.bulletPrefab) {\r\n            let dir = cc.v2(1, 0).rotateSelf(cc.misc.degreesToRadians(angle));\r\n            let bullet = cc.instantiate(this.bulletPrefab);\r\n            bullet.parent = this.node;\r\n            bullet.setPosition(node.getPosition())\r\n            bullet.angle = angle;\r\n\r\n            let pos1 = bullet.getPosition();\r\n            let pos2 = pos1.add(dir.mul(1000));\r\n            cc.tween(bullet)\r\n                .to(pos2.sub(pos1).mag() / 2500, { position: cc.v3(pos2) })\r\n                .call(() => {\r\n                    let ts = bullet.getComponent(Bullet);\r\n                    if (ts.boomEffect) {\r\n                        let boom = cc.instantiate(ts.boomEffect)\r\n                        boom.parent = ts.node.parent;\r\n                        boom.setPosition(ts.node.getPosition());\r\n                        boom.zIndex = ZindexLayer.zindex_bomb;\r\n                        let curBullet = boom.getComponent(Bullet);\r\n                        curBullet.atk = ts.atk;\r\n                        curBullet.atker = ts.atker;\r\n                        curBullet.id = ts.id;\r\n                        gameMgr.playEffect(\"explo\", boom);\r\n                        if (ts.hitEffect) {\r\n                            let pos = bullet.getPosition();\r\n                            let node = cc.instantiate(ts.hitEffect);\r\n                            node.parent = bullet.parent;\r\n                            node.setPosition(pos);\r\n                            node.zIndex = ZindexLayer.zindex_effect_hit;\r\n                        }\r\n                    }\r\n                    bullet.destroy()\r\n                })\r\n                .start();\r\n\r\n            let ts = bullet.getComponent(Bullet);\r\n            ts.id = 1;\r\n            ts.atker = null;\r\n            ts.atk = atkNum;\r\n            ts.dir = dir;\r\n        }\r\n    }\r\n\r\n    private _canAccelerate: boolean = true;\r\n    /** 获得经验加速1秒（可累计） */\r\n    accelerate() {\r\n        if (this.skill_18 == 0) {\r\n            if (this._canAccelerate) {\r\n                this._canAccelerate = false;\r\n                // 开始加速\r\n                if (gameMgr.playerTs) gameMgr.playerTs.speedRate *= 1.5;\r\n            } else {\r\n                this._canAccelerate = true;\r\n                // 结束加速\r\n                if (gameMgr.playerTs) gameMgr.playerTs.speedRate /= 1.5;\r\n                return;\r\n            }\r\n        }\r\n        this.scheduleOnce(() => {\r\n            this.skill_18--;\r\n            this.accelerate();\r\n        }, 1);\r\n    }\r\n\r\n    /** 魔法伤害倍率 */\r\n    magic_hart_rate() {\r\n        if (this.isHaveSkill(SkillType.双重附魔) && this.skill_magic > 1) {\r\n            return 1.5;\r\n        } else {\r\n            return 1;\r\n        }\r\n    }\r\n\r\n    /** 能否添加魔法（审判，火焰，雷电，冰冻） */\r\n    canAddMagic(enemy: cc.Node, id?: number) {\r\n        if (enemy && enemy.isValid) {\r\n            let zombieTs: ZombieBase = enemy.getComponent(ZombieBase);\r\n            if (zombieTs) {\r\n                // 血量小于0\r\n                if (zombieTs.HP <= 0) {\r\n                    return false;\r\n                }\r\n                // 已存在瞬斩\r\n                for (let i = 0; i < enemy.childrenCount; i++) {\r\n                    if (enemy.children[i].name == `zombieSkill_${SkillType.瞬斩}`) {\r\n                        return false;\r\n                    }\r\n                }\r\n                if (id >= 0) {\r\n                    if (id == SkillType.瞬斩) {\r\n                        // 是否达到试用条件\r\n                        if (zombieTs.isBoss || (zombieTs.totleHp > 0 && zombieTs.HP / zombieTs.totleHp > 0.4)) {\r\n                            return false;\r\n                        }\r\n                    }\r\n                    else {\r\n                        // 已存在火焰和冰霜\r\n                        for (let i = 0; i < enemy.childrenCount; i++) {\r\n                            if (enemy.children[i].name.includes(\"zombieSkill\"))\r\n                                return false;\r\n                        }\r\n                        if (zombieTs.isBoss) {\r\n                            if (id == SkillType.火焰精通) {\r\n                                return Math.random() < 0.2 ? true : false;\r\n                            } else if (id == SkillType.冰霜精通) {\r\n                                return Math.random() < 0.2 ? true : false;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                else { return false; }\r\n            }\r\n            else { return false; }\r\n        }\r\n        else { return false; }\r\n        return true;\r\n    }\r\n\r\n    /** 瞬斩 */\r\n    skill_effect_3(enemy: cc.Node) {\r\n        if (enemy && enemy.isValid) {\r\n            let zombieTs: ZombieBase = enemy.getComponent(ZombieBase);\r\n            if (zombieTs) {\r\n                // 技能效果\r\n                let pre: cc.Prefab = cocosz.resMgr.getRes(\"zombieSkill_3\", cc.Prefab);\r\n                if (pre) {\r\n                    let node: cc.Node = cc.instantiate(pre);\r\n                    node.setPosition(0, 0);\r\n                    node.setParent(enemy);\r\n                    // 销毁\r\n                    zombieTs.moveDir = cc.Vec2.ZERO;\r\n                    zombieTs.canMoveDir = false;\r\n                    zombieTs.updateMove();\r\n                    cc.tween(zombieTs)\r\n                        .delay(0.5)\r\n                        .call(() => {\r\n                            if (zombieTs && zombieTs.isValid) {\r\n                                zombieTs.hart(zombieTs.HP, null, null, false, false, cc.Color.RED);\r\n                            }\r\n                        })\r\n                        .delay(0.5)\r\n                        .call(() => {\r\n                            if (node && node.isValid) {\r\n                                node.destroy();\r\n                            }\r\n                        })\r\n                        .start();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /** 火焰精通 */\r\n    skill_effect_24(enemy: cc.Node) {\r\n        if (enemy && enemy.isValid) {\r\n            let zombieTs: ZombieBase = enemy.getComponent(ZombieBase);\r\n            if (zombieTs) {\r\n                let pre: cc.Prefab = cocosz.resMgr.getRes(\"zombieSkill_24\", cc.Prefab);\r\n                if (pre) {\r\n                    // 添加火焰动画\r\n                    let node = cc.instantiate(pre);\r\n                    node.setPosition(0, 0/* -enemy.height / 2 * enemy.scaleY */);\r\n                    node.setParent(enemy);\r\n                    node.zIndex = cc.macro.MAX_ZINDEX;\r\n                    zombieTs.fire_start();\r\n                    // 伤害\r\n                    cc.tween(node)\r\n                        .delay(0.2)\r\n                        .call(() => {\r\n                            if (zombieTs.isValid && zombieTs.HP > 0) {\r\n                                zombieTs.hart(5 * this.magic_hart_rate(), null, null, false, false, cc.Color.RED);\r\n                            } else {\r\n                                node.destroy();\r\n                            }\r\n                        })\r\n                        .union()\r\n                        .repeat(20)\r\n                        .call(() => {\r\n                            zombieTs.fire_end();\r\n                            node.destroy();\r\n                        })\r\n                        .start();\r\n                    gameMgr.playEffect(\"ranshao\", enemy, 1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /** 冰霜精通 */\r\n    skill_effect_26(enemy: cc.Node) {\r\n        if (enemy && enemy.isValid) {\r\n            let zombieTs: ZombieBase = enemy.getComponent(ZombieBase);\r\n            if (zombieTs /* && !zombieTs.isBoss() */) {\r\n                let pre: cc.Prefab = cocosz.resMgr.getRes(\"zombieSkill_26\", cc.Prefab);\r\n                if (pre) {\r\n                    let node_frozen = cc.instantiate(pre);\r\n                    node_frozen.setPosition(0, 0);\r\n                    node_frozen.setParent(enemy);\r\n                    node_frozen.zIndex = cc.macro.MAX_ZINDEX;\r\n                    if (zombieTs.zombieId >= 8) {\r\n                        node_frozen.scale = 4;\r\n                    } else {\r\n                        node_frozen.scale = 2;\r\n                    }\r\n                    // 冰冻\r\n                    if (zombieTs.isValid) {\r\n                        zombieTs.frozenStart();\r\n                        let t = zombieTs.isBoss ? 0.5 : 2;\r\n                        this.scheduleOnce(() => {\r\n                            if (zombieTs && zombieTs.isValid) {\r\n                                zombieTs.frozenEnd();\r\n                            }\r\n                            // 销毁\r\n                            if (node_frozen && node_frozen.isValid) {\r\n                                node_frozen.destroy();\r\n                            }\r\n                        }, t);\r\n                    }\r\n                    // 音效\r\n                    gameMgr.playEffect(\"bingdong\", enemy, 1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private _bishou: cc.Node = null;\r\n    /** 通灵匕首 */\r\n    updateBishou() {\r\n        if (this._bishou && this._bishou.isValid && gameMgr && gameMgr.playerTs) {\r\n            if (gameMgr.playerTs.atkTarget && gameMgr.playerTs.atkTarget.isValid) {\r\n                // 匕首属性\r\n                let bulletTs = this._bishou.getComponent(Bullet);\r\n                bulletTs.isHartMusic = false;\r\n                bulletTs.hitAudio = \"hurt\";\r\n                bulletTs.atk = 50 * gameMgr.playerTs.atkRate;\r\n                bulletTs.atkedArr = [];\r\n                // 当前\r\n                let from: cc.Vec2 = gameMgr.playerTs.node.getPosition();\r\n                // 目标\r\n                let div: cc.Vec2 = gameMgr.playerTs.atkTarget.getPosition().subSelf(from);\r\n                let dis = div.mag();\r\n                if (dis < 400) {\r\n                    div.normalizeSelf().mulSelf(400);\r\n                }\r\n                let p2: cc.Vec2 = from.add(cc.v2(1, 0).mulSelf(400).rotateSelf(this._bishou.angle / 180 * Math.PI))\r\n                let to: cc.Vec2 = from.add(div);\r\n                let t = div.mag() / 800;\r\n\r\n                if (false == this._bishou.active) {\r\n                    this._bishou.active = true;\r\n                    this._bishou.setPosition(from);\r\n                }\r\n                cc.tween(this._bishou)\r\n                    .bezierTo(t, from, p2, to)\r\n                    .call(() => { this.updateBishou(); })\r\n                    .start();\r\n            } else {\r\n                this._bishou.active = false;\r\n                this.scheduleOnce(() => { this.updateBishou(); }, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    public hudun: cc.Node = null;\r\n    /** 神圣护盾 */\r\n    updateHudun() {\r\n        if (this.hudun && this.hudun.active) {\r\n            this.hudun.active = false;\r\n            // 破裂音效\r\n            gameMgr.playEffect(\"ShieldDestroy\");\r\n            // cd\r\n            this.setSkillCD(SkillType.神圣守护, 60);\r\n            this.scheduleOnce(() => {\r\n                if (gameMgr && gameMgr.playerTs && gameMgr.playerTs.isValid) {\r\n                    this.hudun.active = true;\r\n                    if (gameMgr.playerTs.HP) {\r\n                        this.hudun.opacity = 255;\r\n                    } else {\r\n                        this.hudun.opacity = 0;\r\n                    }\r\n                }\r\n            }, 60)\r\n        }\r\n    }\r\n\r\n    private _zaishengCdTime: number = 0;\r\n    /** 再生 */\r\n    private _updateZaisheng() {\r\n        if (this._zaishengCdTime > 0) {\r\n            this._zaishengCdTime--;\r\n            return;\r\n        }\r\n        if (cocosz.isPause) return;\r\n        if (gameMgr.playerTs && !gameMgr.playerTs.isDeath && gameMgr.playerTs.HP < gameMgr.playerTs.totleHp) {\r\n            gameMgr.playerTs.HP += 1;\r\n            gameMgr.playerTs.recoverEffect();\r\n            this._zaishengCdTime = 90;\r\n            this.setSkillCD(SkillType.再生, this._zaishengCdTime);\r\n        }\r\n    }\r\n\r\n    private _feilun: cc.Node = null;\r\n    private _posArr: any[] = [\r\n        [[500, 0]],\r\n        [[500, 0], [-500, 0]],\r\n        [[500, 0], [-300, 400], [-300, -400]],\r\n        [[500, 0], [-500, 0], [0, 500], [0, -500]]\r\n    ]\r\n    /** 飞轮 */\r\n    updateFeilun(level: number) {\r\n        // 根据等级设置飞轮数量\r\n        if (this._feilun && this._feilun.isValid && gameMgr && gameMgr.playerTs) {\r\n            cc.tween(this._feilun).by(10, { angle: -360 * 5 }).repeatForever().start();\r\n            // 飞轮\r\n            let level2NumArr = [1, 2, 3, 4];\r\n            let num = level2NumArr[level];\r\n            for (let i = 0; i < 4; i++) {\r\n                let icon = this._feilun.children[i];\r\n                if (icon) {\r\n                    if (i < num) {\r\n                        icon.active = true;\r\n                        if (level == 3) {\r\n                            let sprFrame = this._feilun.getChildByName(\"back\").getComponent(cc.Sprite).spriteFrame;\r\n                            icon.getComponent(cc.Sprite).spriteFrame = sprFrame;\r\n                        }\r\n                        icon.setPosition(this._posArr[level][i][0], this._posArr[level][i][1]);\r\n                        cc.tween(icon)\r\n                            .call(() => {\r\n                                gameMgr.playEffect(\"chilunStart\");\r\n                                icon.getComponent(cc.Collider).enabled = true;\r\n                            })\r\n                            .to(1, { scale: 2.5 })\r\n                            .delay(8)\r\n                            .to(1, { scale: 0 })\r\n                            .call(() => { icon.getComponent(cc.Collider).enabled = false; })\r\n                            .delay(2)\r\n                            .union()\r\n                            .repeatForever()\r\n                            .start();\r\n                        let bulletTs = icon.getComponent(Bullet);\r\n                        if (bulletTs) {\r\n                            bulletTs.isHartMusic = false;\r\n                            bulletTs.hitAudio = \"chilun\";\r\n                            bulletTs.atk = 80 + 20 * level * gameMgr.playerTs.atkRate;\r\n                        }\r\n                    } else {\r\n                        icon.active = false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private _shandianCount: number = 0;\r\n    private _shandianNum: number[] = [1, 1, 3, 5];\r\n    private _shandiCdTime: number = 0;\r\n    /** 闪电 */\r\n    updateShandian() {\r\n        if (this._shandiCdTime > 0) {\r\n            this._shandiCdTime--;\r\n            return;\r\n        }\r\n        if (cocosz.isPause) return;\r\n        let level = this.upgradeSkillArr[SkillType.闪电];\r\n        if (this._shandianCount == 0) {\r\n            this._shandianCount = this._shandianNum[level];\r\n        }\r\n        // 能够添加闪电的敌人\r\n        let enemyArr = [];\r\n        for (let i = gameMgr.playerTs.atkList.length - 1; i >= 0; i--) {\r\n            let can: boolean = true;\r\n            const node = gameMgr.playerTs.atkList[i];\r\n            node.children.forEach(n => {\r\n                if (n.name == \"zombieSkill_shandian\") {\r\n                    can = false;\r\n                }\r\n            });\r\n            if (can) { enemyArr.push(node); }\r\n        }\r\n        if (enemyArr.length) {\r\n            let pre: cc.Prefab = cocosz.resMgr.getRes(\"zombieSkill_shandian\", cc.Prefab);\r\n            if (pre) {\r\n                let enemy = enemyArr.shift();\r\n                if (enemy && enemy.isValid) {\r\n                    this._shandianCount--;\r\n                    // 添加雷电动画\r\n                    let node = cc.instantiate(pre);\r\n                    node.setPosition(0, -enemy.height / 2 * enemy.scaleY);\r\n                    node.setParent(enemy);\r\n                    node.zIndex = cc.macro.MAX_ZINDEX;\r\n                    // 动画皮肤\r\n                    if (level == 3) {\r\n                        let spAni = node.getComponent(sp.Skeleton);\r\n                        if (spAni) { spAni.setSkin(\"y\"); }\r\n                    }\r\n                    // 销毁\r\n                    this.schedule(() => { if (node && node.isValid) { node.destroy(); } }, 1);\r\n                    // 伤害\r\n                    let zombieTs: ZombieBase = enemy.getComponent(ZombieBase);\r\n                    if (zombieTs) {\r\n                        if (zombieTs.isValid && zombieTs.HP > 0) {\r\n                            zombieTs.hart(200 * this.magic_hart_rate(), null, null, false, false, cc.Color.RED);\r\n                        }\r\n                    }\r\n                    // 音效\r\n                    gameMgr.playEffect(\"LuoLei\", enemy);\r\n                }\r\n            } else {\r\n                cocosz.resMgr.getRes(\"prefab_zombie_skill/zombieSkill_shandian\", cc.Prefab);\r\n            }\r\n        }\r\n        if (this._shandianCount == 0) {\r\n            this._shandiCdTime = 3 + level;\r\n            this.setSkillCD(SkillType.闪电, this._shandiCdTime);\r\n        }\r\n    }\r\n\r\n    private _fireCount: number = 0;\r\n    private _fireNum: number[] = [1, 1, 2, 3];\r\n    private _fireCdTime: number = 0;\r\n    /** 燃烧瓶 */\r\n    updateFire() {\r\n        if (this._fireCdTime > 0) {\r\n            this._fireCdTime--;\r\n            return;\r\n        }\r\n        if (cocosz.isPause) return;\r\n        let level = this.upgradeSkillArr[SkillType.燃烧瓶];\r\n        this._fireCount = this._fireNum[level];\r\n        if (!cocosz.isPause && gameMgr && gameMgr.playerTs && gameMgr.playerTs.atkTarget && gameMgr.playerTs.atkTarget.isValid) {\r\n            let pre = cocosz.resMgr.getRes(\"zombieSkill_fire\", cc.Prefab);\r\n            if (pre) {\r\n                let div: cc.Vec2 = gameMgr.playerTs.atkTarget.getPosition().subSelf(gameMgr.playerTs.node.getPosition());\r\n                div.normalizeSelf().mulSelf(400);\r\n                for (let i = 0; i < this._fireCount; i++) {\r\n                    let radian = ((this._fireCount - 1) / 2 - i) * (Math.PI / 2);\r\n                    let from = gameMgr.playerTs.node.getPosition();\r\n                    let to = from.add(cc.v2(div).rotateSelf(radian));\r\n                    let p2 = cc.v2((from.x + to.x) / 2, from.y + 900);\r\n                    let fire: cc.Node = cc.instantiate(pre);\r\n                    fire.children[1].active = (level == 3 ? false : true);\r\n                    fire.children[2].active = (level == 3 ? true : false);\r\n                    fire.setPosition(from);\r\n                    fire.setParent(gameMgr.map);\r\n                    fire.zIndex = cc.macro.MAX_ZINDEX;\r\n                    cc.tween(fire)\r\n                        .parallel(\r\n                            cc.tween().bezierTo(1, from, p2, to),\r\n                            cc.tween().to(1, { angle: 720 * (div.x > 0 ? 1 : -1) })\r\n                        )\r\n                        .call(() => {\r\n                            fire.zIndex = ZindexLayer.zinedx_floorSkill;\r\n                            fire.children[1].active = fire.children[2].active = false;\r\n                            fire.children[0].active = true;\r\n                            // 子弹碰撞体\r\n                            fire.getComponent(cc.Collider).enabled = true;\r\n                            // 子弹属性\r\n                            let buttleTs = fire.getComponent(Bullet);\r\n                            buttleTs.isHartMusic = false;\r\n                            buttleTs.atk = 11;\r\n                            buttleTs.hartInterval = 0.2;\r\n                            // 燃烧动画\r\n                            let spAni = fire.children[0].getComponent(sp.Skeleton);\r\n                            spAni.setSkin(level == 3 ? \"l\" : \"h\");\r\n                            spAni.setAnimation(0, \"k\", false);\r\n                            spAni.setAnimation(0, \"ranshao\", true);\r\n                            // 燃烧瓶破碎音效\r\n                            gameMgr.playEffect(\"Ranshaopingposui\", fire);\r\n                            gameMgr.playEffect(\"ranshao\", fire);\r\n                        })\r\n                        .delay(3)\r\n                        .to(0.3, { opacity: 50 })\r\n                        .call(() => { fire.destroy(); })\r\n                        .start();\r\n                }\r\n            }\r\n            this._fireCdTime = 4;\r\n            this.setSkillCD(SkillType.燃烧瓶, 4);\r\n        }\r\n    }\r\n\r\n}"]}