{"version":3,"sources":["assets\\scripts\\Game\\ani.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { cocosz } from \"../Framework/CocosZ\";\r\nimport GameDate from \"./gameDate\";\r\nimport Weapon from \"./weapon\";\r\n\r\nconst { ccclass, property, executeInEditMode, playOnFocus } = cc._decorator;\r\n\r\n@ccclass\r\n@executeInEditMode\r\n@playOnFocus\r\nexport default class Ani extends cc.Component {\r\n    @property({ displayName: \"间隔帧数\" })\r\n    times: number = 10;\r\n\r\n    @property({ type: [cc.Node], displayName: \"动画数组\" })\r\n    aniNodeArr: cc.Node[] = [];\r\n    @property()\r\n    _btnAdd: boolean = false;\r\n    get btnAdd() { return this._btnAdd; }\r\n    @property({ displayName: \"添加动画\" })\r\n    set btnAdd(v) {\r\n        this.aniNodeArr = [];\r\n        this.node.children.forEach((n) => { this.aniNodeArr.push(n); })\r\n    }\r\n    @property({ displayName: \"停止动画\" })\r\n    _btnStop: boolean = false;\r\n    get btnStop() { return this._btnStop; }\r\n    @property\r\n    set btnStop(v) {\r\n        this._btnStop = false;\r\n        this.stopAni();\r\n        this.aniNodeArr.forEach((node: cc.Node) => { node.opacity = 255; }, null)\r\n    }\r\n    @property({ displayName: \"待机动画\" })\r\n    _btnDaiji: boolean = false;\r\n    get btnDaiji() { return this._btnDaiji; }\r\n    @property\r\n    set btnDaiji(v) {\r\n        this._btnDaiji = false;\r\n        this.addAni(\"daiji\", false);\r\n    }\r\n    @property({ displayName: \"跑步动画\" })\r\n    _btnRun: boolean = false;\r\n    get btnRun() { return this._btnRun; }\r\n    @property\r\n    set btnRun(v) {\r\n        this._btnRun = false;\r\n        this.addAni(\"run\", false);\r\n    }\r\n    @property({ displayName: \"攻击动画\" })\r\n    _btnAtk: boolean = false;\r\n    get btnAtk() { return this._btnAtk; }\r\n    @property\r\n    set btnAtk(v) {\r\n        this._btnAtk = false;\r\n        this.addAni(\"atk\", false);\r\n    }\r\n    @property({ displayName: \"攻击动画2\" })\r\n    _btnAtk2: boolean = false;\r\n    get btnAtk2() { return this._btnAtk2; }\r\n    @property\r\n    set btnAtk2(v) {\r\n        this._btnAtk2 = false;\r\n        this.addAni(\"atk2\", false);\r\n    }\r\n    @property({ displayName: \"死亡动画2\" })\r\n    _btnDeath: boolean = false;\r\n    get btnDeath() { return this._btnAtk2; }\r\n    @property\r\n    set btnDeath(v) {\r\n        this._btnDeath = false;\r\n        this.addAni(\"death\", false);\r\n    }\r\n\r\n    private handLeft: cc.Node = null;\r\n    private body: cc.Node = null;\r\n    private leg: cc.Node = null;\r\n    private handRight: cc.Node = null;\r\n    private head: cc.Node = null;\r\n    private weapon: cc.Node = null;\r\n\r\n    onLoad() {\r\n        this.handLeft = cc.find(\"handLeft\", this.node);\r\n        this.body = cc.find(\"body\", this.node);\r\n        this.leg = cc.find(\"leg\", this.node);\r\n        this.handRight = cc.find(\"handRight\", this.node);\r\n        this.head = cc.find(\"head\", this.node);\r\n        this.weapon = cc.find(\"weapon\", this.node);\r\n    }\r\n\r\n    start() { }\r\n\r\n    public aniNode: cc.Node = null;//动画节点\r\n\r\n    private _t: number = 0;//计时\r\n    private _index: number = 0;//动画帧\r\n    private _isLoop: boolean = false;//是否循环\r\n    private _aniArr: any[] = [];//动画数组\r\n    /**\r\n     * 设置动画\r\n     * @param name 动画名 \r\n     * @param isLoop 是否循环\r\n     * @param time 动画间隔\r\n     */\r\n    setAni(name: string, isLoop: boolean = false) {\r\n        // 清空动画数组\r\n        this._aniArr = [];\r\n        // 播放动画\r\n        this.playAni(name, isLoop);\r\n    }\r\n    /**\r\n     * 添加动画\r\n     * @param name 动画名 \r\n     * @param isLoop 是否循环\r\n     * @param time 动画间隔\r\n     */\r\n    addAni(name: string, isLoop: boolean) {\r\n        if (this.aniNode) {\r\n            this._aniArr.push({\r\n                name: name,\r\n                isLoop: isLoop,\r\n            })\r\n        } else {\r\n            // 播放动画\r\n            this.playAni(name, isLoop);\r\n        }\r\n    }\r\n\r\n    /** 停止动画 */\r\n    public stopAni() {\r\n        // 清空动画数组\r\n        this._aniArr = [];\r\n        // 停止动画\r\n        this.aniNode = null;\r\n    }\r\n\r\n    /** 是否包含动画 */\r\n    public includeAni(name: string) {\r\n        let r = false;\r\n        this.aniNodeArr.forEach(n => {\r\n            if (n.name == name)\r\n                r = true;\r\n        })\r\n        return r;\r\n    }\r\n\r\n    /** 是否正在播放 */\r\n    public isAni(name?: string) {\r\n        if (this.aniNode && ((!name) || (name && this.aniNode.name.includes(name)))) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    private playAni(name: string, isLoop: boolean = false) {\r\n        this.aniNode = null;\r\n        this._index = 0;\r\n        this._t = 0;\r\n        // 隐藏其它动画\r\n        this.aniNodeArr.forEach(child => {\r\n            if (child.name == name) {\r\n                // child.active = true;\r\n                child.active = true;\r\n                child.opacity = 255;\r\n                this.aniNode = child;\r\n            } else {\r\n                // child.active = false;\r\n                child.active = true;\r\n                child.opacity = 0;\r\n            }\r\n        })\r\n        // 循环播放\r\n        this._isLoop = isLoop;\r\n        // 输出\r\n        if (this.aniNode) {\r\n            // cc.log(\"播放动画：\", name);\r\n        } else {\r\n            cc.log(\"动画不存在：\" + name)\r\n        }\r\n    }\r\n\r\n    protected lateUpdate(): void {\r\n        if (this.aniNode && this.aniNode.isValid) {\r\n            if (this._t % this.times == 0) {\r\n                this._t = 0\r\n                // 切换图片\r\n                this.aniNode.children.forEach((child, index) => {\r\n                    if (index == this._index) {\r\n                        child.opacity = 255;\r\n                    } else {\r\n                        child.opacity = 0;\r\n                    }\r\n                })\r\n                // 动画帧++\r\n                this._index++;\r\n                // 判断动画\r\n                if (this._index >= this.aniNode.childrenCount) {\r\n                    if (this._isLoop) {\r\n                        // 循环的当前动画\r\n                        this._index = 0;\r\n                    } else if (this._aniArr.length > 0) {\r\n                        // 下一个动画\r\n                        let json = this._aniArr.shift();\r\n                        this.playAni(json.name, json.isLoop);\r\n                    } else {\r\n                        // 结束动画\r\n                        this.aniNode = null;\r\n                        this._index = 0;\r\n                    }\r\n                }\r\n            }\r\n            // 帧自增\r\n            this._t++;\r\n        }\r\n    }\r\n\r\n    setSkinById(id: number) {\r\n        this.setSkinByName((id + 1).toString());\r\n        this.setGh(id);\r\n    }\r\n    setSkinByName(name: string) {\r\n        this.head.children.forEach((child) => {\r\n            if (child.name == name) {\r\n                child.active = true;\r\n                child.opacity = 255;\r\n            } else {\r\n                // child.active = false;\r\n                child.active = true;\r\n                child.opacity = 0;\r\n            }\r\n        });\r\n    }\r\n\r\n    setWeaponById(id: number) {\r\n        this.setWeaponByName(Weapon.WeaponName[id]);\r\n        this.setSD(id);\r\n    }\r\n    setWeaponByName(name: string) {\r\n        if (GameDate.Weapon[name].atkRange > 300) {\r\n            this.weapon.active = true;\r\n            this.handLeft.active = false;\r\n            this.handRight.active = false;\r\n            const pre = cocosz.resMgr.getRes(`weapon_${name}`, cc.Prefab);\r\n            if (pre) {\r\n                let rangeWeapon = cc.instantiate(pre);\r\n                rangeWeapon.removeComponent(Weapon);\r\n                this.weapon.children[0] && this.weapon.children[0].isValid && this.weapon.children[0].destroy();\r\n                this.weapon.addChild(rangeWeapon);\r\n            }\r\n        } else {\r\n            this.weapon.active = false;\r\n            this.handLeft.active = true;\r\n            this.handRight.active = true;\r\n            const pre = cocosz.resMgr.getRes(`weapon_${name}`, cc.Prefab);\r\n            if (pre) {\r\n                let meleeWeapon: cc.Node = cc.instantiate(pre);\r\n                meleeWeapon.removeComponent(Weapon);\r\n                this.handRight.children[0] && this.handRight.children[0].isValid && this.handRight.children[0].destroy();\r\n                this.handRight.addChild(meleeWeapon);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** 显示光环 */\r\n    setGh(id: number) {\r\n        let gh = this.node.getChildByName(\"gh\");\r\n        if (gh && gh.isValid) {\r\n            let info = cocosz.dataMgr.getSkinInfo(id);\r\n            if (info) {\r\n                let ghAni = gh.getComponent(sp.Skeleton);\r\n                gh.active = true;\r\n                if (ghAni && ghAni.isValid) {\r\n                    let personLevel = info.Level;\r\n                    if (personLevel > 0) {\r\n                        gh.color = cc.Color.WHITE;\r\n                        let arr = [\"\", \"y\", \"p\", \"r\"];\r\n                        ghAni.setSkin(arr[Math.ceil(personLevel / 2)]);\r\n                        ghAni.setAnimation(0, \"animation\", true);\r\n                    } else {\r\n                        gh.color = cc.Color.BLACK;\r\n                        ghAni.setSkin(\"r\");\r\n                        ghAni.setAnimation(0, \"animation\", true);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /** 显示闪电 */\r\n    setSD(id) {\r\n        let info = cocosz.dataMgr.getGunInfo(id);\r\n        this.node.walk((child) => {\r\n            if (child.name == \"sd\") {\r\n                if (info.Level > 0) {\r\n                    child.active = true;\r\n                    let spAni = child.getComponent(sp.Skeleton);\r\n                    if (spAni) {\r\n                        let arr = [\"\", \"y\", \"p\", \"r\"];\r\n                        spAni && spAni.setSkin(arr[info.Level]);\r\n                    }\r\n                } else {\r\n                    child.active = false;\r\n                }\r\n            }\r\n        }, null);\r\n    }\r\n}\r\n\r\n"]}