{"version":3,"sources":["packages\\i18n\\runtime-scripts\\LocalizedSprite.js"],"names":["SpriteFrameSet","require","cc","Class","Component","editor","executeInEditMode","inspector","menu","properties","spriteFrameSet","type","onLoad","fetchRender","sprite","getComponent","Sprite","updateSprite","window","i18n","curLang","getSpriteFrameByLang","lang","i","length","language","spriteFrame","error"],"mappings":";;;;;;AAAA,IAAMA,cAAc,GAAGC,OAAO,CAAC,gBAAD,CAA9B;;AAEAC,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,MAAM,EAAE;AACJC,IAAAA,iBAAiB,EAAE,IADf;AAEJC,IAAAA,SAAS,EAAE,+CAFP;AAGJC,IAAAA,IAAI,EAAE;AAHF,GAHH;AASLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,cAAc,EAAE;AACZ,iBAAS,EADG;AAEZC,MAAAA,IAAI,EAAEX;AAFM;AADR,GATP;AAgBLY,EAAAA,MAhBK,oBAgBK;AACN,SAAKC,WAAL;AACH,GAlBI;AAoBLA,EAAAA,WApBK,yBAoBU;AACX,QAAIC,MAAM,GAAG,KAAKC,YAAL,CAAkBb,EAAE,CAACc,MAArB,CAAb;;AACA,QAAIF,MAAJ,EAAY;AACR,WAAKA,MAAL,GAAcA,MAAd;AACA,WAAKG,YAAL,CAAkBC,MAAM,CAACC,IAAP,CAAYC,OAA9B;AACA;AACH;AACJ,GA3BI;AA6BLC,EAAAA,oBA7BK,gCA6BiBC,IA7BjB,EA6BuB;AACxB,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKb,cAAL,CAAoBc,MAAxC,EAAgD,EAAED,CAAlD,EAAqD;AACjD,UAAI,KAAKb,cAAL,CAAoBa,CAApB,EAAuBE,QAAvB,KAAoCH,IAAxC,EAA8C;AAC1C,eAAO,KAAKZ,cAAL,CAAoBa,CAApB,EAAuBG,WAA9B;AACH;AACJ;AACJ,GAnCI;AAqCLT,EAAAA,YArCK,wBAqCSQ,QArCT,EAqCmB;AACpB,QAAI,CAAC,KAAKX,MAAV,EAAkB;AACdZ,MAAAA,EAAE,CAACyB,KAAH,CAAS,iEAAT;AACA;AACH;;AAED,QAAID,WAAW,GAAG,KAAKL,oBAAL,CAA0BI,QAA1B,CAAlB;;AAEA,QAAI,CAACC,WAAD,IAAgB,KAAKhB,cAAL,CAAoB,CAApB,CAApB,EAA4C;AACxCgB,MAAAA,WAAW,GAAG,KAAKhB,cAAL,CAAoB,CAApB,EAAuBgB,WAArC;AACH;;AAED,SAAKZ,MAAL,CAAYY,WAAZ,GAA0BA,WAA1B;AACH;AAlDI,CAAT","sourceRoot":"/","sourcesContent":["const SpriteFrameSet = require('SpriteFrameSet');\n\ncc.Class({\n    extends: cc.Component,\n\n    editor: {\n        executeInEditMode: true,\n        inspector: 'packages://i18n/inspector/localized-sprite.js',\n        menu: 'i18n/LocalizedSprite'\n    },\n\n    properties: {\n        spriteFrameSet: {\n            default: [],\n            type: SpriteFrameSet\n        }\n    },\n\n    onLoad () {\n        this.fetchRender();\n    },\n\n    fetchRender () {\n        let sprite = this.getComponent(cc.Sprite);\n        if (sprite) {\n            this.sprite = sprite;\n            this.updateSprite(window.i18n.curLang);\n            return;\n        }\n    },\n\n    getSpriteFrameByLang (lang) {\n        for (let i = 0; i < this.spriteFrameSet.length; ++i) {\n            if (this.spriteFrameSet[i].language === lang) {\n                return this.spriteFrameSet[i].spriteFrame;\n            }\n        }\n    },\n\n    updateSprite (language) {\n        if (!this.sprite) {\n            cc.error('Failed to update localized sprite, sprite component is invalid!');\n            return;\n        }\n\n        let spriteFrame = this.getSpriteFrameByLang(language);\n\n        if (!spriteFrame && this.spriteFrameSet[0]) {\n            spriteFrame = this.spriteFrameSet[0].spriteFrame;\n        }\n\n        this.sprite.spriteFrame = spriteFrame;\n    }\n});"]}