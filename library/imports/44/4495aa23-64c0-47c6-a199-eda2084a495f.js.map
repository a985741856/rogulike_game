{"version":3,"sources":["assets\\common-plugin\\Scripts\\WithdrawalPanel.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAEA,iCAAgC;AAChC,6CAA4D;AAKtD,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAI5C;IAA6C,mCAAY;IAAzD;QAAA,qEAmHC;QAjHW,eAAS,GAAY,IAAI,CAAC;QAC1B,oBAAc,GAAY,IAAI,CAAC;QAC/B,qBAAe,GAAc,IAAI,CAAC;QAClC,YAAM,GAAY,IAAI,CAAC;QACvB,iBAAW,GAAa,IAAI,CAAC;QAE7B,iBAAW,GAAiB,IAAI,CAAC;QAGzC,eAAS,GAAgB,yBAAW,CAAC,UAAU,CAAC;QA2ChD,6BAAuB,GAAW,CAAC,CAAC,CAAC;;IA6DzC,CAAC;IAtGG,gCAAM,GAAN;QACI,IAAI,aAAK,CAAC,WAAW,IAAI,aAAK,CAAC,WAAW,CAAC,KAAK,EAAE;YAC9C,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,aAAK,CAAC,WAAW,CAAC,KAAK,CAAC;SAC7C;QACD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;QAChD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,sBAAsB,CAAC,CAAC,QAAQ,CAAC;QACnF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;QACrF,4BAA4B;QAE5B,IAAI,CAAC,WAAW,GAAG,aAAK,CAAC,YAAY,CAAC;QAEtC,IAAI,KAAK,GAAW,CAAC,CAAC;QACtB,IAAI,EAAE,CAAC,OAAO,CAAC,MAAM,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,EAAE;YACtC,OAAO;YACP,KAAK,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,GAAG,GAAG,CAAC;SACzC;aAAM;YACH,KAAK,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC;SACnC;QAED,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,WAAW,EAAE,CAAC;IACvB,CAAC;IAIO,qCAAW,GAAnB;QAAA,iBAcC;QAZG,IAAI,IAAI,CAAC,WAAW,CAAC,OAAO,GAAG,CAAC,EAAE;YAC9B,IAAI,CAAC,WAAW,CAAC,MAAM,GAAM,IAAI,CAAC,WAAW,CAAC,OAAO,WAAG,CAAA;SAC3D;gCACQ,CAAC;YACN,IAAI,IAAI,GAAQ,aAAK,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;YACtD,IAAI,IAAI,EAAE;gBACN,OAAK,eAAe,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAM,IAAI,WAAG,CAAA;gBAC7F,OAAK,eAAe,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE;oBACtD,KAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAA;gBAC7B,CAAC,SAAO,CAAC;aACZ;;;QAPL,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE;oBAAjB,CAAC;SAQT;IACL,CAAC;IAGD,2CAAiB,GAAjB,UAAkB,SAAS;QAA3B,iBAeC;QAZG,IAAI,IAAI,CAAC,WAAW,CAAC,OAAO,IAAI,aAAK,CAAC,YAAY,CAAC,eAAe,CAAC,SAAS,CAAC,EAAE;YAC3E,IAAI,CAAC,uBAAuB,GAAG,SAAS,CAAC;YAEzC,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,UAAC,OAAO,EAAE,KAAK;gBACxC,IAAI,SAAS,IAAI,KAAK,EAAE;oBACpB,KAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;iBAC3E;YACL,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;SAC9E;aAAM;YACH,aAAK,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;SAC5B;IACL,CAAC;IAED,yCAAe,GAAf;QACI,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACrB,IAAI,IAAI,CAAC,uBAAuB,GAAG,CAAC,CAAC,EAAE;SAEtC;aAAM;YACH,aAAK,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;SAC/B;IACL,CAAC;IAED,aAAa;IACb,6BAA6B;IAC7B,mCAAmC;IACnC,+BAA+B;IAC/B,QAAQ;IACR,IAAI;IAEJ,sCAAY,GAAZ;QACI,aAAK,CAAC,qBAAqB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC5C,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,OAAO;IACX,CAAC;IAEM,8BAAI,GAAX,UAAY,YAA0B;IAEtC,CAAC;IAEM,8BAAI,GAAX;QACI,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;IAC5B,CAAC;IAEM,8BAAI,GAAX;QACI,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,6KAA6K;QAC7K,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACzB,QAAQ;QACR,oCAAoC;QACpC,uDAAuD;QACvD,IAAI;IACR,CAAC;IAEM,2CAAiB,GAAxB,UAAyB,KAAU,EAAE,IAAS;QAC1C,IAAI,CAAC,IAAI,EAAE,CAAC;IAChB,CAAC;IAlHgB,eAAe;QADnC,OAAO;OACa,eAAe,CAmHnC;IAAD,sBAAC;CAnHD,AAmHC,CAnH4C,EAAE,CAAC,SAAS,GAmHxD;kBAnHoB,eAAe","file":"","sourceRoot":"/","sourcesContent":["import GameItem from \"./GameItem\";\r\nimport QCrossWidgetItem from \"./QCrossWidgetItem\";\r\nimport { utils } from \"./Utils\";\r\nimport { BannerLocation, SubLocation } from \"./YZ_Constant\";\r\nimport PlatUtils from \"./PlatUtils\";\r\nimport CompatibleTool from \"./CompatibleTool\";\r\nimport { YzRedBagInfo } from \"./CommonConfig\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n\r\n@ccclass\r\nexport default class WithdrawalPanel extends cc.Component {\r\n\r\n    private _closeBtn: cc.Node = null;\r\n    private _withdrawalBtn: cc.Node = null;\r\n    private _moneyItemNodes: cc.Node[] = null;\r\n    private _panel: cc.Node = null;\r\n    private _balanceLbl: cc.Label = null;\r\n\r\n    private _redBagInfo: YzRedBagInfo = null;\r\n\r\n\r\n    _location: SubLocation = SubLocation.isMoreGame;\r\n\r\n    onLoad() {\r\n        if (utils.otherConfig && utils.otherConfig.group) {\r\n            this.node.group = utils.otherConfig.group;\r\n        }\r\n        this._panel = this.node.getChildByName(\"Panel\");\r\n        this._moneyItemNodes = this._panel.getChildByName(\"WithdrawalPriceNodes\").children;\r\n        this._balanceLbl = this._panel.getChildByName(\"balanceLabel\").getComponent(cc.Label);\r\n        // this.node.active = false;\r\n\r\n        this._redBagInfo = utils.yzRedBagInfo;\r\n\r\n        let ratio: number = 1;\r\n        if (cc.winSize.height < cc.winSize.width) {\r\n            // 横屏游戏\r\n            ratio = cc.winSize.width / 1920 * 0.5;\r\n        } else {\r\n            ratio = cc.winSize.width / 1080;\r\n        }\r\n\r\n        this._panel.scale = ratio;\r\n        this._initWidget();\r\n    }\r\n\r\n\r\n\r\n    private _initWidget() {\r\n\r\n        if (this._redBagInfo.balance > 0) {\r\n            this._balanceLbl.string = `${this._redBagInfo.balance}元`\r\n        }\r\n        for (let i = 0; i < 4; i++) {\r\n            let data: any = utils.yzRedBagInfo.withdrawaMoneys[i];\r\n            if (data) {\r\n                this._moneyItemNodes[i].getChildByName(\"PriceLbl\").getComponent(cc.Label).string = `${data}元`\r\n                this._moneyItemNodes[i].on(cc.Node.EventType.TOUCH_START, () => {\r\n                    this.selectedMoneyNode(i)\r\n                }, this);\r\n            }\r\n        }\r\n    }\r\n\r\n    _selectedMoneyItemIndex: number = -1;\r\n    selectedMoneyNode(itemIndex) {\r\n\r\n\r\n        if (this._redBagInfo.balance >= utils.yzRedBagInfo.withdrawaMoneys[itemIndex]) {\r\n            this._selectedMoneyItemIndex = itemIndex;\r\n\r\n            this._moneyItemNodes.forEach((element, index) => {\r\n                if (itemIndex != index) {\r\n                    this._moneyItemNodes[index].getChildByName(\"selectedBg\").active = false;\r\n                }\r\n            });\r\n            this._moneyItemNodes[itemIndex].getChildByName(\"selectedBg\").active = true;\r\n        } else {\r\n            utils.showMsg(\"当前余额不足！\");\r\n        }\r\n    }\r\n\r\n    withDrawalMoney() {\r\n        console.log(\"money\");\r\n        if (this._selectedMoneyItemIndex > -1) {\r\n\r\n        } else {\r\n            utils.showMsg(\"请选择要提现的金额！\");\r\n        }\r\n    }\r\n\r\n    // update() {\r\n    //     if (this._dataDirty) {\r\n    //         this._dataDirty = false;\r\n    //         this._updatePanel();\r\n    //     }\r\n    // }\r\n\r\n    _updatePanel() {\r\n        utils.postRecommentShowData(this._location);\r\n        this._initWidget();\r\n        return;\r\n    }\r\n\r\n    public init(YzRedBagInfo: YzRedBagInfo) {\r\n\r\n    }\r\n\r\n    public show() {\r\n        this.node.active = true;\r\n    }\r\n\r\n    public hide() {\r\n        let self = this;\r\n        // this._panel.runAction(cc.sequence(cc.moveTo(0.3, CompatibleTool.position(-this._panel.getContentSize().width, 0)).easing(cc.easeQuadraticActionOut()), cc.callFunc(() => {\r\n        self.node.active = false;\r\n        // })));\r\n        // if (!PlatUtils.IsNativeAndroid) {\r\n        //     utils.adManager.ShowBanner(BannerLocation.Home);\r\n        // }\r\n    }\r\n\r\n    public onCloseBtnHandler(event: any, data: any) {\r\n        this.hide();\r\n    }\r\n}\r\n"]}