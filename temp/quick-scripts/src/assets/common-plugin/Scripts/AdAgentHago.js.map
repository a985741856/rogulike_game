{"version":3,"sources":["assets\\common-plugin\\Scripts\\AdAgentHago.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import AdAgent from \"./AdAgent\";\r\nimport { BannerLocation } from \"./YZ_Constant\";\r\nimport PlatUtils from \"./PlatUtils\";\r\nimport { utils } from \"./Utils\";\r\n// const i18n = require('LanguageData');\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class AdAgentHago extends AdAgent {\r\n\r\n    _sysData: any = null;\r\n    _bannerAd: any = null;\r\n    _videoAd: any = null;\r\n    _videoCallback: Function = null;\r\n    _isVideoShow: boolean = false;\r\n    _isVideoLoaded: boolean = false;\r\n    //@ts-ignore\r\n    hg: any = window.hg;\r\n    canShowVideo: boolean = false;\r\n    public Init() {\r\n        if (PlatUtils.IsHago) {\r\n            this.initVideoAd();\r\n            utils.showLog(\"hago 平台广告初始化成功！\");\r\n        }\r\n    }\r\n\r\n\r\n    public ShowBanner(location: BannerLocation = BannerLocation.Home, args: any = null) {\r\n        utils.showLog(\"Hago平台没有banner广告！\");\r\n    }\r\n\r\n    /**\r\n    * 显示结算广告\r\n    * @param data 参数： closeBtn:\r\n    * statement_type \r\n    * 1:只显示小游戏插屏广告\r\n    * 2:只显示6个互推广告\r\n    * 3:显示插屏广告+6个互推\r\n    */\r\n    showStatementAds(): any {\r\n        let result: any = { \"type\": 0, \"node\": null };\r\n        let node: cc.Node = null;\r\n        let resType: number = 0;\r\n\r\n        utils.showLog(\"结算广告 >> 显示插屏广告+6个互推\");\r\n        this.ShowInterstitial();\r\n        node = utils.showCrossWidget6();\r\n        resType = 1;\r\n        result.type = resType;\r\n        result.node = node;\r\n        return result;\r\n    }\r\n\r\n    initVideoAd() {\r\n\r\n        this._videoAd = this.hg.createRewardedVideoAd({\r\n            adUnitId: parseInt(utils.config.hagoConfig.videoId) //测试使用9999，上线前必须申请独立的，否则无法分成!   注意：要下载最新的app测试版本9999才能生效。\r\n        });\r\n\r\n\r\n        this._videoAd.onClose = (res) => {\r\n            if (res.isEnded) {\r\n                this._videoCallback(true);\r\n                this._videoCallback = null;\r\n            } else {\r\n                if (this._videoCallback) {\r\n                    this._videoCallback(false, i18n.t('ad.video_not_played_complete'));\r\n                    this._videoCallback = null;\r\n                }\r\n            }\r\n        }\r\n\r\n        //中途关闭广告或者拉去广告失败。\r\n        this._videoAd.onError = () => {\r\n            if (this._videoCallback) {\r\n                this._videoCallback(false, i18n.t('ad.video_load_fail'));\r\n                this._videoCallback = null;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    public HideBanner(location: BannerLocation = BannerLocation.Home) {\r\n\r\n    }\r\n\r\n    public ShowInterstitial(location: BannerLocation = BannerLocation.Home) {\r\n        console.warn(\"Hago没有插屏\");\r\n    }\r\n\r\n    public ShowVideo(callback: Function) {\r\n        if (PlatUtils.IsHago) {\r\n            // 视频广告\r\n            if (this._videoCallback) {\r\n                return;\r\n            }\r\n            this._videoCallback = callback;\r\n            if (!this._videoAd) {\r\n                this.initVideoAd();\r\n            }\r\n            this._videoAd.show().then(() => {\r\n                utils.showLog(\"video show success\");\r\n            })\r\n        }\r\n    }\r\n}\r\n"]}