{"version":3,"sources":["assets\\common-plugin\\Scripts\\YZ_Tool_Native.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import PlatUtils from \"./PlatUtils\";\r\nimport { utils } from \"./Utils\";\r\nimport YZ_Constant, { LevelStatus } from \"./YZ_Constant\";\r\nimport YZ_LocalStorage from \"./YZ_LocalStorage\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nlet ST_DefaultServerConfig: string = \"\";\r\nconst ST_ServerUrl: string = \"http://apps.youlesp.com/gss?\";\r\nconst POST_ServerUrl: string = \"http://report.youlesp.com/gss?\"\r\n\r\n\r\n//  const ST_ServerUrl: string = \"http://192.168.31.39:8080/GameBoxServer/gss?\";\r\n//  const POST_ServerUrl: string = \"http://192.168.31.39:8080/GameBoxServer/gss?\"\r\n\r\n\r\n@ccclass\r\nexport default class YZ_Tool_Native {\r\n\r\n    public className: string = \"\";\r\n\r\n    _serverConfig: any = null;\r\n    public get ServerConfig() {\r\n        return this._serverConfig;\r\n    }\r\n\r\n    /**\r\n    * 当前版本号\r\n    */\r\n    public gameVersion(): string {\r\n        return utils.config.nativeAndroidConfig.version;\r\n    }\r\n\r\n    //设备UID\r\n    _uid: string = \"0\";\r\n\r\n    public get uid() {\r\n        // if (this._service_uid != \"0\") return this._uid;\r\n        // this._login();\r\n        return \"0\";\r\n    }\r\n\r\n    //服务器返回UID\r\n    _service_uid: string = \"0\";\r\n\r\n    /**\r\n     * 服务器返回UID\r\n     */\r\n    public get serviceId() {\r\n        if (this._service_uid != \"0\") return this._service_uid;\r\n        this.reportLogin();\r\n        return \"0\";\r\n    }\r\n\r\n    /**\r\n     *  0：默认互推面板 1： 跳转到原生平台\r\n     */\r\n    moreGameShowType: number = 0;\r\n\r\n    /**\r\n     * 显示退出游戏弹窗的类型\r\n     * 0：不弹窗 1:弹窗\r\n     */\r\n    showGameExitDialogType: number = 0;\r\n    appList: string = \"\";\r\n\r\n    _reportLoginTime: number = 0;\r\n    _reportLoginInterval: number = 30;\r\n    isReport: boolean = false;\r\n\r\n    /**\r\n     * 上报登录接口获取UID\r\n     */\r\n    reportLogin() {\r\n        if (this.isReport) return;\r\n        this.isReport = true;\r\n        let self = this;\r\n        let curTime: number = new Date().getTime();\r\n        let interval: number = (curTime - this._reportLoginTime) / 1000;\r\n        if (interval > 0 && interval < this._reportLoginInterval) {\r\n            utils.showLog(`上报登录获取UID小于：${this._reportLoginInterval}秒`);\r\n            return;\r\n        }\r\n        this._reportLoginTime = curTime;\r\n        let method = \"m=loginv2\";\r\n        let url: string = ST_ServerUrl + method + `&device_data=${encodeURI(this.deviceInfo)}`;\r\n\r\n        utils.commomHttpRequest(url, (ret, data) => {\r\n            if (ret) {\r\n                if (data) {\r\n                    let result = JSON.parse(data);\r\n                    utils.showLog(result);\r\n                    if (result.uid) {\r\n                        self._service_uid = \"\" + result.uid;\r\n                        utils.showLog(\"服务器请求登录成功! _service_uid=\" + self._service_uid);\r\n                        YZ_LocalStorage.setItem(YZ_Constant.ST_SERVICE_UID, self._service_uid);\r\n                    }\r\n                    if (result.config) {\r\n                        this._serverConfig = utils.aesDecrypt(result.config);\r\n                        this.setLocalConfig(JSON.stringify(this._serverConfig));\r\n                    }\r\n                }\r\n            } else {\r\n                utils.showLog(\"获取数据失败1\");\r\n            }\r\n            this.isReport = false;\r\n        })\r\n    }\r\n    /**\r\n     * \r\n     * @param data 配置数据\r\n     */\r\n    public init() {\r\n        if (PlatUtils.IsNativeAndroid) {\r\n\r\n            ST_DefaultServerConfig = this.getNativeData();\r\n\r\n            if (ST_DefaultServerConfig) {\r\n                let data: any = JSON.parse(ST_DefaultServerConfig);\r\n                this.deviceInfo = data.device_info;\r\n                this.moreGameShowType = data.more_game_type;\r\n                this.showGameExitDialogType = data.show_game_exit_dialog;\r\n                this.appList = data.app_list;\r\n            } else {\r\n                utils.showLog(\"没有获取到本地数据，组件初始化失败！\");\r\n                return;\r\n            }\r\n\r\n            this._service_uid = YZ_LocalStorage.getItem(YZ_Constant.ST_SERVICE_UID);\r\n            this._service_uid = this._service_uid ? this._service_uid : \"0\";\r\n\r\n\r\n            this._loadConfig();\r\n\r\n\r\n\r\n            if (PlatUtils.IsNativeAndroid) {\r\n                //初始化时监听返回按钮退出事件\r\n                cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, (event: any) => {\r\n                    if (event.keyCode == cc.macro.KEY.escape || event.keyCode == cc.macro.KEY.back) {\r\n                        if (PlatUtils.IsNativeAndroid) {\r\n                            if (this.showGameExitDialogType == 1) {\r\n                                this.showGameExitDialog();\r\n                            } else {\r\n                                this.GameExit();\r\n                            }\r\n                        }\r\n                    }\r\n                }, this);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    _gameExitDialogNode: cc.Node = null;\r\n    /**\r\n     * 显示退出弹窗\r\n     */\r\n    private showGameExitDialog() {\r\n        if (!utils._isConfigInit) {\r\n            utils.showLog(\"warn:\" + \"组件配置未初始化!\");\r\n            return null;\r\n        }\r\n        if (this._gameExitDialogNode && cc.isValid(this._gameExitDialogNode)) {\r\n            utils.showLog(\"退出窗口还在。\");\r\n            return;\r\n        }\r\n\r\n        if (utils.config.otherconfig.gameExitDialog) {\r\n            // if(utils.getRecommondGameList())\r\n            let node: cc.Node = cc.instantiate(utils.config.otherconfig.gameExitDialog);\r\n            if (node) {\r\n                if (this._gameExitDialogNode && cc.isValid(this._gameExitDialogNode)) {\r\n                    this._gameExitDialogNode.destroy();\r\n                }\r\n                this._gameExitDialogNode = node;\r\n                this._gameExitDialogNode.group = \"default\";\r\n                cc.director.getScene().addChild(this._gameExitDialogNode, 9999);\r\n            }\r\n        } else {\r\n            utils.showLog(\"warn:\" + \"未找到预制体 GameExitDialog, 请查看CommonUtils组件上是否赋值 !\");\r\n        }\r\n\r\n    }\r\n\r\n    public GameExit() {\r\n        if (PlatUtils.IsNativeAndroid) {\r\n            cc.log(\"AdAgentNative GameExit\");\r\n            try {\r\n                jsb.reflection.callStaticMethod(this.jniClassName, \"gameExit\", \"()V\");\r\n            } catch (error) {\r\n                cc.log(error);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 获取更多游戏显示的类型\r\n     * 0：默认互推面板 1： 跳转到原生平台\r\n     */\r\n    private getMoreGameShowType() {\r\n        try {\r\n            this.moreGameShowType = jsb.reflection.callStaticMethod(this.jniClassName, \"getMoreGameShowType\", \"()I\");\r\n        } catch (error) {\r\n            utils.showLog(error);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    deviceInfo: string = \"\";\r\n    /**\r\n     * 获取手机设备信息\r\n     *  \r\n     */\r\n    private getDeviceInfo() {\r\n        try {\r\n            this.deviceInfo = jsb.reflection.callStaticMethod(this.jniClassName, \"getDeviceInfo\", \"()Ljava/lang/String;\");\r\n            utils.showLog(\"获取原生平台手机设备信息：\" + this.deviceInfo);\r\n        } catch (error) {\r\n            utils.showLog(error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 跳转原生平台的更多游戏\r\n     */\r\n    public showMoreGames() {\r\n        if (PlatUtils.IsNativeAndroid) {\r\n            utils.showLog(\"AdAgentNative showMoreGame\");\r\n            try {\r\n                jsb.reflection.callStaticMethod(this.jniClassName, \"showNativeMoreGame\", \"()V\");\r\n            } catch (error) {\r\n                cc.log(error);\r\n            }\r\n        }\r\n    }\r\n\r\n    _loadConfig() {\r\n        if (PlatUtils.IsNativeAndroid) {\r\n            let method: string = \"m=g\" + `&device_data=${encodeURI(this.deviceInfo)}&real_name_auth=${utils.getRealNameAuthLocalData()}`;\r\n\r\n            this.commomHttpRequest(ST_ServerUrl + method, (ret, data) => {\r\n                this._curloadTimes++;\r\n                let recall: boolean = false;\r\n                if (ret) {\r\n                    utils.showLog(\"原生安卓服务器配置数据获取成功: data = \" + data);\r\n                    if (data) {\r\n                        let result = JSON.parse(data);\r\n                        if (result) {\r\n                            if (!utils.DebugLoacalConfig) {\r\n                                this._serverConfig = result;\r\n                                if (this._serverConfig.is_show_log_view && this._serverConfig.is_show_log_view == \"true\") {\r\n                                    utils.showLogView = true;\r\n                                }\r\n                                if (result.more_game_type) {\r\n                                    this.moreGameShowType = result.more_game_type;\r\n                                }\r\n\r\n                                if (result.show_game_exit_dialog) {\r\n                                    this.showGameExitDialogType = result.show_game_exit_dialog;\r\n                                }\r\n                            } else {\r\n                                utils.showLog(\"开启了本地数据测试，使用本地配置!\");\r\n                            }\r\n                        } else {\r\n                            utils.showLog(\"原生安卓服务器配置数据不是合法的JSON数据, 使用本地配置!\");\r\n                        }\r\n                    }\r\n                } else {\r\n                    utils.showLog(\"原生安卓服务器配置数据获取失败！\");\r\n                    if (this._curloadTimes < this._reloadTimes) {\r\n                        utils.showLog(\"请求异常，重新拉取配置!\");\r\n                        recall = true;\r\n                    }\r\n                }\r\n                if (!this._serverConfig) {\r\n                    this._serverConfig = JSON.parse(ST_DefaultServerConfig);\r\n                } else {\r\n                    if (this._serverConfig.is_local_pos_id\r\n                        && this._serverConfig.is_local_pos_id == \"false\") {\r\n                        // 使用服务器下发的广告id\r\n                        utils.showLog(\"使用服务器下发的广告id\");\r\n                    } else {\r\n                        utils.showLog(\"使用本地配置的广告ID\");\r\n                    }\r\n                }\r\n\r\n                if (recall) {\r\n                    this._loadConfig();\r\n                } else if (!recall || this._curloadTimes >= this._reloadTimes) {\r\n                    this.setLocalConfig(JSON.stringify(this._serverConfig));\r\n                    utils.emitServerInitEvent();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    _reloadTimes: number = 6;\r\n    _curloadTimes: number = 0;\r\n    /**\r\n     * 通用http请求，只封装了GET请求\r\n     * @param url 请求的url地址\r\n     * @param callback Function(ret:boolean, data:string) \r\n     * 请求结束回调，成功ret为true, data为返回的数据string。 失败为ret为false, data为空 \r\n     */\r\n    private commomHttpRequest(url: string, callback: Function) {\r\n        if (!utils._isConfigInit) {\r\n            utils.showLog(\"warn:\" + \"本地数据未初始化!\");\r\n            return;\r\n        }\r\n\r\n        let completeCallback = callback;\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.timeout = 6000;    // 单位毫秒\r\n        let requestUrl: string = url + `&kyx=false&app_id=${utils.config.nativeAndroidConfig.appID}&channel=${utils.config.nativeAndroidConfig.channel}&device_uid=${utils.Tool_Native.uid}&uid=${utils.Tool_Native.serviceId}&game_type=2&time_stamp=${(new Date()).getTime()}&game_version=${utils.config.nativeAndroidConfig.version}&reqv=${YZ_Constant.SERVER_VERSION}`\r\n        utils.showLog(\"服务器地址:\" + requestUrl);\r\n        xhr.open('POST', requestUrl);\r\n        xhr.send(`app_list=${this.appList}`);\r\n        xhr.onreadystatechange = function () {\r\n            utils.showLog(\"请求状态改变, reaedyState=\", xhr.readyState, \"; status=\", xhr.status);\r\n            if (xhr.readyState == 4) {\r\n                if (xhr.status == 200) {\r\n                    if (completeCallback) {\r\n                        completeCallback(true, utils.aesDecrypt(xhr.responseText));\r\n                    }\r\n                } else {\r\n                    if (completeCallback) {\r\n                        completeCallback(false, \"\");\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (xhr.status != 200) {\r\n\r\n            }\r\n        }\r\n        xhr.ontimeout = function () {\r\n            utils.showLog(\"请求超时!\");\r\n            if (completeCallback) {\r\n                completeCallback(false, \"\");\r\n            }\r\n        }\r\n        xhr.onerror = function (err) {\r\n            if (completeCallback) {\r\n                completeCallback(false, \"\");\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 设置原生客户端数据数据\r\n     * @param data \r\n     */\r\n    private setLocalConfig(data: string) {\r\n        try {\r\n            utils.showLog(\"设置原生客户端数据数据\" + data);\r\n            jsb.reflection.callStaticMethod(this.jniClassName, \"setLocalConfig\", \"(Ljava/lang/String;)V\", data);\r\n        } catch (error) {\r\n            utils.showLog(error);\r\n        }\r\n\r\n    }\r\n\r\n\r\n    /**\r\n    * 获取原生客户端数据数据\r\n    * @param data \r\n    */\r\n    public getNativeData(): string {\r\n        let data = \"\";\r\n        try {\r\n            data = jsb.reflection.callStaticMethod(this.jniClassName, \"getLocalConfig\", \"()Ljava/lang/String;\");\r\n            utils.showLog(\"获取原生客户端数据数据 : \" + data);\r\n        } catch (error) {\r\n            utils.showLog(error);\r\n        }\r\n        return data;\r\n    }\r\n\r\n    /**\r\n    * \r\n    * @param id 跳转ID\r\n    * @param callback 跳转回调\r\n    */\r\n    public navigateToGame(jsonData: string, callback: Function, path?: string) {\r\n        if (PlatUtils.IsNativeAndroid) {\r\n            try {\r\n                jsb.reflection.callStaticMethod(this.jniClassName, \"navigateToGame\", \"(Ljava/lang/String;)V\", jsonData);\r\n            } catch (error) {\r\n                utils.showLog(error);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取JNI类名\r\n     */\r\n    public get jniClassName() {\r\n        if (this.className) return this.className;\r\n        try {\r\n            this.className = jsb.reflection.callStaticMethod(\"aa.b.c.a\", \"a\", \"()Ljava/lang/String;\");\r\n        } catch (error) {\r\n\r\n        }\r\n        return this.className;\r\n    }\r\n\r\n\r\n    /**\r\n    * 获取交叉推广数据\r\n    */\r\n    public getRecommondGameList() {\r\n        if (PlatUtils.IsNativeAndroid\r\n            && utils.Tool_Native\r\n            && utils.Tool_Native.ServerConfig) {\r\n            return utils.Tool_Native.ServerConfig.jump_list;\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    /**\r\n     * 上报关卡数据\r\n     * @param level 当前关卡ID\r\n     * @param levelName 关卡名称\r\n     * @param status 状态\r\n     */\r\n    public postLevel(level: string, status: LevelStatus, levelName?: string) {\r\n        if (PlatUtils.IsNativeAndroid) {\r\n            let method = \"m=rlevel\";\r\n            let url: string = POST_ServerUrl + method + `&level_id=${level}&level_name=${encodeURI(levelName)}&status=${status}`;\r\n            utils.commomHttpRequest(url, function (ret, data) {\r\n                if (ret) {\r\n                    utils.showLog(\"关卡数据上报成功！\");\r\n                    // if (status == LevelStatus.GameStart) {\r\n                    //     utils.showLog(\"配置数据获取成功: data = \" + data);\r\n                    //     if (data) {\r\n                    //         let result = JSON.parse(data);\r\n                    //         if (result) {\r\n                    //             let keys = Object.keys(result);\r\n                    //             for (let key in keys) {\r\n                    //                 this._serverConfig[key] = result[key];\r\n                    //                 utils.showLog(\"覆盖：#key=\" + key, \" #value=\", result[key]);\r\n                    //             }\r\n                    //         }\r\n                    //     }\r\n                    // } else {\r\n                    //     utils.showLog(\"OPPO服务器配置数据获取失败, 使用本地配置!\");\r\n                    // }\r\n                } else {\r\n                    utils.showLog(\"关卡数据上报失败！\");\r\n                }\r\n\r\n            }.bind(this));\r\n        }\r\n    }\r\n\r\n    /**\r\n   * 上报互推组件显示位置\r\n   * @param otherGameAppId 跳转的ID\r\n   * @param location 当前位置\r\n   * @param status 0:点击，1:跳转成功\r\n   */\r\n    public postRecommentShowData(location: string) {\r\n        if (PlatUtils.IsNativeAndroid) {\r\n            let method = \"m=rjumpshow\";\r\n            let url: string = ST_ServerUrl + method + `&location=${location}`;\r\n            utils.commomHttpRequest(url, function (ret, data) {\r\n                if (ret) {\r\n                    utils.showLog(\"上报互推组件显示位置成功！\");\r\n                } else {\r\n                    utils.showLog(\"上报互推组件显示位置失败！\");\r\n                }\r\n            }.bind(this));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 上报互推组件数据\r\n     * @param otherGameAppId 跳转的ID\r\n     * @param location 当前位置\r\n     * @param status 0:点击，1:跳转成功\r\n     */\r\n    public postDataByLocation(otherGameAppId: string, location: string, status: number = 0) {\r\n        if (PlatUtils.IsNativeAndroid) {\r\n            let method = \"m=rjump\";\r\n            let url: string = POST_ServerUrl + method + `&jump_app_id=${otherGameAppId}&location=${location}&status=${status}`\r\n\r\n            utils.commomHttpRequest(url, function (ret, data) {\r\n                if (ret) {\r\n                    utils.showLog(`数据上报成功`);\r\n                } else {\r\n                    utils.showLog(\"数据上报失败！\");\r\n                }\r\n            }.bind(this));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 上报自定义事件\r\n     * @param level 当前关卡ID\r\n     * @param levelName 关卡名称\r\n     * @param status 状态\r\n     */\r\n    public sendEvent(eventName: string) {\r\n        if (PlatUtils.IsNativeAndroid) {\r\n            let method = \"m=revent\";\r\n            let url: string = POST_ServerUrl + method + `&event=${encodeURI(eventName)}`;\r\n            utils.commomHttpRequest(url, function (ret, data) {\r\n                if (ret) {\r\n                    utils.showLog(\"上报自定义事件成功！\");\r\n                } else {\r\n                    utils.showLog(\"上报自定义事件失败！\");\r\n                }\r\n            }.bind(this));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 上报自定义事件\r\n     * @param level 当前关卡ID\r\n     * @param levelName 关卡名称\r\n     * @param status 状态\r\n     */\r\n    public sendEventNew(eventName: string, eventId: string = \"default\", eventData?: string, isCallBack: boolean = true) {\r\n        if (PlatUtils.IsNativeAndroid) {\r\n            let method = \"m=reventv2\";\r\n            let url: string = POST_ServerUrl + method + `&event=${encodeURI(eventName)}&event_id=${eventId}`;\r\n            if (eventData) {\r\n                url += `&event_data=${encodeURI(eventData)}`\r\n            }\r\n            utils.showLog(\"自定义事件上报URL：\" + url);\r\n            utils.commomHttpRequest(url, (ret, data) => {\r\n                if (ret) {\r\n                    utils.showLog(\"上报自定义事件成功！\");\r\n                    isCallBack && this.callBackToEvent(data);\r\n                } else {\r\n                    utils.showLog(\"上报自定义事件失败！\");\r\n                    isCallBack && this.callBackToEvent(\"false\");\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n   * 上报自定义事件\r\n   * @param level 当前关卡ID\r\n   * @param levelName 关卡名称\r\n   * @param status 状态\r\n   */\r\n    public sendEventV3(eventName: string, eventId: string = \"default\", eventData?: string) {\r\n        if (PlatUtils.IsNativeAndroid) {\r\n            let method = \"m=reventv2\";\r\n            let url: string = POST_ServerUrl + method + `&event=${encodeURI(eventName)}&event_id=${eventId}`;\r\n            if (eventData) {\r\n                url += `&event_data=${encodeURI(eventData)}`\r\n            }\r\n            utils.commomHttpRequest(url, (ret, data) => {\r\n                if (ret) {\r\n                    utils.showLog(\"上报自定义事件成功！\");\r\n                    this.callBackToEvent(data);\r\n                } else {\r\n                    utils.showLog(\"上报自定义事件失败！\");\r\n                    this.callBackToEvent(\"false\");\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 返回事件上报的结果给安卓端\r\n     * @param result \r\n     */\r\n    public callBackToEvent(result: string) {\r\n        if (PlatUtils.IsNativeAndroid) {\r\n            //@ts-ignore\r\n            try {\r\n                jsb.reflection.callStaticMethod(this.jniClassName, \"callBackToEvent\", \"(Ljava/lang/String;)V\", result);\r\n            } catch (error) {\r\n                utils.showLog(error);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    /**\r\n      * 弹出提示框\r\n      * @param msg 消息\r\n      */\r\n    public showToast(msg: string) {\r\n        if (PlatUtils.IsNativeAndroid) {\r\n            //@ts-ignore\r\n            try {\r\n                jsb.reflection.callStaticMethod(this.jniClassName, \"showToast\", \"(Ljava/lang/String;)V\", msg);\r\n            } catch (error) {\r\n                utils.showLog(error);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 显示隐私协议页面\r\n     */\r\n    public showPrivacyAgreement() {\r\n        try {\r\n            //@ts-ignore\r\n            jsb.reflection.callStaticMethod(this.jniClassName, \"showPrivacyAgreement\", \"()V\");\r\n        } catch (error) {\r\n            utils.showLog(error);\r\n        }\r\n    }\r\n\r\n    public showRealNameAuthPanel(parmes: string) {\r\n        try {\r\n            //@ts-ignore\r\n            jsb.reflection.callStaticMethod(this.jniClassName, \"showRealNameAuthPanel\", \"(Ljava/lang/String;)V\", parmes);\r\n        } catch (error) {\r\n            utils.showLog(error);\r\n        }\r\n    }\r\n\r\n    public realNameAuthResult(parmes: string) {\r\n        try {\r\n            //@ts-ignore\r\n            jsb.reflection.callStaticMethod(this.jniClassName, \"realNameAuthResult\", \"(Ljava/lang/String;)V\", parmes);\r\n        } catch (error) {\r\n            utils.showLog(error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 实名认证\r\n     */\r\n    public realNameAuth(code: string, name: string, callBack: Function) {\r\n        if (!utils._isConfigInit) {\r\n            utils.showLog(\"warn:\" + \"本地数据未初始化!\");\r\n            return;\r\n        }\r\n        let method: string = \"m=realNameAuth\"\r\n        let completeCallback = callBack;\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.timeout = 15000;    // 单位毫秒\r\n        let requestUrl: string = \"https://apps.youlesp.com/gss?\" + method + `&time_stamp=${(new Date()).getTime()}`;\r\n        let data: any = {};\r\n        data.kyx = false;\r\n        data.app_id = utils.config.nativeAndroidConfig.appID;\r\n        data.channel = utils.config.nativeAndroidConfig.channel;\r\n        data.device_uid = utils.Tool_Native.uid;\r\n        data.uid = utils.Tool_Native.serviceId;\r\n        data.game_type = 2;\r\n        data.device_data = this.deviceInfo;\r\n        data.game_version = utils.config.nativeAndroidConfig.version;\r\n        data.reqv = YZ_Constant.SERVER_VERSION;\r\n        data.app_list = this.appList;\r\n        data.id_card = code;\r\n        data.real_name = name;\r\n\r\n\r\n\r\n        utils.showLog(\"服务器地址:\" + requestUrl);\r\n        utils.showLog(\"请求参数:\" + JSON.stringify(data));\r\n\r\n        let requestData = JSON.stringify(data);\r\n        xhr.open('POST', requestUrl);\r\n        xhr.send(\"json_data=\" + utils.aesEncrypt(requestData));\r\n        utils.showLog(\"json_data=:\" + utils.aesEncrypt(requestData));\r\n\r\n        xhr.onreadystatechange = function () {\r\n            utils.showLog(\"请求状态改变, reaedyState=\", xhr.readyState, \"; status=\", xhr.status);\r\n            if (xhr.readyState == 4) {\r\n                if (xhr.status == 200) {\r\n                    if (completeCallback) {\r\n                        completeCallback(true, utils.aesDecrypt(xhr.responseText));\r\n                    }\r\n                } else {\r\n                    if (completeCallback) {\r\n                        completeCallback(false, \"\");\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (xhr.status != 200) {\r\n\r\n            }\r\n        }\r\n        xhr.ontimeout = function () {\r\n            utils.showLog(\"请求超时!\");\r\n            if (completeCallback) {\r\n                completeCallback(false, \"\");\r\n            }\r\n        }\r\n        xhr.onerror = function (err) {\r\n            if (completeCallback) {\r\n                completeCallback(false, \"\");\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n      * 友盟游戏开始上报\r\n      * @param levelID \r\n      */\r\n    public umaOnStart(levelID: string) {\r\n        if (!this.checkUmeng()) return;\r\n\r\n        this.umaTrackEvent(\"level\", \"um_plus_game_level\", {\r\n            game_level: levelID,//该字段名称不可修改，必传\r\n            game_states: `0`\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @returns 是否开启友盟 \r\n     */\r\n    private checkUmeng(): boolean {\r\n        // if (!utils.config.oppoconfig.umengId) {\r\n        //     return false;\r\n        // }\r\n        return true;\r\n    }\r\n    /**\r\n     * 友盟结算上报\r\n     * @param levelID 关卡id\r\n     * @param stageId \r\n     * @param event \r\n     */\r\n    public umaReportedLevel(levelID: string, event: LevelStatus) {\r\n        if (!this.checkUmeng()) return;\r\n        let status = 1;\r\n        if (event == LevelStatus.GameFail) {\r\n            status = -1;\r\n        }\r\n        this.umaTrackEvent(\"level\", \"um_plus_game_level\", {\r\n            game_level: levelID,//该字段名称不可修改，必传\r\n            game_states: `${status}`\r\n        })\r\n    }\r\n\r\n\r\n    /**\r\n     * 友盟自定义事件\r\n     * @param eventId 事件ID，注意：事件ID必须要在后台配置\r\n     * @param params 事件内容\r\n     */\r\n    public umaTrackEvent(eventType: string = \"custom\", eventId: string, params?) {\r\n        if (!this.checkUmeng()) return;\r\n        try {\r\n            if (params) {\r\n                params = JSON.stringify(params);\r\n            }\r\n            //@ts-ignore\r\n            jsb.reflection.callStaticMethod(this.jniClassName, \"umaTrackEvent\", \"(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V\", eventType, eventId, params);\r\n        } catch (error) {\r\n            utils.showLog(error);\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n"]}