{"version":3,"sources":["assets\\common-plugin\\Scripts\\LuckBoxPannel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { utils } from \"./Utils\";\nimport { BannerLocation, ViewLocation, YZ_Reward } from \"./YZ_Constant\";\nimport AldUtils from \"./AldUtils\";\nimport PlatUtils from \"./PlatUtils\";\n\n\nconst { ccclass, property } = cc._decorator;\n\n\n/**\n * 五倍奖励宝箱\n */\n@ccclass\nexport default class LuckBoxPanel extends cc.Component {\n\n\n    @property(cc.Node)\n    showVideoBtn: cc.Node = null\n\n    @property(cc.Node)\n    clickBtn: cc.Node = null\n\n    @property(cc.Label)\n    btnLabel: cc.Label = null\n\n    @property(cc.Node)\n    panel: cc.Node = null\n\n    @property(cc.Node)\n    videoIcon: cc.Node = null\n\n    @property(cc.ProgressBar)\n    progressBar: cc.ProgressBar = null;\n\n    @property(cc.Node)\n    boxNode: cc.Node = null;\n\n\n    /**\n     * 奖励回调\n     */\n    rewardCallFunc: Function = null;\n\n    /**\n     * 奖励值\n     */\n    rewardValue: number = 0;\n\n    //幸运宝箱显示的广告类型\n    _luck_box_ad_type: string = \"1\";\n    //跳过按钮延迟显示时间\n    _delay_show_btn_time: number = 0;\n\n    //幸运宝箱开始回退的时间\n    _luck_box_progressbar_back_time: number = 1000;\n\n    /**\n     * 展示广告的进度条百分比\n     */\n    _showAdProgress: number = 0.8;\n\n\n\n    onLoad() {\n        if (utils.otherConfig && utils.otherConfig.group) {\n            this.node.group = utils.otherConfig.group;\n        }\n\n\n        this.rewardCallFunc = utils.rewardCallFunc;\n\n        this.rewardValue = utils.rewardValue;\n\n        this.panel.scale = 0;\n\n        utils.SendEvent(\"幸运宝箱-显示成功！\");\n\n        this.clickBtn.on(cc.Node.EventType.TOUCH_CANCEL, this.clickBtnTouchCancel.bind(this));\n        this.clickBtn.on(cc.Node.EventType.TOUCH_END, this.clickBtnTouchCancel.bind(this));\n\n        this.progressBar.progress = 0;\n\n\n\n        this.btnLabel.node.opacity = 0;\n        this.btnLabel.node.active = false;\n\n\n        utils.luckBoxShowCount++;\n        let adTypes = utils.ServerConfig.luck_box_ad_type ? utils.ServerConfig.luck_box_ad_type.split(\",\") : this._luck_box_ad_type;\n        let closeBtnShowDelays = utils.ServerConfig.luck_box_close_btn_show_delay ? utils.ServerConfig.luck_box_close_btn_show_delay.split(\",\") : this._delay_show_btn_time;\n        let progressbarBackTimes = utils.ServerConfig.luck_box_progressbar_back_time ? utils.ServerConfig.luck_box_progressbar_back_time.split(\",\") : this._luck_box_progressbar_back_time;\n        if (utils.luckBoxShowCount > adTypes.length - 1) {\n            utils.luckBoxShowCount = 0;\n        }\n\n\n        utils.showLog(`幸运宝箱显示次数：${utils.luckBoxShowCount}`);\n        this._luck_box_ad_type = adTypes[utils.luckBoxShowCount];\n        this._delay_show_btn_time = closeBtnShowDelays[utils.luckBoxShowCount];\n        this._luck_box_progressbar_back_time = progressbarBackTimes[utils.luckBoxShowCount];\n\n\n        if (utils.ServerConfig.luck_box_show_ad_progress_percent) {\n            let showAdProPercents = utils.ServerConfig.luck_box_show_ad_progress_percent.split(\",\");\n            this._showAdProgress = showAdProPercents[utils.luckBoxShowCount];\n        } else {\n            switch (this._luck_box_ad_type) {\n                case \"1\":\n                case \"5\":\n                    this._showAdProgress = 0.45;\n                    break;\n                case \"2\":\n                    this._showAdProgress = 0.3;\n                    break\n                case \"3\":\n                    //插屏点击进度超过0.3就调用广告\n                    this._showAdProgress = 0.85;\n                    break\n                case \"4\":\n                    this._showAdProgress = 0.85;\n                    break;\n                default:\n                    this._showAdProgress = 0.45;\n                    break;\n            }\n        }\n        utils.showLog(`幸运宝箱显示类型：${this._luck_box_ad_type} #showBtnTime=${this._delay_show_btn_time} #progressbarBackTime=${this._luck_box_progressbar_back_time}`);\n\n\n\n\n\n        if (this._luck_box_ad_type != \"4\") {\n            this.scheduleOnce(() => {\n                if (this.btnLabel.node && cc.isValid(this.btnLabel.node)) {\n                    this.btnLabel.node.active = true;\n                    this.btnLabel.node.runAction(cc.fadeIn(0.3));\n                }\n            }, this._delay_show_btn_time);\n        }\n\n\n        if (utils.ServerConfig.luck_box_video_icon_is_show && utils.ServerConfig.luck_box_video_icon_is_show == \"true\") {\n            this.videoIcon.active = true;\n        } else {\n            this.videoIcon.active = false;\n        }\n\n\n\n\n\n        if (this._luck_box_ad_type == \"1\") {\n            utils.adManager.HideBanner(BannerLocation.Game);\n\n            if (PlatUtils.IsIOS && PlatUtils.IsQQ) {\n                this.scheduleOnce(() => {\n                    if (this.clickBtn && cc.isValid(this.clickBtn)) {\n                        this.clickBtn.setPosition(this.clickBtn.x, this.progressBar.node.position.y - 200);\n                    }\n                }, 10)\n            }\n        } else {\n            this.clickBtn.getComponent(cc.Widget).isAlignBottom = false;\n            this.clickBtn.getComponent(cc.Widget).updateAlignment();\n            this.clickBtn.setPosition(this.clickBtn.x, this.progressBar.node.position.y - 200);\n        }\n\n\n        // this.boxNode.runAction(cc.sequence(cc.scaleTo(1, 1.3).easing(cc.easeElasticIn(1.0)), cc.scaleTo(1, 1).easing(cc.easeElasticOut(3.0)), cc.delayTime(1)).repeatForever())\n    }\n\n\n    _openSlowDown: boolean = false;\n    _timetaskId: number = 0;\n    _cancelSlowDown: boolean = false;\n    clickBtnTouchCancel() {\n        clearTimeout(this._timetaskId);\n        this._timetaskId = setTimeout(() => {\n            this._openSlowDown = true;\n        }, this._luck_box_progressbar_back_time * 1000);\n    }\n\n\n    _slowDownSpeed: number = 0.2;\n    update(dt) {\n        if (this.progressBar.progress > 0 && this.progressBar.progress < 1 && this._openSlowDown && !this._cancelSlowDown) {\n            this.progressBar.progress -= dt * this._slowDownSpeed;\n            if (this.progressBar.progress <= 0) {\n                this.progressBar.progress = 0;\n            }\n        }\n    }\n\n    onEnable() {\n        let ratio: number = 1;\n        if (cc.winSize.height < cc.winSize.width) {\n            // 横屏游戏\n            ratio = cc.winSize.width / 1920 * 0.6;\n        } else {\n            ratio = cc.winSize.width / 1080;\n        }\n        this.panel.scale = ratio;\n    }\n\n\n    onDestroy() {\n        utils.adManager.HideBanner(BannerLocation.Game)\n        utils.hideRecommendGamesBanner();\n        if (utils.rewardLuckBoxPanelCloseFunc) {\n            utils.rewardLuckBoxPanelCloseFunc();\n            utils.rewardBoxPanelCloseFunc = null;\n        } else {\n            utils.rewardCloseFunc && utils.rewardCloseFunc();\n            utils.rewardCloseFunc = null;\n        }\n    }\n\n    onClose() {\n        this.panel.runAction(cc.sequence(cc.scaleTo(0.3, 0).easing(cc.easeBackIn()), cc.callFunc(() => {\n            this.node.destroy();\n        })));\n    }\n\n\n    _progresss: number = 0;\n    _totalProgress: number = 5;\n    _isShowAd: boolean = false;\n    _videoIsPlay: boolean = false;\n    /**\n     * 狂点\n     */\n    onBtnClick() {\n        this._openSlowDown = false;\n        if (this.progressBar.progress < 1) {\n            this.progressBar.progress += 0.10;\n            if (this.progressBar.progress >= 1) {\n                this.progressBar.progress = 1;\n                this.openLuckBox();\n            }\n        }\n        if (this.videoIcon.active && !this._videoIsPlay) {\n            this._videoIsPlay = true;\n            utils.adManager.ShowVideo((res, msg) => {\n                if (PlatUtils.IsDouyin) {\n                    if (res) {\n                        utils.showMsg(\"获得奖励! +\" + this.rewardValue);\n                        let result: YZ_Reward = new YZ_Reward();\n                        result.rewardValue = this.rewardValue;\n                        if (this.rewardCallFunc) {\n                            this.rewardCallFunc(result);\n                        }\n                        this.onClose();\n                    } else {\n                        this._videoIsPlay = false;\n                        utils.showMsg(msg ? msg : \"视频加载失败！\");\n                    }\n                } else {\n                    utils.showMsg(\"获得奖励! +\" + this.rewardValue);\n                    let result: YZ_Reward = new YZ_Reward();\n                    result.rewardValue = this.rewardValue;\n                    if (this.rewardCallFunc) {\n                        this.rewardCallFunc(result);\n                    }\n                    this.onClose();\n                }\n            });\n        }\n\n\n\n\n        if (this.progressBar.progress >= this._showAdProgress && !this._isShowAd) {\n            this._isShowAd = true;\n\n            //1、banner（默认） 2、插屏 3、盒子广告 4、视频广告 \n            switch (this._luck_box_ad_type) {\n                case \"1\":\n                    utils.showLog(\"服务器配置幸运宝箱展示-banner广告！\");\n                    utils.adManager.ShowBanner(BannerLocation.Game);\n                    setTimeout(() => {\n                        if (this.clickBtn && cc.isValid(this.clickBtn)) {\n                            this.clickBtn.setPosition(this.clickBtn.x, this.progressBar.node.position.y - 200);\n                        }\n                    }, 900)\n                    break;\n                case \"2\":\n                    utils.showLog(\"服务器配置幸运宝箱展示-插屏广告！\");\n                    utils.adManager.ShowInterstitial();\n                    break;\n                case \"3\":\n                    utils.showLog(\"服务器配置幸运宝箱展示-盒子广告！\");\n                    utils.adManager.ShowAppBox();\n                    break\n                case \"4\":\n                    utils.showLog(\"服务器配置幸运宝箱展示-视频广告！\");\n                    // this.progressBar.progress = 1;\n                    this.videoIcon.active = true;\n                    // cc.find(\"Background/clickTxt\", this.clickBtn).active = false;\n                    // cc.find(\"Background/btn_ok\", this.clickBtn).active = true;\n                    this._cancelSlowDown = true;\n                    this.scheduleOnce(() => {\n                        if (this.btnLabel.node && cc.isValid(this.btnLabel.node)) {\n                            this.btnLabel.node.active = true;\n                            this.btnLabel.node.runAction(cc.fadeIn(0.3));\n                        }\n                    }, this._delay_show_btn_time);\n                    break;\n                case \"5\":\n                    utils.showLog(\"服务器配置幸运宝箱展示-互推banner广告！\");\n                    utils.showRecommendGamesBanner();\n                    break;\n                default:\n                    utils.showLog(\"服务器配置幸运宝箱展示banner广告！\");\n                    utils.adManager.ShowBanner(BannerLocation.Game);\n                    setTimeout(() => {\n                        if (this.clickBtn && cc.isValid(this.clickBtn)) {\n                            this.clickBtn.setPosition(this.clickBtn.x, this.progressBar.node.position.y - 200);\n                        }\n                    }, 500)\n                    break;\n            }\n        }\n    }\n\n    /**\n     * 打开宝箱\n     */\n    openLuckBox() {\n        if (utils.ServerConfig.luck_box_play_video == \"true\") {\n            this.onPlayVideo();\n            this.onClose();\n        } else {\n            utils.showMsg(\"获得奖励! +\" + this.rewardValue);\n            let result: YZ_Reward = new YZ_Reward();\n            result.rewardValue = this.rewardValue;\n            if (this.rewardCallFunc) {\n                this.rewardCallFunc(result);\n            }\n            this.onClose();\n        }\n    }\n\n    onHideBtn() {\n        this.onClose();\n    }\n\n\n    onPlayVideo() {\n        utils.adManager.ShowVideo((ret, msg) => {\n            if (ret) {\n                utils.showMsg(\"获得奖励! +\" + this.rewardValue);\n                this.rewardValue = this.rewardValue;\n                AldUtils.SendEvent(\"幸运宝箱-获取奖励成功！\");\n            } else {\n                utils.showMsg(\"获得奖励! +\" + this.rewardValue);\n                AldUtils.SendEvent(\"幸运宝箱-视频播放失败！\");\n            }\n            let result: YZ_Reward = new YZ_Reward();\n            result.rewardValue = this.rewardValue;\n            if (this.rewardCallFunc) {\n                this.rewardCallFunc(result);\n            }\n            this.onClose();\n        })\n    }\n\n\n}\n"]}