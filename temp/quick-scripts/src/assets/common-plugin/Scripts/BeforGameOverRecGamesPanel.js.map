{"version":3,"sources":["assets\\common-plugin\\Scripts\\BeforGameOverRecGamesPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import GameItem from \"./GameItem\";\r\nimport { utils } from \"./Utils\";\r\nimport { BannerLocation, SubLocation } from \"./YZ_Constant\";\r\nimport PlatUtils from \"./PlatUtils\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BeforGameOverRecGamesPanel extends cc.Component {\r\n\r\n    _panel: cc.Node = null;\r\n    _gameList: cc.Node = null;\r\n    _originScale: number = 1;\r\n\r\n    _gameItems: GameItem[] = [];\r\n    _jumpList: any = null;\r\n    _dataDirty: boolean = false;\r\n    _is_Horizontal: boolean = false;\r\n\r\n    _closeBtnRight: cc.Node = null;\r\n    _closeBtnLine: cc.Node = null;\r\n\r\n    _star: cc.Node = null;\r\n    private gameItemNode: cc.Node = null;\r\n\r\n    _location: SubLocation = SubLocation.isMoreGame;\r\n\r\n    onLoad() {\r\n        if (utils.otherConfig && utils.otherConfig.group) {\r\n            this.node.group = utils.otherConfig.group;\r\n        }\r\n\r\n        if (!PlatUtils.IsNativeAndroid) {\r\n            utils.adManager.HideBanner(BannerLocation.Home);\r\n        }\r\n\r\n        this._panel = this.node.getChildByName(\"Panel\");\r\n\r\n\r\n        this.node.active = false;\r\n\r\n\r\n        let ratio: number = 1;\r\n        if (cc.winSize.height < cc.winSize.width) {\r\n            // 横屏游戏\r\n            ratio = cc.winSize.width / 1920;\r\n            this._is_Horizontal = true;\r\n        } else {\r\n            ratio = cc.winSize.width / 1080;\r\n        }\r\n\r\n        if (this._is_Horizontal) {\r\n            this._panel.getChildByName(\"VGameScrollView\").active = false\r\n            this._panel.getChildByName(\"VHead\").active = false\r\n            this._gameList = this._panel.getChildByName(\"HGameScrollView\").getComponent(cc.ScrollView).content;\r\n            this.gameItemNode = this._gameList.children[0];\r\n            this._gameList.removeAllChildren();\r\n\r\n        } else {\r\n            this._panel.getChildByName(\"HGameScrollView\").active = false;\r\n            this._panel.getChildByName(\"HHead\").active = false\r\n            this._gameList = this._panel.getChildByName(\"VGameScrollView\").getComponent(cc.ScrollView).content;\r\n            this.gameItemNode = this._gameList.children[0];\r\n            this._gameList.removeAllChildren();\r\n        }\r\n\r\n\r\n        this._panel.scale = ratio;\r\n        this._originScale = this._panel.scale;\r\n    }\r\n\r\n\r\n    private _initWidget() {\r\n        this.scheduleOnce(() => {\r\n            this._gameList.removeAllChildren();\r\n            let clo = this._is_Horizontal ? 7 : 4;\r\n            let totalRow = Math.floor(this._jumpList.length / clo);\r\n            let totalClo = clo * totalRow;\r\n            for (let i = 0; i < totalClo; i++) {\r\n                let data: any = this._jumpList[i];\r\n                if (data && data.logo) {\r\n                    let tempNode = cc.instantiate(this.gameItemNode);\r\n                    let gameItem: GameItem = tempNode.getComponent(\"GameItem\");\r\n                    gameItem.init(data, this._location);\r\n                    this._gameList.addChild(tempNode);\r\n                }\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    update() {\r\n        if (this._dataDirty) {\r\n            this._dataDirty = false;\r\n            this._updatePanel();\r\n        }\r\n    }\r\n\r\n    _updatePanel() {\r\n        utils.postRecommentShowData(this._location);\r\n        this._initWidget();\r\n        return;\r\n    }\r\n\r\n    public init(jumpList: any) {\r\n        this._jumpList = jumpList;\r\n        this._dataDirty = true;\r\n    }\r\n\r\n    public show() {\r\n        this.node.active = true;\r\n    }\r\n\r\n    public hide() {\r\n        let self = this;\r\n        self.node.active = false;\r\n\r\n\r\n        if (utils.rewardRecGamePanelCloseFunc) {\r\n            utils.rewardRecGamePanelCloseFunc();\r\n            utils.rewardRecGamePanelCloseFunc = null;;\r\n        } else {\r\n            utils.rewardCloseFunc && utils.rewardCloseFunc();\r\n            utils.rewardCloseFunc = null;\r\n        }\r\n    }\r\n\r\n    public onCloseBtnHandler(event: any, data: any) {\r\n        this.hide();\r\n    }\r\n}\r\n"]}