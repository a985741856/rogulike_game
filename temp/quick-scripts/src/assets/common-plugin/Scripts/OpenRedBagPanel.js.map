{"version":3,"sources":["assets\\common-plugin\\Scripts\\OpenRedBagPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { utils } from \"./Utils\";\r\nimport { BannerLocation, SubLocation } from \"./YZ_Constant\";\r\nimport PlatUtils from \"./PlatUtils\";\r\nimport { YzRedBagInfo } from \"./CommonConfig\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n\r\n@ccclass\r\nexport default class OpenRedBagPanel extends cc.Component {\r\n\r\n    private _panel: cc.Node = null;\r\n    private _moneyLbl: cc.Label = null;\r\n    private _totalMoneyLbl: cc.Label = null;\r\n    private _openPanel: cc.Node = null;\r\n    private _rewardPanel: cc.Node = null;\r\n    private _btnOpen: cc.Node = null;\r\n\r\n    private _redBagInfo: YzRedBagInfo = null;\r\n\r\n    private _btnClose: cc.Node = null;\r\n\r\n    private _btnVideoOpen: cc.Node = null;\r\n\r\n    private _title: cc.Node = null;\r\n    private _btnDouble: cc.Node = null;\r\n\r\n    private _proInfo: any = null;\r\n\r\n    // _location: SubLocation = SubLocation.isMoreGame;\r\n\r\n    onLoad() {\r\n\r\n\r\n        if (utils.otherConfig && utils.otherConfig.group) {\r\n            this.node.group = utils.otherConfig.group;\r\n        }\r\n\r\n        if (!PlatUtils.IsNativeAndroid) {\r\n            utils.adManager.HideBanner(BannerLocation.Home);\r\n        }\r\n\r\n        this._panel = this.node.getChildByName(\"Panel\");\r\n        this._openPanel = this._panel.getChildByName(\"onOpenPanel\");\r\n\r\n        this._openPanel.setScale(0.5);\r\n        this._openPanel.runAction(cc.scaleTo(0.3, 1));\r\n\r\n\r\n        this._rewardPanel = this._panel.getChildByName(\"rewardPanel\");\r\n        this._btnOpen = this._openPanel.getChildByName(\"btnOpen\");\r\n        this._btnClose = this._panel.getChildByName(\"btnClose\");\r\n        this._btnVideoOpen = this._btnOpen.getChildByName(\"btn_openVideo\");\r\n        this._title = this._openPanel.getChildByName(\"title\");\r\n\r\n\r\n        this._totalMoneyLbl = this._rewardPanel.getChildByName(\"totalMoneyLabel\").getComponent(cc.Label);\r\n        this._moneyLbl = this._rewardPanel.getChildByName(\"moneyLbl\").getComponent(cc.Label);\r\n        this._btnDouble = this._rewardPanel.getChildByName(\"btnDouble\");\r\n        setTimeout(() => {\r\n            this._btnOpen.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(0.5, 1.2), cc.scaleTo(0.5, 1))));\r\n        }, 500);\r\n\r\n\r\n\r\n        this._redBagInfo = utils.yzRedBagInfo;\r\n        this._proInfo = utils.yzRedBagInfo.curProgressInfo;\r\n        let ratio: number = 1;\r\n        if (cc.winSize.height < cc.winSize.width) {\r\n            // 横屏游戏\r\n            ratio = cc.winSize.width / 1920 * 0.5;\r\n        } else {\r\n            ratio = cc.winSize.width / 1080;\r\n        }\r\n\r\n        this._panel.scale = ratio;\r\n        this.init();\r\n    }\r\n\r\n\r\n    _money: number = 0;\r\n    openRedBag() {\r\n\r\n        if (this._redBagInfo.progress < this._redBagInfo.totalProgress && !this._redBagInfo.isFreeRedBag && this._redBagInfo.freeRedBagCount <= 0) return;\r\n        this._btnClose.opacity = 0;\r\n        this._btnClose.active = true;\r\n        let timeout: number = utils.ServerConfig.red_bag_close_btn_show_delay ? utils.ServerConfig.red_bag_close_btn_show_delay : 0;\r\n        setTimeout(() => {\r\n            utils.showLog(\"拆红包关闭按钮延迟显示 \" + timeout + \"秒显示！\");\r\n            this._btnClose.runAction(cc.fadeIn(0.3));\r\n        }, timeout * 1000)\r\n\r\n        setTimeout(() => {\r\n            this._btnDouble.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(0.5, 1.2), cc.scaleTo(0.5, 1))));\r\n        }, 500);\r\n        if (this._canShowVideoOpen) {\r\n\r\n            utils.adManager.ShowVideo((res, msg) => {\r\n                if (res) {\r\n                    utils.SendEvent('拆红包弹窗-视频拆红包成功！');\r\n                    this.scheduleOnce(() => {\r\n                        this.showRedBag();\r\n                    })\r\n                } else {\r\n                    this._btnClose.runAction(cc.fadeIn(0.3));\r\n                    utils.SendEvent('拆红包弹窗-视频拆红包失败！');\r\n                    utils.showMsg(msg ? msg : \"视频加载失败！\");\r\n                }\r\n            })\r\n        } else {\r\n            this.showRedBag();\r\n        }\r\n    }\r\n\r\n    showRedBag() {\r\n        let money = 0;\r\n\r\n        let proInfo = this._proInfo;\r\n        cc.log(\"proInfo \", JSON.stringify(proInfo));\r\n        money = parseFloat((Math.random() * (proInfo.max_money - proInfo.min_money) + proInfo.min_money).toFixed(3));\r\n        cc.log(\"红包金额：\" + money);\r\n        // let max = this._redBagInfo.withdrawaMoneys[0];\r\n        // if (this._redBagInfo.balance <= 0) {\r\n        //     money = parseFloat((Math.random() * (max / 4)).toFixed(3));\r\n        // } else if (this._redBagInfo.balance <= (max / 2.8)) {\r\n        //     money = parseFloat((Math.random() * (max / 5)).toFixed(3));\r\n        // } else if (this._redBagInfo.balance >= (max - 1)) {\r\n        //     money = Math.random();\r\n        //     money = parseFloat((money * 0.01 + 0.001).toFixed(3))\r\n        // } else if (this._redBagInfo.balance >= max - 2) {\r\n        //     money = Math.random();\r\n        //     money = parseFloat((money * 0.01 + 0.001).toFixed(3))\r\n        // } else {\r\n        //     money = Math.random();\r\n        //     if (money > 0.1) {\r\n        //         money = parseFloat((money * 0.1).toFixed(3))\r\n        //     } else {\r\n        //         money = parseFloat(money.toFixed(3));\r\n        //     }\r\n        // }\r\n        // utils.SendEvent(\"拆红包弹窗-获得红包：\" + money + \"元\");\r\n        this._money = money;\r\n        this._redBagInfo.balance = parseFloat((this._redBagInfo.balance + money).toFixed(3));\r\n\r\n        if (this._redBagInfo.isFreeRedBag && this._show_type == 1) {\r\n            this._redBagInfo.lastOpenFreeRedBagTime = new Date().toDateString();\r\n        }\r\n\r\n        if (this._show_type == 2) {\r\n            this._redBagInfo.progress -= this._redBagInfo.totalProgress;\r\n        }\r\n\r\n        this._redBagInfo.totalMoney = parseFloat((this._redBagInfo.totalMoney + money).toFixed(3));\r\n\r\n\r\n        this._moneyLbl.string = `¥${money}元`\r\n        this._totalMoneyLbl.string = `累计获得现金${this._redBagInfo.totalMoney}元`\r\n        this._rewardPanel.scaleX = 0;\r\n        this._rewardPanel.active = true;\r\n        this._openPanel.runAction(cc.sequence(cc.scaleTo(0.3, 0, 1), cc.callFunc(() => {\r\n            this._openPanel.active = false;\r\n            this._rewardPanel.runAction(cc.sequence(cc.scaleTo(0.3, 1), cc.callFunc(() => {\r\n            })))\r\n        })))\r\n        if (utils.currentLevel > parseInt(this._redBagInfo.lastOpenLevel) && this._show_type == 2) {\r\n            this._redBagInfo.lastOpenLevel = utils.currentLevel.toString();\r\n        }\r\n\r\n\r\n    }\r\n\r\n    onBtnDoubleMoney(event, data) {\r\n        utils.SendEvent(\"拆红包弹窗-点击视频双倍领取\");\r\n        utils.adManager.ShowVideo((ret, msg) => {\r\n            if (ret) {\r\n                this._redBagInfo.balance = parseFloat((this._redBagInfo.balance + this._money).toFixed(3));\r\n                this._redBagInfo.totalMoney = parseFloat((this._redBagInfo.totalMoney + this._money).toFixed(3));\r\n\r\n                this._totalMoneyLbl.string = `累计获得现金${this._redBagInfo.totalMoney}元`\r\n                utils.showMsg(\"领取双倍红包成功！\");\r\n                utils.SendEvent(\"拆红包弹窗-视频双倍领取成功\");\r\n                event.target.active = false;\r\n            } else {\r\n                utils.showMsg(msg);\r\n                utils.SendEvent(\"拆红包弹窗-视频双倍领取失败\");\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    showWithDrawalPanel() {\r\n        utils.SendEvent(\"拆红包弹窗-点击提现上报\");\r\n        utils.showWithdrawalPanel();\r\n    }\r\n    // update() {\r\n    //     if (this._dataDirty) {\r\n    //         this._dataDirty = false;\r\n    //         this._updatePanel();\r\n    //     }\r\n    // }\r\n\r\n    _canShowVideoOpen: boolean = false;\r\n    public init() {\r\n        utils.SendEvent(\"拆红包弹窗-展示成功！\" + this._show_type + \" :\" + this._redBagInfo.isFreeRedBag);\r\n\r\n        this._title.children[0].active = this._show_type == 1 && this._redBagInfo.isFreeRedBag;\r\n        this._title.children[1].active = this._show_type == 2;\r\n        this._title.children[2].active = this._show_type == 3;\r\n\r\n        if (this._proInfo.type == 2 && this._show_type == 2) {\r\n            this._canShowVideoOpen = true;\r\n            this._btnVideoOpen.active = true;\r\n        } else {\r\n            this._canShowVideoOpen = false;\r\n            this._btnVideoOpen.active = false;\r\n        }\r\n\r\n        // utils.ServerConfig.red_bag_open_view_close_btn_show_delay = 1;\r\n        if (utils.ServerConfig.red_bag_open_view_close_btn_show_delay && utils.ServerConfig.red_bag_open_view_close_btn_show_delay > 0) {\r\n            this._btnClose.opacity = 0;\r\n            let timeout: number = utils.ServerConfig.red_bag_open_view_close_btn_show_delay ? utils.ServerConfig.red_bag_open_view_close_btn_show_delay : 0;\r\n            setTimeout(() => {\r\n                utils.showLog(\"拆红包关闭按钮延迟显示 \" + timeout + \"秒显示！\");\r\n                this._btnClose.runAction(cc.fadeIn(0.3));\r\n            }, timeout * 1000)\r\n        } else {\r\n            if (this._redBagInfo.progress < this._redBagInfo.totalProgress && !this._redBagInfo.isFreeRedBag && this._redBagInfo.freeRedBagCount <= 0) {\r\n                this._btnOpen.children[0].active = true;\r\n                this._btnOpen.children[1].getComponent(cc.Button).enableAutoGrayEffect = true;\r\n                this._btnClose.opacity = 0;\r\n                let timeout: number = utils.ServerConfig.red_bag_close_btn_show_delay ? utils.ServerConfig.red_bag_close_btn_show_delay : 0;\r\n                setTimeout(() => {\r\n                    utils.showLog(\"拆红包关闭按钮延迟显示 \" + timeout + \"秒显示！\");\r\n                    this._btnClose.runAction(cc.fadeIn(0.3));\r\n                }, timeout * 1000)\r\n            } else {\r\n                this._btnClose.active = false;\r\n            }\r\n        }\r\n\r\n        this._totalMoneyLbl.string = `累计获得现金${this._redBagInfo.totalMoney}元`;\r\n    }\r\n\r\n    _show_type: number = 1; // 1、每日红包 2、闯关红包 3、现金红包\r\n    initData(showType: number) {\r\n        this._show_type = showType;\r\n    }\r\n\r\n    public show() {\r\n        this.node.active = true;\r\n    }\r\n\r\n\r\n    public hide() {\r\n        // console.log(utils.rewardCloseFunc, \"<<callFUnc\");\r\n        // this._panel.runAction(cc.sequence(cc.moveTo(0.3, CompatibleTool.position(-this._panel.getContentSize().width, 0)).easing(cc.easeQuadraticActionOut()), cc.callFunc(() => {\r\n        this.node.active = false;\r\n        utils.rewardCloseFunc && utils.rewardCloseFunc();\r\n        if (utils.rewardCloseFunc) {\r\n            utils.rewardCloseFunc = null;\r\n        }\r\n        // })));\r\n        // if (!PlatUtils.IsNativeAndroid) {\r\n        //     utils.adManager.ShowBanner(BannerLocation.Home);\r\n        // }\r\n    }\r\n\r\n    public onCloseBtnHandler(event: any, data: any) {\r\n        this.hide();\r\n    }\r\n}\r\n"]}