{"version":3,"sources":["assets\\common-plugin\\Scripts\\YZ_StatementRecommentAd.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { utils } from \"./Utils\";\r\nimport QCrossWidgetItem from \"./QCrossWidgetItem\";\r\nimport AldUtils from \"./AldUtils\";\r\nimport PlatUtils from \"./PlatUtils\";\r\nimport YZ_NativeItem from \"./YZ_NativeItem\";\r\nimport { SubLocation, BannerLocation } from \"./YZ_Constant\";\r\nimport List from \"./List\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class YZ_StatementRecommentAd extends cc.Component {\r\n\r\n    private _jumpList: any = null;\r\n    private _items: QCrossWidgetItem[] = [];\r\n\r\n    listView: List = null;\r\n\r\n    _pageItem: cc.Node = null;\r\n    _pageRecItem: cc.Node = null;\r\n    _recListNode: cc.Node = null;\r\n\r\n    public nativeData: any = null;\r\n    private _nativeAd: cc.Node = null;\r\n    public showNativeAd: boolean = true; //是否显示原生广告\r\n    public yzItem: YZ_NativeItem = null;\r\n    _nativeIsShow: boolean = false;\r\n\r\n\r\n    onLoad() {\r\n        this._recListNode = this.node.getChildByName(\"RecList\");\r\n        this.listView = this._recListNode.getChildByName(\"ScrollView\").getComponent(List);\r\n        this._nativeAd = this.node.getChildByName(\"nativeAd\");\r\n        AldUtils.SendEvent(\"显示结算\b推荐组件\");\r\n    }\r\n\r\n    start() {\r\n\r\n        if (this.showNativeAd) {\r\n            this._recListNode.active = false;\r\n            this.yzItem = this._nativeAd.getComponent(\"YZ_NativeItem\");\r\n            this.yzItem.showType = 1;\r\n            utils.adManager.createNativeAd(null,this.yzItem);\r\n            utils.showLog(\"交叉推广调用原生广告《《《《《《《\");\r\n        } else {\r\n            this._recListNode.active = true;\r\n\r\n            this._jumpList = utils.getRecommondGameList();\r\n\r\n            if (this._jumpList && this._jumpList.length > 0) {\r\n                this._initWidget();\r\n                this.listView.numItems = this._jumpList.length;\r\n            } else {\r\n                cc.warn(\"交叉推广数据为null, 6元素交叉推广组件不显示!\");\r\n                this.node.destroy();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    hideLastNode() {\r\n        for (let i = 5; i > 2; i--) {\r\n            this._items[i].node.active = false;\r\n        }\r\n    }\r\n\r\n    update(dt) {\r\n        if (this.yzItem && this.yzItem.content && this.yzItem.content.active && !this._nativeIsShow) {\r\n            this._nativeIsShow = false;\r\n            this._recListNode.active = false;\r\n\r\n        }\r\n        if (this.autoScorll && !this.listView.scrollView.isScrolling()) {\r\n            this.listView.content.y += dt * 150;\r\n            this.listView._onScrolling();\r\n        }\r\n    }\r\n\r\n    onListRender(item: cc.Node, idx: number) {\r\n        let qcrossWidgetItem: QCrossWidgetItem = item.getComponent(\"QCrossWidgetItem\");\r\n        qcrossWidgetItem._location = SubLocation.isStatement;\r\n        qcrossWidgetItem.getComponent(\"QCrossWidgetItem\").init(this._jumpList[idx]);\r\n    }\r\n\r\n    autoScorll: boolean = false;\r\n    private _initWidget() {\r\n\r\n        if (utils.ServerConfig.st_recomment_is_hide_banner && utils.ServerConfig.st_recomment_is_hide_banner == \"true\") {\r\n            utils.showLog(\"服务器配置显示结算互推后隐藏banner >>>\");\r\n            utils.adManager.HideBanner(BannerLocation.Game);\r\n            utils.adManager.HideBanner(BannerLocation.Over);\r\n        }\r\n\r\n        this.scheduleOnce(() => {\r\n            this.autoScorll = true;\r\n        }, 1);\r\n        utils.postRecommentShowData(SubLocation.isStatement);\r\n    }\r\n\r\n\r\n}\r\n"]}