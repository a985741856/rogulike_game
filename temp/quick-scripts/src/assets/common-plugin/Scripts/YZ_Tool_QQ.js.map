{"version":3,"sources":["assets\\common-plugin\\Scripts\\YZ_Tool_QQ.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import PlatUtils from \"./PlatUtils\";\r\nimport { utils } from \"./Utils\";\r\nimport YZ_Constant, { LevelStatus } from \"./YZ_Constant\";\r\nimport YZ_LocalStorage from \"./YZ_LocalStorage\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nconst ST_ServerUrl: string = \"https://apps.youlesp.com/gss?\";\r\nconst POST_ServerUrl: string = \"https://report.youletd.com/gss?\";\r\n// 默认配置\r\nlet ST_DefaultServerConfig: string = \"\";\r\n\r\n@ccclass\r\nexport default class YZ_Tool_QQ {\r\n\r\n    /**\r\n   * 服务器配置信息\r\n   */\r\n    _serverConfig: any = null;\r\n    public get ServerConfig() {\r\n        return this._serverConfig;\r\n    }\r\n\r\n    _sysInfo: any = {};\r\n    public get SysInfo() {\r\n        return this._sysInfo;\r\n    }\r\n\r\n\r\n    // 桌面图标是否创建\r\n    _shortcutCreated: boolean = false;\r\n    public get ShortcutCreated() {\r\n        return this._shortcutCreated;\r\n    }\r\n\r\n    _shareCallback: Function = null;\r\n    _isShare: boolean = false;\r\n\r\n    //设备UID\r\n    _uid: string = \"0\";\r\n\r\n    /**\r\n     * 当前版本号\r\n     */\r\n    public gameVersion(): string {\r\n        return utils.config.qqconfig.version;\r\n    }\r\n\r\n    public get uid() {\r\n        // if (this._service_uid != \"0\") return this._uid;\r\n        // this._login();\r\n        return \"0\";\r\n    }\r\n\r\n    //服务器返回UID\r\n    _service_uid: string = \"0\";\r\n\r\n    /**\r\n     * 服务器返回UID\r\n     */\r\n    public get serviceId() {\r\n        if (this._service_uid != \"0\") return this._service_uid;\r\n        this.reportLogin();\r\n        return \"0\";\r\n    }\r\n\r\n\r\n    _loginTime: number = 0;\r\n    _loginInterval: number = 30;\r\n    async _login() {\r\n\r\n        let curTime: number = new Date().getTime();\r\n        let interval: number = (curTime - this._loginTime) / 1000;\r\n        if (interval > 0 && interval < 30) {\r\n            utils.showLog(`登录请求间隔小于：${this._loginInterval}秒`);\r\n            return;\r\n        }\r\n        this._loginTime = curTime;\r\n        let self = this;\r\n        utils.showLog(\"qq暂时不获取uid，uid全部为0\");\r\n        this._uid = \"0\";\r\n        // this.reportLogin();\r\n\r\n    }\r\n\r\n    _reportLoginTime: number = 0;\r\n    _reportLoginInterval: number = 30;\r\n    isReport: boolean = false;\r\n    /**\r\n     * 上报登录接口获取UID\r\n     */\r\n    reportLogin() {\r\n        if (this.isReport) return;\r\n        this.isReport = true;\r\n        let self = this;\r\n        let curTime: number = new Date().getTime();\r\n        let interval: number = (curTime - self._reportLoginTime) / 1000;\r\n        // utils.showLog(interval, \" <<<<<<,interval\", \" _reportLoginTime >>>\", self._reportLoginTime);\r\n        // console.log(curTime, curTime - self._reportLoginTime, interval)\r\n        if (interval > 0 && interval < 30) {\r\n            utils.showLog(`上报登录获取UID小于：${self._reportLoginInterval}秒`);\r\n            return;\r\n        }\r\n        self._reportLoginTime = curTime;\r\n        let method = \"m=login\";\r\n        let url: string = ST_ServerUrl + method + `&device_data=0`;\r\n\r\n        utils.commomHttpRequest(url, (ret, data) => {\r\n            if (ret) {\r\n                if (data) {\r\n                    let result = JSON.parse(data);\r\n                    utils.showLog(\"data=\" + data);\r\n                    utils.showLog(\"result=\" + result);\r\n                    utils.showLog(\"result.uid=\" + result.uid);\r\n                    if (result.uid) {\r\n                        self._service_uid = \"\" + result.uid;\r\n                        console.log(\"self._service_uid:\" + self._service_uid)\r\n                        utils.showLog(\"服务器请求登录成功! _service_uid=\" + self._service_uid);\r\n                        YZ_LocalStorage.setItem(YZ_Constant.ST_SERVICE_UID, self._service_uid);\r\n                    }\r\n                }\r\n            } else {\r\n                utils.showLog(\"获取数据失败1\");\r\n            }\r\n            this.isReport = false;\r\n        })\r\n    }\r\n    /**\r\n     * \r\n     * @param data 配置数据\r\n     */\r\n    public init(data: string) {\r\n        if (PlatUtils.IsQQ) {\r\n\r\n            if (data) {\r\n                let configObj: any = JSON.parse(data);\r\n                if (configObj && configObj.qq) {\r\n                    ST_DefaultServerConfig = JSON.stringify(configObj.qq);\r\n                }\r\n            }\r\n            this._service_uid = YZ_LocalStorage.getItem(YZ_Constant.ST_SERVICE_UID);\r\n            this._service_uid = this._service_uid ? this._service_uid : \"0\";\r\n\r\n            try {\r\n                //@ts-ignore\r\n                this._sysInfo = qq.getSystemInfoSync()\r\n                utils.showLog(\"QQ 小游戏平台信息: \", JSON.stringify(this.SysInfo));\r\n            } catch (e) {\r\n                utils.showLog(\"QQ 小游戏平台数据获取失败!\");\r\n            }\r\n\r\n            this._loadConfig();\r\n\r\n            // 开启右上角转发\r\n            //@ts-ignore\r\n            qq.showShareMenu();\r\n            //@ts-ignore\r\n            qq.onShareAppMessage(this._getShareInfo.bind(this));\r\n\r\n            //@ts-ignore\r\n            qq.onShow((res) => {\r\n                utils.showLog(\"OnShow: \", res);\r\n                if (this._isShare) {\r\n                    this._isShare = false;\r\n                    if (this._shareCallback) {\r\n                        this._shareCallback(true, \"分享成功!\");\r\n                    }\r\n                }\r\n            });\r\n\r\n            utils.registerServerInitEvent(() => {\r\n                if (this.canCreateShortcut()) {\r\n                    if (utils.ServerConfig && utils.ServerConfig.start_auto_create_short_cut_time) {\r\n                        utils.SendEvent(\"组件初始化成功，弹出自动创建桌面！\");\r\n                        utils.showLog(`组件初始化成功，${utils.ServerConfig.start_auto_create_short_cut_time}秒后弹出自动创建桌面！`)\r\n                        setTimeout(() => {\r\n                            this.createShortcut((res) => {\r\n                                if (res) {\r\n                                    utils.showLog(\"自动创建桌面成功！\");\r\n                                } else {\r\n                                    utils.showLog(\"自动创建桌面失败！\");\r\n                                }\r\n                            });\r\n                        }, utils.ServerConfig.start_auto_create_short_cut_time * 1000);\r\n                    }\r\n                }\r\n\r\n                if (utils.ServerConfig && utils.ServerConfig.auto_add_favorites && utils.ServerConfig.auto_add_favorites == \"true\") {\r\n                    utils.showLog('自动添加到搜藏');\r\n                    this.addFavorites();\r\n                }\r\n\r\n\r\n                utils.showLog('组件初始化完成,验证是否登陆！', utils.ServerConfig.add_recent_color_sign);\r\n                if (utils.ServerConfig && utils.ServerConfig.add_recent_color_sign) {\r\n                    if (utils.ServerConfig.add_recent_color_sign == 1) {\r\n                        this.addColorSign();\r\n                    } else {\r\n                        //@ts-ignore\r\n                        qq.checkSession({\r\n                            success: () => {\r\n                                utils.showLog(\"session_key 未过期，并且在本生命周期一直有效\");\r\n                                this.addRecentColorSign();\r\n                                // session_key 未过期，并且在本生命周期一直有效\r\n                            },\r\n                            fail: () => {\r\n                                // session_key 已经失效，需要重新执行登录流程\r\n                                //@ts-ignore\r\n                                qq.login({\r\n                                    success: (res) => {\r\n                                        if (res.code) {\r\n                                            utils.showLog('登录成功！');\r\n                                            this.addRecentColorSign();\r\n                                        } else {\r\n                                            utils.showLog('登录失败！' + res.errMsg)\r\n                                        }\r\n                                    }\r\n                                })\r\n                            }\r\n                        })\r\n                    }\r\n                }\r\n            }, this);\r\n\r\n\r\n\r\n        }\r\n    }\r\n\r\n    /**\r\n    * 添加到彩签\r\n    */\r\n    addRecentColorSign() {\r\n        utils.showLog(\"调用添加彩签>>>>>>>\");\r\n        //@ts-ignore\r\n        qq.addRecentColorSign({\r\n            query: 'a=1&b=2',\r\n            success(res) {\r\n                utils.showLog('addRecentColorSign success: ', res);\r\n            },\r\n            fail(err) {\r\n                utils.showLog('addRecentColorSign fail: ', err);\r\n            },\r\n            complete(res) {\r\n                utils.showLog('addRecentColorSign complete: ', res);\r\n            }\r\n        })\r\n    }\r\n\r\n    _loadConfig() {\r\n        if (PlatUtils.IsQQ) {\r\n            let method: string = \"m=g\";\r\n            utils.commomHttpRequest(ST_ServerUrl + method, (ret, data) => {\r\n                if (ret) {\r\n                    utils.showLog(\"QQ服务器配置数据获取成功: data = \", data);\r\n                    if (data) {\r\n                        let result = JSON.parse(data);\r\n                        if (result) {\r\n                            if (!utils.DebugLoacalConfig) {\r\n                                this._serverConfig = result;\r\n                            } else {\r\n                                cc.warn(\"开启了本地数据测试，使用本地配置!\");\r\n                            }\r\n                        } else {\r\n                            utils.showLog(\"QQ服务器配置数据不是合法的JSON数据, 使用本地配置!\");\r\n                        }\r\n                    }\r\n                } else {\r\n                    utils.showLog(\"QQ服务器配置数据获取失败, 使用本地配置!\");\r\n                }\r\n\r\n                if (!this._serverConfig) {\r\n                    this._serverConfig = JSON.parse(ST_DefaultServerConfig);\r\n                } else {\r\n                    if (this._serverConfig.shares) {\r\n                        if (this._serverConfig.shares.sy_title) {\r\n                            utils.config.otherconfig.shareTitle = this._serverConfig.shares.sy_title;\r\n                        }\r\n                        if (this._serverConfig.shares.sy_img) {\r\n                            utils.config.otherconfig.shareImgUrl = this._serverConfig.shares.sy_img;\r\n                        }\r\n                    }\r\n\r\n                    if (this._serverConfig.is_local_pos_id\r\n                        && this._serverConfig.is_local_pos_id == \"false\") {\r\n                        // 使用服务器下发的广告id\r\n                        utils.showLog(\"使用服务器下发的广告id\");\r\n                        utils.config.qqconfig.bannerId = this._serverConfig.banner_pos_id;\r\n                        utils.config.qqconfig.insertId = this._serverConfig.intersititia_pos_id;\r\n                        utils.config.qqconfig.videoId = this._serverConfig.video_pos_id;\r\n                        utils.config.qqconfig.boxId = this._serverConfig.box_pos_id;\r\n                        utils.config.qqconfig.bannerBoxId = this._serverConfig.banner_box_pos_id;\r\n\r\n\r\n                    } else {\r\n                        utils.showLog(\"使用本地配置的广告ID\");\r\n                    }\r\n                }\r\n                utils.emitServerInitEvent();\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    public getSystemInfo() {\r\n        if (PlatUtils.IsQQ) {\r\n            return this._sysInfo;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    public share(callback: Function = null) {\r\n        if (PlatUtils.IsQQ) {\r\n            this._shareCallback = callback;\r\n            this._isShare = true;\r\n            //@ts-ignore\r\n            qq.shareAppMessage(this._getShareInfo());\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 上报数据\r\n     */\r\n    public postData(otherGameAppId: string) {\r\n        if (PlatUtils.IsQQ) {\r\n            let appid: string = utils.config.qqconfig.appID;\r\n            let uid: string = \"0\";\r\n            let channel: string = \"qq\";\r\n            let url: string = `https://apps.youlesp.com/gs?m=jump&app_id=${appid}&uid=${uid}&channel=${channel}&jump_app_id=${otherGameAppId}`;\r\n            utils.showLog(\"上报数据, url=\", url);\r\n            utils.commomHttpRequest(url, function (ret, data) {\r\n                if (ret) {\r\n                    utils.showLog(\"数据上报成功！\");\r\n                } else {\r\n                    utils.showLog(\"数据上报失败！\");\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    _getShareInfo() {\r\n        if (PlatUtils.IsQQ) {\r\n            return {\r\n                title: utils.config.otherconfig.shareTitle,\r\n                imageUrl: utils.config.otherconfig.shareImgUrl\r\n            };\r\n        }\r\n\r\n        return {};\r\n    }\r\n\r\n    public isOverMinVersion(minVersion: string) {\r\n        let curVersion: string = this._sysInfo.SDKVersion;\r\n        return this._compareVersion(curVersion, minVersion) >= 0;\r\n    }\r\n\r\n\r\n    _compareVersion(v1, v2) {\r\n        if (!v1 || !v2) return -1;\r\n\r\n        v1 = v1.split('.')\r\n        v2 = v2.split('.')\r\n        const len = Math.max(v1.length, v2.length)\r\n\r\n        while (v1.length < len) {\r\n            v1.push('0')\r\n        }\r\n        while (v2.length < len) {\r\n            v2.push('0')\r\n        }\r\n\r\n        for (let i = 0; i < len; i++) {\r\n            const num1 = parseInt(v1[i])\r\n            const num2 = parseInt(v2[i])\r\n\r\n            if (num1 > num2) {\r\n                return 1\r\n            } else if (num1 < num2) {\r\n                return -1\r\n            }\r\n        }\r\n\r\n        return 0\r\n    }\r\n\r\n    /**\r\n     * 上报关卡数据\r\n     * @param level 当前关卡ID\r\n     * @param levelName 关卡名称\r\n     * @param status 状态\r\n     */\r\n    public postLevel(level: string, status: LevelStatus, levelName?: string) {\r\n        if (PlatUtils.IsQQ) {\r\n\r\n            if (status == LevelStatus.GameWin) {\r\n                if (this.ServerConfig.rankey) {\r\n                    //排行帮提交数据\r\n                    let postKey = this.ServerConfig.rankey ? this.ServerConfig.rankey : \"ranklevel\";\r\n                    let postValue = level;\r\n                    //@ts-ignore\r\n                    qq.setUserCloudStorage(\r\n                        {\r\n                            KVDataList: [\r\n                                { key: postKey, value: postValue }\r\n                            ],\r\n                            success: function (res) {\r\n                                utils.showLog('关卡记录成功');\r\n                            },\r\n                            fail: function (res) {\r\n                                utils.showLog('关卡记录失败');\r\n                            },\r\n                            complete: function (res) {\r\n                                utils.showLog('关卡记录调用完成');\r\n                            },\r\n                        })\r\n                }\r\n                let interval = this.ServerConfig.subscribe_interval;\r\n                if (interval) {\r\n                    try {\r\n                        if (parseInt(level) % interval == 0) {\r\n                            // 长期订阅\r\n                            //@ts-ignore \r\n                            qq.subscribeAppMsg({\r\n                                subscribe: true,\r\n                                success(res) {\r\n                                    utils.showLog(\"----添加订阅消息----成功\", res);\r\n                                },\r\n                                fail(res) {\r\n                                    utils.showLog(\"----添加订阅消息----失败\", res);\r\n                                }\r\n                            });\r\n                        }\r\n                    } catch (error) {\r\n                        utils.showLog(\"----添加订阅消息----异常\");\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n\r\n\r\n\r\n\r\n            let method = \"m=rlevel\";\r\n            let url: string = POST_ServerUrl + method + `&level_id=${level}&level_name=${encodeURI(levelName)}&status=${status}`;\r\n            utils.commomHttpRequest(url, function (ret, data) {\r\n                if (ret) {\r\n                    utils.showLog(\"关卡数据上报成功！\");\r\n                } else {\r\n                    utils.showLog(\"关卡数据上报失败！\");\r\n                }\r\n            }.bind(this));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 上报自定义事件\r\n     * @param level 当前关卡ID\r\n     * @param levelName 关卡名称\r\n     * @param status 状态\r\n     */\r\n    public sendEvent(eventName: string) {\r\n        if (PlatUtils.IsQQ) {\r\n            let method = \"m=revent\";\r\n            let url: string = POST_ServerUrl + method + `&event=${encodeURI(eventName)}`;\r\n            utils.commomHttpRequest(url, function (ret, data) {\r\n                if (ret) {\r\n                    utils.showLog(\"上报自定义事件成功！\");\r\n                } else {\r\n                    utils.showLog(\"上报自定义事件失败！\");\r\n                }\r\n            }.bind(this));\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n      * 弹出提示框\r\n      * @param msg 消息\r\n      */\r\n    public showToast(msg: string) {\r\n        if (PlatUtils.IsQQ) {\r\n            //@ts-ignore\r\n            qq.showToast({\r\n                title: msg,\r\n                icon: \"none\",\r\n                duration: 2000\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n    * 是否可以创建桌面图标, 当前平台是否支持创建快捷方式\r\n    */\r\n    public canCreateShortcut() {\r\n        console.log(\"canCreateShortcut \", this.isOverMinVersion(\"1.7.1\"));\r\n        if (PlatUtils.IsQQ && PlatUtils.IsAndroid) {\r\n            return this.isOverMinVersion(\"1.7.1\");\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 创建桌面图标\r\n     */\r\n    public createShortcut(callback: Function) {\r\n        let callbackFunc = callback;\r\n\r\n        if (PlatUtils.IsQQ && this.canCreateShortcut()) {\r\n            //@ts-ignore\r\n            qq.saveAppToDesktop({\r\n                success: () => {\r\n                    utils.showLog('桌面图标创建成功！');\r\n                    this._shortcutCreated = true;\r\n                    if (callbackFunc) {\r\n                        callbackFunc(true);\r\n                    }\r\n                },\r\n                fail: (err) => {\r\n                    utils.showLog('qq创建桌面失败err' + err);\r\n                    if (callbackFunc) {\r\n                        callbackFunc(false);\r\n                    }\r\n                },\r\n                complete: function () {\r\n                }\r\n            });\r\n        } else {\r\n            utils.showLog(\"当前平台版本不支持创建桌面\");\r\n            if (callbackFunc) {\r\n                callbackFunc(false);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n\r\n     * 添加收藏\r\n\r\n     * **/\r\n\r\n    addFavorites() {\r\n        utils.showLog('addFavorites >>>>');\r\n        let fav = YZ_LocalStorage.getItem(\"qq_favorites\");\r\n        if (\"1\" == fav) {\r\n            utils.showLog('had addToFavorites')\r\n            return\r\n        }\r\n\r\n        let title = \"好游戏哦\";\r\n\r\n        let img = \"\";\r\n\r\n        if (utils.config.otherconfig) {\r\n            if (utils.config.otherconfig.shareTitle) {\r\n                title = utils.config.otherconfig.shareTitle\r\n            }\r\n            if (utils.config.otherconfig.shareImgUrl) {\r\n                img = utils.config.otherconfig.shareImgUrl\r\n            }\r\n        }\r\n\r\n        //@ts-ignore\r\n        qq.addToFavorites({\r\n            title: title,\r\n            imageUrl: img,\r\n            query: 'a=1&b=2',\r\n            success: function (res) {\r\n                utils.showLog('addToFavorites success', res)\r\n                YZ_LocalStorage.setItem(\"qq_favorites\", \"1\");\r\n            },\r\n            fail: function (err) {\r\n                utils.showLog('addToFavorites fail', err)\r\n            },\r\n            complete: function (res) {\r\n                utils.showLog('addToFavorites info', res)\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 添加普通彩签\r\n     */\r\n    addColorSign() {\r\n        //@ts-ignore\r\n        qq.addColorSign({\r\n            success: function (res) {\r\n                utils.showLog('addColorSign success', res)\r\n            },\r\n            fail: function (err) {\r\n                utils.showLog('addColorSign fail', err)\r\n            },\r\n            complete: function (res) {\r\n                utils.showLog('addColorSign info', res)\r\n            }\r\n        })\r\n\r\n\r\n    }\r\n\r\n    /**\r\n     * 退出游戏\r\n     */\r\n    public GameExit() {\r\n        if (PlatUtils.IsQQ) {\r\n            utils.showLog(\"tool qq GameExit\");\r\n            try {\r\n                //@ts-ignore\r\n                qq.exitMiniProgram()\r\n            } catch (error) {\r\n                cc.log(error);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n"]}