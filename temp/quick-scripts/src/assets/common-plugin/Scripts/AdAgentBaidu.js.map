{"version":3,"sources":["assets\\common-plugin\\Scripts\\AdAgentBaidu.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import AdAgent from \"./AdAgent\";\r\nimport { BannerLocation } from \"./YZ_Constant\";\r\nimport PlatUtils from \"./PlatUtils\";\r\nimport { utils } from \"./Utils\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class AdAgentBaidu extends AdAgent {\r\n\r\n    _sysData: any = null;\r\n    _baiduVersion: string = \"\";\r\n    _recorder: any = null;\r\n    _bannerAd: any = null;\r\n    _videoAd: any = null;\r\n    _videoCallback: Function = null;\r\n    _isVideoShow: boolean = false;\r\n    _isVideoLoaded: boolean = false;\r\n    //@ts-ignore\r\n    swan: any = window.swan;\r\n    public Init() {\r\n        if (PlatUtils.IsBaidu) {\r\n            this._sysData = this.swan.getSystemInfoSync();\r\n\r\n            utils.registerServerInitEvent(() => {\r\n                this._initVideoAd();\r\n            }, this)\r\n        }\r\n    }\r\n\r\n    _bannerSizePercent: number = 0.1;\r\n    _bannerBottom: number = 0;\r\n    public ShowBanner(location: BannerLocation = BannerLocation.Home, args: any = null) {\r\n        if (PlatUtils.IsBaidu) {\r\n            if (utils.isShowRecommondGamesBanner() && utils.isSupportnavigateToMiniGame()) {\r\n                utils.showRecommendGamesBanner();\r\n                utils.showLog(`服务器配置展示自定义banner`);\r\n                return;\r\n            }\r\n            utils.showLog(\"显示banner广告...\");\r\n            let argsTmp = args;\r\n            if (argsTmp && argsTmp.width) {\r\n                if (cc.winSize.height / cc.winSize.width < 1) {\r\n                    this._bannerSizePercent = argsTmp.width;\r\n                } else {\r\n                    this._bannerSizePercent = ((argsTmp.width <= 0.8) ? 0.8 : argsTmp.width);\r\n                }\r\n                this._bannerSizePercent = ((argsTmp.width > 1) ? 1 : this._bannerSizePercent);\r\n            }\r\n\r\n            if (argsTmp && argsTmp.bottom) {\r\n                this._bannerBottom = argsTmp.bottom / this._sysData.pixelRatio;\r\n                this._bannerBottom = ((this._bannerBottom < 0) ? 0 : this._bannerBottom);\r\n                this._bannerBottom = ((this._bannerBottom > this._sysData.screenHeight) ? this._sysData.screenHeight : this._bannerBottom);\r\n            }\r\n\r\n            // banner 广告\r\n            if (utils.config.baiduconfig\r\n                && utils.config.baiduconfig.bannerId\r\n                && utils.config.baiduconfig.appSID) {\r\n\r\n                let left: number = (this._sysData.screenWidth - this._sysData.screenWidth * this._bannerSizePercent) / 2;\r\n                let width: number = this._sysData.screenWidth * this._bannerSizePercent;\r\n                let bannerOpts = {\r\n                    adUnitId: utils.config.baiduconfig.bannerId,\r\n                    appSid: utils.config.baiduconfig.appSID,\r\n                    style: {\r\n                        top: 0,\r\n                        left: left,\r\n                        width: width\r\n                    }\r\n                };\r\n                let bannerAd: any = null;\r\n                let oldBannerAd: any = this._bannerAd;\r\n\r\n                let onLoadFunc = () => {\r\n                    if (bannerAd) {\r\n                        bannerAd.show().then(() => {\r\n                            this._bannerAd = bannerAd;\r\n\r\n                            if (oldBannerAd) {\r\n                                oldBannerAd.destroy();\r\n                                oldBannerAd.offLoad(onLoadFunc);\r\n                                oldBannerAd.offError(onErrorFunc);\r\n                            }\r\n\r\n                            utils.showLog(\"Banner显示成功！\");\r\n                        }).catch(() => {\r\n                            utils.showLog(\"Banner显示出错!\");\r\n                        });\r\n                    }\r\n                };\r\n                let onErrorFunc = (err) => {\r\n                    if (err) {\r\n                        utils.showLog(\"Banner 广告出错 : \", err.errCode, err.errMsg);\r\n                    }\r\n                };\r\n\r\n                let onResizeFunc = (res) => {\r\n                    bannerAd.style.width = width;\r\n                    bannerAd.style.top = this._sysData.screenHeight - res.height - this._bannerBottom;\r\n                };\r\n\r\n                bannerAd = this.swan.createBannerAd(bannerOpts);\r\n                if (bannerAd) {\r\n                    bannerAd.onLoad(onLoadFunc);\r\n                    bannerAd.onError(onErrorFunc);\r\n                    bannerAd.onResize(onResizeFunc);\r\n\r\n                    bannerAd.style.width = width + 1;\r\n                    if (PlatUtils.IsIOS) {\r\n                        bannerAd.style.top = this._sysData.screenHeight;\r\n                    }\r\n                }\r\n            } else {\r\n                cc.warn(\"百度广告配置文件出错!\");\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n    * 显示结算广告\r\n    * @param data 参数： closeBtn:\r\n    * statement_type \r\n    * 1:只显示小游戏插屏广告\r\n    * 2:只显示6个互推广告\r\n    * 3:显示插屏广告+6个互推\r\n    */\r\n    showStatementAds(): any {\r\n        let result: any = { \"type\": 0, \"node\": null };\r\n        let node: cc.Node = null;\r\n        let resType: number = 0;\r\n\r\n        utils.showLog(\"结算广告 >> 显示插屏广告+6个互推\");\r\n        this.ShowInterstitial();\r\n        node = utils.showCrossWidget6();\r\n        resType = 1;\r\n        result.type = resType;\r\n        result.node = node;\r\n        return result;\r\n    }\r\n\r\n    public HideBanner(location: BannerLocation = BannerLocation.Home) {\r\n        if (PlatUtils.IsBaidu) {\r\n            if (this._bannerAd) {\r\n                this._bannerAd.hide();\r\n            }\r\n        }\r\n    }\r\n\r\n    public ShowInterstitial(location: BannerLocation = BannerLocation.Home) {\r\n        console.warn(\"百度没有插屏\");\r\n    }\r\n\r\n    public ShowVideo(callback: Function) {\r\n        if (PlatUtils.IsBaidu) {\r\n            // 视频广告\r\n            if (this._videoCallback) {\r\n                return;\r\n            } else {\r\n                this._videoCallback = callback;\r\n            }\r\n            this._isVideoShow = true;\r\n\r\n            if (!this._videoAd) {\r\n                this._initVideoAd();\r\n            } else {\r\n                if (this._isVideoLoaded) {\r\n                    this._videoAd.show().then(() => {\r\n                        utils.showLog(\"视频显示成功!\");\r\n                        this._isVideoLoaded = false;\r\n                    }).catch((err) => {\r\n                    });\r\n                } else {\r\n                    this._videoAd.load().catch((err) => {\r\n                    });\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    _initVideoAd() {\r\n        if (!this._videoAd) {\r\n            if (!(utils.config.baiduconfig\r\n                && utils.config.baiduconfig.appSID\r\n                && utils.config.baiduconfig.videoId)) {\r\n                utils.showLog(\"视频ID配置不正确！\");\r\n                if (this._videoCallback) {\r\n                    this._videoCallback(false, \"暂无视频广告!\");\r\n                    this._videoCallback = null;\r\n                }\r\n                return;\r\n            }\r\n\r\n            let videoOpts = {\r\n                adUnitId: utils.config.baiduconfig.videoId,\r\n                appSid: utils.config.baiduconfig.appSID\r\n            };\r\n            utils.showLog(\"视频广告参数:\", JSON.stringify(videoOpts));\r\n\r\n            this._videoAd = this.swan.createRewardedVideoAd(videoOpts);\r\n            if (this._videoAd) {\r\n                this._videoAd.onLoad(() => {\r\n                    utils.showLog(\"视频加载成功\");\r\n                    this._isVideoLoaded = true;\r\n\r\n                    if (this._isVideoShow) {\r\n                        this._videoAd.show().then(() => {\r\n                            this._isVideoLoaded = false;\r\n                        }).catch(() => {\r\n                            utils.showLog(\"视频播放失败！\");\r\n                        });\r\n                    }\r\n                });\r\n                this._videoAd.onClose((res) => {\r\n                    this._isVideoShow = false;\r\n                    if (res && res.isEnded) {\r\n                        utils.showLog(\"正常播放结束，可以下发游戏奖励\");\r\n                        if (this._videoCallback) {\r\n                            this._videoCallback(true, \"\");\r\n                            this._videoCallback = null;\r\n                        }\r\n                    } else {\r\n                        utils.showLog(\"播放中途退出，不下发游戏奖励\");\r\n                        if (this._videoCallback) {\r\n                            this._videoCallback(false, \"观看完视频才能获得奖励!\");\r\n                            this._videoCallback = null;\r\n                        }\r\n                    }\r\n                });\r\n                this._videoAd.onError((err) => {\r\n                    utils.showLog(\"激励视频异常!\", err.errCode);\r\n                    this._isVideoLoaded = false;\r\n                    if (this._videoCallback) {\r\n                        this._videoCallback(false, \"暂无视频广告!\");\r\n                        this._videoCallback = null;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n"]}