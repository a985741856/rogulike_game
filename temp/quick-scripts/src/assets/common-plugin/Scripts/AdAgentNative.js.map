{"version":3,"sources":["assets\\common-plugin\\Scripts\\AdAgentNative.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import AdAgent from \"./AdAgent\";\r\nimport { BannerLocation, BannerLocationToString } from \"./YZ_Constant\";\r\nimport PlatUtils from \"./PlatUtils\";\r\nimport { utils } from \"./Utils\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nconst ST_JNIMessage: string = \"JNIMessage\";\r\nconst ST_VideoCallback: string = \"VideoCallback\";\r\n\r\n@ccclass\r\nexport default class AdAgentNative extends AdAgent {\r\n\r\n    private get _className() {\r\n        return utils.Tool_Native.jniClassName;\r\n    }\r\n\r\n    private _videoCallback: Function = null;\r\n\r\n\r\n    public get ServerConfig() {\r\n        return utils.Tool_Native.ServerConfig;\r\n    }\r\n\r\n\r\n\r\n    public Init() {\r\n        if (PlatUtils.IsNativeAndroid) {\r\n\r\n            cc.game.on(ST_JNIMessage, (event: any) => {\r\n                if (event.type == ST_VideoCallback) {\r\n                    if (this._videoCallback) {\r\n                        if (event.ret == true) {\r\n                            this._videoCallback && this._videoCallback(true);\r\n                        } else {\r\n                            this._videoCallback && this._videoCallback(false, event.msg);\r\n                        }\r\n                        this._videoCallback = null;\r\n                    }\r\n                }\r\n            });\r\n\r\n\r\n        }\r\n    }\r\n\r\n\r\n    _showBannerTimerId: number = 0;\r\n\r\n    public ShowBanner(location: BannerLocation = BannerLocation.Home, args: any = null, isTimeRefresh: boolean = false) {\r\n        if (PlatUtils.IsNativeAndroid) {\r\n            utils.showLog(\"AdAgentNative ShowBanner\");\r\n\r\n            let interval: number = 60;\r\n            if (this.ServerConfig && this.ServerConfig.refresh_ad_time) {\r\n                interval = this.ServerConfig.refresh_ad_time;\r\n            }\r\n            let jsonObj: any = {};\r\n            jsonObj.location = location;\r\n            jsonObj.isTimeRefresh = isTimeRefresh ? \"true\" : \"false\";\r\n\r\n\r\n            try {\r\n                utils.showLog(\"调用banner Json >>>\" + JSON.stringify(jsonObj));\r\n                jsb.reflection.callStaticMethod(this._className, \"showBanner\", \"(Ljava/lang/String;)V\", JSON.stringify(jsonObj));\r\n            } catch (error) {\r\n                utils.showLog(error);\r\n            }\r\n\r\n            clearInterval(this._showBannerTimerId);\r\n            this._showBannerTimerId = setInterval(function () {\r\n                utils.showLog(`定时刷新显示Banner广告！location:${location}; args:${JSON.stringify(args)}; 间隔时间:${interval}`);\r\n                this.ShowBanner(location, args, true);\r\n            }.bind(this), interval * 1000);\r\n        }\r\n    }\r\n\r\n\r\n    public HideBanner(location: BannerLocation = BannerLocation.Home) {\r\n        utils.showLog(\"AdAgentNative HideBanner\");\r\n\r\n        clearInterval(this._showBannerTimerId);\r\n        jsb.reflection.callStaticMethod(this._className, \"hideBanner\", \"(Ljava/lang/String;)V\", location);\r\n    }\r\n\r\n\r\n\r\n    public ShowInterstitial() {\r\n        if (PlatUtils.IsNativeAndroid) {\r\n            try {\r\n                let delayShowTime = 0.5;\r\n                if (this.ServerConfig && this.ServerConfig.intersititia_delay_show_time) {\r\n                    delayShowTime = this.ServerConfig.intersititia_delay_show_time;\r\n                }\r\n                utils.showLog(\"AdAgentNative ShowInterstitial 延迟\", delayShowTime, \"秒调用！\");\r\n\r\n                utils.delayCall(() => {\r\n                    jsb.reflection.callStaticMethod(this._className, \"showInterstitial\", \"()V\");\r\n                }, delayShowTime);\r\n            } catch (error) {\r\n                utils.showLog(error);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    _showNativeIconTimerId: number = 0;\r\n\r\n    /**\r\n        * 显示浮窗广告挂件\r\n        * @param params \r\n        * ```\r\n        * {\r\n        * group:string\r\n        * left:number\r\n        * bottom:number\r\n        * scale:number\r\n        * parent:cc.Node\r\n        * }\r\n        * ```\r\n        * @returns 生成的组件\r\n        */\r\n    public showNativeTryGameWidget(params: any = null) {\r\n\r\n        if (PlatUtils.IsNativeAndroid) {\r\n            utils.showLog(\"AdAgentNative showNativeTryGameWidget=\" + this.ServerConfig.show_native_icon_method);\r\n            try {\r\n\r\n                let interval: number = 15;\r\n                if (this.ServerConfig && this.ServerConfig.icon_jump_native) {\r\n                    let iv = parseInt(this.ServerConfig.icon_jump_native);\r\n                    if (iv > 3) {\r\n                        interval = iv;\r\n                    } else {\r\n                        utils.showLog(\"悬浮ICON必须大于3秒，当前默认为15秒刷新\");\r\n                    }\r\n                }\r\n\r\n\r\n                if (this.ServerConfig.show_native_icon_method) {\r\n                    let style: any = {};\r\n                    \"left\" in params && (style.left = params.left)\r\n                    \"right\" in params && (style.right = params.right)\r\n                    \"top\" in params && (style.top = params.top)\r\n                    \"bottom\" in params && (style.bottom = params.bottom)\r\n                    \"location\" in params && (style.location = params.location)\r\n\r\n                    style.winSizeWidth = cc.winSize.width;\r\n                    style.winSizeHeight = cc.winSize.height;\r\n                    // style.left = params.left != undefined ? params.left : -1;\r\n                    // style.right = params.right != undefined ? params.right : -1;\r\n                    // style.top = params.top != undefined ? params.top : -1;\r\n                    // style.bottom = params.bottom != undefined ? params.bottom : -1;\r\n                    // style.location = params.location != undefined ? params.location : -1;\r\n\r\n                    jsb.reflection.callStaticMethod(utils.Tool_Native.jniClassName, this.ServerConfig.show_native_icon_method, \"(Ljava/lang/String;)V\", JSON.stringify(style));\r\n\r\n\r\n                } else {\r\n                    let x = 10;\r\n                    let y = 250;\r\n                    if (params) {\r\n                        if (params.top != null) {\r\n                            y = params.top;\r\n                        } else if (params.bottom != null) {\r\n                            y = cc.winSize.height - params.bottom;\r\n                        }\r\n                        if (params.left != null) {\r\n                            x = params.left;\r\n                        } else if (params.right != null) {\r\n                            x = cc.winSize.width - params.right;\r\n                        }\r\n                    }\r\n\r\n                    jsb.reflection.callStaticMethod(utils.Tool_Native.jniClassName, \"showFloatIcon\", \"(II)V\", x, y);\r\n                }\r\n\r\n\r\n                clearInterval(this._showNativeIconTimerId);\r\n                this._showNativeIconTimerId = setInterval(function () {\r\n                    utils.showLog(`定时刷新显示原生悬浮ICON广告！ args:${params}; 间隔时间:${interval}`);\r\n                    this.showNativeTryGameWidget(params);\r\n                }.bind(this), interval * 1000);\r\n            } catch (error) {\r\n                utils.showLog(error);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    public ShowVideo(callback: Function) {\r\n        if (PlatUtils.IsNativeAndroid) {\r\n            utils.showLog(\"AdAgentNative ShowVideo\");\r\n            this._videoCallback = callback;\r\n            try {\r\n                jsb.reflection.callStaticMethod(this._className, \"showVideo\", \"()V\");\r\n            } catch (error) {\r\n                utils.showLog(error);\r\n                if (callback) {\r\n                    callback(false);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public showFullScreenVideo(callback: Function) {\r\n        if (PlatUtils.IsNativeAndroid) {\r\n            utils.showLog(\"AdAgentNative showFullScreenVideo\");\r\n            this._videoCallback = callback;\r\n            try {\r\n                jsb.reflection.callStaticMethod(this._className, \"showFullScreenVideo\", \"()V\");\r\n            } catch (error) {\r\n                utils.showLog(error);\r\n                if (callback) {\r\n                    callback(false);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n    * 隐藏浮动试玩挂件\r\n    */\r\n    public hideNativeTryGameWidget() {\r\n        if (PlatUtils.IsNativeAndroid) {\r\n            clearInterval(this._showNativeIconTimerId);\r\n            jsb.reflection.callStaticMethod(this._className, \"hideFloatIcon\", \"()V\");\r\n\r\n            return;\r\n        }\r\n    }\r\n}\r\n\r\nexport class NativeCallBack {\r\n\r\n    /**\r\n     *  1：播放完成\r\n     *  2：播放失败\r\n     *  3：无广告\r\n     * \r\n     */\r\n    public static videoCallBack(result: number, msg?: string) {\r\n        console.log(\"视频广告回调函数 ------>result=\", result, \" msg=\", msg);\r\n        if (result == 1) {\r\n            //播放成功\r\n            cc.game.emit(ST_JNIMessage, { type: ST_VideoCallback, ret: true });\r\n        } else {\r\n            //播放失败\r\n            cc.game.emit(ST_JNIMessage, { type: ST_VideoCallback, ret: false, msg: msg ? msg : \"暂无视频！\" });\r\n        }\r\n    }\r\n\r\n    public static sendEvent(eventMsg: string) {\r\n        utils.showLog(\"事件上报：\" + eventMsg);\r\n        utils.SendEvent(eventMsg);\r\n    }\r\n\r\n\r\n    public static sendEventNew(eventName: string, eventId?: string, eventData?: string) {\r\n        utils.showLog(\"事件上报：\" + eventName);\r\n        if (utils.Tool_Native) {\r\n            utils.Tool_Native.sendEventNew(eventName, eventId, eventData)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 上报插屏点击时间\r\n     */\r\n    public static reportInsertClick() {\r\n        utils.showLog(\"上报插屏点击时间：\" + utils.overPageInsertAdIsTouch);\r\n        if (utils.overPageInsertAdIsTouch) return;\r\n        utils.overPageInsertAdIsTouch = true;\r\n        let time = (new Date().getTime() - utils.overPageShowTime) / 1000;\r\n        let json: any = {};\r\n        json.data = time;\r\n        utils.SendEventNew(`结算页面-插屏点击时间`, \"overPageInsertAdTouch\", JSON.stringify(json));\r\n    }\r\n\r\n\r\n    /**\r\n     * \r\n     * @param idCard \r\n     * @param realName \r\n     */\r\n    public static realNameAuth(idCard, realName) {\r\n        utils.showLog(\"realNameAuth>>>> #idCard=\" + idCard + \" #realName=\" + realName);\r\n        utils.Tool_Native.realNameAuth(idCard, realName, (res, result) => {\r\n            utils.showLog(\"realNameAuth>>>>  #res=\" + res + \" #result=\" + result);\r\n\r\n            if (res) {\r\n                if (result) {\r\n                    let res = JSON.parse(result);\r\n                    switch (res.code) {\r\n                        case 1:\r\n                            utils.showMsg(res.msg);\r\n                            utils.Tool_Native.realNameAuthResult(result);\r\n                            break;\r\n                        case 0:\r\n                            if (res.nonage == \"0\") {\r\n                                utils.setRealNameAuthLocalData(\"2\")\r\n                            } else {\r\n                                utils.setRealNameAuthLocalData(\"1\")\r\n                            }\r\n                            utils._isRealNameAuth = true;\r\n                            if (res.msg) {\r\n                                utils.showMsg(res.msg);\r\n                            }\r\n                            utils.Tool_Native.realNameAuthResult(result);\r\n                            utils.scheduleOnce(() => {\r\n                                utils.emitRealNameAuthCloseEvent();\r\n                            }, 0.5);\r\n                            break;\r\n                        case 2:\r\n                            //未成年限制内，显示下线\r\n                            utils.setRealNameAuthLocalData(\"2\");\r\n                            utils.Tool_Native.realNameAuthResult(result);\r\n                            break;\r\n                    }\r\n                } else {\r\n\r\n                    let result: any = {};\r\n                    result.code = \"-1\";\r\n                    result.msg = \"请求失败，请重新提交验证！\"\r\n                    utils.Tool_Native.realNameAuthResult(JSON.stringify(result))\r\n                    utils.showMsg(\"请求失败，请重新提交验证！\")\r\n                }\r\n\r\n            } else {\r\n                utils.showMsg(\"请求失败，请重新提交验证！\")\r\n                let result: any = {};\r\n                result.code = \"-1\";\r\n                result.msg = \"请求失败，请重新提交验证！\"\r\n                utils.Tool_Native.realNameAuthResult(JSON.stringify(result))\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\ncc[\"NativeCallBack\"] = NativeCallBack;\r\n"]}