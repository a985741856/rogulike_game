{"version":3,"sources":["assets\\common-plugin\\Scripts\\MoreGamesPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import GameItem from \"./GameItem\";\r\nimport QCrossWidgetItem from \"./QCrossWidgetItem\";\r\nimport { utils } from \"./Utils\";\r\nimport { BannerLocation, SubLocation } from \"./YZ_Constant\";\r\nimport PlatUtils from \"./PlatUtils\";\r\nimport CompatibleTool from \"./CompatibleTool\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nconst _panelSize: cc.Size[] = [cc.size(225, 1000), cc.size(506, 1000)];\r\nconst _titleSize: cc.Size[] = [cc.size(111, 54), cc.size(275, 54)];\r\nconst _titleBgSize: cc.Size[] = [cc.size(376, 104), cc.size(545, 104)];\r\nconst _starSize: cc.Size[] = [cc.size(251, 89), cc.size(425, 89)];\r\n\r\n@ccclass\r\nexport default class MoreGamesPanel extends cc.Component {\r\n\r\n    _panel: cc.Node = null;\r\n    _gameList: cc.Node = null;\r\n    _originScale: number = 1;\r\n\r\n    _gameItems: GameItem[] = [];\r\n    _jumpList: any = null;\r\n    _dataDirty: boolean = false;\r\n\r\n    _closeBtnRight: cc.Node = null;\r\n    _closeBtnLine: cc.Node = null;\r\n\r\n    _star: cc.Node = null;\r\n    private _items: QCrossWidgetItem[] = [];\r\n    private gameItemNode: cc.Node = null;\r\n\r\n    _location: SubLocation = SubLocation.isMoreGame;\r\n\r\n    onLoad() {\r\n        if (utils.otherConfig && utils.otherConfig.group) {\r\n            this.node.group = utils.otherConfig.group;\r\n        }\r\n\r\n        if (!PlatUtils.IsNativeAndroid) {\r\n            utils.adManager.HideBanner(BannerLocation.Home);\r\n        }\r\n\r\n        this._panel = this.node.getChildByName(\"Panel\");\r\n        this._gameList = this._panel.getChildByName(\"GameScrollView\").getComponent(cc.ScrollView).content;\r\n        this.gameItemNode = this._gameList.children[0];\r\n        this._gameList.removeAllChildren();\r\n\r\n\r\n        this.node.active = false;\r\n        let ratio: number = 1;\r\n        if (cc.winSize.height < cc.winSize.width) {\r\n            // 横屏游戏\r\n            ratio = cc.winSize.width / 1920 * 0.5;\r\n        } else {\r\n            ratio = cc.winSize.width / 1080;\r\n        }\r\n\r\n        this._panel.scale = ratio;\r\n        this._originScale = this._panel.scale;\r\n    }\r\n\r\n\r\n    private _initWidget() {\r\n        this._gameList.removeAllChildren();\r\n        let totalRow = Math.floor(this._jumpList.length / 3);\r\n        let totalClo = 3 * totalRow;\r\n        for (let i = 0; i < totalClo; i++) {\r\n            let data: any = this._jumpList[i];\r\n            if (data && data.logo) {\r\n                let tempNode = cc.instantiate(this.gameItemNode);\r\n                let qcrossWidgetItem: QCrossWidgetItem = tempNode.getComponent(\"QCrossWidgetItem\");\r\n                qcrossWidgetItem._location = this._location;\r\n                qcrossWidgetItem.init(data);\r\n                this._gameList.addChild(tempNode);\r\n            }\r\n        }\r\n    }\r\n\r\n    update() {\r\n        if (this._dataDirty) {\r\n            this._dataDirty = false;\r\n            this._updatePanel();\r\n        }\r\n    }\r\n\r\n    _updatePanel() {\r\n        utils.postRecommentShowData(this._location);\r\n        this._initWidget();\r\n        return;\r\n    }\r\n\r\n    public init(jumpList: any) {\r\n        this._jumpList = jumpList;\r\n        this._dataDirty = true;\r\n    }\r\n\r\n    public show() {\r\n        this.node.active = true;\r\n    }\r\n\r\n    public hide() {\r\n        let self = this;\r\n        // this._panel.runAction(cc.sequence(cc.moveTo(0.3, CompatibleTool.position(-this._panel.getContentSize().width, 0)).easing(cc.easeQuadraticActionOut()), cc.callFunc(() => {\r\n        self.node.active = false;\r\n        // })));\r\n        // if (!PlatUtils.IsNativeAndroid) {\r\n        //     utils.adManager.ShowBanner(BannerLocation.Home);\r\n        // }\r\n    }\r\n\r\n    public onCloseBtnHandler(event: any, data: any) {\r\n        this.hide();\r\n    }\r\n}\r\n"]}