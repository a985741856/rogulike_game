{"version":3,"sources":["assets\\scripts\\Game\\ZombieBase.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import PlatUtils from \"../../common-plugin/Scripts/PlatUtils\";\r\nimport { cocosz } from \"../Framework/CocosZ\";\r\nimport Constant, { ZindexLayer } from \"../Framework/Constant\";\r\nimport GameDate from \"../Game/gameDate\";\r\nimport { gameMgr } from \"../Game/gameMgr\";\r\nimport Person from \"../Game/person\";\r\nimport { upgradeMgr } from \"../Game/UpgradeMgr\";\r\nimport Bullet from \"./bullet\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nenum AtkType {\r\n    front = 0,// 前方\r\n    area,// 区域\r\n    charge,// 冲锋\r\n    range,// 远程\r\n    shot, //散弹\r\n    shoot, //单发子弹\r\n    sector, //扇形子弹\r\n}\r\n\r\n@ccclass\r\nexport default class ZombieBase extends Person {\r\n    @property({ tooltip: \"僵尸id\" })\r\n    zombieId: number = 0;\r\n\r\n    @property({ type: cc.Prefab, tooltip: \"子弹预制体\", visible() { return [5, 6, 8,9,10,11,12,13,17,18, 20].includes(this.zombieId) } })\r\n    bullet_prefab: cc.Prefab = null;\r\n    @property({ type: sp.Skeleton, tooltip: \"警告圈\", visible() { return [5, 6, 20].includes(this.zombieId) } })\r\n    sp_hongzhaquan: sp.Skeleton = null;\r\n\r\n    @property({ type: cc.AudioClip, tooltip: \"攻击音效1\" })\r\n    audio_attack1: cc.AudioClip = null;\r\n    @property({ type: cc.AudioClip, tooltip: \"攻击音效2\" })\r\n    audio_attack2: cc.AudioClip = null;\r\n    @property({ type: cc.AudioClip, tooltip: \"受伤音效\" })\r\n    audio_hart: cc.AudioClip = null;\r\n    @property({ type: cc.AudioClip, tooltip: \"死亡音效\" })\r\n    audio_die: cc.AudioClip = null;\r\n\r\n    isBoss: boolean = false;\r\n\r\n    isElite : boolean = false;\r\n\r\n    createShotNum : number = 3;\r\n\r\n    reinNum : number = 1;\r\n\r\n    protected _aniLayer: cc.Node = null;\r\n    protected _spAni: sp.Skeleton = null;\r\n\r\n    protected onLoad(): void {\r\n        this.id = 94;\r\n        // 初始化配置表属性\r\n        if (GameDate.ZombieMess[this.zombieId]) {\r\n            this.totleHp = GameDate.ZombieMess[this.zombieId].hp;\r\n            this.atkNum = GameDate.ZombieMess[this.zombieId].atk;\r\n            this.atkRange = GameDate.ZombieMess[this.zombieId].atkRange;\r\n            this.MoveSpeed = GameDate.ZombieMess[this.zombieId].speed;\r\n            if (PlatUtils.IsOPPO) { this.MoveSpeed /= 2; }\r\n        }\r\n        // 大小缩放\r\n        if (this.isBoss) {\r\n            this.node.scale = 1;\r\n        } else {\r\n            this.node.scale = 0.8;\r\n        }\r\n        // 刚体\r\n        this.rig = this.node.getComponent(cc.RigidBody);\r\n        if (this.rig) { this.rig.linearDamping = 0.2; }\r\n        // spine动画\r\n        this._aniLayer = this.node.getChildByName(\"aniLayer\");\r\n        if (this._aniLayer) {\r\n            this._spAni = this._aniLayer.getChildByName(\"ani\").getComponent(sp.Skeleton);\r\n        }\r\n        // 监听动画\r\n        if (this._spAni) {\r\n            this._spAni.setStartListener(() => { this.startListenerCall() });\r\n            this._spAni.setCompleteListener(() => { this.endListenerCall() });\r\n        }\r\n    }\r\n\r\n    protected onDestroy() {\r\n        // 取消监听\r\n        cc.game.targetOff(this);\r\n    }\r\n\r\n    protected start(): void { }\r\n\r\n    initNode() {\r\n        gameMgr && gameMgr.setMapTs.checkNode(this.node, true);\r\n        // 消息监听\r\n        cc.game.on(Constant.E_GAME_LOGIC, this._onGameMessageHandler, this);\r\n        gameMgr.zombieCurNum++;\r\n        this.node.stopAllActions();\r\n        this.node.zIndex = ZindexLayer.zindex_zombie + this.zombieId;\r\n        this.node.opacity = 255;\r\n        this.atkDir = cc.Vec2.ZERO;\r\n        this.curHp = this.totleHp;\r\n        this.isDeath = false;\r\n        this.isAtk = false;\r\n        this._canAtk = true;\r\n        this.canMoveDir = true;\r\n        this.canMove = true;\r\n\r\n        // 播放出场动画\r\n        if (this._spAni && this._spAni.isValid) {\r\n            this._spAni.node.scaleX = Math.abs(this._spAni.node.scaleX);\r\n            this._spAni.node.opacity = 255;\r\n            this._spAni.node.color = cc.Color.WHITE;\r\n            if (this.isBoss) {\r\n                this._spAni.setAnimation(0, \"spawn\", false);\r\n                this.scheduleOnce(() => {\r\n                    // 碰撞体\r\n                    let boxCollider = this.node.getComponent(cc.BoxCollider);\r\n                    if (boxCollider) boxCollider.enabled = true;\r\n                }, 2)\r\n            } else {\r\n                this._spAni.setAnimation(0, \"idle\", true);\r\n                // 碰撞体\r\n                let boxCollider = this.node.getComponent(cc.BoxCollider);\r\n                if (boxCollider) boxCollider.enabled = true;\r\n            }\r\n        }\r\n        // 轰炸圈\r\n        if (this.sp_hongzhaquan) {\r\n            this.sp_hongzhaquan.node.setParent(this.node.parent);\r\n            this.sp_hongzhaquan.node.zIndex = ZindexLayer.zinedx_floorTip;\r\n            this.sp_hongzhaquan.setCompleteListener(() => {\r\n                if (this.sp_hongzhaquan && this.sp_hongzhaquan.isValid) {\r\n                    this.sp_hongzhaquan.node.active = false;\r\n                }\r\n            })\r\n        }\r\n        // boss\r\n        if (this.isBoss) {\r\n            cc.game.emit(Constant.E_GAME_LOGIC, { type: Constant.E_Commonzombie_Destory });\r\n            gameMgr && gameMgr.showBossHp(1);\r\n            if (this.node.getChildByName(\"boos\")) this.node.getChildByName(\"boos\").active = true;\r\n        }\r\n\r\n        if(cocosz.gameMode == 6){\r\n            this.totleHp = this.reinNum * 0.2 * GameDate.ZombieMess[this.zombieId].hp + GameDate.ZombieMess[this.zombieId].hp;\r\n            this.atkRange = this.reinNum * 0.02 * GameDate.ZombieMess[this.zombieId].atkRange + GameDate.ZombieMess[this.zombieId].atkRange;\r\n            this.MoveSpeed = this.reinNum * 0.08 * GameDate.ZombieMess[this.zombieId].speed + GameDate.ZombieMess[this.zombieId].speed;\r\n        }else{\r\n         \r\n        }\r\n    }\r\n\r\n    putNodePool () {\r\n        // 取消监听\r\n        cc.game.targetOff(this);\r\n        cc.Tween.stopAllByTarget(this.node);\r\n        // boss\r\n        if (this.isBoss) {\r\n            // boss光影\r\n            if (this.node.getChildByName(\"boos\")) this.node.getChildByName(\"boos\").active = false;\r\n            // boss边界\r\n            if (gameMgr) {\r\n                gameMgr && gameMgr.showBossHp(0);\r\n                if (gameMgr.boss_border && cc.isValid(gameMgr.boss_border)) {\r\n                    gameMgr.boss_border.destroy();\r\n                    gameMgr.boss_border = null;\r\n                }\r\n            }\r\n            this.isBoss = false;\r\n        }\r\n        // 轰炸圈\r\n        if (this.sp_hongzhaquan && this.sp_hongzhaquan.isValid) {\r\n            this.sp_hongzhaquan.node.setParent(this.node);\r\n            this.sp_hongzhaquan.node.active = false;\r\n        }\r\n        gameMgr.zombieCurNum--;\r\n        gameMgr && gameMgr.isValid && gameMgr.nodePut(this.node.name, this.node);\r\n    }\r\n\r\n    startListenerCall() {\r\n        if (this._spAni.animation.includes(\"spawn\")) {\r\n            this._spAni.timeScale = 0.4;\r\n            this.scheduleOnce(() => { this._spAni.timeScale = 1; }, 1)\r\n            this.canMoveDir = false;\r\n            // 出场方向\r\n            let fromPos = this.node.getPosition();\r\n            let toPos = gameMgr.playerTs.node.getPosition();\r\n            let div = toPos.subSelf(fromPos);\r\n            this._spAni.node.scaleX = (div.x > 0 ? 1 : -1) * Math.abs(this._spAni.node.scaleX);\r\n        }\r\n        else if (this._spAni.animation.includes(\"attack\")) {\r\n            this.isAtk = true;\r\n            this.canMoveDir = false;\r\n            if ([8, 9, 18].includes(this.zombieId) && this._spAni.animation == \"attack2\") {\r\n                this.speedRate *= 2.5;\r\n                this.udpateRBody(this.moveDir);\r\n                this.scheduleOnce(() => {\r\n                    this.speedRate /= 2.5;\r\n                    this.moveDir = cc.Vec2.ZERO;\r\n                    this.udpateRBody(this.moveDir);\r\n                }, 0.2)\r\n            } else if ([10, 11, 12, 13].includes(this.zombieId) && this._spAni.animation == \"attack2\") {\r\n                this.speedRate *= 3;\r\n                this.udpateRBody(this.moveDir);\r\n                this.scheduleOnce(() => {\r\n                    this.speedRate /= 3;\r\n                    this.moveDir = cc.Vec2.ZERO;\r\n                    this.udpateRBody(this.moveDir);\r\n                }, 0.2)\r\n            } else if ([14, 19].includes(this.zombieId) && this._spAni.animation.includes(\"attack\")) {\r\n                this.speedRate *= 3;\r\n                this.udpateRBody(this.moveDir);\r\n                this.scheduleOnce(() => {\r\n                    this.speedRate /= 3;\r\n                    this.moveDir = cc.Vec2.ZERO;\r\n                    this.udpateRBody(this.moveDir);\r\n                }, 0.2)\r\n            } else if (this.zombieId == 15 && this._spAni.animation == \"attack\") {\r\n                this.speedRate *= 3;\r\n                this.udpateRBody(this.moveDir);\r\n                this.scheduleOnce(() => {\r\n                    this.speedRate /= 3;\r\n                    this.moveDir = cc.Vec2.ZERO;\r\n                    this.udpateRBody(this.moveDir);\r\n                }, 0.4)\r\n            } else if (this.zombieId == 16 && this._spAni.animation == \"attack\") {\r\n                this.speedRate *= 2;\r\n                this.udpateRBody(this.moveDir);\r\n                this.scheduleOnce(() => {\r\n                    this.speedRate /= 2;\r\n                    this.moveDir = cc.Vec2.ZERO;\r\n                    this.udpateRBody(this.moveDir);\r\n                }, 0.3)\r\n            } else if (this.zombieId == 17 && this._spAni.animation.includes(\"attack\")) {\r\n                this.speedRate *= 2;\r\n                this.udpateRBody(this.moveDir);\r\n                this.scheduleOnce(() => {\r\n                    this.speedRate /= 2;\r\n                    this.moveDir = cc.Vec2.ZERO;\r\n                    this.udpateRBody(this.moveDir);\r\n                }, 0.3)\r\n            } else {\r\n                this.moveDir = cc.Vec2.ZERO;\r\n                this.udpateRBody(this.moveDir);\r\n            }\r\n        }\r\n        else if (this._spAni.animation.includes(\"jump_up\")) {\r\n            this.canMoveDir = false;\r\n        }\r\n    }\r\n\r\n    endListenerCall() {\r\n        if (this._spAni.animation.includes(\"spawn\")) {\r\n            this._spAni.setAnimation(0, \"idle\", true);\r\n            this.canMoveDir = true;\r\n            this.updateMove();\r\n            this.updatePerson();\r\n            this.udpateRBody(this.moveDir);\r\n        } else if (this._spAni.animation.includes(\"attack\")) {\r\n            this._spAni.setAnimation(0, \"idle\", true);\r\n            this.isAtk = false;\r\n            this.canMoveDir = true;\r\n            this.updateMove();\r\n            this.updatePerson();\r\n            this.udpateRBody(this.moveDir);\r\n            this.atkDir = cc.Vec2.ZERO;\r\n        } else if (this._spAni.animation.includes(\"jump_down\")) {\r\n            this._spAni.setAnimation(0, \"idle\", true);\r\n            this.canMoveDir = true;\r\n            this.moveDir = cc.Vec2.ZERO;\r\n            this.udpateRBody(this.moveDir);\r\n        }\r\n    }\r\n\r\n    /** 消息 */\r\n    private _onGameMessageHandler(event: any) {\r\n        switch (event.type) {\r\n            // 清除所有僵尸\r\n            case Constant.E_Allzombie_Destory: {\r\n                this.hart(250, null, null, true, true, cc.Color.WHITE, true,true);\r\n                break;\r\n            }\r\n            // boss出现清除普通僵尸\r\n            case Constant.E_Commonzombie_Destory: {\r\n                if (!this.isBoss) {\r\n                    cc.tween(this.node).to(0.3, { opacity: 1 }, { easing: \"fade\" }).call(() => { this.putNodePool(); }).start();\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    private _divToPlayer: cc.Vec2 = cc.Vec2.ZERO;\r\n    protected _time: number = -1;\r\n    lateUpdate(dt: number): void {\r\n        if (this.isDeath || cocosz.isPause || !gameMgr.isGameStart || gameMgr.isWin || gameMgr.isFail) {\r\n            this.udpateRBody(cc.Vec2.ZERO);\r\n            return;\r\n        }\r\n        this._time++;\r\n        if (this._time % 15 == 0) {\r\n            if (this._time % 30 == 0) {\r\n                this.updateDiv();\r\n                this.updateMove();\r\n            }\r\n            this.updateAtk();\r\n            this.updateAni();\r\n            this.updatePerson();\r\n            this.udpateRBody(this.moveDir);\r\n        }\r\n    }\r\n\r\n    updateDiv() {\r\n        let fromPos = this.node.getPosition();\r\n        let toPos = gameMgr.playerTs.node.getPosition();\r\n        this._divToPlayer = toPos.subSelf(fromPos);\r\n        // 超出屏幕距离删除\r\n        if (!this.isBoss && !this.isElite && cocosz.gameMode == 6 && this._divToPlayer.mag() > cc.winSize.height / 2 / gameMgr.mainCamera.zoomRatio) {\r\n            this.putNodePool();\r\n        }\r\n    }\r\n\r\n    /** 更新移动 */\r\n    updateMove() {\r\n        if (this.rig.type == cc.RigidBodyType.Dynamic) {\r\n            if (this.canMove && this.canMoveDir) {\r\n                // 有目标\r\n                if (gameMgr.playerTs) {\r\n                    // 玩家存活\r\n                    if (!gameMgr.playerTs.isDeath) {\r\n                        // 跳跃\r\n                        if (this.zombieId == 3 && Math.random() < 0.2) {\r\n                            if (!this._spAni.animation.includes(\"jump\")) {\r\n                                this._spAni.setAnimation(0, \"jump_up\", false);\r\n                                this._spAni.addAnimation(0, \"jump_down\", false);\r\n                                this.moveDir = this._divToPlayer.normalize();\r\n                            }\r\n                        }\r\n                        // 朝着玩家移动\r\n                        else if (this._divToPlayer.mag() >= this.atkRange * 0.8) {\r\n                            this.moveDir = cc.v2(this._divToPlayer.normalize()).rotateSelf(Math.PI / 2 * (0.5 - Math.random()));\r\n                        }\r\n                        // 距离玩家很近，停止移动 \r\n                        else {\r\n                            this.moveDir = cc.Vec2.ZERO;\r\n                        }\r\n                    }\r\n                    // 玩家死亡\r\n                    else {\r\n                        // 距离很近则远离玩家\r\n                        if (this._divToPlayer.mag() < (this.isBoss ? 800 : 1500)) {\r\n                            this.moveDir = this._divToPlayer.normalize().negSelf();\r\n                        }\r\n                        // 随机移动 \r\n                        else {\r\n                            this.moveDir = cc.v2(this._divToPlayer.normalize()).rotateSelf(2 * Math.PI * Math.random());\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /** 更新攻击 */\r\n    updateAtk() {\r\n        // 能否攻击攻击\r\n        if (!this.canAtk()) {\r\n            // ...\r\n        }\r\n        // 新的攻击\r\n        else if (gameMgr.playerTs && !gameMgr.playerTs.isDeath) {\r\n            // 普通距离攻击\r\n            if (this._divToPlayer.mag() < this.atkRange) {\r\n                this.atkDir = this._divToPlayer.normalize();\r\n                this.atk();\r\n            }\r\n            // 远距离攻击\r\n            else {\r\n                switch (this.zombieId) {\r\n                    case 8:\r\n                    case 9:\r\n                    case 10:\r\n                    case 11:\r\n                    case 12:\r\n                    case 13:\r\n                    case 18: {\r\n                        if (this._divToPlayer.mag() < 600 && Math.random() < 0.1 * (this.isBoss ? 2 : 1)) {\r\n                            this.atkDir = this._divToPlayer.normalize();\r\n                            this.moveDir = this._divToPlayer.normalize();\r\n                            this.atk(\"attack2\");\r\n                        }\r\n                        else if(this._divToPlayer.mag() > 800) {\r\n                            this.atkDir = this._divToPlayer.normalize();\r\n                            this.moveDir = this._divToPlayer.normalize();\r\n                            if(this.HP <= this.totleHp / 2){\r\n                                this.atk(\"shoot\",true);\r\n                            }else{\r\n                                this.atk(\"shoot\");\r\n                            }\r\n                            \r\n                        }\r\n                        break;\r\n                    }\r\n                    case 14:\r\n                    case 16:\r\n                    case 19: {\r\n                        if (this._divToPlayer.mag() < 800 && Math.random() < 0.1 * (this.isBoss ? 2 : 1)) {\r\n                            this.atkDir = this._divToPlayer.normalize();\r\n                            this.moveDir = this._divToPlayer.normalize()\r\n                            this.atk(\"attack\");\r\n                        }\r\n                        break;\r\n                    }\r\n                    case 15: {\r\n                        if (this._divToPlayer.mag() < 800 && Math.random() < 0.1 * (this.isBoss ? 2 : 1)) {\r\n                            this.atkDir = this._divToPlayer.normalize();\r\n                            this.moveDir = this._divToPlayer.normalize()\r\n                            this.atk(\"attack\");\r\n                        }\r\n                        break;\r\n                    }\r\n                    case 16: {\r\n                        if (this._divToPlayer.mag() < 600 && Math.random() < 0.1 * (this.isBoss ? 2 : 1)) {\r\n                            this.atkDir = this._divToPlayer.normalize();\r\n                            this.moveDir = this._divToPlayer.normalize()\r\n                            this.atk(\"attack\");\r\n                        }\r\n                        break;\r\n                    }\r\n                    case 17: {\r\n                        if (this._divToPlayer.mag() < 600 && Math.random() < 0.15 * (this.isBoss ? 2 : 1)) {\r\n                            this.atkDir = this._divToPlayer.normalize();\r\n                            this.moveDir = this._divToPlayer.normalize()\r\n                            this.atk();\r\n                        }else if(this._divToPlayer.mag() > 800) {\r\n                            this.atkDir = this._divToPlayer.normalize();\r\n                            this.moveDir = this._divToPlayer.normalize();\r\n                            if(this.HP <= this.totleHp / 2){\r\n                                this.atk(\"shot\",true);\r\n                            }else{\r\n                                this.atk(\"shot\");\r\n                            }\r\n                            \r\n                        }\r\n                        break;\r\n                    }\r\n                    case 20: {\r\n                        if (this._divToPlayer.mag() < 600) {\r\n                            if (Math.random() < 0.15 * (this.isBoss ? 2 : 1)) {\r\n                                this.atkDir = this._divToPlayer.normalize();\r\n                                this.moveDir = this._divToPlayer.normalize()\r\n                                this.atk(\"attack\");\r\n                            }\r\n                        } else if (this.sp_hongzhaquan.isValid && !this.sp_hongzhaquan.node.active && this._divToPlayer.mag() > 800) {\r\n                            this.atk(\"bullet_chui\");\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.atkDir = cc.Vec2.ZERO;\r\n        }\r\n    }\r\n\r\n    /** 更新动画 */\r\n    updateAni() {\r\n        if (this.isDeath == false) {\r\n            // 暂停\r\n            if (this._spAni.timeScale == 0) {\r\n                // ...a\r\n            }\r\n            // 出场\r\n            else if (this._spAni.animation.includes(\"spawn\")) { }\r\n            // 攻击\r\n            else if (this._spAni.animation.includes(\"attack\")) { }\r\n            // 跳跃\r\n            else if (this._spAni.animation.includes(\"jump\")) { }\r\n            // 其它\r\n            else {\r\n                // 移动\r\n                if (this.moveDir && this.moveDir.mag()) {\r\n                    if (this.zombieId == 17) {\r\n                        !this._spAni.animation.includes(\"wing\") && this._spAni.setAnimation(0, \"wing\", true);\r\n                    } else {\r\n                        !this._spAni.animation.includes(\"run\") && this._spAni.setAnimation(0, \"run\", true);\r\n                    }\r\n                }\r\n                // 待机\r\n                else {\r\n                    !this._spAni.animation.includes(\"idle\") && this._spAni.setAnimation(0, \"idle\", true);\r\n                }\r\n            }\r\n        }\r\n        // 死亡\r\n        else if (this._spAni && this._spAni.skeletonData && this._spAni.skeletonData.skeletonJson.animations[\"die\"]) {\r\n            !this._spAni.animation.includes(\"die\") && this._spAni.setAnimation(0, \"die\", false);\r\n\r\n        }\r\n    }\r\n\r\n    updatePerson() {\r\n        let dir = null;\r\n        if (this.atkDir && this.atkDir.mag()) {\r\n            dir = this.atkDir;\r\n        } else if (this.moveDir && this.moveDir.mag()) {\r\n            dir = this.moveDir;\r\n        }\r\n        // 动画方向\r\n        if (dir) {\r\n            this._spAni.node.scaleX = Math.abs(this._spAni.node.scaleX) * (dir.x > 0 ? 1 : -1);\r\n        }\r\n    }\r\n\r\n    /** 刚体移动 */\r\n    udpateRBody(dir: cc.Vec2, isMust: boolean = false) {\r\n        if (this.rig.type == cc.RigidBodyType.Dynamic) {\r\n            if (this.canMove || isMust) {\r\n                if (dir && !dir.equals(cc.Vec2.ZERO)) {\r\n                    this.rig.linearVelocity = dir.mul(Math.floor(this.MoveSpeed * this.speedRate * (1 - 0.2 * Math.random())));\r\n                } else {\r\n                    this.rig.linearVelocity = cc.Vec2.ZERO;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /** 攻击 */\r\n    atk(aniName: string = \"\",isRage:boolean=false) {\r\n        let atkType: AtkType = AtkType.front;\r\n        let atkRange: number = this.atkRange;\r\n        let atkTime: number = 0;\r\n        let bulletTime: number = 2;\r\n        let clip: cc.AudioClip = this.audio_attack1;\r\n        let bulletFlySpeed : number = 0;\r\n        let bulletNum : number = 0;\r\n        let timeNum : number = 1;\r\n\r\n        let self = this;\r\n\r\n        let shootSetFunc : Function = function () {\r\n            aniName = \"attack\";\r\n            atkType = AtkType.shoot;\r\n            bulletFlySpeed = 1200;\r\n            if(isRage){\r\n                timeNum = 3;\r\n                bulletNum = ((self.zombieId - 7) / 2) + 1;\r\n            }else{\r\n                timeNum = 1;\r\n                bulletNum = ((self.zombieId - 7) / 2) + 1;\r\n            }\r\n            \r\n            self._canAtk = false;\r\n            atkTime = 3;\r\n        }\r\n\r\n        switch (this.zombieId) {\r\n            case 0:\r\n            case 1: {\r\n                if (Math.random() < 0.5) {\r\n                    aniName = \"attack\";\r\n                } else {\r\n                    aniName = \"attack2\";\r\n                    clip = this.audio_attack2;\r\n                }\r\n                atkTime = 0.3;\r\n                break;\r\n            }\r\n            case 2:\r\n            case 3: {\r\n                aniName = \"attack1\";\r\n                atkTime = 0.3;\r\n                break;\r\n            }\r\n            case 4: {\r\n                aniName = \"attack\";\r\n                atkTime = 0.3;\r\n                break;\r\n            }\r\n            case 5: {\r\n                aniName = \"attack\";\r\n                atkTime = 4;\r\n                atkType = AtkType.range;\r\n                bulletTime = 1.3;\r\n                this._canAtk = false;\r\n                break;\r\n            }\r\n            case 6: {\r\n                aniName = \"attack\";\r\n                atkTime = 4;\r\n                atkType = AtkType.range;\r\n                bulletTime = 0.95;\r\n                this._canAtk = false;\r\n                break;\r\n            }\r\n            case 7: {\r\n                break;\r\n            }\r\n            case 8:\r\n            case 18: {\r\n                if (aniName == \"attack2\") {\r\n                    aniName = \"attack2\";\r\n                    atkRange = 300;\r\n                    atkTime = 0.3;\r\n                    atkType = AtkType.area;\r\n                    clip = this.audio_attack2;\r\n                }\r\n                else if(aniName == 'shoot'){\r\n                    shootSetFunc();\r\n                }else{\r\n                    aniName = \"attack\";\r\n                    atkRange = 350;\r\n                    atkTime = 0.3;\r\n                }\r\n                break;\r\n            }\r\n            case 9: {\r\n                if (aniName == \"attack2\") {\r\n                    aniName = \"attack2\";\r\n                    atkRange = 450;\r\n                    atkTime = 0.3;\r\n                    clip = this.audio_attack2;\r\n                }\r\n                else if(aniName == 'shoot'){\r\n                    shootSetFunc();\r\n                }\r\n                else {\r\n                    aniName = \"attack\";\r\n                    atkRange = 350;\r\n                    atkTime = 0.3;\r\n                }\r\n                break;\r\n            }\r\n            case 10: {\r\n                if (aniName == \"attack2\") {\r\n                    aniName = \"attack2\";\r\n                    atkRange = 200;\r\n                    atkTime = 0.3;\r\n                    clip = this.audio_attack2;\r\n                }\r\n                else if(aniName == 'shoot'){\r\n                    shootSetFunc();\r\n                }\r\n                else {\r\n                    aniName = \"attack\";\r\n                    atkRange = 200;\r\n                    atkTime = 0.3;\r\n                }\r\n                break;\r\n            }\r\n            case 11:\r\n            case 12:\r\n            case 13: {\r\n                if (aniName == \"attack2\") {\r\n                    aniName = \"attack2\";\r\n                    atkRange = 250;\r\n                    atkTime = 0.3;\r\n                    clip = this.audio_attack2;\r\n                }\r\n                else if(aniName == 'shoot'){\r\n                    shootSetFunc();\r\n                }\r\n                else {\r\n                    aniName = \"attack\";\r\n                    atkRange = 250;\r\n                    atkTime = 0.3;\r\n                }\r\n                break;\r\n            }\r\n            case 14:\r\n            case 19: {\r\n                if (Math.random() < 0.6) {//冲盾\r\n                    aniName = \"attack\";\r\n                    atkRange = 350;\r\n                    atkTime = 0.3;\r\n                    atkType = AtkType.charge;\r\n                    clip = this.audio_attack1;\r\n                }\r\n                else {\r\n                    aniName = \"attack2\";//挥棍\r\n                    atkRange = 350;\r\n                    atkTime = 0.3;\r\n                    clip = this.audio_attack2;\r\n                }\r\n                break;\r\n            }\r\n            case 15: {\r\n                if (aniName == \"attack\") {//冲锋\r\n                    aniName = \"attack\";\r\n                    atkRange = 250;\r\n                    atkTime = 0.3;\r\n                    atkType = AtkType.charge;\r\n                }\r\n                else {\r\n                    aniName = \"attack2\";//喷火\r\n                    atkRange = 400;\r\n                    atkTime = 0.3;\r\n                }\r\n                break;\r\n            }\r\n            case 16: {\r\n                if (aniName == \"attack\" || Math.random() < 0.4) {\r\n                    aniName = \"attack\";\r\n                    atkRange = 450;\r\n                    atkTime = 0.3;\r\n                    atkType = AtkType.area;\r\n                }\r\n                else {\r\n                    aniName = \"attack2\";\r\n                    atkRange = 300;\r\n                    atkTime = 0.3;\r\n                }\r\n                break;\r\n            }\r\n            case 17: {\r\n                if(aniName == 'shot'){\r\n                    aniName = \"wing2\";\r\n                    atkType = AtkType.shot;\r\n                    bulletFlySpeed = 700;\r\n                    if(isRage){\r\n                        timeNum = 3;\r\n                        bulletNum = 15;\r\n                    }else{\r\n                        timeNum = 1;\r\n                        bulletNum = 10;\r\n                    }\r\n                    \r\n                    this._canAtk = false;\r\n                    atkTime = 3;\r\n                }else{\r\n                    if (Math.random() < 0.5) {\r\n                        aniName = \"attack\";\r\n                        atkRange = 200;\r\n                        atkTime = 0.3;\r\n                    }\r\n                    else {\r\n                        aniName = \"attack2\";\r\n                        atkRange = 200;\r\n                        atkTime = 0.3;\r\n                        atkType = AtkType.charge;\r\n                    }\r\n\r\n                }\r\n                break;\r\n            }\r\n            case 20: {\r\n                if (aniName == \"bullet_chui\") {\r\n                    atkType = AtkType.range;\r\n                    aniName = \"attack2\";\r\n                    bulletTime = 1.5;\r\n                }\r\n                else if (aniName == \"attack\") {\r\n                    aniName = \"attack\";\r\n                    atkRange = 500;\r\n                    atkTime = 0.3;\r\n                }\r\n                else {\r\n                    aniName = \"attack2\";\r\n                    atkRange = 300;\r\n                    atkTime = 0.3;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        // 执行动画\r\n        if (aniName) this._spAni.setAnimation(0, aniName, false);\r\n        if (clip && clip.isValid) gameMgr.playClip(clip, this.node, 0.5);\r\n        // 攻击伤害\r\n        let call = () => {\r\n            if (gameMgr.playerTs && !gameMgr.playerTs.isDeath) {\r\n                let fromPos = this.node.getPosition();\r\n                let toPos = gameMgr.playerTs.node.getPosition();\r\n                let div = toPos.subSelf(fromPos);\r\n                // 判断是否在攻击范围和攻击方向\r\n                if (div.mag() < atkRange) {\r\n                    if (atkType == AtkType.front) {\r\n                        if (div.mag() < 200 || (div.x * this._spAni.node.scale > 0 && Math.abs(div.y / div.x) < 1.4)) {\r\n                            gameMgr.playerTs.hart(1, this.node, div.normalizeSelf(), true);\r\n                        }\r\n                    } else if (atkType === AtkType.charge) {\r\n                        gameMgr.playerTs.hart(1, this.node, div.normalizeSelf(), true);\r\n                        this.unschedule(call);\r\n                    } else {\r\n                        gameMgr.playerTs.hart(1, this.node, div.normalizeSelf(), true);\r\n                    }\r\n                }\r\n            };\r\n        }\r\n        if (atkType == AtkType.front || atkType == AtkType.area) {\r\n            this.scheduleOnce(call, atkTime);\r\n        } else if (atkType == AtkType.charge) {\r\n            this.schedule(call, 0, 15);\r\n        } else if (atkType == AtkType.range) {\r\n            let pos_from = this.node.getPosition();\r\n            let pos_to = gameMgr.playerTs.node.getPosition();\r\n            let p2 = cc.v2((pos_from.x + pos_to.x) / 2, pos_from.y + 1500);\r\n            // 生成子弹\r\n            if (this.bullet_prefab) {\r\n                let bullet = cc.instantiate(this.bullet_prefab);\r\n                // 子弹脚本\r\n                let ts = bullet.getComponent(Bullet);\r\n                ts.id = this.id;\r\n                ts.atker = this.node;\r\n                ts.atk = this.atkNum;\r\n                ts.isAngle = true;\r\n                // 子弹属性\r\n                bullet.setPosition(pos_from);\r\n                bullet.zIndex = ZindexLayer.zindex_bullet_sky;\r\n                bullet.parent = this.node.parent;\r\n                // 子弹移动\r\n                cc.tween(bullet)\r\n                    .call(() => {\r\n                        // 轰炸预警\r\n                        if (this.sp_hongzhaquan && this.sp_hongzhaquan.isValid) {\r\n                            this.sp_hongzhaquan.node.active = true;\r\n                            this.sp_hongzhaquan.node.setPosition(pos_to);\r\n                            this.sp_hongzhaquan.setAnimation(0, \"animation\", false);\r\n                        }\r\n                    })\r\n                    .bezierTo(bulletTime, pos_from, p2, pos_to)\r\n                    .call(() => {\r\n                        // 生成爆炸子弹\r\n                        if (ts.boomEffect) {\r\n                            let boom = cc.instantiate(ts.boomEffect)\r\n                            boom.parent = ts.node.parent;\r\n                            boom.setPosition(ts.node.getPosition());\r\n                            let curBullet = boom.getComponent(Bullet);\r\n                            curBullet.atk = ts.atk;\r\n                            curBullet.atker = ts.atker;\r\n                            curBullet.id = ts.id;\r\n                            gameMgr.playEffect(\"explo\", boom);\r\n                            if (ts.hitEffect) {\r\n                                let pos = bullet.getPosition();\r\n                                let node = cc.instantiate(ts.hitEffect);\r\n                                node.parent = bullet.parent;\r\n                                node.setPosition(pos);\r\n                                node.zIndex = ZindexLayer.zindex_effect_hit;\r\n                            }\r\n                        }\r\n                        bullet.destroy();\r\n                    })\r\n                    .start();\r\n                this.scheduleOnce(() => { this._canAtk = true; }, atkTime);\r\n            }\r\n        } else if (atkType == AtkType.shot) {\r\n            // console.log('进入散弹射击模式!!!!');\r\n            if (this.bullet_prefab) {\r\n                let times = 0;\r\n                let createFunc : Function = function () {\r\n                    times++;\r\n                    if(times >= 10){\r\n                        // console.log('暂停计时器');\r\n                        self.unschedule(createFunc);\r\n                        self._canAtk = true; \r\n                    }else if(times <= timeNum){\r\n                        self.createShotBullet(bulletNum,bulletFlySpeed,times * 15);\r\n                    }\r\n                    \r\n                    \r\n                }\r\n                this.schedule(createFunc, 0.3 , 10 , 0);\r\n            }\r\n        } else if (atkType == AtkType.shoot) {\r\n            // console.log('进入单发射击模式!!!!');\r\n            if (this.bullet_prefab) {\r\n                let fromPos = this.node.getPosition();\r\n                let toPos = gameMgr.playerTs.node.getPosition();\r\n                let dir : cc.Vec2 = cc.v2(toPos.sub(fromPos).normalize());\r\n                let times = 0;\r\n                let createShootFunc : Function = function () {\r\n                    times++;\r\n                    if(times >= 10){\r\n                        // console.log('暂停计时器');\r\n                        self.unschedule(createShootFunc);\r\n                        self._canAtk = true; \r\n                    }else if(times <= timeNum){\r\n                        if (bulletNum > 1) {\r\n                            for (let i = 0; i < bulletNum; i++) {\r\n                                let dirNum = Math.pow((times - 2),2) + (parseInt(((times - 1) / 2).toString()) - 1);\r\n                                let angle = ((bulletNum - 1) / 2 - i) * 15 + dirNum * 30;\r\n                                let new_dir: cc.Vec2 = dir.rotate(cc.misc.degreesToRadians(angle));\r\n                                self.createBullet(new_dir,bulletFlySpeed);\r\n                            }\r\n                        } else {\r\n                            self.createBullet(dir,bulletFlySpeed);\r\n                        }\r\n                    }\r\n                    \r\n                    \r\n                }\r\n                this.schedule(createShootFunc, 0.3 , 10 , 0);\r\n            }\r\n        }\r\n    }\r\n\r\n    createBullet (dir: cc.Vec2,bulletFlySpeed) {\r\n        let bullet = cc.instantiate(this.bullet_prefab);\r\n        let ts = bullet.getComponent(Bullet);\r\n        ts.id = this.id;\r\n        ts.atker = this.node;\r\n        ts.atk = 1;\r\n\r\n        let strikNode = bullet.getChildByName('New Node');\r\n        strikNode.width = 150;\r\n        bullet.parent = gameMgr.map;\r\n\r\n        let fromPos = gameMgr.map.convertToNodeSpaceAR(this.node.getChildByName(\"boos\").convertToWorldSpaceAR(cc.Vec2.ZERO));\r\n        // // 子弹属性\r\n        bullet.setPosition(fromPos)\r\n        bullet.zIndex = ZindexLayer.zindex_bullet_sky;\r\n\r\n        bullet.angle = -cc.v2(dir).signAngle(cc.v2(1, 0)) / Math.PI * 180;\r\n        let pos1 = bullet.getPosition();\r\n        let pos2 = pos1.add(dir.mul(2000));\r\n\r\n        cc.tween(bullet)\r\n            .to(pos2.sub(pos1).mag() / bulletFlySpeed, { position: cc.v3(pos2) })\r\n            .call(() => {\r\n                bullet.destroy();\r\n            })\r\n            .start();\r\n    }\r\n\r\n    createShotBullet (bulletNum,bulletFlySpeed,offset) {\r\n        for(let i = 1; i <= bulletNum ; i++){\r\n            let angle = (360 / bulletNum) * i + offset;\r\n            let dir = cc.v2(1, 0).rotate(cc.misc.degreesToRadians(angle));\r\n            let bullet = cc.instantiate(this.bullet_prefab);\r\n            let ts = bullet.getComponent(Bullet);\r\n            ts.id = this.id;\r\n            ts.atker = this.node;\r\n            ts.atk = 1;\r\n\r\n            let strikNode = bullet.getChildByName('New Node');\r\n            strikNode.width = 150;\r\n            bullet.parent = gameMgr.map;\r\n            let fromPos = gameMgr.map.convertToNodeSpaceAR(this.node.getChildByName(\"boos\").convertToWorldSpaceAR(cc.Vec2.ZERO));\r\n            // 子弹属性\r\n            bullet.setPosition(fromPos)\r\n            bullet.zIndex = ZindexLayer.zindex_bullet_sky;\r\n            let pos1 = bullet.getPosition();\r\n            let pos2 = pos1.add(dir.mul(2000));\r\n            bullet.angle = angle;\r\n\r\n            cc.tween(bullet)\r\n                .to(pos2.sub(pos1).mag() / bulletFlySpeed, { position: cc.v3(pos2) })\r\n                .call(() => {\r\n                    bullet.destroy();\r\n                })\r\n                .start();\r\n            \r\n        }\r\n    }\r\n\r\n    /** 受伤 */\r\n    hart(atkNum: number, from: cc.Node, dir?: cc.Vec2, isAudio: boolean = true, isEmit: boolean = true, labelColor?: cc.Color, isMust: boolean = false,isBoom:boolean = false): void {\r\n        if (this.isDeath) return;\r\n        if (isMust == false && cocosz.isPause) return;\r\n        // 防止dir过大\r\n        if (dir && dir.mag() > 3) dir.normalizeSelf().mulSelf(3);\r\n        // 减伤\r\n        atkNum = (1 - this.damageReduction) * atkNum;\r\n        // 数字\r\n        gameMgr.showRoleTip(this.node, Math.min(this.HP, atkNum).toFixed(0), labelColor);\r\n        // 设置血量\r\n        this.HP -= atkNum;\r\n        if (this.isBoss) {\r\n            gameMgr && gameMgr.showBossHp(this.HP / this.totleHp);\r\n        }\r\n        // 受伤效果\r\n        if (!this.isAttackedEffect && this._spAni && this._spAni.node && this._spAni.node.isValid) {\r\n            this.isAttackedEffect = true;\r\n            // 受伤音效\r\n            if (isAudio) {\r\n                // 受伤音效\r\n                if (this.audio_hart) {\r\n                    gameMgr.playClip(this.audio_hart, this.node, 0.5);\r\n                }\r\n            }\r\n            // 缩放\r\n            cc.tween(this._aniLayer)\r\n                .to(0.1, { scale: 0.7 }, { easing: \"sineIn\" })\r\n                .to(0.1, { scale: 1 }, { easing: \"sineOut\" })\r\n                .call(() => { this.isAttackedEffect = false; })\r\n                .start();\r\n            // 变色\r\n            if (this._canColor) {\r\n                cc.tween(this._spAni.node)\r\n                    .to(0.1, { color: new cc.Color(0, 0, 0, 255) })\r\n                    .to(0.1, { color: cc.Color.WHITE })\r\n                    .start();\r\n            }\r\n            // 后退\r\n            if (this.rig.type == cc.RigidBodyType.Dynamic && dir && this.canMove && this.canMoveDir) {\r\n                // 控制\r\n                this.canMove = false;\r\n                this.scheduleOnce(() => { this.canMove = true; }, 0.1);\r\n                // 后退\r\n                let div = dir.mulSelf(400 * dir.mag()).addSelf(this.rig.linearVelocity);\r\n                let maxDiv: number = this.isBoss ? 100 : 300;\r\n                if (div.mag() > maxDiv) {\r\n                    div.normalizeSelf().mulSelf(maxDiv);\r\n                }\r\n                this.rig.linearVelocity = div;\r\n            }\r\n        }\r\n        if (this.HP <= 0) {\r\n            this.death();\r\n            // 死亡事件\r\n            cc.game.emit(Constant.E_GAME_LOGIC, { type: Constant.E_Zombie_Death, node: this.node, from: from , isBoom : isBoom})\r\n        } else {\r\n            // 受伤事件\r\n            if (from && isEmit) {\r\n                cc.game.emit(Constant.E_GAME_LOGIC, { type: Constant.E_Zombie_Hart, node: this.node })\r\n            }\r\n        }\r\n    }\r\n    \r\n    /** 死亡 */\r\n    death() {\r\n        if(this.isBoss && gameMgr.bossArr.length == 0 && gameMgr.Rein < 2 && cocosz.gameMode == 8){\r\n            console.log('--------boss创建完了并且击毙--------巡回变成2');\r\n            gameMgr.Rein = 2;\r\n            gameMgr.boss2Arr = [];\r\n        }\r\n        this.isAtk = false;\r\n        this.isDeath = true;\r\n        this._spAni.timeScale = 1;\r\n        // 碰撞体\r\n        this.node.getComponents(cc.Collider).forEach(v => v.enabled = false);\r\n        // 隐藏销毁\r\n        cc.tween(this._spAni.node).to(0.6, { opacity: 0 }).start();\r\n        // 死亡音效\r\n        if (this.audio_die) gameMgr.playClip(this.audio_die, null, 0.2);\r\n        // 死亡效果\r\n        this.updateAni();\r\n        if (this.zombieId < 8) {\r\n            let pre = cocosz.resMgr.getRes(\"effect_death\", cc.Prefab);\r\n            if (pre) {\r\n                let effect_death: cc.Node = cc.instantiate(pre);\r\n                effect_death.zIndex = ZindexLayer.zinedx_floorSkill;\r\n                effect_death.setPosition(this.node.position);\r\n                effect_death.setParent(this.node.parent);\r\n            }\r\n        }\r\n       \r\n        // 死亡掉落道具\r\n        this.creatItem();\r\n        this.scheduleOnce(() => { this.putNodePool(); }, 2);\r\n    }\r\n\r\n    creatItem() {\r\n        if (gameMgr.isWin || gameMgr.isFail) return;\r\n        if (upgradeMgr && upgradeMgr.isValid) {\r\n            let count = (this.zombieId < 8 ? 1 : 10);\r\n            for (let i = 0; i < count; i++) {\r\n                let pos = this.node.getPosition();\r\n                if (i > 0) {\r\n                    pos.addSelf(cc.v2(20 * i, 0).rotateSelf(2 * Math.PI * Math.random()));\r\n                }\r\n                upgradeMgr.createJingyan(pos);\r\n            }\r\n\r\n            if(cocosz.gameMode == 6){\r\n                let randNum = Math.random();\r\n                if(randNum < 0.2){\r\n                    let wppos = this.node.getPosition();\r\n                    wppos.x = wppos.x + (parseInt((Math.random() * 2).toString()) - 1) * 200;\r\n                    wppos.y = wppos.y + (parseInt((Math.random() * 2).toString()) - 1) * 300;\r\n                    upgradeMgr.createWeapon(this.node.getPosition());\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private _canColor: boolean = true;\r\n    frozenStart() {\r\n        this._canColor = false;\r\n        // 停止受伤变色\r\n        this._spAni.node.stopAllActions();\r\n        // 启动变色\r\n        this._spAni.node.color = cc.Color.BLUE;\r\n        if (this._spAni) {\r\n            this._spAni.timeScale = 0;\r\n        }\r\n        // 移动暂停\r\n        this.isAtk = false;\r\n        this.canMoveDir = false;\r\n        this.moveDir = cc.Vec2.ZERO;\r\n        this.udpateRBody(this.moveDir, true);\r\n    }\r\n    frozenEnd() {\r\n        if (!this.isDeath) {\r\n            this._canColor = true;\r\n            // 恢复颜色\r\n            this._spAni.node.color = cc.Color.WHITE;\r\n            if (this._spAni) {\r\n                this._spAni.timeScale = 1;\r\n                this._spAni.setAnimation(0, \"idle\", true);\r\n            }\r\n            // 移动恢复\r\n            this.canMoveDir = true;\r\n            this.isAtk = false;\r\n            this.atkDir = cc.Vec2.ZERO;\r\n            this.updateMove();\r\n            this.updatePerson();\r\n            this.udpateRBody(this.moveDir);\r\n        }\r\n    }\r\n    fire_start() {\r\n        this._canColor = false;\r\n        // 停止受伤变色\r\n        this._spAni.node.stopAllActions();\r\n        // 启动变色\r\n        this._spAni.node.color = cc.Color.RED;\r\n    }\r\n\r\n    fire_end() {\r\n        this._canColor = true;\r\n        // 恢复颜色\r\n        this._spAni.node.color = cc.Color.WHITE;\r\n    }\r\n\r\n    private _canAtk: boolean = true;\r\n    canAtk() {\r\n        if (!this._canAtk || this.isAtk || this._spAni.timeScale == 0 || this._spAni.animation.includes(\"spawn\") || this._spAni.animation.includes(\"jump\")) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n}\r\n"]}