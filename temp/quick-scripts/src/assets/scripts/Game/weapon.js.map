{"version":3,"sources":["assets\\scripts\\Game\\weapon.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { cocosz } from \"../Framework/CocosZ\";\r\nimport Constant from \"../Framework/Constant\";\r\nimport Msg from \"../Framework/Msg\";\r\nimport GameDate from \"./gameDate\";\r\nimport { gameMgr } from \"./gameMgr\";\r\nimport Person from \"./person\";\r\n// @ts-ignore\r\nconst i18n = require('LanguageData');\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nexport enum WeaponType {\r\n    weapon_melee,\r\n    weapon_range,\r\n    weapon_rangeAd\r\n}\r\n\r\n@ccclass\r\nexport default class Weapon extends cc.Component {\r\n\r\n    public static readonly WeaponName = [\"ak\", \"cfq\", \"dao\", \"gj\", \"jgb\", \"sd\", \"hdl\", \"sq\", \"ju\", \"ld\", \"nnp\", \"gtst\", \"tb\", \"mb\", \"mq\", \"szg\", \"rsq\", \"cjj\", \"jtl\", \"sq2\", \"tj\", \"fs\"]\r\n    public static readonly meleeWaapon = [3, 4, 5, 13, 14];\r\n    public static readonly rangeWeapon = [1, 2, 6, 7, 8, 9, 10, 11, 12, 15, 16, 17, 18, 19, 20, 21, 22];\r\n\r\n    @property({ tooltip: \"是否播放开火升级效果\" })\r\n    can_effect_hit: boolean = false;\r\n\r\n    @property(cc.Node)\r\n    hand_effect: cc.Node = null;\r\n    @property(cc.Node)\r\n    hand_2: cc.Node = null;\r\n\r\n    @property\r\n    weaponNum: number = 1;\r\n\r\n    @property(cc.Prefab)\r\n    bullet: cc.Prefab = null;\r\n\r\n    @property(cc.Color)\r\n    bulletCollor: cc.Color = cc.Color.WHITE;\r\n\r\n    @property(cc.Prefab)\r\n    shellCall: cc.Prefab = null;\r\n\r\n    @property(cc.Prefab)\r\n    atkEffect: cc.Prefab = null;\r\n\r\n    @property\r\n    atkNum: number = 10;\r\n\r\n    @property\r\n    atkRangeNum: number = 1000;\r\n\r\n    @property\r\n    flySpeed: number = 2000;\r\n\r\n    @property({ tooltip: \"开火时间\" })\r\n    @property\r\n    atkSpeed: number = 0.4;\r\n\r\n    @property({ tooltip: \"弹夹弹药数量\" })\r\n    bulletNum: number = 5;\r\n\r\n    @property({ tooltip: \"总弹药数量\" })\r\n    bulletTotal: number = 5;\r\n\r\n    @property({ tooltip: \"装弹时间\" })\r\n    reload: number = 3;\r\n\r\n    @property({ tooltip: \"装弹音效\" })\r\n    audioName: string = \"read\";\r\n\r\n    weaponLevel: number = 0;\r\n    weaponType: WeaponType = WeaponType.weapon_melee;\r\n\r\n    // 武器拥有者\r\n    public person: Person = null;\r\n    // 是否是远程武器\r\n    public get isRangeWeapon(): boolean {\r\n        return Weapon.rangeWeapon.includes(this.weaponNum);\r\n    }\r\n    // 子弹\r\n    private _curBullet: number = 0;\r\n    public get curBullet(): number {\r\n        return this._curBullet;\r\n    }\r\n    public set curBullet(v: number) {\r\n        if (v > this.bulletNum) { v = this.bulletNum; }\r\n        else if (v < 0) { v = 0; }\r\n        // 远程武器\r\n        if (this.isRangeWeapon) {\r\n            this._curBullet = v;\r\n            // 装弹\r\n            if (this._curBullet <= 0) {\r\n                this.reloadBullet();\r\n            }\r\n            // 设置子弹UI\r\n            this.setBulletUI();\r\n        }\r\n    }\r\n\r\n    protected onLoad(): void {\r\n        // 等级\r\n        if (!this.person || this.person.isPlayer) {\r\n            this.weaponLevel = cocosz.dataMgr.getGunInfo(this.weaponNum - 1).Level;\r\n        } else if ([1, 2, 3, 4, 5].includes(cocosz.gameMode)) {\r\n            this.weaponLevel = Math.floor(Math.random() * 4);\r\n        }\r\n        this.atkNum = GameDate.Weapon[Weapon.WeaponName[this.weaponNum - 1]].atk[this.weaponLevel];\r\n        this.atkSpeed = GameDate.Weapon[Weapon.WeaponName[this.weaponNum - 1]].atkSpeed[this.weaponLevel];\r\n        this.bulletNum = GameDate.Weapon[Weapon.WeaponName[this.weaponNum - 1]].bulletNum;\r\n        this.bulletTotal = GameDate.Weapon[Weapon.WeaponName[this.weaponNum - 1]].bulletTotal[this.weaponLevel];\r\n        this.reload = GameDate.Weapon[Weapon.WeaponName[this.weaponNum - 1]].reload;\r\n        this.atkRangeNum = GameDate.Weapon[Weapon.WeaponName[this.weaponNum - 1]].atkRange;\r\n        if (this.person) this.bulletTotal = Math.ceil(this.bulletTotal * this.person.bulletRate);\r\n        // 装弹\r\n        this._curBullet = 0;\r\n        this.addBullet();\r\n        this.setSD();\r\n    }\r\n\r\n    protected start(): void { }\r\n\r\n    setBulletUI() {\r\n        // UI更新子弹数\r\n        if (this.person && this.person.isPlayer) {\r\n            if (this.weaponType == WeaponType.weapon_range) {\r\n                if (gameMgr.ammo && gameMgr.ammo.isValid)\r\n                    gameMgr.ammo.string = this._curBullet + \"/\" + ([6, 7,8].includes(cocosz.gameMode) ? \"♾\" : this.bulletTotal);\r\n            } else if (this.weaponType == WeaponType.weapon_rangeAd) {\r\n                if (gameMgr.ammoAd && gameMgr.ammoAd.isValid)\r\n                    gameMgr.ammoAd.string = this._curBullet + \"/\" + ([6, 7,8].includes(cocosz.gameMode) ? \"♾\" : this.bulletTotal);\r\n            }\r\n        }\r\n    }\r\n\r\n    _arrName = [\"\", \"y\", \"p\", \"r\"]\r\n    protected setSD(): void {\r\n        // 闪电颜色\r\n        if (this.person) {\r\n            this.node.walk((child) => {\r\n                if (child.name == \"sd\") {\r\n                    if (this.weaponLevel > 0) {\r\n                        child.active = true;\r\n                        let spAni = child.getComponent(sp.Skeleton);\r\n                        spAni && spAni.setSkin(this._arrName[this.weaponLevel]);\r\n                    } else {\r\n                        child.active = false;\r\n                    }\r\n                }\r\n            }, null);\r\n        }\r\n    }\r\n\r\n    // 重置子弹\r\n    reset() {\r\n        this.bulletTotal = GameDate.Weapon[Weapon.WeaponName[this.weaponNum - 1]].bulletTotal[this.weaponLevel];\r\n        if (this.person) {\r\n            this.bulletTotal = Math.ceil(this.bulletTotal * this.person.bulletRate);\r\n        }\r\n        this._curBullet = 0;\r\n        this.addBullet();\r\n    }\r\n\r\n    // 装弹\r\n    addBullet() {\r\n        if (this.isRangeWeapon) {\r\n            if (this.person && this.person.isPlayer) {\r\n                // 子弹小于弹夹数量, 且还有备弹\r\n                if (this.curBullet < this.bulletNum && this.bulletTotal > 0) {\r\n                    if ([6, 7,8].includes(cocosz.gameMode)) {\r\n                        this.curBullet = this.bulletNum;\r\n                        cc.game.emit(Constant.E_GAME_LOGIC, { type: Constant.E_Bullet_Reload })\r\n                    } else {\r\n                        let n = this.bulletNum - this.curBullet;\r\n                        if (this.bulletTotal >= n) {\r\n                            // 子弹足够\r\n                            this.bulletTotal -= n;\r\n                            this.curBullet += n;\r\n                        } else {\r\n                            // 子弹不够\r\n                            this.bulletTotal = 0;\r\n                            this.curBullet += this.bulletTotal;\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                this.curBullet = this.bulletNum;\r\n            }\r\n        }\r\n    }\r\n\r\n    // 装弹效果\r\n    _isReload: boolean = false;\r\n    reloadBullet() {\r\n        if (this.isRangeWeapon && this._isReload == false) {\r\n            this._isReload = true;\r\n            if (this.person && this.person.isPlayer) {\r\n                if (this.bulletTotal > 0) {\r\n                    // 音效\r\n                    cocosz.audioMgr.playEffect(\"reload\");\r\n                    // 动作\r\n                    let y_back = 0;\r\n                    if (this.hand_effect) {\r\n                        y_back = this.hand_effect.y;\r\n                        cc.tween(this.hand_effect)\r\n                            .by(0.5, { y: 50 })\r\n                            .by(0.5, { y: -50 })\r\n                            .union()\r\n                            .repeat(this.reload)\r\n                            .start();\r\n                    }\r\n                    // 闪红\r\n                    cc.tween(gameMgr.rangedWeaponMess.children[0])\r\n                        .to(0.2, { color: cc.Color.RED })\r\n                        .to(0.2, { color: cc.Color.WHITE })\r\n                        .start();\r\n                    cocosz.scheduleOnce(() => {\r\n                        if (this && this.isValid) {\r\n                            this._isReload = false;\r\n                            this.addBullet();\r\n                            if (this.hand_effect) {\r\n                                this.hand_effect.stopAllActions();\r\n                                this.hand_effect.y = y_back;// 还原手的位置\r\n                            }\r\n                            // 闪绿\r\n                            cc.tween(gameMgr.rangedWeaponMess.children[0])\r\n                                .to(0.2, { color: cc.Color.GREEN })\r\n                                .to(0.2, { color: cc.Color.WHITE })\r\n                                .start();\r\n                        }\r\n                    }, this.reload * this.person.reloadRate);\r\n                    // 装弹按钮效果\r\n                    if (gameMgr.BtnBullet.active && gameMgr.BtnBullet.children[3] && gameMgr.BtnBullet.children[3].active) {\r\n                        // 装弹\r\n                        gameMgr.BtnBullet.children[3].active = false;\r\n                        gameMgr.BtnBullet.children[0].active = true;\r\n                        // 进度填充\r\n                        let t = gameMgr.playerTs.curWeapon.reload * gameMgr.playerTs.reloadRate;\r\n                        gameMgr.BtnBullet.children[1].active = true;\r\n                        let pro = gameMgr.BtnBullet.children[1].getComponent(cc.Sprite);\r\n                        cc.tween(pro)\r\n                            .set({ fillRange: 0 })\r\n                            .to(t, { fillRange: -1 })\r\n                            .call(() => {\r\n                                gameMgr.BtnBullet.children[0].active = false;\r\n                                gameMgr.BtnBullet.children[1].active = false;\r\n                                gameMgr.BtnBullet.children[2].active = false;\r\n                                gameMgr.BtnBullet.children[3].active = true;\r\n                            })\r\n                            .start();\r\n                        gameMgr.BtnBullet.children[2].active = true;\r\n                        let label = gameMgr.BtnBullet.children[2].getComponent(cc.Label);\r\n                        cc.tween(label)\r\n                            .call(() => { label.string = (t * (1 + pro.fillRange)).toFixed(1); })\r\n                            .delay(0.1)\r\n                            .union()\r\n                            .repeat(t / 0.1)\r\n                            .start()\r\n                    }\r\n                } else {\r\n                    //没有备弹,提醒\r\n                    this._isReload = false;\r\n                    Msg.Show(i18n.t(\"msg.myzd\"));//没有子弹\r\n                    cocosz.audioMgr.playEffect(\"bag\", false, 1);\r\n                }\r\n            } else {\r\n                cocosz.scheduleOnce(() => {\r\n                    if (this && this.isValid) {\r\n                        this._isReload = false;\r\n                        this.addBullet();\r\n                    }\r\n                }, this.reload);\r\n            }\r\n        }\r\n    }\r\n}\r\n"]}