{"version":3,"sources":["assets\\scripts\\Framework\\QTween.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAY,SAMX;AAND,WAAY,SAAS;IACjB,yCAAQ,CAAA;IACR,6CAAM,CAAA;IACN,6CAAM,CAAA;IACN,6CAAM,CAAA;IACN,2CAAK,CAAA;AACT,CAAC,EANW,SAAS,GAAT,iBAAS,KAAT,iBAAS,QAMpB;AAEK,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAA;QAEI,cAAS,GAAc,SAAS,CAAC,IAAI,CAAC;QAEtC,YAAO,GAAmB,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAExC,WAAM,GAAW,CAAC,CAAC;QAEnB,YAAO,GAAW,CAAC,CAAC;QAEpB,cAAS,GAAW,CAAC,CAAC;IAC1B,CAAC;IATG;QADC,QAAQ,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC;gDACD;IAEtC;QADC,QAAQ,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;8CACU;IAExC;QADC,QAAQ,CAAC,EAAE,OAAO,gBAAK,OAAO,IAAI,CAAC,SAAS,IAAI,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,SAAS,IAAI,SAAS,CAAC,MAAM,CAAA,CAAC,CAAC,EAAE,CAAC;6CACzF;IAEnB;QADC,QAAQ,EAAE;8CACS;IAEpB;QADC,QAAQ,EAAE;gDACW;IAVb,SAAS;QADrB,OAAO,CAAC,WAAW,CAAC;OACR,SAAS,CAWrB;IAAD,gBAAC;CAXD,AAWC,IAAA;AAXY,8BAAS;AActB;IAAsC,4BAAY;IAAlD;QAAA,qEAyEC;QAtEG,eAAS,GAAqB,EAAE,CAAC;QAUjC,cAAQ,GAAW,CAAC,CAAC;QACrB,eAAS,GAAa,IAAI,CAAC;QAiC3B,gBAAU,GAAW,CAAC,CAAC;QACvB,eAAS,GAAY,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAcjC,cAAQ,GAAY,KAAK,CAAC;;IAW9B,CAAC;IApEG,YAAY;IACZ,yBAAyB;IAEzB,wBAAK,GAAL;QACI,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC;IAC5B,CAAC;IAID,6BAAU,GAAV;QAAA,iBA8BC;QA7BG,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACrC,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,CAAC;YAAE,OAAO;gCAC9B,CAAC;YACN,IAAI,EAAE,GAAG,OAAK,SAAS,CAAC,CAAC,CAAC,CAAC;YAC3B,IAAI,EAAE,CAAC,SAAS,IAAI,SAAS,CAAC,IAAI,EAAE;gBAChC,OAAK,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,EAAE,QAAQ,EAAE,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;aAClF;iBACI,IAAI,EAAE,CAAC,SAAS,IAAI,SAAS,CAAC,MAAM,EAAE;gBACvC,OAAK,SAAS,EAAE,CAAC;gBACjB,OAAK,SAAS,CAAC,QAAQ,CAAC,EAAE,CAAC,OAAO,EAAE,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;aACxG;iBACI,IAAI,EAAE,CAAC,SAAS,IAAI,SAAS,CAAC,MAAM,EAAE;gBACvC,OAAK,SAAS,CAAC,IAAI,CAAC;oBAChB,KAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;oBAClB,KAAI,CAAC,SAAS,GAAG,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;oBAE/B,aAAa;oBACb,IAAI,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC,KAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,EAAE,QAAQ,EAAE,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,OAAO,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC;gBAE5F,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,OAAO,GAAG,EAAE,CAAC,SAAS,CAAC,CAAC;aACvC;iBACI,IAAI,EAAE,CAAC,SAAS,IAAI,SAAS,CAAC,MAAM,EAAE;gBACvC,OAAK,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,EAAE,KAAK,EAAE,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC;aACvD;iBACI,IAAI,EAAE,CAAC,SAAS,IAAI,SAAS,CAAC,KAAK,EAAE;gBACtC,OAAK,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,EAAE,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;aAC3G;;;QAxBL,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE;oBAArC,CAAC;SAyBT;QACD,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,aAAa,EAAE,CAAC,KAAK,EAAE,CAAC;IACnD,CAAC;IAID,sBAAI,8BAAQ;aAAZ;YACI,OAAO,IAAI,CAAC,UAAU,CAAC;QAC3B,CAAC;aAED,UAAa,GAAG;YACZ,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC,GAAG,EAAE,EAAE;gBACtC,IAAI,GAAG,GAAY,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;gBAClD,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;gBAClG,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;aAC9B;YACD,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC;QAC1B,CAAC;;;OATA;IAYD,4BAAS,GAAT;QAAA,iBASC;QARG,IAAI,IAAI,CAAC,QAAQ;YAAE,OAAO;QAC1B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,EAAE;YACjB,IAAI,CAAC,QAAQ,CAAC,cAAQ,KAAI,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,CAAA,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;SACvD;aACI;YACD,IAAI,CAAC,QAAQ,CAAC,cAAQ,KAAI,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,CAAA,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;SACvD;IACL,CAAC;IArED;QADC,QAAQ,CAAC,EAAE,IAAI,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC;+CACC;IAHhB,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAyE5B;IAAD,eAAC;CAzED,AAyEC,CAzEqC,EAAE,CAAC,SAAS,GAyEjD;kBAzEoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["export enum TweenTyep {\r\n    move = 0,\r\n    circle,\r\n    bezier,\r\n    rotate,\r\n    scale\r\n}\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass(\"TweenMess\")\r\nexport class TweenMess {\r\n    @property({ type: cc.Enum(TweenTyep) })\r\n    tweenType: TweenTyep = TweenTyep.move;\r\n    @property({ type: [cc.Vec2] })\r\n    posList: Array<cc.Vec2> = [cc.v2(0, 0)];\r\n    @property({ visible() { return this.tweenType == TweenTyep.circle || this.tweenType == TweenTyep.rotate } })\r\n    angleV: number = 0;\r\n    @property()\r\n    actTime: number = 1;\r\n    @property()\r\n    delayTime: number = 0;\r\n}\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    @property({ type: [TweenMess] })\r\n    tweenList: Array<TweenMess> = [];\r\n\r\n    // @property\r\n    // delayTime: number = 0;\r\n\r\n    start() {\r\n        this.creatTween();\r\n        this.node.opacity = 255;\r\n    }\r\n\r\n    startNum: number = 0;\r\n    mainTween: cc.Tween = null;\r\n    creatTween() {\r\n        this.mainTween = cc.tween(this.node);\r\n        if (this.tweenList.length <= 0) return;\r\n        for (let i = 0; i < this.tweenList.length; i++) {\r\n            let tw = this.tweenList[i];\r\n            if (tw.tweenType == TweenTyep.move) {\r\n                this.mainTween.to(tw.actTime, { position: tw.posList[0] }).delay(tw.delayTime);\r\n            }\r\n            else if (tw.tweenType == TweenTyep.bezier) {\r\n                this.runRotate();\r\n                this.mainTween.bezierTo(tw.actTime, tw.posList[0], tw.posList[1], tw.posList[2]).delay(tw.delayTime);\r\n            }\r\n            else if (tw.tweenType == TweenTyep.circle) {\r\n                this.mainTween.call(() => {\r\n                    this.CurAngle = 0;\r\n                    this.centerPos = tw.posList[0];\r\n\r\n                    // @ts-ignore\r\n                    let tween = cc.tween(this).to(tw.actTime, { CurAngle: tw.angleV * tw.actTime }).start();\r\n\r\n                }).delay(tw.actTime + tw.delayTime);\r\n            }\r\n            else if (tw.tweenType == TweenTyep.rotate) {\r\n                this.mainTween.by(tw.actTime, { angle: tw.angleV });\r\n            }\r\n            else if (tw.tweenType == TweenTyep.scale) {\r\n                this.mainTween.to(tw.actTime, { scaleX: tw.posList[0].x, scaleY: tw.posList[0].y }).delay(tw.delayTime);\r\n            }\r\n        }\r\n        this.mainTween.union().repeatForever().start();\r\n    }\r\n\r\n    angleConut: number = 0;\r\n    centerPos: cc.Vec2 = cc.v2(0, 0);\r\n    get CurAngle() {\r\n        return this.angleConut;\r\n    }\r\n\r\n    set CurAngle(num) {\r\n        if (Math.abs(this.angleConut - num) < 10) {\r\n            let pos: cc.Vec2 = cc.v2(this.node.getPosition());\r\n            pos = pos.sub(this.centerPos).rotate((num - this.angleConut) / 180 * Math.PI).add(this.centerPos);\r\n            this.node.setPosition(pos);\r\n        }\r\n        this.angleConut = num;\r\n    }\r\n\r\n    isRotate: boolean = false;\r\n    runRotate() {\r\n        if (this.isRotate) return;\r\n        this.isRotate = true;\r\n        if (this.node.x < 0) {\r\n            this.schedule(() => { this.node.angle += 3 }, 0.01);\r\n        }\r\n        else {\r\n            this.schedule(() => { this.node.angle -= 3 }, 0.01);\r\n        }\r\n    }\r\n}\r\n"]}