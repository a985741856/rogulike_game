{"version":3,"sources":["assets\\scripts\\Framework\\UIMgr.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { PageName, PanelName } from \"./Constant\";\r\nimport UIPage from \"./UIPage\";\r\nimport UILoadingPage from \"../UI/UILoadingPage\";\r\nimport UIHomePage from \"../UI/UIHomePage\";\r\nimport UIGamePage from \"../UI/UIGamePage\";\r\nimport UIRevivePanel from \"../UI/UIRevivePanel\";\r\nimport UIGameLoadingPage from \"../UI/UIGameLoadingPage\";\r\nimport UIPausePanel from \"../UI/UIPausePanel\";\r\nimport UITurntablePanel from \"../UI/UITurntablePage\";\r\nimport UITrySkinPanel from \"../UI/UITrySkinPanel\";\r\nimport UIWeaponLevelPanel from \"../UI/UIWeaponLevelPanel\";\r\nimport UIUpgradePanel from \"../UI/UIUpgradePanel\";\r\nimport UIOverPage from \"../UI/UIOverPage\";\r\nimport UISignPanel from \"../UI/UISignPage\";\r\nimport UITimePanel from \"../UI/UITimePage\";\r\nimport UIRankingPanel from \"../UI/UIRankingPanel\";\r\nimport UIBackPanel from \"../UI/UIBackPanel\";\r\n\r\n\r\n\r\n/**\r\n * UI管理类\r\n * 新增页面或者弹窗需要修改\r\n */\r\n\r\nexport default class UIMgr extends cc.Component {\r\n    private static _inst: UIMgr;\r\n    public static get inst(): UIMgr {\r\n        if (!UIMgr._inst) {\r\n            UIMgr._inst = new UIMgr();\r\n        }\r\n        return UIMgr._inst;\r\n    }\r\n\r\n    private _pageDict: { [name: string]: UIPage } = {};\r\n    private _panelDict: { [name: string]: UIPage } = {};\r\n\r\n    public openPage(name: string) {\r\n        console.log('点击到了按钮'+name);\r\n        // 防止连续多次点击页面\r\n        if (this._panelDict[name] && this._panelDict[name].isOpen()) return;\r\n        // 关闭所有的弹窗\r\n        this.closeAllPanel();\r\n        // 关闭所有的页面\r\n        this.closeAllPage();\r\n        // 开启界面\r\n        if (this._pageDict[name] && this._pageDict[name].isValid()) {\r\n            this._pageDict[name].open();\r\n        } else {\r\n            let page: UIPage = this._createUI(name);\r\n            if (page) {\r\n                this._pageDict[name] = page;\r\n                page.isValid() && page.open();\r\n            }\r\n        }\r\n    }\r\n\r\n    public openPanel(name: string) {\r\n        // 防止连续多次点击页面\r\n        if (this._panelDict[name] && this._panelDict[name].isOpen()) return;\r\n        // 开启弹窗\r\n        if (this._panelDict[name] && this._panelDict[name].isValid()) {\r\n            this._panelDict[name].open();\r\n        } else {\r\n            let panel: UIPage = this._createUI(name);\r\n            if (panel) {\r\n                this._panelDict[name] = panel;\r\n                panel.isValid() && panel.open();\r\n            }\r\n        }\r\n    }\r\n\r\n    public closeAllPage() {\r\n        // 关闭所有的页面\r\n        for (let key in this._pageDict) {\r\n            if (key && this._pageDict[key]) {\r\n                this._pageDict[key].close();\r\n            }\r\n        }\r\n    }\r\n\r\n    public closeAllPanel() {\r\n        for (let key in this._panelDict) {\r\n            if (key && this._panelDict[key]) {\r\n                this._panelDict[key].close();\r\n            }\r\n        }\r\n    }\r\n\r\n    public closePanel(name: string) {\r\n        if (this._panelDict[name] && this._panelDict[name].isValid()) {\r\n            this._panelDict[name].close();\r\n        }\r\n    }\r\n\r\n    public _createUI(name: string) {\r\n        switch (name) {\r\n            case PageName.UILoadingPage: {\r\n                return new UILoadingPage();\r\n            }\r\n            case PageName.UIHomePage: {\r\n                return new UIHomePage();\r\n            }\r\n            case PanelName.UISignPanel: {\r\n                return new UISignPanel();\r\n            }\r\n            case PanelName.UITurntablePanel: {\r\n                return new UITurntablePanel();\r\n            }\r\n            case PanelName.UITimePanel: {\r\n                return new UITimePanel();\r\n            }\r\n            case PanelName.UITrySkinPanel: {\r\n                return new UITrySkinPanel();\r\n            }\r\n            case PanelName.UIWeaponLevelPanel: {\r\n                return new UIWeaponLevelPanel();\r\n            }\r\n            case PageName.UIGameLoadingPage: {\r\n                return new UIGameLoadingPage();\r\n            }\r\n            case PageName.UIGamePage: {\r\n                return new UIGamePage();\r\n            }\r\n            case PanelName.UIPausePanel: {\r\n                return new UIPausePanel();\r\n            }\r\n            case PanelName.UIUpgradePanel: {\r\n                return new UIUpgradePanel();\r\n            }\r\n            case PanelName.UIRevivePanel: {\r\n                return new UIRevivePanel();\r\n            }\r\n            case PageName.UIOverPage: {\r\n                return new UIOverPage();\r\n            }\r\n            case PanelName.UIRankingPanel:{\r\n                return new UIRankingPanel();\r\n            }\r\n            case PanelName.UIBackPanel:{\r\n                return new UIBackPanel();\r\n            }\r\n            default: {\r\n                cc.error(\"Can not found class \" + name);\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}