{"version":3,"sources":["assets\\scripts\\Framework\\FlyCoin.ts"],"names":[],"mappings":";;;;;;AACA,mCAAkC;AAKlC;;GAEG;AACH;IAAA;IA+CA,CAAC;IA5CG;;;;;OAKG;IACW,YAAI,GAAlB,UAAmB,QAAgB,EAAE,GAAY,EAAE,KAAc,EAAE,OAAkB;QACjF,IAAI,GAAG,GAAG,eAAM,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC;QACrD,IAAI,GAAG,EAAE;YACL,IAAI,YAAU,GAAW,CAAC,CAAC;oCAClB,CAAC;gBACN,IAAM,IAAI,GAAY,EAAE,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;gBAC1C,IAAI,IAAI,EAAE;oBACN,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAA,CAAC;wBACnB,IAAI,CAAC,CAAC,IAAI,IAAI,QAAQ,EAAE;4BACpB,CAAC,CAAC,OAAO,GAAG,GAAG,CAAC;yBACnB;6BAAM;4BACH,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC;yBACjB;oBACL,CAAC,CAAC,CAAA;oBACF,IAAI,KAAK;wBAAE,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;oBAC9B,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,GAAG,GAAG,EAAE,EAAE,CAAC,OAAO,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC;oBACvE,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;oBACf,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;oBAC7C,IAAM,CAAC,GAAa,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;oBACnC,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,GAAG,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,GAAG,GAAG,EAAE,CAAC,CAAC;oBAC1E,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;oBACnC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBACpF,CAAC,CAAC,IAAI,CAAC;wBACH,YAAU,EAAE,CAAC;wBACb,IAAI,YAAU,IAAI,EAAE,EAAE;4BAClB,OAAO,IAAI,OAAO,EAAE,CAAC;yBACxB;wBACD,eAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;wBACrC,IAAI,CAAC,OAAO,EAAE,CAAC;oBACnB,CAAC,CAAC,CAAC;oBACH,CAAC,CAAC,KAAK,EAAE,CAAC;iBACb;;YA3BL,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE;wBAAlB,CAAC;aA4BT;SACJ;aAAM;YACH,EAAE,CAAC,GAAG,CAAC,8BAA8B,CAAC,CAAC;SAC1C;IACL,CAAC;IAAA,CAAC;IAEN,cAAC;AAAD,CA/CA,AA+CC,IAAA","file":"","sourceRoot":"/","sourcesContent":["\r\nimport { cocosz } from \"./CocosZ\";\r\nimport Constant from \"./Constant\";\r\n\r\n\r\n\r\n/**\r\n * 收取金币效果\r\n */\r\nexport default class FlyCoin {\r\n\r\n\r\n    /**\r\n     * 金币效果展示方法\r\n     * @param pos 坐标\r\n     * @param group 分组\r\n     * @param callFun 所有金币飞到后回调\r\n     */\r\n    public static Show(iconName: string, pos: cc.Vec3, group?: string, callFun?: Function) {\r\n        let pre = cocosz.resMgr.getRes(\"FlyIcon\", cc.Prefab);\r\n        if (pre) {\r\n            let finshCount: number = 0;\r\n            for (let i = 0; i < 15; i++) {\r\n                const node: cc.Node = cc.instantiate(pre);\r\n                if (node) {\r\n                    node.children.forEach(c => {\r\n                        if (c.name == iconName) {\r\n                            c.opacity = 255;\r\n                        } else {\r\n                            c.opacity = 0;\r\n                        }\r\n                    })\r\n                    if (group) node.group = group;\r\n                    node.position = cc.v3(cc.winSize.width * 0.5, cc.winSize.height * 0.5);\r\n                    node.scale = 2;\r\n                    cc.director.getScene().addChild(node, 10000);\r\n                    const t: cc.Tween = cc.tween(node);\r\n                    t.by(0.2, { x: Math.random() * 400 - 200, y: Math.random() * 400 - 200 });\r\n                    t.delay(Math.random() * 0.5 + 0.2);\r\n                    t.parallel(cc.tween().to(0.3, { position: pos }), cc.tween().to(0.3, { scale: 0 }));\r\n                    t.call(() => {\r\n                        finshCount++;\r\n                        if (finshCount == 14) {\r\n                            callFun && callFun();\r\n                        }\r\n                        cocosz.audioMgr.playEffect(iconName);\r\n                        node.destroy();\r\n                    });\r\n                    t.start();\r\n                }\r\n            }\r\n        } else {\r\n            cc.log(\"Prefab FlyCoin is not found!\");\r\n        }\r\n    };\r\n\r\n}\r\n"]}