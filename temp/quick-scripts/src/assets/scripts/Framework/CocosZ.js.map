{"version":3,"sources":["assets\\scripts\\Framework\\CocosZ.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qCAAgC;AAChC,qCAAgC;AAChC,iCAA4B;AAC5B,mCAA8B;AAC9B,uCAAgD;AAChD,uCAAkC;AAClC,uCAAkC;AAClC,2DAA0D;AAC1D,6BAAwB;AACxB,mEAA8D;AAC9D,aAAa;AACb,IAAM,IAAI,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;AACrC;;GAEG;AACH,IAAI,SAAS,EAAE;IACX,gCAAgC;IAChC,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,YAAY,CAAC,GAAG,UAAU,EAAE;QAC9C,IAAI,SAAS,EAAE;YACX,EAAE,CAAC,QAAQ,CAAC,CAAC,oBAAoB,GAAG,CAAC,CAAC;YACtC,EAAE,CAAC,QAAQ,CAAC,CAAC,mBAAmB,GAAG,CAAC,CAAC;SACxC;QACD,IAAI,IAAI,CAAC,MAAM;YAAE,OAAO;QAExB,EAAE,IAAI,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC,WAAW,CAAC,CAAC;QAEvC,IAAI,IAAI,CAAC,iBAAiB,EAAE,EAAE;YAC1B,sCAAsC;YACtC,IAAI,IAAI,CAAC,cAAc,EAAE;gBACrB,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;oBACzD,IAAI,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;oBAClC,IAAI,UAAU,IAAI,UAAU,CAAC,SAAS,EAAE,EAAE;wBACtC,UAAU,CAAC,aAAa,EAAE,CAAC;wBAC3B,IAAI,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC;wBAC/B,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;qBAC9C;oBACD,OAAO;iBACV;gBACD,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;oBACpB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;iBACpD;gBACD,IAAI,CAAC,QAAQ,IAAI,EAAE,CAAC;gBACpB,IAAI,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE;oBACzC,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC;oBAChC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;oBACzB,IAAI,CAAC,YAAY,CAAC,CAAC,EAAE,OAAO,CAAC,aAAa,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC;iBAC7D;gBACD,OAAO;aACV;YACD,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;SACzB;aAAM;YACH,IAAI,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;SAC5B;IACL,CAAC,CAAA;CACJ;AAEK,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAE5C,IAAK,SAAoB;AAAzB,WAAK,SAAS;IAAG,qCAAE,CAAA;IAAE,qCAAE,CAAA;AAAC,CAAC,EAApB,SAAS,KAAT,SAAS,QAAW;AAEd,QAAA,MAAM,GAAW,IAAI,CAAC;AAGjC;IAAoC,0BAAY;IAAhD;QAAA,qEAklBC;QAhlBW,cAAQ,GAAY,IAAI,CAAC;QACzB,cAAQ,GAAY,IAAI,CAAC;QACzB,YAAM,GAAU,IAAI,CAAC;QACrB,aAAO,GAAW,IAAI,CAAC;QACvB,eAAS,GAAa,IAAI,CAAC;QAC3B,eAAS,GAAa,IAAI,CAAC;QA2BnC,cAAQ,GAAY,KAAK,CAAC;QAElB,mBAAa,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QAErC,iBAAW,GAAW,IAAI,CAAC;QAEnB,cAAQ,GAAc,SAAS,CAAC,EAAE,CAAC;QAU3C,eAAS,GAAwB,EAAE,CAAC;QAG5B,iBAAW,GAAW,CAAC,CAAC;QASxB,mBAAa,GAAW,CAAC,CAAC;QASlC,cAAQ,GAAW,CAAC,CAAC;QAMrB,WAAW;QACH,iBAAW,GAAW,CAAC,CAAC;QAchC,aAAa;QACb,8BAAwB,GAAW,CAAC,CAAC;QAYrC,aAAa;QACb,aAAO,GAAY,KAAK,CAAC;QACzB,eAAe;QACf,YAAM,GAAY,KAAK,CAAC;QACxB,WAAW;QACX,cAAQ,GAAW,CAAC,CAAC;QAiEb,aAAO,GAAG,CAAC,GAAG,EAAE,CAAC;QASjB,UAAI,GAAY,KAAK,CAAC;QA4G9B,kBAAY,GAAQ;YAChB,kBAAkB,EAAE,YAAY;SACnC,CAAA;QAwCD,kBAAY,GAAQ;YAChB,yCAAyC;YACzC,qBAAqB;YACrB,aAAa,EAAE,CAAC;YAChB,aAAa;YACb,WAAW,EAAE,CAAC;YAEd,yCAAyC;YACzC,sBAAsB;YACtB,2BAA2B,EAAE,MAAM;YACnC,sBAAsB;YACtB,gBAAgB,EAAE,MAAM;YACxB,oBAAoB;YACpB,iBAAiB,EAAE,MAAM;YACzB,0BAA0B;YAC1B,sBAAsB,EAAE,MAAM;YAC9B,uBAAuB;YACvB,cAAc,EAAE,CAAC;YAEjB,6CAA6C;YAC7C,uBAAuB;YACvB,eAAe,EAAE,IAAI;YAErB,yCAAyC;YACzC,KAAK;YACL,2BAA2B,EAAE,MAAM;YACnC,KAAK;YACL,4BAA4B,EAAE,MAAM;YACpC,KAAK;YACL,iCAAiC,EAAE,MAAM;YACzC,OAAO;YACP,4BAA4B,EAAE,MAAM;YACpC,KAAK;YACL,2BAA2B,EAAE,MAAM;YACnC,KAAK;YACL,8BAA8B,EAAE,MAAM;YACtC,KAAK;YACL,6BAA6B,EAAE,MAAM;YACrC,KAAK;YACL,+BAA+B,EAAE,MAAM;YACvC,eAAe;YACf,sBAAsB,EAAE,CAAC;YACzB,iBAAiB;YACjB,2BAA2B,EAAE,CAAC;SACjC,CAAA;QA2HD,gBAAgB;QAChB,4BAAsB,GAAW,CAAC,CAAC;;IA4FvC,CAAC;IAzkBG,sBAAW,2BAAO;aAAlB;YACI,OAAO,IAAI,CAAC,QAAQ,CAAC;QACzB,CAAC;;;OAAA;IAED,sBAAW,2BAAO;aAAlB;YACI,OAAO,IAAI,CAAC,QAAQ,CAAC;QACzB,CAAC;;;OAAA;IAED,sBAAW,yBAAK;aAAhB;YACI,OAAO,IAAI,CAAC,MAAM,CAAC;QACvB,CAAC;;;OAAA;IAED,sBAAW,0BAAM;aAAjB;YACI,OAAO,IAAI,CAAC,OAAO,CAAC;QACxB,CAAC;;;OAAA;IAED,sBAAW,4BAAQ;aAAnB;YACI,OAAO,IAAI,CAAC,SAAS,CAAC;QAC1B,CAAC;;;OAAA;IAED,sBAAW,4BAAQ;aAAnB;YACI,OAAO,IAAI,CAAC,SAAS,CAAC;QAC1B,CAAC;;;OAAA;IAWD,sBAAI,2BAAO;aAAX,cAA2B,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;aAClD,UAAY,CAAY;YACpB,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;YAClB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;YACzC,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,CAAA;QACtC,CAAC;;;OALiD;IAYlD,sBAAI,8BAAU;aAAd;YACI,OAAO,IAAI,CAAC,WAAW,CAAC;QAC5B,CAAC;aACD,UAAe,GAAW;YACtB,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC;YACvB,YAAY,CAAC,OAAO,CAAC,kBAAQ,CAAC,WAAW,GAAG,gBAAgB,EAAE,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,CAAC;QAC/F,CAAC;;;OAJA;IAOD,sBAAI,gCAAY;aAAhB;YACI,OAAO,IAAI,CAAC,aAAa,CAAC;QAC9B,CAAC;aACD,UAAiB,GAAW;YACxB,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC;YACzB,YAAY,CAAC,OAAO,CAAC,kBAAQ,CAAC,WAAW,GAAG,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,CAAC,CAAC;QACnG,CAAC;;;OAJA;IAOD,gBAAgB;IAChB,2BAAU,GAAV,UAAW,EAAW;QAClB,OAAO,cAAM,CAAC,OAAO,CAAC,aAAa,CAAC;IACxC,CAAC;IAID,sBAAW,8BAAU;aAArB;YACI,OAAO,IAAI,CAAC,WAAW,CAAC;QAC5B,CAAC;aACD,UAAsB,CAAS;YAC3B,IAAI,CAAC,GAAG,CAAC,EAAE;gBAAE,CAAC,GAAG,CAAC,CAAC;aAAE;YACrB,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;YACrB,EAAE,CAAC,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QAC5C,CAAC;;;OALA;IAMD,sBAAW,2BAAO;aAAlB;YACI,OAAO,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;QACjC,CAAC;aACD,UAAoB,CAAU,IAAI,CAAC;;;OADlC;IAMD,sBAAW,4BAAQ;QADnB,aAAa;aACb;YACI,IAAI,CAAC,GAAG,KAAK,CAAC;YACd,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,mBAAS,CAAC,QAAQ,EAAE;gBAClD,IAAI,cAAM,CAAC,OAAO,CAAC,QAAQ,GAAG,cAAM,CAAC,wBAAwB,EAAE;oBAC3D,CAAC,GAAG,IAAI,CAAC;iBACZ;aACJ;YACD,OAAO,CAAC,CAAC;QACb,CAAC;;;OAAA;IAQD,uBAAM,GAAN;QAAA,iBA8DC;QA7DG,cAAM,GAAG,IAAI,CAAC;QACd,IAAI,CAAC,QAAQ,GAAG,iBAAO,CAAC,IAAI,CAAC;QAC7B,IAAI,CAAC,QAAQ,GAAG,iBAAO,CAAC,IAAI,CAAC;QAC7B,IAAI,CAAC,OAAO,GAAG,gBAAM,CAAC,IAAI,CAAC;QAC3B,IAAI,CAAC,MAAM,GAAG,eAAK,CAAC,IAAI,CAAC;QACzB,IAAI,CAAC,SAAS,GAAG,kBAAQ,CAAC,IAAI,CAAC;QAC/B,IAAI,CAAC,SAAS,GAAG,kBAAQ,CAAC,IAAI,CAAC;QAC/B,OAAO;QACP,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEtC,mEAAmE;QACnE,IAAI,EAAE,CAAC,GAAG,CAAC,YAAY,EAAE;YACrB,IAAI,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE;gBACtD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;aAC3B;iBAAM;gBACH,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;aAC3B;SACJ;QACD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAC5B,kEAAkE;QAClE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC7B,mEAAmE;QACnE,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,kEAAkE;QAClE,EAAE,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC,OAAO,GAAG,IAAI,CAAC;QACjD,6DAA6D;QAC7D,IAAI,OAAO,GAAG,EAAE,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAC;QAC9C,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC;QACvB,OAAO,CAAC,OAAO,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;QAC1B,8BAA8B;QAC9B,4BAA4B;QAE5B,aAAa;QACb,IAAI,mBAAS,CAAC,QAAQ,EAAE;YACpB,YAAY;YACZ,EAAE,CAAC,eAAe,CAAC,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC,CAAA;SAC7C;aAAM,IAAI,mBAAS,CAAC,MAAM,EAAE;YACzB,YAAY;YACZ,EAAE,CAAC,eAAe,CAAC;gBACf,YAAY,EAAE,IAAI;gBAClB,OAAO,EAAE,UAAU,GAAG,IAAI,CAAC;gBAC3B,IAAI,EAAE,UAAU,GAAG,IAAI,CAAC;gBACxB,QAAQ,EAAE,UAAU,GAAG,IAAI,CAAC;aAC/B,CAAC,CAAA;SACL;aAAM,IAAI,mBAAS,CAAC,MAAM,EAAE;YACzB,YAAY;YACZ,EAAE,CAAC,eAAe,CAAC;gBACf,YAAY,EAAE,IAAI;gBAClB,OAAO,EAAE,cAAc,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAA,CAAC,CAAC;gBACxD,IAAI,EAAE,UAAU,IAAI,EAAE,IAAI,IAAI,OAAO,CAAC,GAAG,CAAC,2BAAyB,IAAM,CAAC,CAAA,CAAC,CAAC;aAC/E,CAAC,CAAA;SACL;QAED,sEAAsE;QACtE,EAAE,CAAC,YAAY,CAAC,UAAU,CAAC,YAAY,EAAE,IAAI,EAAE,UAAC,GAAG,EAAE,MAAM;YACvD,IAAI,CAAC,GAAG,EAAE;gBACN,KAAI,CAAC,gBAAgB,EAAE,CAAC;aAC3B;iBAAM;gBACH,EAAE,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAA;aAC7B;QACL,CAAC,CAAC,CAAA;IACN,CAAC;IAGS,uBAAM,GAAhB,UAAiB,EAAU;QACvB,IAAI,OAAO,GAAG,EAAE,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAC;QAC9C,OAAO,CAAC,kBAAkB,GAAG,IAAI,CAAC;QAClC,aAAa;QACb,OAAO,CAAC,eAAe,GAAG,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;QAC/D,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;IACtB,CAAC;IAGO,iCAAgB,GAAxB;QAAA,iBA0BC;QAzBG,IAAI,GAAG,GAAW,kBAAkB,CAAC;QACrC,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,GAAG,EAAE,EAAE,CAAC,MAAM,EAAE,IAAI,EAAE;YAC9C,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,mBAAQ,CAAC,aAAa,CAAC,CAAC;YAC7C,WAAW;YACX,aAAK,CAAC,KAAK,CAAC;gBACR,mEAAmE;gBACnE,KAAI,CAAC,UAAU,EAAE,CAAC;gBAClB,sEAAsE;gBACtE,KAAI,CAAC,cAAc,EAAE,CAAC;gBACtB,mEAAmE;gBACnE,IAAI,mBAAS,CAAC,QAAQ,EAAE;oBACpB,mCAAmC;oBACnC,4BAA4B;oBAC5B,4BAA4B;oBAC5B,4CAA4C;oBAC5C,gDAAgD;oBAChD,0CAA0C;oBAC1C,aAAa;oBACb,gBAAgB;oBAChB,SAAS;iBACZ;qBAAM;oBACH,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;iBACpB;YACL,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IAEO,+BAAc,GAAtB;QAAA,iBAWC;QAVG,EAAE,CAAC,YAAY,CAAC,UAAU,CAAC,WAAW,EAAE,UAAC,GAAG,EAAE,MAAM;YAChD,IAAI,CAAC,GAAG,EAAE;gBACN,cAAc;gBACd,KAAI,CAAC,iBAAiB,EAAE,CAAC;gBACzB,OAAO;gBACP,KAAI,CAAC,QAAQ,EAAE,CAAC;aACnB;iBAAM;gBACH,EAAE,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAA;aAC5B;QACL,CAAC,CAAC,CAAA;IACN,CAAC;IAEO,yBAAQ,GAAhB;QAAA,iBAgEC;QA/DG,IAAI,UAAU,GAAW,CAAC,CAAC;QAC3B,IAAI,SAAS,GAAW,CAAC,CAAC;QAC1B,KAAK;QACL,IAAI,KAAK,GAAQ,EAAE,CAAC;QACpB,cAAM,CAAC,cAAc,CAAC,KAAK,EAAE,EAAE,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;QAC/C,cAAM,CAAC,MAAM,CAAC,oBAAoB,CAAC,KAAK,EAAE,EAAE,CAAC,MAAM,EAAE,IAAI,EAAE,cAAQ,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC,CAAA;QAClF,UAAU;QACV,IAAI,KAAK,GAAQ,EAAE,CAAC;QACpB,cAAM,CAAC,cAAc,CAAC,gBAAgB,GAAG,cAAM,CAAC,WAAW,EAAE,EAAE,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;QACpF,cAAM,CAAC,MAAM,CAAC,oBAAoB,CAAC,KAAK,EAAE,EAAE,CAAC,WAAW,EAAE,IAAI,EAAE,cAAQ,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC,CAAA;QACvF,UAAU;QACV,IAAI,KAAK,GAAQ,EAAE,CAAC;QACpB,cAAM,CAAC,cAAc,CAAC,YAAY,EAAE,EAAE,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;QAC3D,cAAM,CAAC,MAAM,CAAC,oBAAoB,CAAC,KAAK,EAAE,EAAE,CAAC,WAAW,EAAE,IAAI,EAAE,cAAQ,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC,CAAA;QACvF,KAAK;QACL,IAAI,KAAK,GAAQ,EAAE,CAAC;QACpB,cAAM,CAAC,cAAc,CAAC,cAAc,EAAE,EAAE,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;QACxD,cAAM,CAAC,MAAM,CAAC,oBAAoB,CAAC,KAAK,EAAE,EAAE,CAAC,MAAM,EAAE,IAAI,EAAE,cAAQ,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC,CAAA;QAClF,KAAK;QACL,IAAI,KAAK,GAAQ,EAAE,CAAC;QACpB,cAAM,CAAC,cAAc,CAAC,eAAe,EAAE,EAAE,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;QACzD,cAAM,CAAC,MAAM,CAAC,oBAAoB,CAAC,KAAK,EAAE,EAAE,CAAC,MAAM,EAAE,IAAI,EAAE,cAAQ,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC,CAAA;QAClF,KAAK;QACL,IAAI,KAAK,GAAQ,EAAE,CAAC;QACpB,cAAM,CAAC,cAAc,CAAC,aAAa,EAAE,EAAE,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;QACvD,cAAM,CAAC,MAAM,CAAC,oBAAoB,CAAC,KAAK,EAAE,EAAE,CAAC,MAAM,EAAE,IAAI,EAAE,cAAQ,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC,CAAA;QAClF,KAAK;QACL,IAAI,KAAK,GAAQ,EAAE,CAAC;QACpB,cAAM,CAAC,cAAc,CAAC,cAAc,EAAE,EAAE,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;QAC3D,cAAM,CAAC,MAAM,CAAC,oBAAoB,CAAC,KAAK,EAAE,EAAE,CAAC,SAAS,EAAE,IAAI,EAAE,cAAQ,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC,CAAA;QAErF,QAAQ;QACR,UAAU,GAAG,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;QACpH,OAAO;QACP,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE,CAAC;QAE/B,IAAI,OAAO,GAAG,CAAC,CAAC;QAChB,IAAI,CAAC,QAAQ,CAAC;YACV,OAAO,GAAG,SAAS,GAAG,UAAU,CAAC;YACjC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAQ,CAAC,YAAY,EAAE,EAAE,IAAI,EAAE,kBAAQ,CAAC,iBAAiB,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;YAEzF,IAAI,SAAS,IAAI,UAAU,IAAI,KAAI,CAAC,IAAI,EAAE;gBACtC,KAAI,CAAC,sBAAsB,EAAE,CAAC;gBAC9B,OAAO;gBACP,aAAK,CAAC,uBAAuB,CAAC;oBAC1B,IAAI,CAAC,GAAG,cAAM,CAAC,cAAc,CAAC,uBAAuB,CAAC,CAAC;oBACvD,IAAI,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;wBAC9B,KAAI,CAAC,QAAQ,CAAC,cAAQ,aAAK,CAAC,SAAS,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;qBACnE;gBACL,CAAC,EAAE,KAAI,CAAC,CAAC;gBACT,SAAS;gBACT,WAAW,CAAC,cAAQ,cAAM,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;gBAC3D,OAAO;gBACP,KAAI,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,EAAE;oBAC7B,mCAAmC;oBACnC,6CAA6C;oBAC7C,KAAI,CAAC,SAAS,CAAC,SAAS,CAAC,WAAW,EAAE;wBAClC,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;oBACpC,CAAC,CAAC,CAAC;gBACP,CAAC,CAAC,CAAC;aAEN;QACL,CAAC,EAAE,CAAC,CAAC,CAAC;IACV,CAAC;IAKO,kCAAiB,GAAzB;QACI,IAAI,GAAG,GAAG,CAAC,WAAW,EAAE,WAAW,EAAE,YAAY,CAAC,CAAC;QACnD,KAAwB,UAAG,EAAH,WAAG,EAAH,iBAAG,EAAH,IAAG,EAAE;YAAxB,IAAM,SAAS,YAAA;YAChB,IAAI,MAAM,GAAG,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;YACpD,IAAI,MAAM,EAAE;gBACR,IAAI,IAAI,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,CAAA;gBAC7C,IAAI,IAAI,EAAE;oBACN,KAAK,IAAM,GAAG,IAAI,IAAI,EAAE;wBACpB,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC;qBACtC;iBACJ;aACJ;SACJ;QACD,6DAA6D;IACjE,CAAC;IACD,kCAAiB,GAAjB,UAAkB,IAAY;QAC1B,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE;YACzB,OAAO,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC;SAC/D;aAAM;YACH,KAAK,IAAM,GAAG,IAAI,IAAI,CAAC,YAAY,EAAE;gBACjC,IAAI,GAAG,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,EAAE;oBACpB,IAAI,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE;wBACvB,OAAO,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC;qBAC9D;iBACJ;aACJ;SACJ;QACD,EAAE,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,CAAA;QAC1B,OAAO,IAAI,CAAC;IAChB,CAAC;IACD,+BAAc,GAAd,UAAe,IAAY,EAAE,IAAqB,EAAE,GAAgC;QAChF,IAAI,MAAM,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;QAC1C,IAAI,MAAM,EAAE;YACR,OAAO,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC;SACjD;aAAM;YACH,OAAO,IAAI,CAAC;SACf;IACL,CAAC;IA+CD,+BAAc,GAAd,UAAe,GAAW;QACtB,IAAI,QAAQ,IAAI,cAAM,CAAC,OAAO,EAAE;YAC5B,OAAO,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;SAC5D;aAAM;YACH,OAAO,aAAK,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;SACpC;IACL,CAAC;IACO,+BAAc,GAAtB;QACI,IAAI,QAAQ,GAAG;YACX,SAAS;YACT,IAAI,cAAM,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,MAAM,EAAE;gBAC/C,cAAM,CAAC,OAAO,GAAG,IAAI,CAAC;aACzB;YACD,WAAW;YACX,IAAI,WAAW,GAAG,cAAM,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;YACvD,IAAI,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,WAAW,IAAI,CAAC,EAAE;gBACnD,cAAM,CAAC,wBAAwB,GAAG,WAAW,CAAC;aACjD;YACD,YAAY;YACZ,IAAI,SAAS,GAAG,cAAM,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;YACnD,IAAI,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,SAAS,IAAI,CAAC,EAAE;gBAC/C,cAAM,CAAC,sBAAsB,GAAG,SAAS,CAAC;aAC7C;QACL,CAAC,CAAA;QAED,IAAI,QAAQ,IAAI,IAAI,CAAC,OAAO,EAAE;YAC1B,QAAQ,IAAI,QAAQ,EAAE,CAAC;SAC1B;aACI;YACD,UAAU;YACV,aAAK,CAAC,uBAAuB,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;SACjD;IACL,CAAC;IAEO,2BAAU,GAAlB;QACI,KAAK;QACL,cAAM,CAAC,OAAO,IAAI,cAAM,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACxC,IAAI,cAAM,CAAC,OAAO,CAAC,YAAY,IAAI,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,YAAY,EAAE,EAAE;YAC5D,cAAM,CAAC,OAAO,CAAC,YAAY,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,YAAY,EAAE,CAAC;YAC1D,cAAM,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,CAAC;SAC/B;QAED,IAAI,YAAY,CAAC,OAAO,CAAC,kBAAQ,CAAC,WAAW,GAAG,kBAAkB,CAAC,EAAE;YACjE,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,kBAAQ,CAAC,WAAW,GAAG,kBAAkB,CAAC,CAAC,CAAC;SAChG;QACD,IAAI,YAAY,CAAC,OAAO,CAAC,kBAAQ,CAAC,WAAW,GAAG,gBAAgB,CAAC,EAAE;YAC/D,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,kBAAQ,CAAC,WAAW,GAAG,gBAAgB,CAAC,CAAC,CAAC;SAC5F;QACD,IAAI,IAAI,IAAI,EAAE,CAAC,YAAY,EAAE,IAAI,cAAM,CAAC,OAAO,CAAC,YAAY,EAAE;YAC1D,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;YACpB,cAAM,CAAC,OAAO,CAAC,WAAW,GAAG,CAAC,CAAC;YAC/B,cAAM,CAAC,OAAO,CAAC,YAAY,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAC9C,cAAM,CAAC,OAAO,CAAC,YAAY,GAAG,IAAI,IAAI,EAAE,CAAC,YAAY,EAAE,CAAC;SAC3D;IACL,CAAC;IAGD,sBAAW,4BAAQ;QADnB,aAAa;aACb;YACI,OAAO,KAAK,CAAC;QACjB,CAAC;;;OAAA;IAGD,sBAAW,oCAAgB;QAD3B,mBAAmB;aACnB;YACI,IAAI,cAAM,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,OAAO,EAAE;gBAChD,OAAO,KAAK,CAAC;aAChB;iBAAM;gBACH,OAAO,IAAI,CAAC;aACf;QACL,CAAC;;;OAAA;IAED,aAAa;IACb,uBAAM,GAAN,UAAO,CAAS;QACZ,IAAI,CAAC,GAAG,CAAC,CAAC,CAAA,IAAI;QACd,IAAI,CAAC,GAAG,CAAC,CAAC,CAAA,KAAK;QACf,IAAI,CAAC,IAAI,EAAE,EAAE;YACT,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;YACvB,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;YACvB,IAAI,CAAC,GAAG,EAAE,EAAE;gBACR,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;gBACvB,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;aAC1B;SACJ;QACD,IAAI,CAAC,GAAG,EAAE,CAAC;QACX,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;QAC7B,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;QAClC,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;QACpC,OAAO,CAAC,CAAC;IACb,CAAC;IAED;;;;OAIG;IACH,wBAAO,GAAP,UAAQ,SAA0B,EAAE,SAA0B;QAAtD,0BAAA,EAAA,gBAA0B;QAAE,0BAAA,EAAA,gBAA0B;QAC1D,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,IAAI,SAAS,EAAE;gBACX,SAAS,EAAE,CAAC;aACf;iBAAM,IAAI,SAAS,EAAE;gBAClB,SAAS,EAAE,CAAC;aACf;YACD,OAAO;SACV;QACD,IAAI,cAAM,CAAC,QAAQ,CAAC,OAAO;YAAE,OAAO;QACpC,cAAM,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC;QAC/B,cAAM,CAAC,UAAU,EAAE,CAAC;QACpB,cAAM,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;QAC1B,aAAK,CAAC,SAAS,CAAC,SAAS,CAAC,UAAC,GAAG,EAAE,GAAG;YAC/B,cAAM,CAAC,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;YAChC,cAAM,CAAC,UAAU,EAAE,CAAC;YACpB,cAAM,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;YAC1B,IAAI,GAAG,EAAE;gBACL,SAAS,IAAI,SAAS,EAAE,CAAC;aAC5B;iBACI;gBACD,SAAS,IAAI,SAAS,EAAE,CAAC;gBACzB,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAA,QAAQ;gBACxD,aAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aACjB;QACL,CAAC,CAAC,CAAA;IACN,CAAC;IAID;;;;OAIG;IACI,sBAAK,GAAZ,UAAa,SAA0B,EAAE,SAA0B;QAAnE,iBAgBC;QAhBY,0BAAA,EAAA,gBAA0B;QAAE,0BAAA,EAAA,gBAA0B;QAC/D,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,SAAS,IAAI,SAAS,EAAE,CAAC;YACzB,cAAM,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;SAC7B;aAAM;YACH,IAAI,WAAS,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC;YACvC,aAAK,CAAC,KAAK,CAAC;gBACR,IAAI,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,GAAG,WAAS,GAAG,CAAC,KAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,EAAE;oBAC3E,SAAS,IAAI,SAAS,EAAE,CAAC;oBACzB,cAAM,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;iBAC7B;qBAAM;oBACH,SAAS,IAAI,SAAS,EAAE,CAAC;oBACzB,aAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;iBAC/B;YACL,CAAC,CAAC,CAAC;SACN;IACL,CAAC;IAED;;;OAGG;IACI,wBAAO,GAAd,UAAe,IAAsB;QAAtB,qBAAA,EAAA,cAAsB;QACjC,IAAI,cAAM,CAAC,OAAO,CAAC,OAAO,IAAI,KAAK;YAAE,OAAO;QAC5C,IAAI,mBAAS,CAAC,QAAQ,EAAE;YACpB,IAAI,IAAI,IAAI,OAAO,EAAE;gBACjB,YAAY;gBACZ,2DAA2D;gBAC3D,EAAE,CAAC,YAAY,CAAC,EAAE,OAAO,YAAC,GAAG,IAAI,CAAC,EAAE,IAAI,YAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;aACxD;iBAAM;gBACH,YAAY;gBACZ,EAAE,CAAC,WAAW,CAAC,EAAE,OAAO,YAAC,GAAG,IAAI,CAAC,EAAE,IAAI,YAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAE,QAAQ;aACjE;SACJ;aACI,IAAI,mBAAS,CAAC,MAAM,EAAE;YACvB,IAAI,IAAI,IAAI,OAAO,EAAE;gBACjB,YAAY;gBACZ,EAAE,CAAC,YAAY,CAAC,EAAE,OAAO,YAAC,GAAG,IAAI,CAAC,EAAE,IAAI,YAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAA,SAAS;aACjE;iBAAM;gBACH,YAAY;gBACZ,EAAE,CAAC,WAAW,CAAC,EAAE,OAAO,YAAC,GAAG,IAAI,CAAC,EAAE,IAAI,YAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAE,QAAQ;aACjE;SACJ;aAAM,IAAI,mBAAS,CAAC,MAAM,EAAE;YACzB,IAAI,IAAI,IAAI,OAAO,EAAE;gBACjB,YAAY;gBACZ,EAAE,CAAC,YAAY,EAAE,CAAC,CAAA,SAAS;aAC9B;iBAAM;gBACH,YAAY;gBACZ,EAAE,CAAC,WAAW,EAAE,CAAC,CAAC,QAAQ;aAC7B;SACJ;aAAM,IAAI,mBAAS,CAAC,IAAI,EAAE;YACvB,IAAI,IAAI,IAAI,OAAO,EAAE;gBACjB,YAAY;gBACZ,8CAA8C;gBAC9C,EAAE,CAAC,YAAY,CAAC,EAAE,OAAO,YAAC,GAAG,IAAI,CAAC,EAAE,IAAI,YAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;aACxD;iBAAM;gBACH,YAAY;gBACZ,EAAE,CAAC,WAAW,CAAC,EAAE,OAAO,YAAC,GAAG,IAAI,CAAC,EAAE,IAAI,YAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ;aAChE;SACJ;aAAM,IAAI,mBAAS,CAAC,QAAQ,EAAE;YAC3B,IAAI,IAAI,IAAI,OAAO,EAAE;gBACjB,YAAY;gBACZ,EAAE,CAAC,YAAY,CAAC,EAAE,OAAO,YAAC,GAAG,IAAI,CAAC,EAAE,IAAI,YAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;aACxD;iBAAM;gBACH,YAAY;gBACZ,EAAE,CAAC,WAAW,CAAC,EAAE,OAAO,YAAC,GAAG,IAAI,CAAC,EAAE,IAAI,YAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ;aAChE;SACJ;aAAM,IAAI,mBAAS,CAAC,OAAO,EAAE;YAC1B,IAAI,IAAI,IAAI,OAAO,EAAE;gBACjB,YAAY;gBACZ,8CAA8C;gBAC9C,IAAI,CAAC,YAAY,CAAC,EAAE,OAAO,YAAC,GAAG,IAAI,CAAC,EAAE,IAAI,YAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;aAC1D;iBAAM;gBACH,YAAY;gBACZ,IAAI,CAAC,WAAW,CAAC,EAAE,OAAO,YAAC,GAAG,IAAI,CAAC,EAAE,IAAI,YAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ;aAClE;SACJ;aAAM,IAAI,mBAAS,CAAC,eAAe,EAAE;YAClC,IAAI,IAAI,IAAI,OAAO,EAAE;gBACjB,YAAY;gBACZ,GAAG,CAAC,UAAU,CAAC,gBAAgB,CAAC,aAAK,CAAC,WAAW,CAAC,YAAY,EAAE,cAAc,EAAE,KAAK,CAAC,CAAC;aAC1F;iBAAM;gBACH,YAAY;gBACZ,GAAG,CAAC,UAAU,CAAC,gBAAgB,CAAC,aAAK,CAAC,WAAW,CAAC,YAAY,EAAE,aAAa,EAAE,KAAK,CAAC,CAAC;aACzF;SACJ;IACL,CAAC;IA/iBD;QADC,QAAQ,EAAE;4CACe;IAI1B;QADC,QAAQ,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;+CACF;IAE3B;QADC,QAAQ,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;4CACc;IAE3C;QADC,QAAQ,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,WAAW,EAAE,MAAM,EAAE,OAAO,EAAE,eAAe,EAAE,CAAC;yCACpC;IAQlD;QADC,QAAQ,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,SAAS,EAAE,CAAC;6CACG;IAlDnB,MAAM;QAD1B,OAAO;OACa,MAAM,CAklB1B;IAAD,aAAC;CAllBD,AAklBC,CAllBmC,EAAE,CAAC,SAAS,GAklB/C;kBAllBoB,MAAM","file":"","sourceRoot":"/","sourcesContent":["import GameMgr from \"./GameMgr\";\r\nimport DataMgr from \"./DataMgr\";\r\nimport UIMgr from \"./UIMgr\";\r\nimport ResMgr from \"./ResMgr\";\r\nimport Constant, { PageName } from \"./Constant\";\r\nimport SceneMgr from \"./SceneMgr\";\r\nimport AudioMgr from \"./AudioMgr\";\r\nimport { utils } from \"../../common-plugin/Scripts/Utils\";\r\nimport Msg from \"./Msg\";\r\nimport PlatUtils from \"../../common-plugin/Scripts/PlatUtils\";\r\n// @ts-ignore\r\nconst i18n = require('LanguageData');\r\n/**\r\n * sp.Skeleton动画\r\n */\r\nif (CC_EDITOR) {\r\n    // 重写update方法 达到在编辑模式下 自动播放动画的功能\r\n    sp.Skeleton.prototype['lateUpdate'] = function (dt) {\r\n        if (CC_EDITOR) {\r\n            cc['engine']._animatingInEditMode = 1;\r\n            cc['engine'].animatingInEditMode = 1;\r\n        }\r\n        if (this.paused) return;\r\n\r\n        dt *= this.timeScale * sp['timeScale'];\r\n\r\n        if (this.isAnimationCached()) {\r\n            // Cache mode and has animation queue.\r\n            if (this._isAniComplete) {\r\n                if (this._animationQueue.length === 0 && !this._headAniInfo) {\r\n                    let frameCache = this._frameCache;\r\n                    if (frameCache && frameCache.isInvalid()) {\r\n                        frameCache.updateToFrame();\r\n                        let frames = frameCache.frames;\r\n                        this._curFrame = frames[frames.length - 1];\r\n                    }\r\n                    return;\r\n                }\r\n                if (!this._headAniInfo) {\r\n                    this._headAniInfo = this._animationQueue.shift();\r\n                }\r\n                this._accTime += dt;\r\n                if (this._accTime > this._headAniInfo.delay) {\r\n                    let aniInfo = this._headAniInfo;\r\n                    this._headAniInfo = null;\r\n                    this.setAnimation(0, aniInfo.animationName, aniInfo.loop);\r\n                }\r\n                return;\r\n            }\r\n            this._updateCache(dt);\r\n        } else {\r\n            this._updateRealtime(dt);\r\n        }\r\n    }\r\n}\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nenum Languages { zh, en }\r\n\r\nexport let cocosz: CocosZ = null;\r\n\r\n@ccclass\r\nexport default class CocosZ extends cc.Component {\r\n\r\n    private _gameMgr: GameMgr = null;\r\n    private _dataMgr: DataMgr = null;\r\n    private _uiMgr: UIMgr = null;\r\n    private _resMgr: ResMgr = null;\r\n    private _audioMgr: AudioMgr = null;\r\n    private _sceneMgr: SceneMgr = null;\r\n\r\n    public get gameMgr() {\r\n        return this._gameMgr;\r\n    }\r\n\r\n    public get dataMgr() {\r\n        return this._dataMgr;\r\n    }\r\n\r\n    public get uiMgr() {\r\n        return this._uiMgr;\r\n    }\r\n\r\n    public get resMgr() {\r\n        return this._resMgr;\r\n    }\r\n\r\n    public get audioMgr() {\r\n        return this._audioMgr;\r\n    }\r\n\r\n    public get sceneMgr() {\r\n        return this._sceneMgr;\r\n    }\r\n\r\n    @property()\r\n    btnDebug: boolean = false;\r\n\r\n    private _languagesArr = [\"zh\", \"en\"];\r\n    @property({ visible: false })\r\n    curLanguage: string = \"zh\";\r\n    @property({ visible: false })\r\n    private _curLang: Languages = Languages.zh;\r\n    @property({ type: cc.Enum(Languages), displayName: \"当前语言\", tooltip: \"zh(中文) en(英文)\" })\r\n    get curLang(): Languages { return this._curLang; }\r\n    set curLang(v: Languages) {\r\n        this._curLang = v;\r\n        this.curLanguage = this._languagesArr[v];\r\n        cc.log(\"当前语言: \", this.curLanguage)\r\n    }\r\n\r\n    @property({ type: cc.AudioClip })\r\n    audioList: Array<cc.AudioClip> = [];\r\n\r\n\r\n    private _useCJTimes: number = 0;\r\n    get useCJTimes() {\r\n        return this._useCJTimes;\r\n    }\r\n    set useCJTimes(num: number) {\r\n        this._useCJTimes = num;\r\n        localStorage.setItem(Constant.ST_GameData + \"useCJTimes_dmm\", this._useCJTimes.toString());\r\n    }\r\n\r\n    private _totalCJTimes: number = 0;\r\n    get totalCJTimes() {\r\n        return this._totalCJTimes;\r\n    }\r\n    set totalCJTimes(num: number) {\r\n        this._totalCJTimes = num;\r\n        localStorage.setItem(Constant.ST_GameData + \"totalCJTimes_dmm\", this._totalCJTimes.toString());\r\n    }\r\n\r\n    curLevel: number = 0;\r\n    /** 事件上报的关卡id */\r\n    getLevelId(id?: number): number {\r\n        return cocosz.dataMgr.TotoalCount_6;\r\n    }\r\n\r\n    /** 暂停计数 */\r\n    private _pauseCount: number = 0;\r\n    public get pauseCount() {\r\n        return this._pauseCount;\r\n    }\r\n    public set pauseCount(v: number) {\r\n        if (v < 0) { v = 0; }\r\n        this._pauseCount = v;\r\n        cc.log(\"pauseCount:\", this._pauseCount);\r\n    }\r\n    public get isPause(): boolean {\r\n        return (this.pauseCount > 0);\r\n    }\r\n    private set isPause(v: boolean) { }\r\n\r\n    /** 最大分享数量 */\r\n    serverConfig_shareMaxNum: number = 0;\r\n    /** 能否显示分享 */\r\n    public get canShare(): boolean {\r\n        let r = false;\r\n        if ((CC_DEBUG && this.isDeBug) || PlatUtils.IsWechat) {\r\n            if (cocosz.dataMgr.shareNum < cocosz.serverConfig_shareMaxNum) {\r\n                r = true;\r\n            }\r\n        }\r\n        return r;\r\n    }\r\n\r\n    /** 是否启用调试 */\r\n    isDeBug: boolean = false;\r\n    /** 是否显示视频按钮 */\r\n    isADON: boolean = false;\r\n    /** 游戏模式 */\r\n    gameMode: number = 6;\r\n    onLoad() {\r\n        cocosz = this;\r\n        this._gameMgr = GameMgr.inst;\r\n        this._dataMgr = DataMgr.inst;\r\n        this._resMgr = ResMgr.inst;\r\n        this._uiMgr = UIMgr.inst;\r\n        this._audioMgr = AudioMgr.inst;\r\n        this._sceneMgr = SceneMgr.inst;\r\n        // 常驻节点\r\n        cc.game.addPersistRootNode(this.node);\r\n\r\n        ////////////////////////////// 初始化语言 //////////////////////////////\r\n        if (cc.sys.languageCode) {\r\n            if (cc.sys.languageCode.toLowerCase().indexOf(\"zh\") > -1) {\r\n                this.curLanguage = 'zh';\r\n            } else {\r\n                this.curLanguage = 'en';\r\n            }\r\n        }\r\n        i18n.init(this.curLanguage);\r\n        ////////////////////////////// 测试模式 //////////////////////////////\r\n        this.isDeBug = this.btnDebug;\r\n        ////////////////////////////// 服务器配置 //////////////////////////////\r\n        this._initConfigKey();\r\n        ////////////////////////////// 游戏配置 //////////////////////////////\r\n        cc.director.getCollisionManager().enabled = true;\r\n        // cc.director.getCollisionManager().enabledDebugDraw = true;\r\n        let manager = cc.director.getPhysicsManager();\r\n        manager.enabled = true;\r\n        manager.gravity = cc.v2();\r\n        // manager.debugDrawFlags = 1;\r\n        // cc.game.setFrameRate(30);\r\n\r\n        //保持微信屏幕长亮不熄屏\r\n        if (PlatUtils.IsWechat) {\r\n            //@ts-ignore\r\n            wx.setKeepScreenOn({ keepScreenOn: true })\r\n        } else if (PlatUtils.IsOPPO) {\r\n            //@ts-ignore\r\n            qg.setKeepScreenOn({\r\n                keepScreenOn: true,\r\n                success: function (res) { },\r\n                fail: function (res) { },\r\n                complete: function (res) { }\r\n            })\r\n        } else if (PlatUtils.IsVIVO) {\r\n            //@ts-ignore\r\n            qg.setKeepScreenOn({\r\n                keepScreenOn: true,\r\n                success: function () { console.log('handling success') },\r\n                fail: function (data, code) { console.log(`handling fail, code = ${code}`) }\r\n            })\r\n        }\r\n\r\n        ////////////////////////////// 加载bundle //////////////////////////////\r\n        cc.assetManager.loadBundle(\"bundleLoad\", null, (err, bundle) => {\r\n            if (!err) {\r\n                this._initLoadingPage();\r\n            } else {\r\n                cc.log(\"加载分包bundleLoad出错\")\r\n            }\r\n        })\r\n    }\r\n\r\n    private _dtBack = 1 / 60;\r\n    protected update(dt: number): void {\r\n        let manager = cc.director.getPhysicsManager();\r\n        manager.enabledAccumulator = true;\r\n        // @ts-ignore\r\n        manager.FIXED_TIME_STEP = cc.misc.lerp(this._dtBack, dt, 0.01);\r\n        this._dtBack = dt;\r\n    }\r\n\r\n    private isOk: boolean = false;\r\n    private _initLoadingPage() {\r\n        let url: string = \"ui/UILoadingPage\";\r\n        this.resMgr.loadAndCacheRes(url, cc.Prefab, null, () => {\r\n            this._uiMgr.openPage(PageName.UILoadingPage);\r\n            /** 登录认证 */\r\n            utils.login(() => {\r\n                ////////////////////////////// 缓存初始化 //////////////////////////////\r\n                this._initCache();\r\n                ////////////////////////////// 加载bundleRes ///////////////////////////\r\n                this._loadBundleRes();\r\n                ////////////////////////////// 华为隐私->插屏 ///////////////////////////\r\n                if (PlatUtils.IsHuaWei) {\r\n                    // utils.showYzRealNameAuthPanel();\r\n                    // utils.showPrivacyPanel();\r\n                    // this.scheduleOnce(() => {\r\n                    //     utils.registerServerInitEvent(() => {\r\n                    //         utils.adManager.showNativeSplashView(\r\n                    //             () => { this.isOk = true; }\r\n                    //         );\r\n                    //     }, this);\r\n                    // }, 3);\r\n                } else {\r\n                    this.isOk = true;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    private _loadBundleRes() {\r\n        cc.assetManager.loadBundle(\"bundleRes\", (err, bundle) => {\r\n            if (!err) {\r\n                // 初始化bundle配置\r\n                this._initBundleConfig();\r\n                // 加载资源\r\n                this._loadRes();\r\n            } else {\r\n                cc.log(\"加载分包bundleRes出错\")\r\n            }\r\n        })\r\n    }\r\n\r\n    private _loadRes() {\r\n        let totalCount: number = 0;\r\n        let compCount: number = 0;\r\n        // UI\r\n        let mess1: any = [];\r\n        cocosz.getDirWithPath(\"UI/\", cc.Prefab, mess1);\r\n        cocosz.resMgr.loadAndCacheResArray(mess1, cc.Prefab, null, () => { compCount++; })\r\n        // 图片_name\r\n        let mess2: any = [];\r\n        cocosz.getDirWithPath(\"i18n/tex_name/\" + cocosz.curLanguage, cc.SpriteAtlas, mess2);\r\n        cocosz.resMgr.loadAndCacheResArray(mess2, cc.SpriteAtlas, null, () => { compCount++; })\r\n        // 图片_icon\r\n        let mess3: any = [];\r\n        cocosz.getDirWithPath(\"tex_common\", cc.SpriteAtlas, mess3);\r\n        cocosz.resMgr.loadAndCacheResArray(mess3, cc.SpriteAtlas, null, () => { compCount++; })\r\n        // 头像\r\n        let mess4: any = [];\r\n        cocosz.getDirWithPath(\"prefab_heads\", cc.Prefab, mess4);\r\n        cocosz.resMgr.loadAndCacheResArray(mess4, cc.Prefab, null, () => { compCount++; })\r\n        // 武器\r\n        let mess5: any = [];\r\n        cocosz.getDirWithPath(\"prefab_weapon\", cc.Prefab, mess5);\r\n        cocosz.resMgr.loadAndCacheResArray(mess5, cc.Prefab, null, () => { compCount++; })\r\n        // 皮肤\r\n        let mess6: any = [];\r\n        cocosz.getDirWithPath(\"prefab_skin\", cc.Prefab, mess6);\r\n        cocosz.resMgr.loadAndCacheResArray(mess6, cc.Prefab, null, () => { compCount++; })\r\n        // 音效\r\n        let mess7: any = [];\r\n        cocosz.getDirWithPath(\"audio_common\", cc.AudioClip, mess7);\r\n        cocosz.resMgr.loadAndCacheResArray(mess7, cc.AudioClip, null, () => { compCount++; })\r\n\r\n        // 总资源数量\r\n        totalCount = mess1.length + mess2.length + mess3.length + mess4.length + mess5.length + mess6.length + mess7.length;\r\n        // 挂载音效\r\n        this.resMgr.cacheCocoszAudio();\r\n\r\n        let percent = 0;\r\n        this.schedule(() => {\r\n            percent = compCount / totalCount;\r\n            cc.game.emit(Constant.E_GAME_LOGIC, { type: Constant.E_UPDATE_PROGRESS, data: percent });\r\n\r\n            if (compCount >= totalCount && this.isOk) {\r\n                this.unscheduleAllCallbacks();\r\n                // 计时插屏\r\n                utils.registerServerInitEvent(() => {\r\n                    let t = cocosz.getConfigByKey(\"interval_time_show_cp\");\r\n                    if (Number.isInteger(t) && t > 0) {\r\n                        this.schedule(() => { utils.adManager.ShowInterstitial(); }, t);\r\n                    }\r\n                }, this);\r\n                // 开始在线计时\r\n                setInterval(() => { cocosz.dataMgr.OnlineToday++; }, 1000);\r\n                // 跳转首页\r\n                this._sceneMgr.loadScene(\"Home\", () => {\r\n                    // console.log('加载完资源跳转到homepage');\r\n                    // this._uiMgr.openPage(PageName.UIHomePage);\r\n                    this._sceneMgr.loadScene(\"GameStart\", () => {\r\n                        console.log('加载完资源跳转到homepage');\r\n                    });\r\n                });\r\n                \r\n            }\r\n        }, 0);\r\n    }\r\n\r\n    bundleConfig: any = {\r\n        \"ui/UILoadingPage\": \"bundleLoad\"\r\n    }\r\n    private _initBundleConfig() {\r\n        let arr = [\"resources\", \"bundleRes\", \"bundleLoad\"];\r\n        for (const bundleKey of arr) {\r\n            let bundle = cc.assetManager.bundles.get(bundleKey);\r\n            if (bundle) {\r\n                let info = bundle[\"_config\"][\"paths\"][\"_map\"]\r\n                if (info) {\r\n                    for (const key in info) {\r\n                        this.bundleConfig[key] = bundleKey;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // cc.log(\"bundleConfig:\", JSON.stringify(this.bundleConfig))\r\n    }\r\n    getBundleWithPath(path: string): cc.AssetManager.Bundle {\r\n        if (this.bundleConfig[path]) {\r\n            return cc.assetManager.bundles.get(this.bundleConfig[path]);\r\n        } else {\r\n            for (const key in this.bundleConfig) {\r\n                if (key[0] === path[0]) {\r\n                    if (key.includes(path, 0)) {\r\n                        return cc.assetManager.bundles.get(this.bundleConfig[key]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        cc.log(\"查找budle失败：\", path)\r\n        return null;\r\n    }\r\n    getDirWithPath(path: string, type: typeof cc.Asset, out?: Array<Record<string, any>>) {\r\n        let bundle = this.getBundleWithPath(path);\r\n        if (bundle) {\r\n            return bundle.getDirWithPath(path, type, out);\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    serverConfig: any = {\r\n        ////////////////// 分享 ///////////////////\r\n        // 分享最大次数(平台不能分享不要配置)\r\n        \"shareMaxNum\": 5,\r\n        // 分享成功的时间(秒)\r\n        \"shareTime\": 2,\r\n\r\n        ////////////////// 视频 ///////////////////\r\n        // 视频点_游戏界面_高级武器（默认显示）\r\n        \"isVideoAd_advanced_weapon\": \"true\",\r\n        // 视频点_游戏界面_全屏轰炸（默认显示）\r\n        \"isVideoAd_Qpbz\": \"true\",\r\n        // 视频点_游戏界面_磁铁（默认显示）\r\n        \"isVideoAd_Citie\": \"true\",\r\n        // 视频点_游戏界面_隐藏banner（默认隐藏）\r\n        \"isVideoAd_hideBanner\": \"true\",\r\n        // 视频点_技能弹窗_视频解锁数量（默认0）\r\n        \"skillLockNum\": 2,\r\n\r\n        ////////////////// banner ///////////////////\r\n        // 是否显示游戏界面banner(默认显示)\r\n        \"isBanner_game\": true,\r\n\r\n        ////////////////// 插屏 ///////////////////\r\n        // 首页\r\n        \"isInterstitial_UIHomePage\": \"true\",\r\n        // 签到\r\n        \"isInterstitial_UISignPanel\": \"true\",\r\n        // 转盘\r\n        \"isInterstitial_UITurntablePanel\": \"true\",\r\n        // 在线奖励\r\n        \"isInterstitial_UITimePanel\": \"true\",\r\n        // 游戏\r\n        \"isInterstitial_UIGamePage\": \"true\",\r\n        // 复活\r\n        \"isInterstitial_UIRevivePanel\": \"true\",\r\n        // 暂停\r\n        \"isInterstitial_UIPausePanel\": \"true\",\r\n        // 技能\r\n        \"isInterstitial_UIUpgradePanel\": \"true\",\r\n        // 皮肤试用间隔(组件自带)\r\n        \"try_skin_level_count\": 1,\r\n        // 皮肤试用插屏间隔(组件自带)\r\n        \"try_skin_show_ad_interval\": 1,\r\n    }\r\n    getConfigByKey(key: string) {\r\n        if (CC_DEBUG && cocosz.isDeBug) {\r\n            return this.serverConfig ? this.serverConfig[key] : null;\r\n        } else {\r\n            return utils.getConfigByKey(key);\r\n        }\r\n    }\r\n    private _initConfigKey() {\r\n        let callback = () => {\r\n            // 0 测试模式\r\n            if (cocosz.getConfigByKey(\"game_debug\") == \"true\") {\r\n                cocosz.isDeBug = true;\r\n            }\r\n            // 1 分享最大数量\r\n            let shareMaxNum = cocosz.getConfigByKey(\"shareMaxNum\");\r\n            if (Number.isInteger(shareMaxNum) && shareMaxNum >= 0) {\r\n                cocosz.serverConfig_shareMaxNum = shareMaxNum;\r\n            }\r\n            // 2 分享所需的时间\r\n            let shareTime = cocosz.getConfigByKey(\"shareTime\");\r\n            if (Number.isInteger(shareTime) && shareTime >= 0) {\r\n                cocosz.serverConfig_shareTime = shareTime;\r\n            }\r\n        }\r\n\r\n        if (CC_DEBUG && this.isDeBug) {\r\n            callback && callback();\r\n        }\r\n        else {\r\n            // 注册服务器回调\r\n            utils.registerServerInitEvent(callback, this);\r\n        }\r\n    }\r\n\r\n    private _initCache() {\r\n        // 缓存\r\n        cocosz.dataMgr && cocosz.dataMgr.init();\r\n        if (cocosz.dataMgr.LastLoadDate != (new Date()).toDateString()) {\r\n            cocosz.dataMgr.LastLoadDate = (new Date()).toDateString();\r\n            cocosz.dataMgr.shareNum = 0;\r\n        }\r\n\r\n        if (localStorage.getItem(Constant.ST_GameData + \"totalCJTimes_dmm\")) {\r\n            this._totalCJTimes = Number(localStorage.getItem(Constant.ST_GameData + \"totalCJTimes_dmm\"));\r\n        }\r\n        if (localStorage.getItem(Constant.ST_GameData + \"useCJTimes_dmm\")) {\r\n            this._useCJTimes = Number(localStorage.getItem(Constant.ST_GameData + \"useCJTimes_dmm\"));\r\n        }\r\n        if (new Date().toDateString() != cocosz.dataMgr.LastLoadDate) {\r\n            this.useCJTimes = 0;\r\n            cocosz.dataMgr.OnlineToday = 0;\r\n            cocosz.dataMgr.receiveToday = [0, 0, 0, 0, 0];\r\n            cocosz.dataMgr.LastLoadDate = new Date().toDateString();\r\n        }\r\n    }\r\n\r\n    /** 是否显示广告 */\r\n    public get isShowAd() {\r\n        return false;\r\n    }\r\n\r\n    /** 是否显示游戏banner */\r\n    public get isShowGameBanner() {\r\n        if (cocosz.getConfigByKey(\"gameBanner\") == \"false\") {\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    /** 秒转换时分秒 */\r\n    StoHMS(s: number) {\r\n        let m = 0;// 分\r\n        let h = 0;// 小时\r\n        if (s >= 60) {\r\n            m = Math.floor(s / 60);\r\n            s = Math.floor(s % 60);\r\n            if (m > 60) {\r\n                h = Math.floor(m / 60);\r\n                m = Math.floor(m % 60);\r\n            }\r\n        }\r\n        let r = \"\";\r\n        r += (h == 0 ? \"\" : h + \":\");\r\n        r += (m >= 10 ? \"\" + m : \"0\" + m);\r\n        r += (s >= 10 ? \":\" + s : \":0\" + s);\r\n        return r;\r\n    }\r\n\r\n    /**\r\n     * 看视频\r\n     * @param callFun_S 播放成功时回调\r\n     * @param callFun_F 播放失败时回调\r\n     */\r\n    watchAD(callFun_S: Function = null, callFun_F: Function = null) {\r\n        if (this.isDeBug) {\r\n            if (callFun_S) {\r\n                callFun_S();\r\n            } else if (callFun_F) {\r\n                callFun_F();\r\n            }\r\n            return;\r\n        }\r\n        if (cocosz.audioMgr.videoOn) return;\r\n        cocosz.audioMgr.videoOn = true;\r\n        cocosz.pauseCount++;\r\n        cocosz.audioMgr.stopAll();\r\n        utils.adManager.ShowVideo((ret, msg) => {\r\n            cocosz.audioMgr.videoOn = false;\r\n            cocosz.pauseCount--;\r\n            cocosz.audioMgr.playBgm();\r\n            if (ret) {\r\n                callFun_S && callFun_S();\r\n            }\r\n            else {\r\n                callFun_F && callFun_F();\r\n                msg = msg ? msg : i18n.t(\"msg.video_load_fail\");//视频加载失败\r\n                Msg.Show(msg);\r\n            }\r\n        })\r\n    }\r\n\r\n    // 分享所需的时间(单位/秒)\r\n    serverConfig_shareTime: number = 2;\r\n    /**\r\n     * \r\n     * @param 分享成功回调\r\n     * @param 分享失败回调\r\n     */\r\n    public share(callFun_S: Function = null, callFun_F: Function = null) {\r\n        if (this.isDeBug) {\r\n            callFun_S && callFun_S();\r\n            cocosz.dataMgr.shareNum++;\r\n        } else {\r\n            let startTime = (new Date()).getTime();\r\n            utils.share(() => {\r\n                if ((new Date()).getTime() - startTime > (this.serverConfig_shareTime * 1000)) {\r\n                    callFun_S && callFun_S();\r\n                    cocosz.dataMgr.shareNum++;\r\n                } else {\r\n                    callFun_F && callFun_F();\r\n                    Msg.Show(\"请分享至不同好友才可获得奖励哦\");\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 屏幕震动功能\r\n     * @param type 震动类型 传递枚举：VibrateType\r\n     */\r\n    public vibrate(type: string = \"short\") {\r\n        if (cocosz.dataMgr.ShakeOn == false) return;\r\n        if (PlatUtils.IsWechat) {\r\n            if (type == \"short\") {\r\n                //@ts-ignore\r\n                //使手机发生较短时间的振动（15 ms）。仅在 iPhone 7 / 7 Plus 以上及 Android 机型生效\r\n                wx.vibrateShort({ success(res) { }, fail(res) { } });\r\n            } else {\r\n                //@ts-ignore\r\n                wx.vibrateLong({ success(res) { }, fail(res) { } });  //400 ms\r\n            }\r\n        }\r\n        else if (PlatUtils.IsOPPO) {\r\n            if (type == \"short\") {\r\n                //@ts-ignore\r\n                qg.vibrateShort({ success(res) { }, fail(res) { } });//（20 ms）\r\n            } else {\r\n                //@ts-ignore\r\n                qg.vibrateLong({ success(res) { }, fail(res) { } });  //400 ms\r\n            }\r\n        } else if (PlatUtils.IsVIVO) {\r\n            if (type == \"short\") {\r\n                //@ts-ignore\r\n                qg.vibrateShort();//（15 ms）\r\n            } else {\r\n                //@ts-ignore\r\n                qg.vibrateLong(); //400 ms\r\n            }\r\n        } else if (PlatUtils.IsQQ) {\r\n            if (type == \"short\") {\r\n                //@ts-ignore\r\n                //（15 ms），仅在 iPhone 7/7 Plus 以上及 Android 机型生效。\r\n                qq.vibrateShort({ success(res) { }, fail(res) { } });\r\n            } else {\r\n                //@ts-ignore\r\n                qq.vibrateLong({ success(res) { }, fail(res) { } }); //400 ms\r\n            }\r\n        } else if (PlatUtils.IsDouyin) {\r\n            if (type == \"short\") {\r\n                //@ts-ignore\r\n                tt.vibrateShort({ success(res) { }, fail(res) { } });\r\n            } else {\r\n                //@ts-ignore\r\n                tt.vibrateLong({ success(res) { }, fail(res) { } }); //400 ms\r\n            }\r\n        } else if (PlatUtils.IsBaidu) {\r\n            if (type == \"short\") {\r\n                //@ts-ignore\r\n                //（15 ms），仅在 iPhone 7/7 Plus 以上及 Android 机型生效。\r\n                swan.vibrateShort({ success(res) { }, fail(res) { } });\r\n            } else {\r\n                //@ts-ignore\r\n                swan.vibrateLong({ success(res) { }, fail(res) { } }); //400 ms\r\n            }\r\n        } else if (PlatUtils.IsNativeAndroid) {\r\n            if (type == \"short\") {\r\n                //@ts-ignore\r\n                jsb.reflection.callStaticMethod(utils.Tool_Native.jniClassName, \"vibrateShort\", \"()V\");\r\n            } else {\r\n                //@ts-ignore\r\n                jsb.reflection.callStaticMethod(utils.Tool_Native.jniClassName, \"vibrateLong\", \"()V\");\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n"]}