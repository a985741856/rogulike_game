{"version":3,"sources":["assets\\scripts\\UI\\CoinBord.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Constant from \"../Framework/Constant\";\r\nimport { cocosz } from \"../Framework/CocosZ\";\r\nimport Msg from \"../Framework/Msg\";\r\n// @ts-ignore\r\nconst i18n = require('LanguageData');\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class CoinBord extends cc.Component {\r\n\r\n    private _label: cc.Label = null;\r\n    private _icon: cc.Node = null;\r\n    private _adBtn: cc.Node = null;\r\n\r\n    @property\r\n    isDiamond: boolean = false;\r\n\r\n    onLoad() {\r\n        this._label = this.node.getChildByName(\"Label\").getComponent(cc.Label);\r\n        this._icon = this.node.getChildByName(\"Icon\");\r\n        this._adBtn = this.node.getChildByName(\"BtnAD\");\r\n        if (this._adBtn) {\r\n            this._adBtn.on(cc.Node.EventType.TOUCH_END, (() => {\r\n                let node = cc.instantiate(cocosz.resMgr.getRes(\"UIADPanel\", cc.Prefab));\r\n                cc.find(\"Canvas\").addChild(node);\r\n                if (this.isDiamond) {\r\n                    node.getComponent(\"UIADPanel\").setDiamond();\r\n                }\r\n            }));\r\n            this._adBtn.active = cocosz.isADON;\r\n        }\r\n    }\r\n\r\n    onEnable() {\r\n        cc.game.on(Constant.E_GAME_LOGIC, this._onGameMessageHandler, this);\r\n\r\n        this._updateLabel();\r\n    }\r\n\r\n    onDisable() {\r\n        cc.game.targetOff(this);\r\n    }\r\n\r\n    private _onGameMessageHandler(event: any) {\r\n        switch (event.type) {\r\n            case Constant.E_COIN_CHANGE: {\r\n                this._updateLabel();\r\n                break;\r\n            }\r\n            case Constant.E_Diamond_CHANGE: {\r\n                this._updateLabel();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    private _updateLabel() {\r\n        if (this.isDiamond) {\r\n            this._label.string = cocosz.dataMgr.DiamondCount + \"\";\r\n        }\r\n        else {\r\n            this._label.string = cocosz.dataMgr.CoinCount + \"\";\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * 获取Icon的世界坐标位置(金币动画飞入使用)\r\n     */\r\n    public getLocation() {\r\n        let pos = this._icon.convertToWorldSpaceAR(cc.Vec3.ZERO);\r\n        // let temp = cc.v2(pos.x, cc.winSize.height - 76)\r\n        return pos;\r\n    }\r\n\r\n    private _addGold() {\r\n        cocosz.dataMgr.CoinCount += 200;\r\n        Msg.Show(i18n.t(\"msg.gxhdjb\") + \"200\");//恭喜获得金币\r\n    }\r\n}\r\n"]}