{"version":3,"sources":["assets\\scripts\\UI\\UIGamePage.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport UIPage from \"../Framework/UIPage\";\r\nimport Constant, { PageName, PanelName } from \"../Framework/Constant\";\r\nimport { cocosz } from \"../Framework/CocosZ\";\r\nimport PlatUtils from \"../../common-plugin/Scripts/PlatUtils\";\r\nimport { utils } from \"../../common-plugin/Scripts/Utils\";\r\nimport { BannerLocation } from \"../../common-plugin/Scripts/YZ_Constant\";\r\nimport { gameMgr } from \"../Game/gameMgr\";\r\nimport { guideLayer } from \"./GuideLayer\";\r\nimport { start } from \"repl\";\r\n// @ts-ignore\r\nconst i18n = require('LanguageData');\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n\r\n/**\r\n * 游戏页面\r\n */\r\n@ccclass\r\nexport default class UIGamePage extends UIPage {\r\n\r\n    private _handAni: cc.Node = null;\r\n    private _btnCt: cc.Node = null;\r\n    private _btnQpbz: cc.Node = null;\r\n    private ctAction : boolean = false;\r\n    private qpbzAction : boolean = false;\r\n    private settimeFunc = null;\r\n    private ctTime = 60;\r\n    private qpbzTime = 300;\r\n\r\n    constructor() {\r\n        super(PageName.UIGamePage);\r\n        this.isValid() && this.onLoad();\r\n    }\r\n\r\n    protected onLoad() {\r\n        this._handAni = cc.find(\"handAni\", this._page);\r\n        // this.settimeFunc = this.update();\r\n\r\n        let btnList1 = [\"rangedWeapon\", \"rangedWeaponAd\", \"BtnPause\", \"BtnBullet\", \"BtnShuxing\", \"BtnHideBanner\", \"BtnCt\", \"BtnQpbz\"];\r\n        btnList1.forEach(btnName => {\r\n            let btn = this._page.getChildByName(btnName);\r\n            if (btn) {\r\n                btn.on(cc.Node.EventType.TOUCH_END, this._onBtnClickHandler, this);\r\n                if (btn.name == \"rangedWeaponAd\") {\r\n                    if (cocosz.isADON && cocosz.getConfigByKey(\"isVideoAd_advanced_weapon\") != \"false\") {\r\n                        btn.active = true;\r\n                    } else {\r\n                        btn.active = false;\r\n                    }\r\n                } else if (btn.name == \"BtnHideBanner\") {\r\n                    if (cocosz.isShowAd && cocosz.isADON && cocosz.getConfigByKey(\"isVideoAd_hideBanner\") == \"true\") {\r\n                        btn.active = true;\r\n                    } else {\r\n                        btn.active = false;\r\n                    }\r\n                } else if (btn.name == \"BtnCt\") {\r\n                    this._btnCt = btn;\r\n                    if (cocosz.isShowAd && cocosz.isADON && !cocosz.dataMgr.guide_skill && cocosz.getConfigByKey(\"isVideoAd_Citie\") != \"false\") {\r\n                        this._btnCt.active = true;\r\n                        if(!this.ctAction){\r\n                            this._btnCt.getChildByName('maskNode').getComponent(cc.Sprite).fillRange = 1;\r\n                            this._btnCt.getComponent(cc.Button).interactable = false;\r\n                        }else{\r\n                            this._btnCt.getChildByName('maskNode').getComponent(cc.Sprite).fillRange = 0;\r\n                            this._btnCt.getComponent(cc.Button).interactable = true;\r\n                        }\r\n                        // 隐藏图标\r\n                        if (this._btnCt.childrenCount) {\r\n                            this._btnCt.children.forEach((child) => { child.active = false });\r\n                        }\r\n                    } else {\r\n                        // this._btnCt.active = false;\r\n                        // let widget = this._btnCt.getComponent(cc.Widget);\r\n                        // if (widget) { widget.enabled = false; }\r\n                        \r\n                    }\r\n                } else if (btn.name == \"BtnQpbz\") {\r\n                    this._btnQpbz = btn;\r\n                    if (cocosz.isShowAd && cocosz.isADON && !cocosz.dataMgr.guide_skill && cocosz.getConfigByKey(\"isVideoAd_Qpbz\") != \"false\") {\r\n                        this._btnQpbz.active = true;\r\n                        if(!this.qpbzAction){\r\n                            this._btnQpbz.getChildByName('maskNode').getComponent(cc.Sprite).fillRange = 1;\r\n                            this._btnQpbz.getComponent(cc.Button).interactable = false;\r\n                        }else{\r\n                            this._btnQpbz.getChildByName('maskNode').getComponent(cc.Sprite).fillRange = 0;\r\n                            this._btnQpbz.getComponent(cc.Button).interactable = true;\r\n                        }\r\n                        // 隐藏图标\r\n                        if (this._btnQpbz.childrenCount) {\r\n                            this._btnQpbz.children.forEach((child) => { child.active = false });\r\n                        }\r\n                    } else {\r\n                        // this._btnQpbz.active = false;\r\n                        // let widget = this._btnQpbz.getComponent(cc.Widget);\r\n                        // if (widget) { widget.enabled = false; }\r\n                    }\r\n                }\r\n            }\r\n        })\r\n\r\n        // this.settimeFunc = setInterval(function(){\r\n        //     console.log(\"setInterval\");\r\n        //     if(!this.ctAction){\r\n        //         this.ctTime -= 0.05;\r\n        //         let ctmask = this._btnCt.getChildByName('maskNode').getComponent(cc.Sprite);\r\n        //         ctmask.fillRange -= 0.05;\r\n        //         console.log(this.ctTime);\r\n        //         if(this.ctTime <= 0){\r\n        //             this.ctAction = true;\r\n        //             ctmask.fillRange = 0;\r\n        //             this._btnCt.getComponent(cc.Button).interactable = true;\r\n        //             this.ctTime = 60;\r\n        //         }\r\n        //     }\r\n        // }.bind(this),0.05)\r\n    }\r\n\r\n    protected onOpen() {\r\n        utils.SendEvent(\"页面-游戏\");\r\n        //监听游戏事件\r\n        // cc.game.on(Constant.E_GAME_LOGIC, this._onGameMessageHandler, this);\r\n        gameMgr.uiGamePage = this._page;\r\n        gameMgr.moveArea = cc.find(\"moveArea\", this._page);\r\n        gameMgr.yaogan = cc.find(\"move\", this._page);\r\n        let widge = gameMgr.yaogan.getComponent(cc.Widget);\r\n        if (widge) {\r\n            gameMgr.yaogan.getComponent(cc.Widget).updateAlignment();\r\n            widge.enabled = false;\r\n        }\r\n        // gameMgr.btnSkill = cc.find(\"BtnSkill\", this._page);\r\n        // gameMgr.btnSkillAd = cc.find(\"BtnSkillAd\", this._page);\r\n        gameMgr.rangedWeaponMess = this._page.getChildByName(\"rangedWeapon\");\r\n        gameMgr.ammo = gameMgr.rangedWeaponMess.getChildByName(\"ammo\").getComponent(cc.Label);\r\n        gameMgr.rangedWeaponAdMess = this._page.getChildByName(\"rangedWeaponAd\");\r\n        // gameMgr.ammoAd = gameMgr.rangedWeaponAdMess.getChildByName(\"ammo\").getComponent(cc.Label);\r\n        gameMgr.qlzc = this._page.getChildByName(\"qlzc\");\r\n        gameMgr.BtnBullet = this._page.getChildByName(\"BtnBullet\");\r\n        // 地下城\r\n        if (cocosz.gameMode == 6 || cocosz.gameMode == 8) {\r\n            // boss血条\r\n            gameMgr.model6_bossBar = this._page.getChildByName(\"bossBar\").getComponent(cc.ProgressBar);\r\n            // 经验条\r\n            gameMgr.model6_jingyanBar = this._page.getChildByName(\"jingyanBar\").getComponent(cc.ProgressBar);\r\n            // 技能条\r\n            gameMgr.model6_skillScrollView = this._page.getChildByName(\"skillScrollView\").getComponent(cc.ScrollView);\r\n            gameMgr.model6_skillScrollView_content = cc.find(\"skillScrollView/view/content\", this._page);\r\n            gameMgr.model6_skillScrollView_item = this._page.getChildByName(\"item\");\r\n            // 头像\r\n            let BtnShuxing = this._page.getChildByName(\"BtnShuxing\");\r\n            gameMgr.model6_touxiang = BtnShuxing.getChildByName(\"touxiang\");\r\n            let pre = cocosz.resMgr.getRes(\"head\" + (cocosz.gameMgr.gameCtr.curUseSkinId + 1), cc.Prefab);\r\n            if (pre) {\r\n                let touxiang = cc.instantiate(pre);\r\n                touxiang.setParent(gameMgr.model6_touxiang);\r\n                touxiang.scale = 1;\r\n                if (touxiang.children[0]) { touxiang.children[0].active = false; }\r\n            }\r\n            // 属性按钮\r\n            gameMgr.model6_btnShuxing = this._page.getChildByName(\"BtnShuxing\");\r\n            if (gameMgr.model6_btnShuxing) gameMgr.model6_btnShuxing.active = true;\r\n            gameMgr.model6_shuxing = BtnShuxing.getChildByName(\"shuxing\");\r\n            gameMgr.model6_shuxing.active = false;\r\n            // 等级\r\n            gameMgr.model6_levelLabel = this._page.getChildByName(\"levelLabel\").getComponent(cc.Label);\r\n            // 计时\r\n            gameMgr.model6_timeLabel = this._page.getChildByName(\"timeLabel\").getComponent(cc.Label);\r\n            // boss提示\r\n            gameMgr.model6_ts = this._page.getChildByName(\"ts\");\r\n\r\n            if (cocosz.dataMgr.guide_skill && (cocosz.getConfigByKey(\"isVideoAd_Qpbz\") != \"false\" || cocosz.getConfigByKey(\"isVideoAd_Citie\") != \"false\")) {\r\n                let count: number = 0;\r\n                let tw: cc.Tween = cc.tween(this._page)\r\n                    .delay(1)\r\n                    .call(() => {\r\n                        if (gameMgr.isGameStart && !cocosz.isPause) {\r\n                            count++;\r\n                            cc.log(\"count:\", count)\r\n                            if (count == 5) {\r\n                                if (cocosz.getConfigByKey(\"isVideoAd_Qpbz\") != \"false\") {\r\n                                    this.showSkill(this._btnQpbz);\r\n                                }\r\n                            } else if (count == 8) {\r\n                                if (cocosz.getConfigByKey(\"isVideoAd_Citie\") != \"false\") {\r\n                                    this.showSkill(this._btnCt);\r\n                                }\r\n                            } else if (count > 8) {\r\n                                cocosz.dataMgr.guide_skill = false;\r\n                                tw && tw.stop();\r\n                            }\r\n                        }\r\n                    })\r\n                    .union()\r\n                    .repeatForever()\r\n                    .start();\r\n            }\r\n        }\r\n        gameMgr.startGame();\r\n\r\n        this.showAd();\r\n        cc.game.on(Constant.E_GAME_LOGIC, this._onGameMessageHandler, this);\r\n\r\n        this.settimeFunc = setInterval(function(){\r\n            if(!gameMgr.isGameStart || cocosz.isPause){\r\n                return;\r\n            }\r\n            // console.log(\"setInterval\");\r\n            if(!this.ctAction){\r\n                this.ctTime -= 0.05;\r\n                let ctmask = this._btnCt.getChildByName('maskNode').getComponent(cc.Sprite);\r\n                ctmask.fillRange -= Number((0.05 / 60));\r\n                // console.log(ctmask.fillRange);\r\n                if(this.ctTime <= 0){\r\n                    this.ctAction = true;\r\n                    ctmask.fillRange = 0;\r\n                    this._btnCt.getComponent(cc.Button).interactable = true;\r\n                    this.ctTime = 60;\r\n                }\r\n            }\r\n\r\n            if(!this.qpbzAction){\r\n                this.qpbzTime -= 0.05;\r\n                let qpbzmask = this._btnQpbz.getChildByName('maskNode').getComponent(cc.Sprite);\r\n                qpbzmask.fillRange -= Number((0.05 / 300));\r\n                // console.log(qpbzmask.fillRange);\r\n                if(this.qpbzTime <= 0){\r\n                    this.qpbzAction = true;\r\n                    qpbzmask.fillRange = 0;\r\n                    this._btnQpbz.getComponent(cc.Button).interactable = true;\r\n                    this.qpbzTime = 300;\r\n                }\r\n            }\r\n        }.bind(this),50)\r\n    }\r\n\r\n    protected onClose() {\r\n        clearInterval(this.settimeFunc);\r\n        cc.game.targetOff(this);\r\n        utils.adManager.hideBlockAd();\r\n        utils.adManager.hideNativeTryGameWidget();\r\n        utils.hideVivoGamePortalWidget();\r\n        utils.adManager.HideSingleNativeAd();\r\n        if (PlatUtils.IsWechat) {\r\n            utils.adManager.hideCustomAd({ location: 3 });\r\n            utils.adManager.hideCustomAd({ location: 4 });\r\n            utils.adManager.hideCustomAd({ location: 8 });\r\n        } else if (PlatUtils.IsVIVO) {\r\n            utils.adManager.hideCustomAd({ location: BannerLocation.Game });\r\n        }\r\n    }\r\n\r\n\r\n    protected showAd() {\r\n        // 录屏\r\n        utils.showRecordWidget({ group: \"default\", scale: 1, top: 50, left: 100, parent: this._page });\r\n        if (cocosz.isShowAd) {\r\n            // banner\r\n            if (!cocosz.isShowGameBanner || PlatUtils.IsWechat || PlatUtils.IsDouyin || PlatUtils.IsAndroidDouYin) {\r\n                utils.adManager.HideBanner(BannerLocation.Game);\r\n            } else {\r\n                utils.adManager.ShowBanner(BannerLocation.Game, { width: 0.1, bottom: 0 });\r\n            }\r\n            utils.adManager.showNativeTryGameWidget({ left: 10, top: 500, scale: 1, parent: this._page });\r\n            // 原生广告\r\n            if (PlatUtils.IsWechat) {\r\n                utils.adManager.showCustomAd({ location: 3 });\r\n                utils.adManager.showCustomAd({ location: 4 });\r\n                utils.adManager.showCustomAd({ location: 8 });\r\n            } else if (PlatUtils.IsVIVO) {\r\n                utils.adManager.showCustomAd({ location: BannerLocation.Game });\r\n            }\r\n        }\r\n    }\r\n\r\n    showSkill(n: cc.Node) {\r\n        let widget = n.getComponent(cc.Widget);\r\n        if (widget) widget.enabled = false;\r\n        if (n && n.isValid) {\r\n            cocosz.pauseCount++;\r\n            n.setPosition(0, cc.winSize.height / 2);\r\n            n.scale = 2;\r\n            n.active = true;\r\n\r\n            let call = () => {\r\n                n.stopAllActions();\r\n                cc.tween(n)\r\n                    .call(() => {\r\n                        if (this._handAni && this._handAni.isValid) {\r\n                            this._handAni.active = false;\r\n                        }\r\n                    })\r\n                    .to(0.5, { scale: 1, x: - cc.winSize.width / 2 + widget.left + n.width / 2, y: - cc.winSize.height / 2 + widget.bottom + n.height / 2 })\r\n                    .call(() => {\r\n                        if (widget) widget.enabled = true;\r\n                        cocosz.pauseCount--;\r\n                    })\r\n                    .start();\r\n            }\r\n            n.once(cc.Node.EventType.TOUCH_END, call, this);\r\n            n.stopAllActions();\r\n            cc.tween(n)\r\n                .to(1, { y: 0 }, { easing: \"backOut\" })\r\n                .call(() => {\r\n                    if (this._handAni && this._handAni.isValid) {\r\n                        this._handAni.setPosition(0, 0);\r\n                        this._handAni.active = true;\r\n                        let spAni = this._handAni.getComponent(sp.Skeleton);\r\n                        if (spAni) spAni.setAnimation(0, \"animation\", true);\r\n                    }\r\n                })\r\n                .delay(4)\r\n                .call(() => {\r\n                    n.off(cc.Node.EventType.TOUCH_END, call, this)\r\n                    call();\r\n                })\r\n                .start();\r\n        }\r\n    }\r\n\r\n    // 全屏轰炸动画\r\n    effect_qpbz() {\r\n        let pre = cocosz.resMgr.getRes(\"effect_qpbz\", cc.Prefab);\r\n        if (pre) {\r\n            let node: cc.Node = cc.instantiate(pre);\r\n            node.setPosition(gameMgr.playerTs.node.position);\r\n            cc.director.getScene().getChildByName(\"Canvas\").addChild(node);\r\n            cc.tween(node)\r\n                .delay(0.3)\r\n                .call(() => {\r\n                    gameMgr.playEffect(\"QuanPingBaoZha\");\r\n                    cc.game.emit(Constant.E_GAME_LOGIC, { type: Constant.E_Allzombie_Destory });\r\n                })\r\n                .union()\r\n                .repeat(4)\r\n                .call(() => { node.destroy(); })\r\n                .start();\r\n        }\r\n    }\r\n\r\n    private _onGameMessageHandler(event: any) {\r\n        switch (event.type) { }\r\n    }\r\n\r\n    private async _onBtnClickHandler(event: cc.Event.EventTouch) {\r\n        cocosz.audioMgr.playBtnEffect();\r\n\r\n        switch (event.target.name) {\r\n            case \"rangedWeaponAd\": {\r\n                if (gameMgr.rangedWeaponAdMess) {\r\n                    let adIcon = gameMgr.rangedWeaponAdMess.getChildByName(\"adIcon\");\r\n                    if (adIcon && adIcon.active) {\r\n                        utils.SendEvent(\"视频-高级武器-播放\")\r\n                        cocosz.watchAD(() => {\r\n                            utils.SendEvent(\"视频-高级武器-成功\")\r\n                            adIcon.active = false;\r\n                            gameMgr.useRangedWeaponAd();\r\n                            gameMgr.rangedWeaponAdMess.stopAllActions();\r\n                        }, () => {\r\n                            utils.SendEvent(\"视频-高级武器-失败\")\r\n                        });\r\n                    } else {\r\n                        gameMgr.useRangedWeaponAd();\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case \"rangedWeapon\": {\r\n                gameMgr.useRangedWeapon();\r\n                break;\r\n            }\r\n            case \"BtnPause\": {\r\n                cocosz.uiMgr.openPanel(PanelName.UIPausePanel);\r\n                break;\r\n            }\r\n            case \"BtnBullet\": {\r\n                if (gameMgr.BtnBullet && gameMgr.playerTs && gameMgr.playerTs.curWeapon && gameMgr.playerTs.curWeapon.isRangeWeapon)\r\n                    gameMgr.playerTs.curWeapon.reloadBullet();\r\n                break;\r\n            }\r\n            case \"BtnShuxing\": {\r\n                gameMgr.model6_shuxing.active = !gameMgr.model6_shuxing.active;\r\n                gameMgr.update_model6_shuxing();\r\n                break;\r\n            }\r\n            case \"BtnHideBanner\": {\r\n                utils.SendEvent(\"视频-游戏中去广告-播放\")\r\n                cocosz.watchAD(() => {\r\n                    utils.SendEvent(\"视频-游戏中去广告-成功\")\r\n                    event.target.active = false;\r\n                    gameMgr.canSHowGameBanner = false;\r\n                    utils.adManager.HideBanner(BannerLocation.Game);\r\n                }, () => {\r\n                    utils.SendEvent(\"视频-游戏中去广告-失败\")\r\n                });\r\n                break;\r\n            }\r\n            case \"BtnCt\": {\r\n                if (this._btnCt && this._btnCt.getChildByName(\"share\") && this._btnCt.getChildByName(\"share\").active) {\r\n                    utils.SendEvent(\"分享-磁铁\")\r\n                    cocosz.share(() => {\r\n                        utils.SendEvent(\"分享-磁铁-成功\")\r\n                        // 磁铁事件\r\n                        cc.game.emit(Constant.E_Skill_Citie);\r\n                    }, () => {\r\n                        utils.SendEvent(\"分享-磁铁-失败\")\r\n                    });\r\n                } else if (this._btnCt && this._btnCt.getChildByName(\"video\") && this._btnCt.getChildByName(\"video\").active) {\r\n                    utils.SendEvent(\"视频-磁铁-播放\")\r\n                    cocosz.watchAD(() => {\r\n                        utils.SendEvent(\"视频-磁铁-成功\")\r\n                        // 磁铁事件\r\n                        cc.game.emit(Constant.E_Skill_Citie);\r\n                    }, () => {\r\n                        utils.SendEvent(\"视频-磁铁-失败\")\r\n                    });\r\n                } else {\r\n                    // 磁铁事件\r\n                    if(this.ctAction){\r\n                        let ctmask = this._btnCt.getChildByName('maskNode').getComponent(cc.Sprite);\r\n                        ctmask.fillRange = 1;\r\n                        this.ctAction = false;\r\n                        this._btnCt.getComponent(cc.Button).interactable = false;\r\n                        cc.game.emit(Constant.E_Skill_Citie);\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case \"BtnQpbz\": {\r\n                if (this._btnQpbz && this._btnQpbz.getChildByName(\"share\") && this._btnQpbz.getChildByName(\"share\").active) {\r\n                    utils.SendEvent(\"分享-全屏轰炸\")\r\n                    cocosz.share(() => {\r\n                        utils.SendEvent(\"分享-全屏轰炸-成功\")\r\n                        // 全屏轰炸动画\r\n                        this.effect_qpbz();\r\n                    }, () => {\r\n                        utils.SendEvent(\"分享-全屏轰炸-失败\")\r\n                    });\r\n                } else if (this._btnQpbz && this._btnQpbz.getChildByName(\"video\") && this._btnQpbz.getChildByName(\"video\").active) {\r\n                    utils.SendEvent(\"视频-全屏轰炸-播放\")\r\n                    cocosz.watchAD(() => {\r\n                        utils.SendEvent(\"视频-全屏轰炸-成功\")\r\n                        // 全屏轰炸动画\r\n                        this.effect_qpbz();\r\n                    }, () => {\r\n                        utils.SendEvent(\"视频-全屏轰炸-失败\")\r\n                    });\r\n                } else {\r\n                    // 全屏轰炸动画\r\n                    if(this.qpbzAction){\r\n                        let qpbzmask = this._btnQpbz.getChildByName('maskNode').getComponent(cc.Sprite);\r\n                        qpbzmask.fillRange = 1;\r\n                        this.qpbzAction = false;\r\n                        this._btnQpbz.getComponent(cc.Button).interactable = false;\r\n                        this.effect_qpbz();\r\n                    }\r\n                    \r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n"]}